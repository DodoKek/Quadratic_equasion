<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: src/include/TXLib.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">TXLib.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_t_x_lib_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//           TXLib.h - Библиотека Тупого Художника (The Dumb Artist Library, TX Library, TXLib) - (C) Ilya Dedinsky</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//           [These sections are for folding control  in Code::Blocks]         [$Date: 2022-05-15 04:30:40 +0400 $]</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//           [Best viewed with &quot;Fold all on file open&quot; option enabled]         [Best screen/page width = 120 chars]</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//                                                                                                                 </span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//           [If RUSSIAN CHARS below are UNREADABLE, check this file codepage. It should be CP1251, NOT UTF-8 etc.]</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//{          [Use RELOAD options in your IDE or editor (CLion / Visual Studio Code / ...), and do NOT use Convert.]</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span><span class="comment">//           $Copyright: (C) Ded (Ilya Dedinsky, http://txlib.ru) &lt;mail@txlib.ru&gt; $</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span><span class="comment">//}</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor">#if !defined (__TXLIB_H_INCLUDED)                                            </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor">#define       __TXLIB_H_INCLUDED</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">//{          Version information and configuration</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="group___technical.html#ga6b76c63cd895c2be63ac8e690028623b">  138</a></span>&#160;<span class="preprocessor">#define _TX_VER      _TX_v_FROM_CVS ($VersionInfo: , TXLib.h, 00173a, 171, 2022-05-15 04:30:40 +0400, &quot;Ded (Ilya Dedinsky, http://txlib.ru) &lt;mail@txlib.ru&gt;&quot;</span>, $)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="preprocessor">#define _TX_VERSION  _TX_V_FROM_CVS ($VersionInfo: , TXLib.h, 00173a, 171, 2022-05-15 04:30:40 +0400, &quot;Ded (Ilya Dedinsky, http://txlib.ru) &lt;mail@txlib.ru&gt;&quot;</span>, $)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#define _TX_AUTHOR   _TX_A_FROM_CVS ($VersionInfo: , TXLib.h, 00173a, 171, 2022-05-15 04:30:40 +0400, &quot;Ded (Ilya Dedinsky, http://txlib.ru) &lt;mail@txlib.ru&gt;&quot;</span>, $)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#define _TX_v_FROM_CVS(_1,file,ver,rev,date,auth,_2)  ((0x##ver##u &lt;&lt; 16) | 0x##rev##u)</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#define _TX_V_FROM_CVS(_1,file,ver,rev,date,auth,_2)  &quot;TXLib [Ver: &quot;</span> #ver &quot;, Rev: &quot; #rev &quot;, Date: &quot; #date &quot;]&quot;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#define _TX_A_FROM_CVS(_1,file,ver,rev,date,auth,_2)  &quot;Copyright (C) &quot;</span> auth</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">#if !defined (_TX_MODULE)</span></div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="group___technical.html#ga43d277b4418068ebef1fd2bdbaf550f6">  159</a></span>&#160;<span class="preprocessor">    #define   _TX_MODULE      &quot;TXLib&quot;</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#if    defined (__GNUC__)</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">    #define _GCC_VER          ( __GNUC__*100 + __GNUC_MINOR__*10 + __GNUC_PATCHLEVEL__ )</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">    #define __TX_COMPILER__   &quot;GNU g++ &quot;</span>            TX_QUOTE (__GNUC__)       &quot;.&quot;  \</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                                    TX_QUOTE (__GNUC_MINOR__) &quot;.&quot;  \</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                                    TX_QUOTE (__GNUC_PATCHLEVEL__) \</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                              &quot;, std=&quot;              TX_QUOTE (__cplusplus)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#elif  defined (__clang__) || defined (__clang_major__)</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">    #define _CLANG_VER        ( __clang_major__*100 + __clang_minor__*10 + __clang_patchlevel__ )</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor">    #define __TX_COMPILER__   &quot;Clang &quot;</span>              TX_QUOTE (__clang_major__) &quot;.&quot;  \</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                    TX_QUOTE (__clang_minor__) &quot;.&quot;  \</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                                    TX_QUOTE (__clang_patchlevel__) \</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                              &quot;, std=&quot;              TX_QUOTE (__cplusplus)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#elif  defined (_MSC_VER)</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">    #define __TX_COMPILER__   &quot;MSVS &quot;</span>               TX_QUOTE (_MSC_VER)            \</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                              &quot;, std=&quot;              TX_QUOTE (__cplusplus)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#elif  defined (__INTEL_COMPILER)</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">    #define __TX_COMPILER__   &quot;Intel C++ &quot;</span>          TX_QUOTE (__INTEL_COMPILER)    \</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                              &quot;, std=&quot;              TX_QUOTE (__cplusplus)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="group___technical.html#gadd1c9ccd036228402b807abaea14f7ee">  196</a></span>&#160;<span class="preprocessor">    #define __TX_COMPILER__   &quot;Unknown C++, std=&quot;</span>   TX_QUOTE (__cplusplus)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#define  TX_QUOTE(sym)        _TX_QUOTE (sym)</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="preprocessor">#define _TX_QUOTE(sym)        #sym</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="preprocessor">#define  TX_JOIN(sym1, sym2)  _TX_JOIN (sym1, sym2)</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#define _TX_JOIN(sym1, sym2)  sym1 ## sym2</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="preprocessor">#if (__cplusplus &gt;= 201103L) || defined (_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1800)  </span><span class="comment">// MSVC 2013</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">    #define _TX_CPP11         1</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#if (__cplusplus &gt;= 201103L) || defined (_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1900)  </span><span class="comment">// MSVC 2015</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160; </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="preprocessor">    #define _TX_CPP11_MSVC15  1</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor">#if   !defined (NDEBUG) &amp;&amp;  defined (_DEBUG)</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">    #define _TX_BUILDMODE     &quot;DEBUG&quot;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160; </div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">#elif !defined (NDEBUG) &amp;&amp; !defined (_DEBUG)</span></div>
<div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="group___technical.html#ga3e287c38947fea870d01588fbd2a5fc9">  229</a></span>&#160;<span class="preprocessor">    #define _TX_BUILDMODE     &quot;Debug&quot;</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="preprocessor">#elif  defined (NDEBUG)</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">    #define _TX_BUILDMODE     &quot;Release&quot;</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="group___misc.html#ga973d717438fe468dd5a5d8d45ede5312">  241</a></span>&#160;<span class="preprocessor">#define __TX_FILELINE__       __FILE__ &quot; (&quot;</span> TX_QUOTE (__LINE__) &quot;)&quot;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160; </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#if defined (__GNUC__) || defined (__clang__) || defined (__clang_major__)</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   __PRETTY_FUNCTION__</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#elif defined (__FUNCSIG__)</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   __FUNCSIG__</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor">#elif defined (__FUNCTION__)</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   __FUNCTION__</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#elif defined (__INTEL_COMPILER) &amp;&amp; (__INTEL_COMPILER &gt;= 600)</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   __FUNCTION__</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor">#elif defined (__BORLANDC__) &amp;&amp; (__BORLANDC__ &gt;= 0x550)</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   __FUNC__</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="preprocessor">#elif defined (__cplusplus) &amp;&amp; (__cplusplus &gt;= 199711L)</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   __func__</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#elif defined (__STDC_VERSION__) &amp;&amp; (__STDC_VERSION__ &gt;= 199901L)</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   __func__</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="preprocessor">#elif defined (__PYTHON__)</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">    #error No Python. No. Using parseltongue languages can lead you to Slytherin.</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160; </div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="group___misc.html#gab170f39ac0e379c324c73495f14a1309">  278</a></span>&#160;<span class="preprocessor">    #define __TX_FUNCTION__   &quot;(&quot;</span> __TX_FILELINE__ &quot;)&quot;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="preprocessor">#if !defined (__func__) &amp;&amp; defined (__FUNCTION__)</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="preprocessor">    #define   __func__        __FUNCTION__</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160; </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">//{          Compiler- and platform-specific</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"></span><span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#if !defined (__cplusplus)</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="preprocessor">    #ifdef __GNUC__</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">    #error TXLib.h: Must use C++ to compile TXLib.h. Now you are using C only.</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">    #error CHECK source file EXTENSION. Maybe it is &quot;.C&quot;</span>. It must be &quot;.CPP&quot;.</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="preprocessor">    #error If your file is named, for example, &quot;Untitled.C&quot;</span>, go to menu [File],</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="preprocessor">    #error then [Save As] and rename it to &quot;Untitled.CPP&quot;</span>. Please do NOT use spaces.</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#if !defined (WIN32) &amp;&amp; !defined (__WIN32__) &amp;&amp; !defined(_WIN32) &amp;&amp; !defined(_WIN32_WINNT) &amp;&amp; !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">    #ifdef __GNUC__</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">    #error TXLib.h: Windows (MSVC/Win32 or GCC/MinGW or Cygwin) is the only supported OS, sorry.</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">    #error In Linux or MacOS, you should write your own TXLib and share it with your friends, or use wine.</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160; </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="preprocessor">#if  defined (UNICODE) || defined (_UNICODE)</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="preprocessor">    #ifdef __GNUC__</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="preprocessor">    #warning TXLib.h: Disabling the UNICODE</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="preprocessor">    #undef   UNICODE                             </span><span class="comment">// Burn Unicode, burn</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="preprocessor">    #undef  _UNICODE</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor">    #if defined (_WINDOWS_H) || defined (_INC_WINDOWS) || defined (_WINDOWS_) || defined (__WINDOWS__)</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="preprocessor">    #ifdef __GNUC__</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="preprocessor">    #error TXLib.h: Should include &quot;TXLib.h&quot;</span> BEFORE or INSTEAD of &lt;Windows.h&gt; in UNICODE mode.</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">    #error REARRANGE your #include directives, or DISABLE the UNICODE mode by #undef UNICODE/_UNICODE.</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">#if  defined (__STRICT_ANSI__)                   </span><span class="comment">// Try to extend strict ANSI rules</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160; </div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">    #undef  __STRICT_ANSI__</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="preprocessor">    #define __STRICT_ANSI__UNDEFINED</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="preprocessor">    #if defined (_STRING_H_) || defined (_INC_STRING) || defined (_STDIO_H_) || defined (_INC_STDIO)</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">    #ifdef __GNUC__</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">    #error TXLib.h: Should include &quot;TXLib.h&quot;</span> BEFORE &lt;string.h&gt; or &lt;stdio.h&gt; in Strict ANSI mode.</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="preprocessor">    #error REARRANGE your #include directives, or DISABLE ANSI-compliancy by #undef __STRICT_ANSI__.</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160; </div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="preprocessor">#if  defined (__GNUC__)</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wpragmas&quot;</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wall&quot;</span></div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Weffc++&quot;</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wextra&quot;</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Waggressive-loop-optimizations&quot;</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Walloc-zero&quot;</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Walloca&quot;</span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Walloca-larger-than=8192&quot;</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Warray-bounds&quot;</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wcast-align&quot;</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wcast-qual&quot;</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wchar-subscripts&quot;</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wconditionally-supported&quot;</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wconversion&quot;</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wctor-dtor-privacy&quot;</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wdangling-else&quot;</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wduplicated-branches&quot;</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wempty-body&quot;</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wfloat-equal&quot;</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wformat-nonliteral&quot;</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wformat-overflow=2&quot;</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wformat-security&quot;</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wformat-signedness&quot;</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wformat-truncation=2&quot;</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wformat=2&quot;</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wlarger-than=8192&quot;</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wlogical-op&quot;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wmismatched-tags&quot;</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wmissing-declarations&quot;</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wnarrowing&quot;</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wnon-virtual-dtor&quot;</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wnonnull&quot;</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wopenmp-simd&quot;</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Woverloaded-virtual&quot;</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wpacked&quot;</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wpointer-arith&quot;</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wredundant-decls&quot;</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wredundant-tags&quot;</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wrestrict&quot;</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wshadow&quot;</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wsign-promo&quot;</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wstack-usage=8192&quot;</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wstrict-aliasing&quot;</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wstrict-null-sentinel&quot;</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wstrict-overflow=2&quot;</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wstringop-overflow=4&quot;</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wsuggest-attribute=noreturn&quot;</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wsuggest-final-methods&quot;</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wsuggest-final-types&quot;</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wsuggest-override&quot;</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wswitch-default&quot;</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wswitch-enum&quot;</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wsync-nand&quot;</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wundef&quot;</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wunused&quot;</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wvarargs&quot;</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wvla-larger-than=8192&quot;</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic error       &quot;-Wsizeof-array-argument&quot;</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Waddress&quot;</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Winline&quot;</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wliteral-suffix&quot;</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wmissing-field-initializers&quot;</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wnonnull-compare&quot;</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wold-style-cast&quot;</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wunreachable-code&quot;</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wunused-const-variable&quot;</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wunused-function&quot;</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wvariadic-macros&quot;</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wpragmas&quot;</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160; </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">//{ These warning settings for TXLib.h only and will be re-enabled at end of file:</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="preprocessor">    #pragma GCC push_options</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic push</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160; </div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wpragmas&quot;</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wpedantic&quot;</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Waddress&quot;</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Warray-bounds&quot;</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wclobbered&quot;</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wdeprecated-declarations&quot;</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wfloat-equal&quot;</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wformat-nonliteral&quot;</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wlarger-than=&quot;</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wmisleading-indentation&quot;</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wnon-virtual-dtor&quot;</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wredundant-decls&quot;</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wshadow&quot;</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wsign-conversion&quot;</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wstrict-aliasing&quot;</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wunused-label&quot;</span>    <span class="comment">// Just for fun in _txCanvas_OnCmdAbout()</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wunused-value&quot;</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wformat-zero-length&quot;</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wpacked-not-aligned&quot;</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="preprocessor">    #pragma GCC optimize               &quot;no-strict-aliasing&quot;</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="preprocessor">    #if (__cplusplus &lt; 201402L)</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic ignored     &quot;-Wsuggest-override&quot;</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic warning     &quot;-Wpragmas&quot;</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="preprocessor">    #if defined (__CYGWIN__) &amp;&amp; !defined (_TX_TESTING)</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="preprocessor">    #pragma GCC system_header                    </span><span class="comment">// This is not a fair play, but this is the only way to deal with Cygwin :(</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="comment">//}</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160; </div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="preprocessor">    #define _tx_thread                 __thread</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="preprocessor">    #define _tx_decltype(value)        __decltype (value)</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160; </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="preprocessor">    #define     _FORTIFY_SOURCE        2</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="preprocessor">    #ifndef     MINGW_HAS_SECURE_API</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">        #define MINGW_HAS_SECURE_API   1</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="preprocessor">    #if defined (TX_USE_SFML)</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="preprocessor">        #define _GLIBCXX_NDEBUG</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160; </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">    #ifndef     _GLIBCXX_NDEBUG                  </span><span class="comment">// TXLib enables _GLIBCXX_DEBUG by default. When using third-party libraries</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="preprocessor">        #define _GLIBCXX_DEBUG                   </span><span class="comment">// compiled without _GLIBCXX_DEBUG (SFML, for example), #define _GLIBCXX_NDEBUG</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">        #define _GLIBCXX_DEBUG_PEDANTIC          </span><span class="comment">// *before* including TXLib.h.</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160; </div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="preprocessor">    #if defined (_WIN64)                         </span><span class="comment">// removed in x86 because printf (&quot;%g&quot;, double) failure, this prints 0 always</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="preprocessor">    #ifndef     __USE_MINGW_ANSI_STDIO</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="preprocessor">        #define __USE_MINGW_ANSI_STDIO 1</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keyword">inline</span> T _txNOP (T value)          { <span class="keywordflow">return</span> value; }   <span class="comment">// To suppress performance warnings in assert etc.</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="comment">// From MinGW\include\float.h which is replaced by MinGW\lib\gcc\i686-pc-mingw32\x.x.x\include\float.h</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> __declspec (dllimport)  <span class="keywordtype">unsigned</span> __cdecl _controlfp (<span class="keywordtype">unsigned</span> control, <span class="keywordtype">unsigned</span> mask);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span>                         <span class="keywordtype">void</span>     __cdecl _fpreset   ();</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="preprocessor">    #define     __attribute__( attr )</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="preprocessor">    #define     _txNOP( value )        ( value )</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="preprocessor">#if  defined (__clang__) || defined (__clang_major__)</span></div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wunknown-pragmas&quot;</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wall&quot;</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Weffc++&quot;</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wextra&quot;</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wcast-qual&quot;</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wchar-subscripts&quot;</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wconversion&quot;</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wctor-dtor-privacy&quot;</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wempty-body&quot;</span></div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wfloat-equal&quot;</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wformat&quot;</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wformat-nonliteral&quot;</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wformat-security&quot;</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wmissing-declarations&quot;</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wnon-virtual-dtor&quot;</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Woverloaded-virtual&quot;</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wpacked&quot;</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wpointer-arith&quot;</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wredundant-decls&quot;</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wshadow&quot;</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wsign-promo&quot;</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wstrict-aliasing&quot;</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wstrict-overflow&quot;</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wswitch-default&quot;</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wswitch-enum&quot;</span></div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wunused&quot;</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Winvalid-source-encoding&quot;</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wunused-const-variable&quot;</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wunused-variable&quot;</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160; </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wunknown-pragmas&quot;</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160; </div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">//{ These warning settings for TXLib.h only and will be re-enabled at end of file:</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="preprocessor">    #pragma clang diagnostic push</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wunknown-pragmas&quot;</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160; </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wpedantic&quot;</span></div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wcast-align&quot;</span></div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wfloat-conversion&quot;</span></div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wmicrosoft-cast&quot;</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wmisleading-indentation&quot;</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wmissing-braces&quot;</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wmissing-field-initializers&quot;</span></div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wnon-virtual-dtor&quot;</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wsign-compare&quot;</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wsign-conversion&quot;</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wstring-plus-int&quot;</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wundef&quot;</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wundefined-bool-conversion&quot;</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wunused-function&quot;</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wunused-value&quot;</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="preprocessor">    #pragma clang diagnostic ignored   &quot;-Wvariadic-macros&quot;</span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="preprocessor">    #pragma clang diagnostic warning   &quot;-Wunknown-pragmas&quot;</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="comment">//{ CLang-Tidy options</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment">// *,-cert-dcl50-cpp,-cert-dcl58-cpp,-cert-err52-cpp,-cert-err58-cpp,-cert-flp30-c,-cert-msc30-c,-cert-msc32-c,</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment">// -cert-msc50-cpp,-cert-msc51-cpp,-clang-analyzer-core.DivideZero,-cppcoreguidelines-avoid-c-arrays,</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment">// -cppcoreguidelines-avoid-magic-numbers,-cppcoreguidelines-macro-usage,</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="comment">// -cppcoreguidelines-owning-memory,-cppcoreguidelines-pro-bounds-array-to-pointer-decay,-cppcoreguidelines-no-malloc,</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="comment">// -cppcoreguidelines-pro-bounds-constant-array-index,-cppcoreguidelines-pro-bounds-pointer-arithmetic,</span></div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment">// -cppcoreguidelines-pro-type-const-cast,-cppcoreguidelines-pro-type-cstyle-cast,-cppcoreguidelines-pro-type-union-access,</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// -cppcoreguidelines-pro-type-vararg,-fuchsia-default-arguments-calls,-fuchsia-default-arguments-declarations,</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// -fuchsia-overloaded-operator,-google-build-using-namespace,-google-global-names-in-headers,-google-runtime-int,</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// -google-readability-braces-around-statements,-google-readability-casting,-google-readability-namespace-comments,</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="comment">// -hicpp-avoid-c-arrays,-hicpp-avoid-goto,-hicpp-braces-around-statements,-hicpp-deprecated-headers,-hicpp-no-array-decay,</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="comment">// -hicpp-signed-bitwise,-hicpp-use-equals-delete,-hicpp-use-nullptr,-hicpp-vararg,-llvm-include-order,-hicpp-no-malloc,</span></div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="comment">// -llvm-namespace-comment,-misc-non-private-member-variables-in-classes,-modernize-avoid-c-arrays,-modernize-use-auto,</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">// -modernize-deprecated-headers,-modernize-raw-string-literal,-modernize-use-default-member-init,-hicpp-use-auto,</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="comment">// -modernize-use-equals-delete,-modernize-use-nullptr,-modernize-use-trailing-return-type,-modernize-use-using,</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// -readability-braces-around-statements,-readability-else-after-return,-readability-implicit-bool-conversion,</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="comment">// -readability-isolate-declaration,-readability-magic-numbers,-readability-named-parameter,-modernize-loop-convert</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment">//}</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160; </div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="comment">//}</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160; </div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="preprocessor">#if  defined (_MSC_VER)</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="preprocessor">    #pragma warning (push, 4)                    </span><span class="comment">// Set maximum warning level. This &#39;push&#39; is to set the level only. It will NOT be popped.</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4616)           </span><span class="comment">// #pragma warning: warning number &#39;n&#39; not a valid compiler warning</span></div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4514)           </span><span class="comment">// Unreferenced inline function has been removed</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4710)           </span><span class="comment">// Function not inlined</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4786)           </span><span class="comment">// Identifier was truncated to &#39;255&#39; characters in the debug information</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="preprocessor">    #pragma warning (error:      4715)           </span><span class="comment">// Not all control paths return a value</span></div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="preprocessor">    #pragma warning (default:    4616)           </span><span class="comment">// #pragma warning: warning number &#39;n&#39; not a valid compiler warning  //-V665</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="comment">// These warning settings for TXLib.h only and will be re-enabled at end of file:</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="preprocessor">    #pragma warning (push)</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4616)           </span><span class="comment">// #pragma warning: warning number &#39;n&#39; not a valid compiler warning</span></div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160; </div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4091)           </span><span class="comment">// &#39;typedef&#39;: ignored on left of &#39;...&#39; when no variable is declared</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4124)           </span><span class="comment">// Using __fastcall with stack checking is ineffective</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4127)           </span><span class="comment">// Conditional expression is constant</span></div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4200)           </span><span class="comment">// Nonstandard extension used: zero-sized array in struct/union</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4201)           </span><span class="comment">// Nonstandard extension used: nameless struct/union</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4351)           </span><span class="comment">// New behavior: elements of array will be default initialized</span></div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4480)           </span><span class="comment">// Nonstandard extension used: specifying underlying type for enum &#39;type&#39;</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4481)           </span><span class="comment">// Nonstandard extension used: override specifier &#39;override&#39;</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4555)           </span><span class="comment">// Result of expression not used</span></div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="preprocessor">    #pragma warning (disable:    4611)           </span><span class="comment">// Interaction between &#39;_setjmp&#39; and C++ object destruction is non-portable</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="preprocessor">    #pragma warning (disable:    5045)           </span><span class="comment">// Compiler will insert Spectre mitigation for memory load if /Qspectre switch specified</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="preprocessor">    #pragma warning (disable:    6269)           </span><span class="comment">// Possibly incorrect order of operations: dereference ignored</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="preprocessor">    #pragma warning (disable:    6285)           </span><span class="comment">// (&lt;non-zero constant&gt;) || (&lt;non-zero constant&gt;) is always a non-zero constant. Did you intend to use bitwize-and operator?</span></div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">    #pragma warning (disable:    6319)           </span><span class="comment">// Use of the comma-operator in a tested expression causes the left argument to be ignored when it has no side-effects</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="preprocessor">    #pragma warning (disable:    6326)           </span><span class="comment">// Potential comparison of a constant with another constant</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="preprocessor">    #pragma warning (disable:    6553)           </span><span class="comment">// The annotation for function &#39;func&#39; on _Param_(N) does not apply to a value type.</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26135)           </span><span class="comment">// Missing locking annotation</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26400)           </span><span class="comment">// Do not assign the result of an allocation or a function call with an owner&lt;T&gt; return value to a raw pointer, use owner&lt;T&gt; instead (i.11).</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26401)           </span><span class="comment">// Do not delete a raw pointer that is not an owner&lt;T&gt; (i.11).</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26403)           </span><span class="comment">// Reset or explicitly delete an owner&lt;T&gt; pointer &#39;name&#39; (r.3).</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26408)           </span><span class="comment">// Avoid malloc() and free(), prefer the nothrow version of new with delete (r.10).</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26409)           </span><span class="comment">// Avoid calling new and delete explicitly, use std::make_unique&lt;T&gt; instead (r.11).</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26426)           </span><span class="comment">// Global initializer calls a non-constexpr function &#39;name&#39; (i.22).</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26429)           </span><span class="comment">// Symbol &#39;name&#39; is never tested for nullness, it can be marked as not_null (f.23).</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26430)           </span><span class="comment">// Symbol &#39;name&#39; is not tested for nullness on all paths (f.23).</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26432)           </span><span class="comment">// If you define or delete any default operation in the type &#39;struct &#39;name&#39;&#39;, define or delete them all (c.21).</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26435)           </span><span class="comment">// Function &#39;name&#39; should specify exactly one of &#39;virtual&#39;, &#39;override&#39;, or &#39;final&#39; (c.128).</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26438)           </span><span class="comment">// Avoid &#39;goto&#39; (es.76).</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26440)           </span><span class="comment">// Function &#39;name&#39; can be declared &#39;noexcept&#39; (f.6).</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26446)           </span><span class="comment">// Prefer to use gsl::at() instead of unchecked subscript operator (bounds.4).</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26447)           </span><span class="comment">// The function is declared &#39;noexcept&#39; but calls function &#39;func&#39; which may throw exceptions (f.6).</span></div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26448)           </span><span class="comment">// Consider using gsl::finally if final action is intended (gsl.util).</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26451)           </span><span class="comment">// Arithmetic overflow: Using operator &#39;op&#39; on a n-byte value and then casting the result to a m-byte value. Cast the value to the wider type before calling operator &#39;op&#39; to avoid overflow (io.2).</span></div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26455)           </span><span class="comment">// Default constructor may not throw. Declare it &#39;noexcept&#39; (f.6).</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26457)           </span><span class="comment">// (void) should not be used to ignore return values, use &#39;std::ignore =&#39; instead (es.48)</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26460)           </span><span class="comment">// The reference argument &#39;stream&#39; for function &#39;name&#39; can be marked as const (con.3).</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26461)           </span><span class="comment">// The pointer argument &#39;name&#39; for function &#39;name&#39; can be marked as a pointer to const (con.3).</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26462)           </span><span class="comment">// The value pointed to by &#39;name&#39; is assigned only once, mark it as a pointer to const (con.4).</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26475)           </span><span class="comment">// Do not use function style C-casts (es.49).</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26477)           </span><span class="comment">// Use &#39;nullptr&#39; rather than 0 or NULL (es.47).</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26481)           </span><span class="comment">// Don&#39;t use pointer arithmetic. Use span instead (bounds.1).</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26482)           </span><span class="comment">// Only index into arrays using constant expressions (bounds.2).</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26483)           </span><span class="comment">// Value &#39;value&#39; is outside the bounds (min, max) of variable &#39;name&#39;. Only index into arrays using constant expressions that are within bounds of the array (bounds.2).</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26485)           </span><span class="comment">// Expression &#39;expr&#39;: No array to pointer decay (bounds.3).</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26486)           </span><span class="comment">// Don&#39;t pass a pointer that may be invalid to a function. Parameter &#39;n&#39; &#39;name&#39; in call to &#39;name&#39; may be invalid (lifetime.3).</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26487)           </span><span class="comment">// Don&#39;t return a pointer &#39;name&#39; that may be invalid (lifetime.4).</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26488)           </span><span class="comment">// Do not dereference a potentially null pointer: &#39;name&#39;. &#39;name&#39; was null at line &#39;n&#39; (lifetime.1).</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26489)           </span><span class="comment">// Don&#39;t dereference a pointer that may be invalid: &#39;name&#39;. &#39;name&#39; may have been invalidated at line &#39;n&#39; (lifetime.1).</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26490)           </span><span class="comment">// Don&#39;t use reinterpret_cast (type.1).</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26492)           </span><span class="comment">// Don&#39;t use const_cast to cast away const or volatile (type.3).</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26493)           </span><span class="comment">// Don&#39;t use C-style casts (type.4).</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26496)           </span><span class="comment">// The variable &#39;name&#39; is assigned only once, mark it as const (con.4).</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26497)           </span><span class="comment">// The function &#39;name&#39; could be marked constexpr if compile-time evaluation is desired (f.4).</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26812)           </span><span class="comment">// The enum type &#39;type&#39; is unscoped. Prefer &#39;enum class&#39; over &#39;enum&#39; (Enum.3).</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="preprocessor">    #pragma warning (disable:   26814)           </span><span class="comment">// The const variable &#39;name&#39; can be computed at compile-time. Consider using constexpr (con.5).</span></div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="preprocessor">    #pragma warning (disable:   28125)           </span><span class="comment">// The function must be called from within a try/except block</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="preprocessor">    #pragma warning (disable:   28159)           </span><span class="comment">// Consider using another function instead</span></div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="preprocessor">    #pragma warning (default:    4616)           </span><span class="comment">// #pragma warning: warning number &#39;n&#39; not a valid compiler warning  //-V665</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="preprocessor">    #define _tx_thread          __declspec (thread)</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="preprocessor">    #define _tx_decltype(value)   decltype (value)</span></div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160; </div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="preprocessor">    #if !defined (_CLANG_VER)</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="preprocessor">    #pragma setlocale           (&quot;russian&quot;</span>)      <span class="comment">// Set source file encoding, see also _TX_CODEPAGE</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="preprocessor">    #if !defined (NDEBUG)</span></div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="preprocessor">        #pragma check_stack     (      on)       </span><span class="comment">// Turn on stack probes at runtime</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="preprocessor">        #pragma strict_gs_check (push, on)       </span><span class="comment">// Detects stack buffer overruns</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160; </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="preprocessor">    #define _CRT_SECURE_CPP_OVERLOAD_SECURE_NAMES  1</span></div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160; </div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160; </div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160; </div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="preprocessor">#if  defined (__INTEL_COMPILER)</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="preprocessor">    #pragma warning (disable:    174)            </span><span class="comment">// Remark: expression has no effect</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="preprocessor">    #pragma warning (disable:    304)            </span><span class="comment">// Remark: access control not specified (&quot;public&quot; by default)</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="preprocessor">    #pragma warning (disable:    444)            </span><span class="comment">// Remark: destructor for base class &quot;...&quot; is not virtual</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="preprocessor">    #pragma warning (disable:    522)            </span><span class="comment">// Remark: function &quot;...&quot; redeclared &quot;inline&quot; after being called</span></div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="preprocessor">    #pragma warning (disable:    981)            </span><span class="comment">// Remark: operands are evaluated in unspecified order</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="preprocessor">    #pragma warning (disable:   1684)            </span><span class="comment">// Conversion from pointer to same-sized integral type (potential portability problem)</span></div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="preprocessor">#if (defined (_GCC_VER) &amp;&amp; (_GCC_VER &lt;  472)  || \</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="preprocessor">     defined (_MSC_VER) &amp;&amp; (_MSC_VER &lt; 1600)) </span><span class="comment">// Minimum requirements are now GCC 4.7.2 or MSVC 10.0 (2010)</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="preprocessor">    #ifdef __GNUC__</span></div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="preprocessor">    #error TXLib.h: This version will NOT work with GCC &lt; 4.7.2 or MS Visual Studio &lt; 2010, sorry.</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor">    #error Please use TXLib.h previous stable version/revision OR upgrade your compiler.</span></div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="preprocessor">#if defined (_GCC_VER) &amp;&amp; (_GCC_VER &gt;= 492)</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="preprocessor">#if defined (TX_USE_SPEAK) &amp;&amp; !__has_include (&lt;SAPI.h&gt;)</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160; </div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="preprocessor">    #ifdef __GNUC__</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="preprocessor">    #error You have defined TX_USE_SPEAK, but your compiler do NOT have the library &lt;SAPI.h&gt;.</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="preprocessor">    #error Please use compiler library set with SAPI.h included. SAPI is Microsoft Speech API</span></div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="preprocessor">    #error nesessary for txSpeak() to work.</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="preprocessor">    #error ---------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="preprocessor">    #error</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160; </div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">#if !defined (WINVER)</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="preprocessor">    #define   WINVER                   0x0500    </span><span class="comment">// Defaults to Windows 2000</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="preprocessor">    #define   WINDOWS_ENABLE_CPLUSPLUS           </span><span class="comment">// Allow use of type-limit macros in &lt;basetsd.h&gt;,</span></div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="preprocessor">#endif                                           </span><span class="comment">//   they are allowed by default if WINVER &gt;= 0x0600.</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="preprocessor">#if !defined (_WIN32_WINNT)</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="preprocessor">    #define   _WIN32_WINNT             WINVER    </span><span class="comment">// Defaults to the same as WINVER</span></div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160; </div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">#if !defined (_WIN32_IE)</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="preprocessor">    #define   _WIN32_IE                WINVER    </span><span class="comment">// Defaults to the same as WINVER</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="preprocessor">#define stristr(  str1, str2 )         Win32::StrStrIA ((str1), (str2))</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="preprocessor">#define stristrw( str1, str2 )         Win32::StrStrIW ((str1), (str2))</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160; </div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="preprocessor">#define _USE_MATH_DEFINES              1         </span><span class="comment">// Math.h&#39;s M_PI etc.</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="preprocessor">#define __STDC_FORMAT_MACROS           1         </span><span class="comment">// PRIu64 and other PR... macros</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="preprocessor">#define __STDC_WANT_LIB_EXT1__         1         </span><span class="comment">// String and output *_s functions</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160; </div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="preprocessor">#define _LIBCPP_ENABLE_CXX17_REMOVED_UNEXPECTED_FUNCTIONS  </span><span class="comment">// Wow, how long. Kudos, Clang</span></div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="preprocessor">#define _ALLOW_RTCc_IN_STL             1         </span><span class="comment">// MSVC C2338: /RTCc rejects conformant code, so it isn&#39;t supported by libc.</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160; </div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="preprocessor">#define NOMINMAX                       1         </span><span class="comment">// Preventing &#39;min&#39; and &#39;max&#39; defines in Windows.h</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160; </div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="preprocessor">#if defined (_DEBUG)</span></div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="preprocessor">#define _SECURE_SCL                    1         </span><span class="comment">// Enable checked STL iterators to throw an exception on incorrect use</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="preprocessor">#define _HAS_ITERATOR_DEBUGGING        1</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="preprocessor">#define _LIBCPP_DEBUG                  1</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="preprocessor">#if defined (_MSC_VER) &amp;&amp; defined (_DEBUG)</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160; </div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">    #define _CRTDBG_MAP_ALLOC                    </span><span class="comment">// Enable MSVCRT debug heap</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="preprocessor">    #define _new_dbg                   new (_NORMAL_BLOCK, __FILE__, __LINE__)</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">    #define NEW                        new (_NORMAL_BLOCK, __FILE__, __LINE__)</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160; </div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="preprocessor">    #define _new_dbg                   new</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">    #define NEW                        new</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160; </div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;<span class="preprocessor">#if !( defined (_MSC_VER) &amp;&amp; (_MSC_VER &lt; 1900) ) </span><span class="comment">// MSVC 2015</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;<span class="preprocessor">#define _SECURE_SCL_THROWS             1</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160; </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="preprocessor">#define     tx_noreturn                __attribute__ (( noreturn           ))</span></div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="preprocessor">#define     tx_nodiscard               __attribute__ (( warn_unused_result ))</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;<span class="preprocessor">#define     tx_deprecated              __attribute__ (( deprecated         ))</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;<span class="preprocessor">#define     tx_printfy( formatArgN )   __attribute__ (( format (printf, (formatArgN), (formatArgN)+1) ))</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;<span class="preprocessor">#define     tx_scanfy(  formatArgN )   __attribute__ (( format (scanf,  (formatArgN), (formatArgN)+1) ))</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160; </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11)</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="preprocessor">    #define _tx_delete                 = delete</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="preprocessor">    #define _tx_default                = default</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="preprocessor">    #define _tx_override               override</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="preprocessor">    #define _tx_final                  final</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160; </div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="preprocessor">    #define _tx_delete</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="preprocessor">    #define _tx_default</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="preprocessor">    #define _tx_override</span></div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="preprocessor">    #define _tx_final</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160; </div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160; </div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="keyword">namespace </span>std { <span class="keyword">enum</span> nomeow_t { nomeow }; }      <span class="comment">// Vital addition to the C++ standard. TODO: Should contact C++ std committee.</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160; </div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160; </div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment">//{          The Includes</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160; </div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;<span class="preprocessor">    #pragma warning (push, 3)                    </span><span class="comment">// MSVC: At level /Wall, some std headers emit warnings... O_o</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160; </div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;<span class="preprocessor">    #pragma warning (disable: 4365)              </span><span class="comment">// &#39;argument&#39;: conversion from &#39;long&#39; to &#39;unsigned int&#39;, signed/unsigned mismatch</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;<span class="preprocessor">    #pragma warning (disable: 4005)              </span><span class="comment">// &#39;name&#39;: macro redefinition</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160; </div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160; </div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="preprocessor">#include &lt;float.h&gt;</span></div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="preprocessor">#if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="preprocessor">#include &lt;conio.h&gt;</span></div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="preprocessor">#include &lt;direct.h&gt;</span></div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="preprocessor">#if defined (TX_COMPILED)</span></div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="preprocessor">#define WIN32_LEAN_AND_MEAN</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="preprocessor">#include &lt;mmsystem.h&gt;</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">//{          Compiler- and platform-specific</span></div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment"></span><span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160; </div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="preprocessor">    #pragma warning (pop)                        </span><span class="comment">// MSVC: Restore max level</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160; </div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="preprocessor">#if defined (__STRICT_ANSI__UNDEFINED)</span></div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="preprocessor">    #define  __STRICT_ANSI__                     </span><span class="comment">// Redefine back</span></div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160; </div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">#if !defined (_TRUNCATE) || defined (__CYGWIN__) || defined (_MEMORY_S_DEFINED)</span></div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160; </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="preprocessor">    #define  strncpy_s( dest, sizeof_dest, src, count )  ( strncpy ((dest), (src), MIN ((count), (sizeof_dest))) )</span></div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">    #define  wcsncpy_s( dest, sizeof_dest, src, count )  ( wcsncpy ((dest), (src), MIN ((count), (sizeof_dest))) )</span></div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="preprocessor">    #define  strncat_s( dest, sizeof_dest, src, count )  ( strncat ((dest), (src), MIN ((count), (sizeof_dest))) )</span></div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;<span class="preprocessor">    #define  strerror_s( buf, sizeof_buf, code        )  ( strncpy ((buf), strerror ((int)(code)), (sizeof_buf)-1) )</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">    #define  strtok_s(   buf, delim, ctx              )  ( (void)(ctx), strtok ((buf), (delim)) )</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor">    #define  fopen_s(    file, name, mode             )  ( *(file) = fopen ((name), (mode)) )</span></div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="preprocessor">    #define _strlwr_s(   str, sizeof_str              )  ( _strlwr (str) )</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160; </div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="preprocessor">    #define  ctime_s( buf, sizeof_buf, time    )         ( strncpy ((buf), ctime (time), (sizeof_buf)-1) )</span></div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="preprocessor">    #define _controlfp_s( oldCtl, newCtl, mask )         ( assert (oldCtl), *(oldCtl) = _controlfp (newCtl, mask), 0 )</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="preprocessor">    #define _snprintf_s                                  snprintf</span></div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="preprocessor">    #define _vsnprintf_s( str, sz, trunc, format, arg )  _vsnprintf (str, sz, format, arg)</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="preprocessor">#if !( defined (_MSC_VER) || defined (__STDC_LIB_EXT1__) )</span></div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="preprocessor">    #define  getenv_s( sz, buf, sizeof_buf, name )       ( (void)(sz), strncpy ((buf), getenv (name), (sizeof_buf)-1) )</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;<span class="preprocessor">#if defined (__CYGWIN__)</span></div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="preprocessor">    #undef   __STRICT_ANSI__</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160; </div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="keyword">typedef</span>  <span class="keywordtype">void</span>                                _exception;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160; </div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="preprocessor">    #define _O_TEXT                              O_TEXT</span></div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="preprocessor">    #define _fdopen                              fdopen</span></div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="preprocessor">    #define _flushall()                          fflush (NULL)</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="preprocessor">    #define _getcwd                              getcwd</span></div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="preprocessor">    #define _getpid                              getpid</span></div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="preprocessor">    #define _stricmp                             strcasecmp</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="preprocessor">    #define _strlwr                              strlwr</span></div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="preprocessor">    #define _strnicmp                            strncasecmp</span></div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="preprocessor">    #define _unlink                              unlink</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">    #define _vsnprintf                           vsnprintf</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="preprocessor">    #define _access                              access</span></div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="preprocessor">    #define _strdup                              strdup</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160; </div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="preprocessor">    #define getch                                _getch</span></div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="preprocessor">    #define putch                                _putch</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="preprocessor">    #define kbhit                                _kbhit</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160; </div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="preprocessor">#if !defined (PRId64) || \</span></div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="preprocessor">     defined (_GCC_VER) &amp;&amp; (_GCC_VER == 492) &amp;&amp; !defined (_WIN64) </span><span class="comment">// Dev-CPP 5.11: TDM-GCC 4.9.2 MinGW64 with -m32</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160; </div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="preprocessor">    #undef  PRId64</span></div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="preprocessor">    #undef  PRIi64</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="preprocessor">    #undef  PRIo64</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="preprocessor">    #undef  PRIu64</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="preprocessor">    #undef  PRIx64</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="preprocessor">    #undef  PRIX64</span></div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="preprocessor">    #define PRId64                               &quot;I64d&quot;</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="preprocessor">    #define PRIi64                               &quot;I64i&quot;</span></div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="preprocessor">    #define PRIo64                               &quot;I64o&quot;</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="preprocessor">    #define PRIu64                               &quot;I64u&quot;</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="preprocessor">    #define PRIx64                               &quot;I64x&quot;</span></div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="preprocessor">    #define PRIX64                               &quot;I64X&quot;</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160; </div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">//{          The namespaces</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160; </div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="keyword">namespace </span>{ <span class="keyword">namespace </span>TX { }}</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160; </div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160; </div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="preprocessor">#if defined (TX_COMPILED)  &amp;&amp;  defined (TX_COMPILING)</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">    #undef   TX_COMPILED</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#if !defined (TX_COMPILED) &amp;&amp; !defined (TX_COMPILING)</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160; </div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="preprocessor">    #define _TX_BEGIN_NAMESPACE                      namespace { namespace TX {</span></div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="preprocessor">    #define _TX_END_NAMESPACE                        } }</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160; </div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;<span class="preprocessor">    #define _TX_BEGIN_NAMESPACE                                  namespace TX {</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="preprocessor">    #define _TX_END_NAMESPACE                        }</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160; </div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160; </div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160; </div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;_TX_BEGIN_NAMESPACE</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">//{          TXLIB INTERFACE</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment">//           Интерфейс библиотеки</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160; </div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">//{          Initialization</span></div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160; </div>
<div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="group___drawing.html#gafce21ce98474d5559f316b3d47cdbfab"> 1077</a></span>&#160;HWND <a class="code" href="group___drawing.html#gafce21ce98474d5559f316b3d47cdbfab">txCreateWindow</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, <span class="keywordtype">bool</span> centered = <span class="keyword">true</span>);</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160; </div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56"> 1108</a></span>&#160;<span class="keyword">inline</span> HDC&amp; <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>() tx_nodiscard;</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160; </div>
<div class="line"><a name="l01148"></a><span class="lineno"><a class="line" href="group___drawing.html#ga3a8ec79acc0dcbcc04bff3aecc235b4e"> 1148</a></span>&#160;inline RGBQUAD* <a class="code" href="group___drawing.html#ga3a8ec79acc0dcbcc04bff3aecc235b4e">txVideoMemory</a>() tx_nodiscard;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa72c4849ac0c9bf6f95893f4265b9843"> 1171</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaa72c4849ac0c9bf6f95893f4265b9843">txSetDefaults</a> (HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160; </div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160; </div>
<div class="line"><a name="l01194"></a><span class="lineno"><a class="line" href="group___drawing.html#ga3291ffa23a348c25985d780ab8f7088b"> 1194</a></span>&#160;inline <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga3291ffa23a348c25985d780ab8f7088b">txOK</a>() tx_nodiscard;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160; </div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160; </div>
<div class="line"><a name="l01230"></a><span class="lineno"><a class="line" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1"> 1230</a></span>&#160;POINT <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160; </div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160; </div>
<div class="line"><a name="l01251"></a><span class="lineno"><a class="line" href="group___drawing.html#gab79782d80f6c61587d02f0633aa2f198"> 1251</a></span>&#160;inline <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gab79782d80f6c61587d02f0633aa2f198">txGetExtentX</a> (HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160; </div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa9bb7fd84e0b9f59c96be89d70c74321"> 1273</a></span>&#160;inline <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gaa9bb7fd84e0b9f59c96be89d70c74321">txGetExtentY</a> (HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160; </div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8"> 1289</a></span>&#160;inline HWND <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>() tx_nodiscard;</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160; </div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160; </div>
<div class="line"><a name="l01302"></a><span class="lineno"><a class="line" href="group___drawing.html#gaf382eed71ecf8229882fe544035d66dc"> 1302</a></span>&#160;inline const <span class="keywordtype">char</span>* <a class="code" href="group___drawing.html#gaf382eed71ecf8229882fe544035d66dc">txVersion</a>() tx_nodiscard;</div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160; </div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160; </div>
<div class="line"><a name="l01315"></a><span class="lineno"><a class="line" href="group___drawing.html#gab2c5f0eff263a7297997281c3d451b91"> 1315</a></span>&#160;inline <span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#gab2c5f0eff263a7297997281c3d451b91">txVersionNumber</a>() tx_nodiscard;</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160; </div>
<div class="line"><a name="l01349"></a><span class="lineno"><a class="line" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618"> 1349</a></span>&#160;const <span class="keywordtype">char</span>* <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a> (<span class="keywordtype">bool</span> fileNameOnly = true) tx_nodiscard;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160; </div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160; </div>
<div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a"> 1389</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (const <span class="keywordtype">char</span> text[] = &quot;Муаххаха! :)&quot;, const <span class="keywordtype">char</span> header[] = &quot;TXLib сообщает&quot;,</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                  <span class="keywordtype">unsigned</span> flags = MB_ICONINFORMATION | MB_OKCANCEL);</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160; </div>
<div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="group___misc.html#ga3f81b81baf3d43ec066bac4493149708"> 1411</a></span>&#160;HRESULT <a class="code" href="group___misc.html#ga3f81b81baf3d43ec066bac4493149708">txSetProgress</a> (<span class="keywordtype">double</span> percent, <span class="keywordtype">unsigned</span> type = 2 <span class="comment">/*TBPF_NORMAL*/</span>, HWND wnd = NULL);</div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160; </div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160; </div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">//{          Setting the parameters</span></div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;const COLORREF</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="keyword">enum</span> txColors {</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160; </div>
<div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="group___drawing.html#gacc1ae8a3821354abc2d3f8f42ee75706"> 1454</a></span>&#160;    <a class="code" href="group___drawing.html#gacc1ae8a3821354abc2d3f8f42ee75706">TX_BLACK</a>         = RGB (  0,   0,   0),   </div>
<div class="line"><a name="l01455"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa281a54954945bb0e96314fb4cfad7b9"> 1455</a></span>&#160;    <a class="code" href="group___drawing.html#gaa281a54954945bb0e96314fb4cfad7b9">TX_BLUE</a>          = RGB (  0,   0, 128),   </div>
<div class="line"><a name="l01456"></a><span class="lineno"><a class="line" href="group___drawing.html#ga32abcdee1b6897c768f21bf9264fe3eb"> 1456</a></span>&#160;    <a class="code" href="group___drawing.html#ga32abcdee1b6897c768f21bf9264fe3eb">TX_GREEN</a>         = RGB (  0, 128,   0),   </div>
<div class="line"><a name="l01457"></a><span class="lineno"><a class="line" href="group___drawing.html#ga59169dd9d9168dcbd3d4fa30d3e94f22"> 1457</a></span>&#160;    <a class="code" href="group___drawing.html#ga59169dd9d9168dcbd3d4fa30d3e94f22">TX_CYAN</a>          = RGB (  0, 128, 128),   </div>
<div class="line"><a name="l01458"></a><span class="lineno"><a class="line" href="group___drawing.html#ga93e1976dd8ae8d5e1b3932a4e5bfd158"> 1458</a></span>&#160;    <a class="code" href="group___drawing.html#ga93e1976dd8ae8d5e1b3932a4e5bfd158">TX_RED</a>           = RGB (128,   0,   0),   </div>
<div class="line"><a name="l01459"></a><span class="lineno"><a class="line" href="group___drawing.html#gaf022ca75f4a59aa0a2cf18529e0a9861"> 1459</a></span>&#160;    <a class="code" href="group___drawing.html#gaf022ca75f4a59aa0a2cf18529e0a9861">TX_MAGENTA</a>       = RGB (128,   0, 128),   </div>
<div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="group___drawing.html#ga941df978c121666ee6092034ec47701c"> 1460</a></span>&#160;    <a class="code" href="group___drawing.html#ga941df978c121666ee6092034ec47701c">TX_BROWN</a>         = RGB (128, 128,   0),   </div>
<div class="line"><a name="l01461"></a><span class="lineno"><a class="line" href="group___drawing.html#gae7c2564209f7b1f2bdb5cbbee77b49b4"> 1461</a></span>&#160;    <a class="code" href="group___drawing.html#gae7c2564209f7b1f2bdb5cbbee77b49b4">TX_ORANGE</a>        = RGB (255, 128,   0),   </div>
<div class="line"><a name="l01462"></a><span class="lineno"><a class="line" href="group___drawing.html#gac47f8583faaa8d391a6c120c8b576733"> 1462</a></span>&#160;    <a class="code" href="group___drawing.html#gac47f8583faaa8d391a6c120c8b576733">TX_GRAY</a>          = RGB (160, 160, 160),   </div>
<div class="line"><a name="l01463"></a><span class="lineno"><a class="line" href="group___drawing.html#ga16ef56f4dfb0cf5f8422bab9663eb7a9"> 1463</a></span>&#160;    <a class="code" href="group___drawing.html#ga16ef56f4dfb0cf5f8422bab9663eb7a9">TX_DARKGRAY</a>      = RGB (128, 128, 128),   </div>
<div class="line"><a name="l01464"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6625deb7ac8953a7e516285ac81c0b34"> 1464</a></span>&#160;    <a class="code" href="group___drawing.html#ga6625deb7ac8953a7e516285ac81c0b34">TX_LIGHTGRAY</a>     = RGB (192, 192, 192),   </div>
<div class="line"><a name="l01465"></a><span class="lineno"><a class="line" href="group___drawing.html#ga39fc3e530244cd74a18b58b2554cf686"> 1465</a></span>&#160;    <a class="code" href="group___drawing.html#ga39fc3e530244cd74a18b58b2554cf686">TX_LIGHTBLUE</a>     = RGB (  0,   0, 255),   </div>
<div class="line"><a name="l01466"></a><span class="lineno"><a class="line" href="group___drawing.html#ga2b069ef0d81d1b217e8a4f019140ee92"> 1466</a></span>&#160;    <a class="code" href="group___drawing.html#ga2b069ef0d81d1b217e8a4f019140ee92">TX_LIGHTGREEN</a>    = RGB (  0, 255, 128),   </div>
<div class="line"><a name="l01467"></a><span class="lineno"><a class="line" href="group___drawing.html#gab5cd3833edf57a1fe3a3facf3e3086ac"> 1467</a></span>&#160;    <a class="code" href="group___drawing.html#gab5cd3833edf57a1fe3a3facf3e3086ac">TX_LIGHTCYAN</a>     = RGB (  0, 255, 255),   </div>
<div class="line"><a name="l01468"></a><span class="lineno"><a class="line" href="group___drawing.html#ga9be3f6a68afe0bf3013fc4c7fbebd057"> 1468</a></span>&#160;    <a class="code" href="group___drawing.html#ga9be3f6a68afe0bf3013fc4c7fbebd057">TX_LIGHTRED</a>      = RGB (255,   0, 128),   </div>
<div class="line"><a name="l01469"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa8db9fe1edc90be50c3fb8a94fd09275"> 1469</a></span>&#160;    <a class="code" href="group___drawing.html#gaa8db9fe1edc90be50c3fb8a94fd09275">TX_LIGHTMAGENTA</a>  = RGB (255,   0, 255),   </div>
<div class="line"><a name="l01470"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6d082544499056d96ebda68defe0be54"> 1470</a></span>&#160;    <a class="code" href="group___drawing.html#ga6d082544499056d96ebda68defe0be54">TX_PINK</a>          = RGB (255, 128, 255),   </div>
<div class="line"><a name="l01471"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6388bef316887789b735b7fbbc04ec4d"> 1471</a></span>&#160;    <a class="code" href="group___drawing.html#ga6388bef316887789b735b7fbbc04ec4d">TX_YELLOW</a>        = RGB (255, 255, 128),   </div>
<div class="line"><a name="l01472"></a><span class="lineno"><a class="line" href="group___drawing.html#ga90c5bf9144d5eed4926fb92ba854eca9"> 1472</a></span>&#160;    <a class="code" href="group___drawing.html#ga90c5bf9144d5eed4926fb92ba854eca9">TX_WHITE</a>         = RGB (255, 255, 255),   </div>
<div class="line"><a name="l01473"></a><span class="lineno"><a class="line" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9"> 1473</a></span>&#160;    <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>   = 0xFFFFFFFF,            </div>
<div class="line"><a name="l01474"></a><span class="lineno"><a class="line" href="group___drawing.html#gad737ddf597e37fe699dc87c3f7f2a748"> 1474</a></span>&#160;    <a class="code" href="group___drawing.html#gad737ddf597e37fe699dc87c3f7f2a748">TX_NULL</a>          = <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>,        </div>
<div class="line"><a name="l01475"></a><span class="lineno"><a class="line" href="group___drawing.html#ga20dd7bcf9971724f274d321b8489d206"> 1475</a></span>&#160;    <a class="code" href="group___drawing.html#ga20dd7bcf9971724f274d321b8489d206">TX_BLM</a>           = <a class="code" href="group___drawing.html#gacc1ae8a3821354abc2d3f8f42ee75706">TX_BLACK</a>,              </div>
<div class="line"><a name="l01476"></a><span class="lineno"><a class="line" href="group___drawing.html#ga52767d764788c2e7dd93ee6d1c9f681b"> 1476</a></span>&#160;    <a class="code" href="group___drawing.html#ga52767d764788c2e7dd93ee6d1c9f681b">TX_white</a>         = <a class="code" href="group___drawing.html#ga90c5bf9144d5eed4926fb92ba854eca9">TX_WHITE</a>,              </div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160; </div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">//  Цветовые каналы (компоненты) -- см. txExtractColor(), txRGB2HSL(), txHSL2RGB()</span></div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa5cab2d4aa67ea50390c30f094a77862"> 1480</a></span>&#160;    <a class="code" href="group___drawing.html#gaa5cab2d4aa67ea50390c30f094a77862">TX_HUE</a>          = 0x04000000,             </div>
<div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="group___drawing.html#ga4395ad7eeeda9d2163a89996ca91133e"> 1481</a></span>&#160;    <a class="code" href="group___drawing.html#ga4395ad7eeeda9d2163a89996ca91133e">TX_SATURATION</a>   = 0x05000000,             </div>
<div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="group___drawing.html#ga03a8558c6bf26c0d6f59f85fc458c1a8"> 1482</a></span>&#160;    <a class="code" href="group___drawing.html#ga03a8558c6bf26c0d6f59f85fc458c1a8">TX_LIGHTNESS</a>    = 0x06000000;             </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160; </div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    };</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160; </div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;<span class="preprocessor">#define TX_GREY       TX_GRAY</span></div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;<span class="preprocessor">#define TX_DARKGREY   TX_DARKGRAY</span></div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<span class="preprocessor">#define TX_LIGHTGREY  TX_LIGHTGRAY</span></div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160; </div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160; </div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;COLORREF RGB (<span class="keywordtype">int</span> red, <span class="keywordtype">int</span> green, <span class="keywordtype">int</span> blue);</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160; </div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160; </div>
<div class="line"><a name="l01546"></a><span class="lineno"><a class="line" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23"> 1546</a></span>&#160;HPEN <a class="code" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a> (COLORREF color, <span class="keywordtype">double</span> thickness = 1, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="preprocessor">#define txSetColour txSetColor</span></div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160; </div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160; </div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160; </div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;COLORREF txColor (<span class="keywordtype">double</span> red, <span class="keywordtype">double</span> green, <span class="keywordtype">double</span> blue);</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160; </div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160; </div>
<div class="line"><a name="l01586"></a><span class="lineno"><a class="line" href="group___drawing.html#gab6462db4dbcca4915d460036c6c8896d"> 1586</a></span>&#160;COLORREF <a class="code" href="group___drawing.html#gab6462db4dbcca4915d460036c6c8896d">txGetColor</a> (HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160; </div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"><a class="line" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2"> 1605</a></span>&#160;HBRUSH <a class="code" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a> (COLORREF color, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="preprocessor">#define txSetFillColour txSetFillColor</span></div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160; </div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160; </div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;COLORREF txFillColor (<span class="keywordtype">double</span> red, <span class="keywordtype">double</span> green, <span class="keywordtype">double</span> blue);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160; </div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160; </div>
<div class="line"><a name="l01645"></a><span class="lineno"><a class="line" href="group___drawing.html#ga4d83b7e2d67f422cf703e15f2d7c4dfa"> 1645</a></span>&#160;COLORREF <a class="code" href="group___drawing.html#ga4d83b7e2d67f422cf703e15f2d7c4dfa">txGetFillColor</a> (HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160; </div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160; </div>
<div class="line"><a name="l01667"></a><span class="lineno"><a class="line" href="group___drawing.html#gac2b196b6826392229fa209e01817f941"> 1667</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (COLORREF color, COLORREF component) tx_nodiscard;</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160; </div>
<div class="line"><a name="l01699"></a><span class="lineno"><a class="line" href="group___drawing.html#ga1350174ec2a2c83182437f04c88c2d95"> 1699</a></span>&#160;COLORREF <a class="code" href="group___drawing.html#ga1350174ec2a2c83182437f04c88c2d95">txRGB2HSL</a> (COLORREF rgbColor) tx_nodiscard;</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160; </div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160; </div>
<div class="line"><a name="l01733"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6d5e95c1f234d32b8859826859127244"> 1733</a></span>&#160;COLORREF <a class="code" href="group___drawing.html#ga6d5e95c1f234d32b8859826859127244">txHSL2RGB</a> (COLORREF hslColor) tx_nodiscard;</div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160; </div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160; </div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;<span class="comment">//{          Drawing</span></div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160; </div>
<div class="line"><a name="l01760"></a><span class="lineno"><a class="line" href="group___drawing.html#ga78e83baeb6a02d5fa33dd8b062e513d9"> 1760</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga78e83baeb6a02d5fa33dd8b062e513d9">txClear</a> (HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160; </div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160; </div>
<div class="line"><a name="l01782"></a><span class="lineno"><a class="line" href="group___drawing.html#gafafd861ab7dc599b2e68b258b6727c85"> 1782</a></span>&#160;inline <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gafafd861ab7dc599b2e68b258b6727c85">txSetPixel</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, COLORREF color, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160; </div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160; </div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160; </div>
<div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;inline <span class="keywordtype">bool</span> txPixel (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> red, <span class="keywordtype">double</span> green, <span class="keywordtype">double</span> blue, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160; </div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"><a class="line" href="group___drawing.html#ga90daedc95ac28938003edb5b50479542"> 1830</a></span>&#160;inline COLORREF <a class="code" href="group___drawing.html#ga90daedc95ac28938003edb5b50479542">txGetPixel</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160; </div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160; </div>
<div class="line"><a name="l01854"></a><span class="lineno"><a class="line" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65"> 1854</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160; </div>
<div class="line"><a name="l01880"></a><span class="lineno"><a class="line" href="group___drawing.html#ga18a0418f3c06463e958077cddf2a4864"> 1880</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga18a0418f3c06463e958077cddf2a4864">txRectangle</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160; </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"><a class="line" href="group___drawing.html#gacbbb638439ad7ba88804178516019fb1"> 1904</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gacbbb638439ad7ba88804178516019fb1">txPolygon</a> (const POINT points[], <span class="keywordtype">int</span> numPoints, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160; </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160; </div>
<div class="line"><a name="l01928"></a><span class="lineno"><a class="line" href="group___drawing.html#gaaf82e7c5a0fd06548f42c757f73d3dae"> 1928</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaaf82e7c5a0fd06548f42c757f73d3dae">txEllipse</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160; </div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160; </div>
<div class="line"><a name="l01950"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc"> 1950</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc">txCircle</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> r);</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160; </div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160; </div>
<div class="line"><a name="l01977"></a><span class="lineno"><a class="line" href="group___drawing.html#ga5e1e4cc39cc18962bb480c4adfa1344d"> 1977</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga5e1e4cc39cc18962bb480c4adfa1344d">txArc</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> startAngle, <span class="keywordtype">double</span> totalAngle, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160; </div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"><a class="line" href="group___drawing.html#ga8e06e3abcb6b3724d332feb8aa83a8df"> 2004</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga8e06e3abcb6b3724d332feb8aa83a8df">txPie</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> startAngle, <span class="keywordtype">double</span> totalAngle, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160; </div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160; </div>
<div class="line"><a name="l02031"></a><span class="lineno"><a class="line" href="group___drawing.html#ga59468ca0fd4c182ac0a03573267eb3e9"> 2031</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga59468ca0fd4c182ac0a03573267eb3e9">txChord</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> startAngle, <span class="keywordtype">double</span> totalAngle, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160; </div>
<div class="line"><a name="l02067"></a><span class="lineno"><a class="line" href="group___drawing.html#ga8adde0a20efa7597d8653653817353b2"> 2067</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga8adde0a20efa7597d8653653817353b2">txFloodFill</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, COLORREF color = <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>, DWORD mode = FLOODFILLSURFACE, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160; </div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160; </div>
<div class="line"><a name="l02089"></a><span class="lineno"><a class="line" href="group___drawing.html#gaf5f3dec18e058830a6eb85ca127472df"> 2089</a></span>&#160;inline <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaf5f3dec18e058830a6eb85ca127472df">txTriangle</a> (<span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> x2, <span class="keywordtype">double</span> y2, <span class="keywordtype">double</span> x3, <span class="keywordtype">double</span> y3)</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;    {</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;    (void)x1; (void)y1; (void)x2; (void)y2; (void)x3; (void)y3;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160; </div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (<span class="stringliteral">&quot;txTriangle (double x1, double y1, double x2, double y2, double x3, double y3)\n\n&quot;</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                  <span class="stringliteral">&quot;Эта функция не реализована в библиотеке, потому что вы легко можете реализовать ее сами &quot;</span></div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;                  <span class="stringliteral">&quot;как функцию с параметрами, используя txPolygon(). См. \&quot;Пример с функциями с параметрами\&quot;. &quot;</span></div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                  <span class="stringliteral">&quot;Ну или нарисовать тремя линиями. :)&quot;</span>, <span class="stringliteral">&quot;TXLib сообщает&quot;</span>);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    }</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160; </div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<span class="keywordtype">bool</span> txNotifyIcon (<span class="keywordtype">unsigned</span> flags, <span class="keyword">const</span> <span class="keywordtype">char</span> title[], <span class="keyword">const</span> <span class="keywordtype">char</span> format[], ...) tx_printfy (3);</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;<span class="preprocessor">#define txRectandle  Sleep (1000), txRectangle  </span><span class="comment">// Copy-protection for the function below</span></div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;<span class="preprocessor">#define txLine(...)  txLine (__VA_ARGS__); {    </span><span class="comment">//</span></div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="preprocessor">#define txNotifyIcon }}}}}}}}}} txNotifyIcon    </span><span class="comment">// Не спрашивайте, зачем. Это дичь.</span></div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="preprocessor">#define txCircle     ;txCircle                  </span><span class="comment">//</span></div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;<span class="preprocessor">#define txSetColor   ;txSetColor                </span><span class="comment">//</span></div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<span class="preprocessor">#define C0L0RREF     COLORREF                   </span><span class="comment">//</span></div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<span class="preprocessor">#define OxFFFFFF     0xFFFFFF                   </span><span class="comment">//</span></div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="preprocessor">#define lO           10                         </span><span class="comment">//</span></div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="preprocessor">#define lOOO         1000                       </span><span class="comment">//</span></div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="preprocessor">#define oo                                      </span><span class="comment">//</span></div>
<div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;<span class="preprocessor">#define O                                       </span><span class="comment">//</span></div>
<div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160; </div>
<div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160; </div>
<div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------//////</span></div>
<div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                                                                                                                       <span class="comment">//</span></div>
<div class="line"><a name="l02163"></a><span class="lineno"><a class="line" href="group___drawing.html#gac76227ff55076802ea267be18b4d7a8d"> 2163</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___drawing.html#gac76227ff55076802ea267be18b4d7a8d">txDrawMan</a> (<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> sizeX, <span class="keywordtype">int</span> sizeY, COLORREF color, <span class="keywordtype">double</span> handL, <span class="keywordtype">double</span> handR, <span class="keywordtype">double</span> twist,   <span class="comment">//</span></div>
<div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                       <span class="keywordtype">double</span> head, <span class="keywordtype">double</span> eyes, <span class="keywordtype">double</span> wink, <span class="keywordtype">double</span> crazy, <span class="keywordtype">double</span> smile, <span class="keywordtype">double</span> hair, <span class="keywordtype">double</span> wind)    <span class="comment">//</span></div>
<div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;    {                                                                                                                  <span class="comment">//</span></div>
<div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> __[] =  <span class="stringliteral">&quot;\0/А я - человечек из библиотеки!\0/Меня объясняли на уроке!\0/Напиши меня сам!\0/&quot;</span>;           <span class="comment">//</span></div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <span class="comment">//                   |                                |                          |                  |              //</span></div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="comment">// Не копипастите! _/ \_ Все равно не получится! :) _/ \_  Человечки защищают  _/ \_ этот код! :) _/ \_  Муаххаха! //</span></div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;    <span class="comment">//                                                                                                                 //</span></div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> count = GetTickCount(), L = 0;  </div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160; </div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    C0L0RREF lineColor = <a class="code" href="group___drawing.html#gab6462db4dbcca4915d460036c6c8896d">txGetColor</a>();</div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    C0L0RREF fillColor = <a class="code" href="group___drawing.html#ga4d83b7e2d67f422cf703e15f2d7c4dfa">txGetFillColor</a>();</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160; </div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <a class="code" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a>     (color, 3);</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    <a class="code" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a> (color);</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160; </div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x + twist * sizeX, y - O.35 * sizeY, x, y - O.7 * sizeY);</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160; </div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x, y - O.7 * sizeY, x - sizeX/2.0, y - (O.7 + handL) * sizeY);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x, y - O.7 * sizeY, x + sizeX/2.0, y - (O.7 + handR) * sizeY);</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160; </div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x + twist * sizeX, y - O.35 * sizeY, x - sizeX/2.0, y);</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x + twist * sizeX, y - O.35 * sizeY, x + sizeX/2.0, y);</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160; </div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;    <a class="code" href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc">txCircle</a> (x, y - (O.85 + head) * sizeY, O.15 * sizeY);</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160; </div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x, y - (1 + head) * sizeY, x +  wind/lO        * sizeX, y - (1 + head + hair/lO) * sizeY);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x, y - (1 + head) * sizeY, x + (wind/lO - O.1) * sizeX, y - (1 + head + hair/lO) * sizeY);</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x, y - (1 + head) * sizeY, x + (wind/lO + O.1) * sizeX, y - (1 + head + hair/lO) * sizeY);</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <a class="code" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a>     (~color &amp; OxFFFFFF);  <span class="comment">// Inverse the color</span></div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;    <a class="code" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a> (~color &amp; OxFFFFFF);</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160; </div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x, y - (O.8 + head - O.05 * smile/2) * sizeY, x - O.05 * sizeY, y - (O.8 + head + O.05 * smile/2) * sizeY);</div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (x, y - (O.8 + head - O.05 * smile/2) * sizeY, x + O.05 * sizeY, y - (O.8 + head + O.05 * smile/2) * sizeY);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;                                              oo</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    txNotifyIcon (4, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)!! (L+<span class="charliteral">&#39;L&#39;</span>)[(__)], <span class="stringliteral">&quot;\n%s\n&quot;</span>, __ + ((<span class="keywordtype">unsigned</span>) (((count -=- 1) ^=! 1) ^=~ ((0)^(0)) +1) % 3)[<span class="stringliteral">&quot;\x02\&quot;&lt;&quot;</span>]);  <span class="comment">//-V112 //-V542</span></div>
<div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;                                   oo</div>
<div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="comment">// See above: Frog construct [(__)], Mouth operator -=-, Cat operator ^=!, Mouse operator ^=~ and Owl constant ((0)^(0)). Use it freely, meow</span></div>
<div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160; </div>
<div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <a class="code" href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc">txCircle</a> (x - O.05 * sizeY, y - (O.9 + head - O.02 * crazy) * sizeY, eyes * (1 + O.5*wink) * O.02 * sizeY);</div>
<div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    <a class="code" href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc">txCircle</a> (x + O.05 * sizeY, y - (O.9 + head + O.02 * crazy) * sizeY, eyes * (1 - O.5*wink) * O.02 * sizeY);</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    Sleep (lOOO + count%2);</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <a class="code" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a>     ((color == 0xDEADFACE)? <a class="code" href="group___drawing.html#ga16ef56f4dfb0cf5f8422bab9663eb7a9">TX_DARKGRAY</a> : <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>);</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;    <a class="code" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a> (<a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>);</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160; </div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <a class="code" href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc">txCircle</a> (x, y, 4);  <span class="comment">//-V112</span></div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    txRectandle (x - sizeX/2.0, y - sizeY, x + sizeX/2.0, y);</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160; </div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <a class="code" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a>     (lineColor);</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    <a class="code" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a> (fillColor);</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    }</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160; </div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;<span class="comment">//{          Drawing text</span></div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160; </div>
<div class="line"><a name="l02246"></a><span class="lineno"><a class="line" href="group___drawing.html#ga52e119361961d9eee33c176a3084e55d"> 2246</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga52e119361961d9eee33c176a3084e55d">txTextOut</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keyword">const</span> <span class="keywordtype">char</span> text[], HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="preprocessor">#undef txRectandle</span></div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;<span class="preprocessor">#undef txLine</span></div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<span class="preprocessor">#undef txNotifyIcon</span></div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;<span class="preprocessor">#undef txCircle</span></div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="preprocessor">#undef txSetColor</span></div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;<span class="preprocessor">#undef C0L0RREF</span></div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<span class="preprocessor">#undef OxFFFFFF</span></div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;<span class="preprocessor">#undef lO</span></div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<span class="preprocessor">#undef lOOO</span></div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;<span class="preprocessor">#undef oo</span></div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<span class="preprocessor">#undef O</span></div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160; </div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"><a class="line" href="group___drawing.html#gaf6a9b31e58b6a0523ce1636a97053606"> 2315</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaf6a9b31e58b6a0523ce1636a97053606">txDrawText</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keyword">const</span> <span class="keywordtype">char</span> text[],</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;                 <span class="keywordtype">unsigned</span> format = DT_CENTER | DT_VCENTER | DT_WORDBREAK | DT_WORD_ELLIPSIS, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160; </div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160; </div>
<div class="line"><a name="l02345"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6689b9a89add9c5eb5cf54a8c86539a4"> 2345</a></span>&#160;HFONT <a class="code" href="group___drawing.html#ga6689b9a89add9c5eb5cf54a8c86539a4">txSelectFont</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">double</span> sizeY, <span class="keywordtype">double</span> sizeX = -1,</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                    <span class="keywordtype">int</span> bold = FW_DONTCARE, <span class="keywordtype">bool</span> italic = <span class="keyword">false</span>, <span class="keywordtype">bool</span> underline = <span class="keyword">false</span>,</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                    <span class="keywordtype">bool</span> strikeout = <span class="keyword">false</span>, <span class="keywordtype">double</span> angle = 0,</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                    HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160; </div>
<div class="line"><a name="l02367"></a><span class="lineno"><a class="line" href="group___drawing.html#ga64af5f87cd652548278ff98d26f58148"> 2367</a></span>&#160;SIZE <a class="code" href="group___drawing.html#ga64af5f87cd652548278ff98d26f58148">txGetTextExtent</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> text[], HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160; </div>
<div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"><a class="line" href="group___drawing.html#gad5483eacac697420a84f66733e45ed02"> 2385</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gad5483eacac697420a84f66733e45ed02">txGetTextExtentX</a> (const <span class="keywordtype">char</span> text[], HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160; </div>
<div class="line"><a name="l02403"></a><span class="lineno"><a class="line" href="group___drawing.html#gac021e9984ef217a7a8c14094e3d684c9"> 2403</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gac021e9984ef217a7a8c14094e3d684c9">txGetTextExtentY</a> (const <span class="keywordtype">char</span> text[], HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) tx_nodiscard;</div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160; </div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160; </div>
<div class="line"><a name="l02434"></a><span class="lineno"><a class="line" href="group___drawing.html#ga09938df8859ae8b62638a3af76ee6735"> 2434</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#ga09938df8859ae8b62638a3af76ee6735">txSetTextAlign</a> (<span class="keywordtype">unsigned</span> align = TA_CENTER | TA_BASELINE, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160; </div>
<div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"><a class="line" href="group___drawing.html#ga794901725b6c4a96f585742b70c0ea05"> 2454</a></span>&#160;LOGFONT* <a class="code" href="group___drawing.html#ga794901725b6c4a96f585742b70c0ea05">txFontExist</a> (const <span class="keywordtype">char</span> name[]) tx_nodiscard;</div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="comment">//{          Drawing to memory DC and image loading</span></div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160; </div>
<div class="line"><a name="l02507"></a><span class="lineno"><a class="line" href="group___drawing.html#ga9b0d66f152f2b04e9c4511e3e7f2c521"> 2507</a></span>&#160;HDC <a class="code" href="group___drawing.html#ga9b0d66f152f2b04e9c4511e3e7f2c521">txCreateCompatibleDC</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, HBITMAP bitmap = NULL, RGBQUAD** pixels = NULL) tx_nodiscard;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160; </div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160; </div>
<div class="line"><a name="l02611"></a><span class="lineno"><a class="line" href="group___drawing.html#ga7535f88c0fd15b4b49195060d38f2603"> 2611</a></span>&#160;HDC <a class="code" href="group___drawing.html#ga7535f88c0fd15b4b49195060d38f2603">txCreateDIBSection</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, RGBQUAD**  pixels = NULL) tx_nodiscard;</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160; </div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;HDC <a class="code" href="group___drawing.html#ga7535f88c0fd15b4b49195060d38f2603">txCreateDIBSection</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, COLORREF** pixels)        tx_nodiscard;</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160; </div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160; </div>
<div class="line"><a name="l02695"></a><span class="lineno"><a class="line" href="group___drawing.html#ga2cba42b999b157ec7a7d2bd32dfcc709"> 2695</a></span>&#160;HDC <a class="code" href="group___drawing.html#ga2cba42b999b157ec7a7d2bd32dfcc709">txLoadImage</a> (const <span class="keywordtype">char</span> filename[], <span class="keywordtype">int</span> sizeX = 0, <span class="keywordtype">int</span> sizeY = 0,</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;                 <span class="keywordtype">unsigned</span> imageFlags = IMAGE_BITMAP, <span class="keywordtype">unsigned</span> loadFlags = LR_LOADFROMFILE) tx_nodiscard;</div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160; </div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"><a class="line" href="group___drawing.html#ga505f212582bf9b2bf95a4ef15f84af42"> 2732</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga505f212582bf9b2bf95a4ef15f84af42">txDeleteDC</a> (HDC  dc);</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160; </div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga505f212582bf9b2bf95a4ef15f84af42">txDeleteDC</a> (HDC* dc);</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160; </div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160; </div>
<div class="line"><a name="l02780"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf"> 2780</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (HDC destImage,   <span class="keywordtype">double</span> xDest,       <span class="keywordtype">double</span> yDest, <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> height,</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;               HDC sourceImage, <span class="keywordtype">double</span> xSource = 0, <span class="keywordtype">double</span> ySource = 0, <span class="keywordtype">unsigned</span> operation = SRCCOPY);</div>
<div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160; </div>
<div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160; </div>
<div class="line"><a name="l02800"></a><span class="lineno"><a class="line" href="group___drawing.html#ga3cb3f1af2aed93b9df7b7e9730e2cb89"> 2800</a></span>&#160;inline <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (<span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, HDC sourceImage, <span class="keywordtype">double</span> xSource = 0, <span class="keywordtype">double</span> ySource = 0);</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160; </div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160; </div>
<div class="line"><a name="l02864"></a><span class="lineno"><a class="line" href="group___drawing.html#ga54f48f0bcb9453add294e0a9f8b1fb1d"> 2864</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga54f48f0bcb9453add294e0a9f8b1fb1d">txTransparentBlt</a> (HDC destImage,   <span class="keywordtype">double</span> xDest,       <span class="keywordtype">double</span> yDest,       <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> height,</div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;                       HDC sourceImage, <span class="keywordtype">double</span> xSource = 0, <span class="keywordtype">double</span> ySource = 0, COLORREF transColor = <a class="code" href="group___drawing.html#gacc1ae8a3821354abc2d3f8f42ee75706">TX_BLACK</a>);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160; </div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160; </div>
<div class="line"><a name="l02885"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6e5105284a1d93aff19fc29d14a8a532"> 2885</a></span>&#160;inline <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga54f48f0bcb9453add294e0a9f8b1fb1d">txTransparentBlt</a> (<span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, HDC sourceImage,</div>
<div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                              COLORREF transColor = <a class="code" href="group___drawing.html#gacc1ae8a3821354abc2d3f8f42ee75706">TX_BLACK</a>, <span class="keywordtype">double</span> xSource = 0, <span class="keywordtype">double</span> ySource = 0);</div>
<div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160; </div>
<div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"><a class="line" href="group___drawing.html#ga4d6f780cdef622df0fda71d0b3cfee52"> 2995</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga4d6f780cdef622df0fda71d0b3cfee52">txAlphaBlend</a> (HDC destImage,   <span class="keywordtype">double</span> xDest,       <span class="keywordtype">double</span> yDest,       <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> height,</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;                   HDC sourceImage, <span class="keywordtype">double</span> xSource = 0, <span class="keywordtype">double</span> ySource = 0, <span class="keywordtype">double</span> alpha = 1.0);</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160; </div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160; </div>
<div class="line"><a name="l03017"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa0af478a9b959bb096a8a686d2e685b5"> 3017</a></span>&#160;inline <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga4d6f780cdef622df0fda71d0b3cfee52">txAlphaBlend</a> (<span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, HDC sourceImage,</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;                          <span class="keywordtype">double</span> xSource = 0, <span class="keywordtype">double</span> ySource = 0, <span class="keywordtype">double</span> alpha = 1.0);</div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160; </div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160; </div>
<div class="line"><a name="l03051"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6280d640bb3b08dc82c8dd29caf5ff47"> 3051</a></span>&#160;HDC <a class="code" href="group___drawing.html#ga6280d640bb3b08dc82c8dd29caf5ff47">txUseAlpha</a> (HDC image);</div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160; </div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160; </div>
<div class="line"><a name="l03081"></a><span class="lineno"><a class="line" href="group___drawing.html#ga45389db909311454bbdfed3898d760d1"> 3081</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga45389db909311454bbdfed3898d760d1">txSaveImage</a> (const <span class="keywordtype">char</span> filename[], HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160; </div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160; </div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;<span class="comment">//{          Utility functions</span></div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160; </div>
<div class="line"><a name="l03113"></a><span class="lineno"><a class="line" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c"> 3113</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a> (<span class="keywordtype">double</span> time = 0);</div>
<div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160; </div>
<div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160; </div>
<div class="line"><a name="l03202"></a><span class="lineno"><a class="line" href="group___drawing.html#gae92e621aaed81f90e4d142356e38762a"> 3202</a></span>&#160;inline <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gae92e621aaed81f90e4d142356e38762a">txBegin</a>();</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160; </div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160; </div>
<div class="line"><a name="l03229"></a><span class="lineno"><a class="line" href="group___drawing.html#ga809dc04afd5348247846ee01ce9a06e6"> 3229</a></span>&#160;inline <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#ga809dc04afd5348247846ee01ce9a06e6">txEnd</a>();</div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160; </div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160; </div>
<div class="line"><a name="l03255"></a><span class="lineno"><a class="line" href="group___drawing.html#gadc7fd9cdc8c007693db7b6d7de794709"> 3255</a></span>&#160;inline <span class="keywordtype">void</span> <a class="code" href="group___drawing.html#gadc7fd9cdc8c007693db7b6d7de794709">txRedrawWindow</a>();</div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160; </div>
<div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160; </div>
<div class="line"><a name="l03283"></a><span class="lineno"><a class="line" href="group___drawing.html#gaff3d9c60900531f438a19216485bdd41"> 3283</a></span>&#160;inline <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gaff3d9c60900531f438a19216485bdd41">txUpdateWindow</a> (<span class="keywordtype">int</span> update = true);</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160; </div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160; </div>
<div class="line"><a name="l03304"></a><span class="lineno"><a class="line" href="group___drawing.html#gabc64e03f4ca966e76bc714bbe8173761"> 3304</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gabc64e03f4ca966e76bc714bbe8173761">txSelectObject</a> (HGDIOBJ obj, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160; </div>
<div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;<span class="comment">//                 +--&lt;&lt;&lt; Это текст помощи, который вы уже читали. Ищите дальше! Жмите [F3] или &quot;Найти далее&quot;</span></div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;<span class="comment">//                 |</span></div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;<span class="comment">//                 v</span></div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;<span class="comment">//               txIDontWantToHaveAPauseAfterMyProgramBeforeTheWindowWillClose_AndIWillNotBeAskingWhereIsMyPicture();</span></div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160; </div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;<span class="comment">//     +--&lt;&lt;&lt; Это _прототип_ функции, а надо найти ее _определение_. Ищите дальше! Жмите [F3] или &quot;Найти далее&quot;</span></div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;<span class="comment">//     |</span></div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;<span class="comment">//     v</span></div>
<div class="line"><a name="l03340"></a><span class="lineno"><a class="line" href="group___drawing.html#ga93cecf6b117fc403c0488f388b78a6d1"> 3340</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga93cecf6b117fc403c0488f388b78a6d1">txIDontWantToHaveAPauseAfterMyProgramBeforeTheWindowWillClose_AndIWillNotBeAskingWhereIsMyPicture</a>();</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160; </div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160; </div>
<div class="line"><a name="l03360"></a><span class="lineno"><a class="line" href="group___drawing.html#ga0a3cf3a018cea9d5889d2626e9a37136"> 3360</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga0a3cf3a018cea9d5889d2626e9a37136">txDestroyWindow</a> (HWND wnd = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>());</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160; </div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160; </div>
<div class="line"><a name="l03375"></a><span class="lineno"><a class="line" href="group___drawing.html#ga49983bddca35d531c521cf04c6c2449f"> 3375</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="group___drawing.html#ga49983bddca35d531c521cf04c6c2449f">txQueryPerformance</a>() tx_nodiscard;</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160; </div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11)</span></div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;    <span class="keyword">template</span> &lt;<span class="keywordtype">int</span> txFramesToAverage = 5&gt;</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;    <span class="keyword">const</span>     <span class="keywordtype">int</span> txFramesToAverage = 5;</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160; </div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160; </div>
<div class="line"><a name="l03403"></a><span class="lineno"><a class="line" href="group___drawing.html#ga1aca71127c9986f995b2372903d65964"> 3403</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="group___drawing.html#ga1aca71127c9986f995b2372903d65964">txGetFPS</a> (<span class="keywordtype">int</span> minFrames = txFramesToAverage) tx_nodiscard;</div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160; </div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160; </div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;<span class="comment">//{          Mouse functions</span></div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160; </div>
<div class="line"><a name="l03439"></a><span class="lineno"><a class="line" href="group___mouse.html#ga44606f3b7f5f345d15bb20d46fcf78b6"> 3439</a></span>&#160;<span class="keyword">inline</span> POINT <a class="code" href="group___mouse.html#ga44606f3b7f5f345d15bb20d46fcf78b6">txMousePos</a>() tx_nodiscard;</div>
<div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160; </div>
<div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160; </div>
<div class="line"><a name="l03463"></a><span class="lineno"><a class="line" href="group___mouse.html#gae56f541d32ff7324dd6dd340411c1130"> 3463</a></span>&#160;inline <span class="keywordtype">double</span> <a class="code" href="group___mouse.html#gae56f541d32ff7324dd6dd340411c1130">txMouseX</a>() tx_nodiscard;</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160; </div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160; </div>
<div class="line"><a name="l03487"></a><span class="lineno"><a class="line" href="group___mouse.html#ga481847278ec77647082072325be5c226"> 3487</a></span>&#160;inline <span class="keywordtype">double</span> <a class="code" href="group___mouse.html#ga481847278ec77647082072325be5c226">txMouseY</a>() tx_nodiscard;</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160; </div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160; </div>
<div class="line"><a name="l03523"></a><span class="lineno"><a class="line" href="group___mouse.html#ga3317e38b22d8e6f116c29503144c2cc2"> 3523</a></span>&#160;inline <span class="keywordtype">unsigned</span> <a class="code" href="group___mouse.html#ga3317e38b22d8e6f116c29503144c2cc2">txMouseButtons</a>() tx_nodiscard;</div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160; </div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160; </div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;<span class="keyword">inline</span> Mouse&amp; txCatchMouse (<span class="keywordtype">bool</span> shouldEat = <span class="keyword">true</span>);</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160; </div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160; </div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<span class="comment">//{          Console functions</span></div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160; </div>
<div class="line"><a name="l03616"></a><span class="lineno"><a class="line" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974"> 3616</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (<span class="keywordtype">unsigned</span> colors = 0x07 <span class="comment">/*FOREGROUND_LIGHTGRAY*/</span>);</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160; </div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160; </div>
<div class="line"><a name="l03632"></a><span class="lineno"><a class="line" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd"> 3632</a></span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a>() tx_nodiscard;</div>
<div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160; </div>
<div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160; </div>
<div class="line"><a name="l03650"></a><span class="lineno"><a class="line" href="group___drawing.html#ga2cb63c12d9206e9ed2b2c83c9a08f68e"> 3650</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga2cb63c12d9206e9ed2b2c83c9a08f68e">txClearConsole</a>();</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160; </div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160; </div>
<div class="line"><a name="l03674"></a><span class="lineno"><a class="line" href="group___drawing.html#gaee548f7b5672cbcbb99246e0291d7336"> 3674</a></span>&#160;POINT <a class="code" href="group___drawing.html#gaee548f7b5672cbcbb99246e0291d7336">txSetConsoleCursorPos</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y);</div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160; </div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160; </div>
<div class="line"><a name="l03691"></a><span class="lineno"><a class="line" href="group___drawing.html#ga3227242c57eef33049cdaee655f4faee"> 3691</a></span>&#160;POINT <a class="code" href="group___drawing.html#ga3227242c57eef33049cdaee655f4faee">txGetConsoleCursorPos</a>();</div>
<div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160; </div>
<div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160; </div>
<div class="line"><a name="l03708"></a><span class="lineno"><a class="line" href="group___drawing.html#gade3dc928a81efd7054c61fa6cb4ddc06"> 3708</a></span>&#160;POINT <a class="code" href="group___drawing.html#gade3dc928a81efd7054c61fa6cb4ddc06">txGetConsoleExtent</a>();</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160; </div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160; </div>
<div class="line"><a name="l03726"></a><span class="lineno"><a class="line" href="group___drawing.html#ga250455abeab8c99a51153ef8f4ec0396"> 3726</a></span>&#160;POINT <a class="code" href="group___drawing.html#ga250455abeab8c99a51153ef8f4ec0396">txGetConsoleFontSize</a>() tx_nodiscard;</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160; </div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160; </div>
<div class="line"><a name="l03746"></a><span class="lineno"><a class="line" href="group___drawing.html#gaa148d2040d20ed74cf46ab186c35f9ed"> 3746</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaa148d2040d20ed74cf46ab186c35f9ed">txTextCursor</a> (<span class="keywordtype">bool</span> blink = true);</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160; </div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160; </div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;<span class="comment">//{          Other staff not related to drawing</span></div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160; </div>
<div class="line"><a name="l03788"></a><span class="lineno"><a class="line" href="group___misc.html#ga177f8bcb7544821ea4b5bd0571fe7196"> 3788</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga177f8bcb7544821ea4b5bd0571fe7196">txPlaySound</a> (const <span class="keywordtype">char</span> filename[] = NULL, DWORD mode = SND_ASYNC);</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160; </div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160; </div>
<div class="line"><a name="l03851"></a><span class="lineno"><a class="line" href="group___misc.html#gad6db0ee1b36288c7eb3f2196077971f9"> 3851</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#gad6db0ee1b36288c7eb3f2196077971f9">txSpeak</a> (const <span class="keywordtype">char</span>* text, ...) tx_printfy (1);</div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160; </div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160; </div>
<div class="line"><a name="l03972"></a><span class="lineno"><a class="line" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821"> 3972</a></span>&#160;intptr_t <a class="code" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a> (<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, const <span class="keywordtype">char</span> fileName[],</div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;                       <span class="keywordtype">double</span> zoom = 0, <span class="keywordtype">double</span> gain = 1, HWND wnd = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>());</div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160; </div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160; </div>
<div class="line"><a name="l03991"></a><span class="lineno"><a class="line" href="group___misc.html#gaf5a6626fa2606a7f374fcc077fc92363"> 3991</a></span>&#160;intptr_t <a class="code" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a> (const <span class="keywordtype">char</span> fileName[], <span class="keywordtype">double</span> zoom = 0, <span class="keywordtype">double</span> gain = 1, HWND wnd = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>());</div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160; </div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160; </div>
<div class="line"><a name="l04051"></a><span class="lineno"><a class="line" href="group___misc.html#ga782025393f08a0efb645b9d2e30f2586"> 4051</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga782025393f08a0efb645b9d2e30f2586">txGetAsyncKeyState</a> (<span class="keywordtype">int</span> key);</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160; </div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160; </div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;<span class="keywordtype">bool</span> txNotifyIcon (<span class="keywordtype">unsigned</span> flags, <span class="keyword">const</span> <span class="keywordtype">char</span> title[], <span class="keyword">const</span> <span class="keywordtype">char</span> format[], ...) tx_printfy (3);</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160; </div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160; </div>
<div class="line"><a name="l04123"></a><span class="lineno"><a class="line" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f"> 4123</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> format[], ...) tx_printfy (1);</div>
<div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160; </div>
<div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160; </div>
<div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11) ||  defined (FOR_DOXYGEN_ONLY)</span></div>
<div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160; </div>
<div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;<span class="keywordtype">int</span> txPrintf (<span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args);</div>
<div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160; </div>
<div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;<span class="preprocessor">#define TX_PRINTF(...)  ( _txPrintfCheck (__VA_ARGS__), txPrintf (__VA_ARGS__) )</span></div>
<div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160; </div>
<div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160; </div>
<div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160; </div>
<div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11) &amp;&amp; !defined (FOR_DOXYGEN_ONLY)</span></div>
<div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160; </div>
<div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;<span class="keyword">enum</span> width_t     : <span class="keywordtype">int</span> {};</div>
<div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;<span class="keyword">enum</span> precision_t : <span class="keywordtype">int</span> {};</div>
<div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160; </div>
<div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;<span class="keyword">inline</span> width_t     width     (<span class="keywordtype">int</span> width) { <span class="keywordflow">return</span> (width_t)     width; }</div>
<div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;<span class="keyword">inline</span> precision_t precision (<span class="keywordtype">int</span> prec)  { <span class="keywordflow">return</span> (precision_t) prec;  }</div>
<div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160; </div>
<div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160; </div>
<div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160; </div>
<div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11) ||  defined (FOR_DOXYGEN_ONLY)</span></div>
<div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160; </div>
<div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;<span class="keywordtype">int</span> txPrintf (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args);</div>
<div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160; </div>
<div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160; </div>
<div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160; </div>
<div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11) ||  defined (FOR_DOXYGEN_ONLY)</span></div>
<div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160; </div>
<div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;<span class="keywordtype">int</span> txPrintf (<span class="keywordtype">char</span> buffer[], <span class="keywordtype">size_t</span> size, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args);</div>
<div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160; </div>
<div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160; </div>
<div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160; </div>
<div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11) || defined (FOR_DOXYGEN_ONLY)</span></div>
<div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160; </div>
<div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;std::string txFormat (<span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args);</div>
<div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160; </div>
<div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160; </div>
<div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04380"></a><span class="lineno"><a class="line" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5"> 4380</a></span>&#160;<span class="preprocessor">#define sizearr( arr )  ( sizeof (get_size_of_an_array_with_unknown_or_nonconst_size_ (arr)) )</span></div>
<div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160; </div>
<div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;<span class="comment">//  See explanation here: http://blogs.msdn.com/b/the1/archive/2004/05/07/128242.aspx</span></div>
<div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160; </div>
<div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">size_t</span> N&gt; char (&amp;get_size_of_an_array_with_unknown_or_nonconst_size_ (T (&amp;) [N])) [N];  <span class="comment">// ;=P</span></div>
<div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160; </div>
<div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;<span class="comment">//  Another approach</span></div>
<div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160; </div>
<div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11_MSVC15)</span></div>
<div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">size_t</span> N&gt; constexpr <span class="keywordtype">size_t</span> countof (<span class="keyword">const</span> T (&amp;) [N] ) { <span class="keywordflow">return</span> N; }</div>
<div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160; </div>
<div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160; </div>
<div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;<span class="preprocessor">#define SIZEARR( arr )  ( sizeof (arr) / sizeof ((arr)[0]) )</span></div>
<div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160; </div>
<div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160; </div>
<div class="line"><a name="l04419"></a><span class="lineno"><a class="line" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881"> 4419</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a> (<span class="keywordtype">int</span> range) tx_deprecated;</div>
<div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160; </div>
<div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160; </div>
<div class="line"><a name="l04448"></a><span class="lineno"><a class="line" href="group___misc.html#ga33933dc1baf2a181b7f9fabd61a4163e"> 4448</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a> (<span class="keywordtype">double</span> left, <span class="keywordtype">double</span> right)                tx_nodiscard tx_deprecated;</div>
<div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160; </div>
<div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a> (std::nomeow_t, <span class="keywordtype">double</span> left, <span class="keywordtype">double</span> right) tx_nodiscard;</div>
<div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160; </div>
<div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160; </div>
<div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tx, <span class="keyword">typename</span> Ta, <span class="keyword">typename</span> Tb&gt;</div>
<div class="line"><a name="l04485"></a><span class="lineno"><a class="line" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31"> 4485</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (Tx x, Ta a, Tb b)                tx_nodiscard tx_deprecated;</div>
<div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160; </div>
<div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tx, <span class="keyword">typename</span> Ta, <span class="keyword">typename</span> Tb&gt;</div>
<div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow_t, Tx x, Ta a, Tb b) tx_nodiscard tx_deprecated;</div>
<div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160; </div>
<div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04539"></a><span class="lineno"><a class="line" href="group___misc.html#gadfae620e55d8798711d4a0c72f6af99e"> 4539</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (<span class="keyword">const</span> POINT&amp; pt, <span class="keyword">const</span> RECT&amp; rect)                      tx_nodiscard tx_deprecated;</div>
<div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (<span class="keyword">const</span> COORD&amp; pt, <span class="keyword">const</span> SMALL_RECT&amp; rect)                tx_nodiscard tx_deprecated;</div>
<div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160; </div>
<div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160; </div>
<div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow_t, <span class="keyword">const</span> POINT&amp; pt, <span class="keyword">const</span> RECT&amp; rect)       tx_nodiscard tx_deprecated;</div>
<div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow_t, <span class="keyword">const</span> COORD&amp; pt, <span class="keyword">const</span> SMALL_RECT&amp; rect) tx_nodiscard tx_deprecated;</div>
<div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160; </div>
<div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160; </div>
<div class="line"><a name="l04568"></a><span class="lineno"><a class="line" href="group___misc.html#gafa99ec4acc4ecb2dc3c2d05da15d0e3f"> 4568</a></span>&#160;<span class="preprocessor">#define MAX( a, b )     ( ((a) &gt; (b))? (a) : (b) )</span></div>
<div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160; </div>
<div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160; </div>
<div class="line"><a name="l04591"></a><span class="lineno"><a class="line" href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f"> 4591</a></span>&#160;<span class="preprocessor">#define MIN( a, b )     ( ((a) &lt; (b))? (a) : (b) )</span></div>
<div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160; </div>
<div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160; </div>
<div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;<span class="preprocessor">#if defined (__STDC_VERSION__) &amp;&amp; __STDC_VERSION__ &gt;= 199901L  </span><span class="comment">// MSVC: C99 case</span></div>
<div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160; </div>
<div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;<span class="preprocessor">    #define ROUND( x )  ( (long) round (x) )</span></div>
<div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160; </div>
<div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160; </div>
<div class="line"><a name="l04615"></a><span class="lineno"><a class="line" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12"> 4615</a></span>&#160;<span class="preprocessor">    #define ROUND( x )  ( (long) floor ((x) + 0.5) )</span></div>
<div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160; </div>
<div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160; </div>
<div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160; </div>
<div class="line"><a name="l04640"></a><span class="lineno"><a class="line" href="group___misc.html#ga5de732de72c46b992ac2feeac2de7e42"> 4640</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___misc.html#ga5de732de72c46b992ac2feeac2de7e42">tx_fpreset</a>();</div>
<div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160; </div>
<div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160; </div>
<div class="line"><a name="l04653"></a><span class="lineno"><a class="line" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7"> 4653</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a> = asin (1.0) * 2;</div>
<div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160; </div>
<div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160; </div>
<div class="line"><a name="l04684"></a><span class="lineno"><a class="line" href="group___misc.html#ga74ff1048e0d6bc458c9904fbbe0a6026"> 4684</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group___misc.html#ga74ff1048e0d6bc458c9904fbbe0a6026">txSqr</a> (<span class="keywordtype">double</span> x)</div>
<div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;    {</div>
<div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;    <span class="keywordtype">double</span> sqr = pow (sqrt (x) * sqrt (x), sqrt (4.0));  <span class="comment">// Бурная вычислительная деятельность</span></div>
<div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160; </div>
<div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;    <span class="keywordtype">char</span> str[1024] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;    _snprintf_s (str, <span class="keyword">sizeof</span> (str), <span class="stringliteral">&quot;Возведение дало %g!&quot;</span> <span class="stringliteral">&quot;!!&quot;</span> <span class="stringliteral">&quot;!!&quot;</span> <span class="stringliteral">&quot; Вы рады??1!!&quot;</span>, sqr);</div>
<div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;    <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (str, <span class="stringliteral">&quot;Получен ОТВЕТ!&quot;</span> <span class="stringliteral">&quot;!!&quot;</span>, MB_ICONEXCLAMATION | MB_YESNO) != IDCANCEL ||</div>
<div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;        (</div>
<div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;        <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (<span class="stringliteral">&quot;Жаль...&quot;</span>, <span class="stringliteral">&quot;А я так старалась&quot;</span>, MB_ICONINFORMATION),</div>
<div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;        <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (<span class="stringliteral">&quot;Уйду я от вас&quot;</span>, <span class="stringliteral">&quot;Злые вы...&quot;</span>,  MB_ICONSTOP),</div>
<div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;        exit (EXIT_FAILURE), 0  <span class="comment">//-V2509 //-V2014</span></div>
<div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;        );</div>
<div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160; </div>
<div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;    txNotifyIcon (1, NULL, <span class="stringliteral">&quot;\n%s\n&quot;</span>, <span class="stringliteral">&quot;Высшая математика!  \0&quot;</span>  <span class="comment">// А как это работает, а?  //-V111</span></div>
<div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;                                     <span class="stringliteral">&quot;С ума сойти...      \0&quot;</span>  <span class="comment">//</span></div>
<div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;                                     <span class="stringliteral">&quot;а КЭП подтверждает  \0&quot;</span>  <span class="comment">//       и кто это будет</span></div>
<div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;                                     <span class="stringliteral">&quot;Главное - отчитаться\0&quot;</span>  <span class="comment">//       поддерживать?..</span></div>
<div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;                                     <span class="stringliteral">&quot;Невероятно, но факт \0&quot;</span></div>
<div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;                                     <span class="stringliteral">&quot;Кто бы мог подумать?\0&quot;</span> + GetTickCount() % 6 * 21);</div>
<div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160; </div>
<div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;    <span class="keywordflow">return</span> sqr;  <span class="comment">// Все же вернем значение. Мы же не звери</span></div>
<div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;    }</div>
<div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160; </div>
<div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160; </div>
<div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;<span class="preprocessor">#define _TX_DESTROY_3D</span></div>
<div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160; </div>
<div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;<span class="preprocessor">#if defined (_TX_DESTROY_3D)</span></div>
<div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160; </div>
<div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;<span class="preprocessor">    #define z  0                   </span><span class="comment">// Читайте &quot;Флатландию&quot; Эбботта!</span></div>
<div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160; </div>
<div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160; </div>
<div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04761"></a><span class="lineno"><a class="line" href="group___misc.html#gaa25e1fdabc28195f490c7a03b7c7cbfb"> 4761</a></span>&#160;<span class="preprocessor">#define meow   ;</span></div>
<div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160; </div>
<div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;<span class="preprocessor">#if defined (_MSC_VER) &amp;&amp; !defined (_CLANG_VER)</span></div>
<div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;<span class="preprocessor">#define мяу    meow</span></div>
<div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160; </div>
<div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;<span class="preprocessor">#define please</span></div>
<div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160; </div>
<div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160; </div>
<div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160; </div>
<div class="line"><a name="l04791"></a><span class="lineno"><a class="line" href="group___misc.html#gade9b60c36576ef735b3e1d1f628ad9c6"> 4791</a></span>&#160;<span class="preprocessor">#define ZERO( type )    zero &lt;type&gt; ()</span></div>
<div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160; </div>
<div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T zero() tx_nodiscard;</div>
<div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160; </div>
<div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l04827"></a><span class="lineno"><a class="line" href="group___misc.html#gab0307cd0525c34547a286f7dc34993b7"> 4827</a></span>&#160;<span class="preprocessor">#define  tx_auto_func(    func )  _tx_auto_fun1 ( __LINE__, func )</span></div>
<div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;<span class="preprocessor">#define _tx_auto_fun1( n, func )  _tx_auto_fun2 ( n,        func )</span></div>
<div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;<span class="preprocessor">#define _tx_auto_fun2( n, func )  auto _tx_auto_func_##n = _tx_auto_func ([&amp;]() { func; })</span></div>
<div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160; </div>
<div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;<span class="preprocessor">#define tx_finally(...)           tx_auto_func (__VA_ARGS__)</span></div>
<div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160; </div>
<div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l04834"></a><span class="lineno"><a class="line" href="struct__tx__auto__func__.html"> 4834</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_</a></div>
<div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;    {</div>
<div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_&lt;T&gt;</a> <a class="code" href="struct__tx__auto__func__.html">this_t</a>;</div>
<div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;    T func_;</div>
<div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160; </div>
<div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;    <span class="keyword">explicit</span> <a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_</a> (T func) : func_ (func) {}</div>
<div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;            ~<a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_</a> ()       { func_ ();     }</div>
<div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160; </div>
<div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;    <span class="keyword">private</span>:         <a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_</a> ()              _tx_delete;</div>
<div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;                     <a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_</a> (<span class="keyword">const</span> <a class="code" href="struct__tx__auto__func__.html">this_t</a>&amp;) _tx_delete;</div>
<div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;             <a class="code" href="struct__tx__auto__func__.html">this_t</a>&amp; operator =     (<span class="keyword">const</span> <a class="code" href="struct__tx__auto__func__.html">this_t</a>&amp;) _tx_delete;</div>
<div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;    };</div>
<div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160; </div>
<div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;<a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_&lt;T&gt;</a> _tx_auto_func  (T   func)</div>
<div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;    {</div>
<div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;    <span class="keywordflow">return</span>        <a class="code" href="struct__tx__auto__func__.html">_tx_auto_func_ &lt;T&gt;</a> (func);</div>
<div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;    }</div>
<div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160; </div>
<div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160; </div>
<div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160; </div>
<div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;<span class="preprocessor">    #undef  TX_ASSERT</span></div>
<div class="line"><a name="l04904"></a><span class="lineno"><a class="line" href="group___misc.html#gaf6d32e17de45766eea363ad72824ecad"> 4904</a></span>&#160;<span class="preprocessor">    #define TX_ASSERT( cond ) _txNOP ( !(cond)? (TX_ERROR (&quot;\a&quot;</span> &quot;ВНЕЗАПНО: Логическая ошибка: &quot; \</div>
<div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;                                                           &quot;Неверно, что \&quot;%s\&quot;.&quot; TX_COMMA #cond), 1/(int)!!(cond)) : 1 )</div>
<div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;<span class="preprocessor">    #undef  TX_ASSERT</span></div>
<div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;<span class="preprocessor">    #define TX_ASSERT( cond ) ((void) 1)</span></div>
<div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160; </div>
<div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160; </div>
<div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;<span class="preprocessor">#ifdef assert</span></div>
<div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;<span class="preprocessor">    #undef assert</span></div>
<div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160; </div>
<div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;<span class="preprocessor">#define assert( cond )        TX_ASSERT (cond)</span></div>
<div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160; </div>
<div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160; </div>
<div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l04948"></a><span class="lineno"><a class="line" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7"> 4948</a></span>&#160;<span class="preprocessor">    #define asserted          || TX_ERROR (&quot;\a&quot;</span> &quot;Обнаружен нулевой или ложный результат.&quot;)</div>
<div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160; </div>
<div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;<span class="preprocessor">    #define asserted          || _txNOP (0)</span></div>
<div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160; </div>
<div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160; </div>
<div class="line"><a name="l04955"></a><span class="lineno"><a class="line" href="_t_x_lib_8h.html#a66cb8e8fe20d9d05d02e73373bda7f8a"> 4955</a></span>&#160;<span class="preprocessor">#define verified              asserted  </span></div>
<div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160; </div>
<div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;<span class="preprocessor">#define TX_NEEDED             asserted  </span></div>
<div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160; </div>
<div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160; </div>
<div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;<span class="preprocessor">    #undef  verify</span></div>
<div class="line"><a name="l04993"></a><span class="lineno"><a class="line" href="group___misc.html#ga14fecb1c008314444a74c1fe7d9a113b"> 4993</a></span>&#160;<span class="preprocessor">    #define verify            assert</span></div>
<div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160; </div>
<div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;<span class="preprocessor">    #undef  verify</span></div>
<div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;<span class="preprocessor">    #define verify( expr )    ( expr )</span></div>
<div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160; </div>
<div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160; </div>
<div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160; </div>
<div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;<span class="preprocessor">#if !defined (FOR_DOXYGEN_ONLY)</span></div>
<div class="line"><a name="l05023"></a><span class="lineno"><a class="line" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a"> 5023</a></span>&#160;<span class="preprocessor">    #define TX_ERROR( ... )   ::TX::_txError (__FILE__, __LINE__, __TX_FUNCTION__, 0, ##__VA_ARGS__)</span></div>
<div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;<span class="preprocessor">    #define TX_ERROR( msg )   ::TX::_txError (__FILE__, __LINE__, __TX_FUNCTION__, 0, msg)</span></div>
<div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160; </div>
<div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;<span class="preprocessor">    #define TX_THROW          TX_ERROR  </span></div>
<div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160; </div>
<div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160; </div>
<div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l05051"></a><span class="lineno"><a class="line" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044"> 5051</a></span>&#160;<span class="preprocessor">    #define TX_DEBUG_ERROR(...)  TX_ERROR (__VA_ARGS__)</span></div>
<div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160; </div>
<div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;<span class="preprocessor">    #define TX_DEBUG_ERROR(...)  ((void) 0)</span></div>
<div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160; </div>
<div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160; </div>
<div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160; </div>
<div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;<span class="keywordtype">void</span> txDump (<span class="keyword">const</span> <span class="keywordtype">void</span>* address, <span class="keyword">const</span> <span class="keywordtype">char</span> name[] = <span class="stringliteral">&quot;_txDump()&quot;</span>, <span class="keywordtype">bool</span> pause = <span class="keyword">true</span>);</div>
<div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160; </div>
<div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160; </div>
<div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;<span class="preprocessor">#define txDump( ... )           _txDump ((const void*)(uintptr_t) __VA_ARGS__)</span></div>
<div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;<span class="preprocessor">#define txDump( address, ... )  _txDump ((const void*)(uintptr_t) (address), #address, ##__VA_ARGS__)</span></div>
<div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160; </div>
<div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;<span class="keywordtype">void</span> _txDump (<span class="keyword">const</span> <span class="keywordtype">void</span>* address, <span class="keyword">const</span> <span class="keywordtype">char</span> name[] = <span class="stringliteral">&quot;_txDump()&quot;</span>, <span class="keywordtype">bool</span> pause = <span class="keyword">true</span>);</div>
<div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160; </div>
<div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160; </div>
<div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160; </div>
<div class="line"><a name="l05124"></a><span class="lineno"><a class="line" href="group___misc.html#gae1f5bb8bcc99e21ed8dc46493027b267"> 5124</a></span>&#160;<span class="preprocessor">#define txStackBackTrace()    _txStackBackTrace (__FILE__, __LINE__, __TX_FUNCTION__, true);</span></div>
<div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160; </div>
<div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05151"></a><span class="lineno"><a class="line" href="group___misc.html#gafbd4278ff893fc1c1e28b086197adebe"> 5151</a></span>&#160;std::string <a class="code" href="group___misc.html#gafbd4278ff893fc1c1e28b086197adebe">txDemangle</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* mangledName);</div>
<div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;<span class="keywordtype">char</span>*       <a class="code" href="group___misc.html#gafbd4278ff893fc1c1e28b086197adebe">txDemangle</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* mangledName, std::nomeow_t);</div>
<div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160; </div>
<div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;<span class="preprocessor">#define txTypename(value)     txDemangle (typeid (value) .name()) .c_str()</span></div>
<div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160; </div>
<div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160; </div>
<div class="line"><a name="l05186"></a><span class="lineno"><a class="line" href="group___misc.html#gad942f797bce07af74cd11c88d50ddd3e"> 5186</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#gad942f797bce07af74cd11c88d50ddd3e">txRegQuery</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* keyName, <span class="keyword">const</span> <span class="keywordtype">char</span>* valueName, <span class="keywordtype">void</span>* value, <span class="keywordtype">size_t</span> szValue);</div>
<div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160; </div>
<div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05204"></a><span class="lineno"><a class="line" href="group___misc.html#gae4dfd7b0d66121016d6466d2ff10e8ba"> 5204</a></span>&#160;<span class="preprocessor">#define _                     ,</span></div>
<div class="line"><a name="l05205"></a><span class="lineno"><a class="line" href="group___misc.html#gaaff3c8e496327bec13a821061787878f"> 5205</a></span>&#160;<span class="preprocessor">#define TX_COMMA              ,  </span></div>
<div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160; </div>
<div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160; </div>
<div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160; </div>
<div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160; </div>
<div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;<span class="preprocessor">    #define TX_DLLIMPORT( required, libName, retValType, funcName, funcParams, callType )</span></div>
<div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160; </div>
<div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160; </div>
<div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;    <span class="comment">// Hand-made DLLIMPORT helper</span></div>
<div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160; </div>
<div class="line"><a name="l05279"></a><span class="lineno"><a class="line" href="group___misc.html#gac3163c41843503fb9ed5b51d37fbfb66"> 5279</a></span>&#160;<span class="preprocessor">    #define TX_DLLIMPORT( required, libName, retValType, funcName, funcParams, ... )               \</span></div>
<div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;<span class="preprocessor">            retValType (__VA_ARGS__* funcName) funcParams = (retValType (__VA_ARGS__*) funcParams) \</span></div>
<div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;<span class="preprocessor">                                                            _txDllImport ((libName), #funcName, (required))</span></div>
<div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160; </div>
<div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160; </div>
<div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;<span class="comment">//{          Back-hole (I hope, not an ass-hole:) of the library)</span></div>
<div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160; </div>
<div class="line"><a name="l05447"></a><span class="lineno"><a class="line" href="group___misc.html#ga30fb1a6913174dfcea5079391f655be2"> 5447</a></span>&#160;WNDPROC <a class="code" href="group___misc.html#ga30fb1a6913174dfcea5079391f655be2">txSetWindowsHook</a> (WNDPROC wndProc = NULL);</div>
<div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160; </div>
<div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160; </div>
<div class="line"><a name="l05476"></a><span class="lineno"><a class="line" href="group___misc.html#ga532fa8a55c4f3d4f94ff0fdceae732b2"> 5476</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga532fa8a55c4f3d4f94ff0fdceae732b2">txLock</a> (<span class="keywordtype">bool</span> wait = <span class="keyword">true</span>);</div>
<div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160; </div>
<div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l05492"></a><span class="lineno"><a class="line" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6"> 5492</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a>();</div>
<div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160; </div>
<div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> T <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a> (T value);</div>
<div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160; </div>
<div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160; </div>
<div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160; </div>
<div class="line"><a name="l05525"></a><span class="lineno"><a class="line" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287"> 5525</a></span>&#160;<span class="preprocessor">#define txGDI( command, dc )  ( ((dc) == txDC())? txUnlock ( (txLock(), (command)) ) : (command) )</span></div>
<div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160; </div>
<div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160; </div>
<div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;<span class="preprocessor">#ifndef   FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160; </div>
<div class="line"><a name="l05554"></a><span class="lineno"><a class="line" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32"> 5554</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>     <a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>  =   1251;</div>
<div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160; </div>
<div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;<span class="preprocessor">#ifndef __CYGWIN__</span></div>
<div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>    _TX_LOCALE[]  =  <span class="stringliteral">&quot;Russian&quot;</span>;</div>
<div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>    _TX_LOCALE[]  =  <span class="stringliteral">&quot;ru_RU.CP1251&quot;</span>;</div>
<div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160; </div>
<div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;<span class="keyword">const</span> <span class="keywordtype">wchar_t</span> _TX_WLOCALE[] = L<span class="stringliteral">&quot;Russian_Russia.ACP&quot;</span>;</div>
<div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160; </div>
<div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160; </div>
<div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;<span class="keywordtype">int</span> txSetLocale (<span class="keywordtype">int</span> codepage = <a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> locale[] = _TX_LOCALE, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span> wLocale[] = _TX_WLOCALE);</div>
<div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160; </div>
<div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160; </div>
<div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;<span class="comment">//{          Tune-up constants and variables</span></div>
<div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160; </div>
<div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED</span></div>
<div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160; </div>
<div class="line"><a name="l05591"></a><span class="lineno"><a class="line" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884"> 5591</a></span>&#160;       <span class="keywordtype">char</span> <a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>[MAX_PATH]          = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160; </div>
<div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160; </div>
<div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">char</span> <a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>[];</div>
<div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160; </div>
<div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160; </div>
<div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;<span class="preprocessor">#if  defined  (_TX_NOINIT)</span></div>
<div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160; </div>
<div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;<span class="preprocessor">    #undef     _TX_NOINIT</span></div>
<div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;<span class="preprocessor">    #define    _TX_NOINIT                 1</span></div>
<div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160; </div>
<div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160; </div>
<div class="line"><a name="l05638"></a><span class="lineno"><a class="line" href="group___technical.html#gaab281ee20ea6be5eae34d0e15bf03dcf"> 5638</a></span>&#160;<span class="preprocessor">    #define    _TX_NOINIT                 0</span></div>
<div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160; </div>
<div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160; </div>
<div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160; </div>
<div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;<span class="preprocessor">#if !defined (TX_CONSOLE_MODE)</span></div>
<div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160; </div>
<div class="line"><a name="l05690"></a><span class="lineno"><a class="line" href="group___technical.html#ga82c63be7c47e2b13e5b6f7661cc3fbe4"> 5690</a></span>&#160;<span class="preprocessor">    #define   TX_CONSOLE_MODE             SW_HIDE</span></div>
<div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160; </div>
<div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160; </div>
<div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160; </div>
<div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;<span class="preprocessor">#if !defined (TX_CONSOLE_FONT)</span></div>
<div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160; </div>
<div class="line"><a name="l05702"></a><span class="lineno"><a class="line" href="group___technical.html#gada3539ec53f9e712cf1e0aceafaecf97"> 5702</a></span>&#160;<span class="preprocessor">    #define   TX_CONSOLE_FONT             &quot;Lucida Console&quot;</span></div>
<div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160; </div>
<div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160; </div>
<div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160; </div>
<div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED</span></div>
<div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160; </div>
<div class="line"><a name="l05721"></a><span class="lineno"><a class="line" href="group___technical.html#ga4ddb32d7a8a676537014da7aea7bf273"> 5721</a></span>&#160;       <span class="keywordtype">int</span> <a class="code" href="group___technical.html#ga4ddb32d7a8a676537014da7aea7bf273">_txWindowStyle</a>                 = WS_POPUP | WS_BORDER | WS_CAPTION | WS_SYSMENU;</div>
<div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160; </div>
<div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160; </div>
<div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span> <a class="code" href="group___technical.html#ga4ddb32d7a8a676537014da7aea7bf273">_txWindowStyle</a>;</div>
<div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160; </div>
<div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160; </div>
<div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED</span></div>
<div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160; </div>
<div class="line"><a name="l05734"></a><span class="lineno"><a class="line" href="group___technical.html#gacc95bfbcf7a0f9124e8cd5e80d0b3cd3"> 5734</a></span>&#160;       <span class="keywordtype">unsigned</span> <a class="code" href="group___technical.html#gacc95bfbcf7a0f9124e8cd5e80d0b3cd3">_txCursorBlinkInterval</a>    = 500;</div>
<div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160; </div>
<div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160; </div>
<div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <a class="code" href="group___technical.html#gacc95bfbcf7a0f9124e8cd5e80d0b3cd3">_txCursorBlinkInterval</a>;</div>
<div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160; </div>
<div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160; </div>
<div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED</span></div>
<div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160; </div>
<div class="line"><a name="l05748"></a><span class="lineno"><a class="line" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a"> 5748</a></span>&#160;       <span class="keywordtype">unsigned</span> <a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a>   = 25;</div>
<div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160; </div>
<div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160; </div>
<div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">unsigned</span> <a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a>;</div>
<div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160; </div>
<div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160; </div>
<div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;<span class="preprocessor">#define       TX_USE_SFML</span></div>
<div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160; </div>
<div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160; </div>
<div class="line"><a name="l05774"></a><span class="lineno"><a class="line" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac"> 5774</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>                     = 1000</div>
<div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160; </div>
<div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;<span class="preprocessor">#if  defined  (_TX_ALLOW_TRACE)</span></div>
<div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;    * 2</div>
<div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160; </div>
<div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;<span class="preprocessor">#if  defined  (TX_TRACE)</span></div>
<div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;    * 3</div>
<div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160; </div>
<div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;<span class="preprocessor">#if  defined  (_TX_USE_DEVPARTNER)</span></div>
<div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;    * 10</div>
<div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;    ;</div>
<div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160; </div>
<div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160; </div>
<div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED</span></div>
<div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160; </div>
<div class="line"><a name="l05834"></a><span class="lineno"><a class="line" href="group___technical.html#gad85278fd5caaf0ce42e307d6ce8d79c5"> 5834</a></span>&#160;       bool (*<a class="code" href="group___technical.html#gad85278fd5caaf0ce42e307d6ce8d79c5">_txSwapBuffers</a>) (HDC dest, <span class="keywordtype">int</span> xDest, <span class="keywordtype">int</span> yDest, <span class="keywordtype">int</span> wDest, <span class="keywordtype">int</span> hDest,</div>
<div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;                               HDC src,  <span class="keywordtype">int</span> xSrc,  <span class="keywordtype">int</span> ySrc,  <span class="keywordtype">int</span> wSrc,  <span class="keywordtype">int</span> hSrc, DWORD rOp) = NULL;</div>
<div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160; </div>
<div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160; </div>
<div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;<span class="keyword">extern</span> bool (*<a class="code" href="group___technical.html#gad85278fd5caaf0ce42e307d6ce8d79c5">_txSwapBuffers</a>) (HDC dest, <span class="keywordtype">int</span> xDest, <span class="keywordtype">int</span> yDest, <span class="keywordtype">int</span> wDest, <span class="keywordtype">int</span> hDest,</div>
<div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;                               HDC src,  <span class="keywordtype">int</span> xSrc,  <span class="keywordtype">int</span> ySrc,  <span class="keywordtype">int</span> wSrc,  <span class="keywordtype">int</span> hSrc, DWORD rOp);</div>
<div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160; </div>
<div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160; </div>
<div class="line"><a name="l05847"></a><span class="lineno"><a class="line" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25"> 5847</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>                =  1024,</div>
<div class="line"><a name="l05848"></a><span class="lineno"><a class="line" href="group___technical.html#gaa7273b2f613970c283053c5d9136addd"> 5848</a></span>&#160;               <a class="code" href="group___technical.html#gaa7273b2f613970c283053c5d9136addd">_TX_BIGBUFSIZE</a>             = <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a> *  2,  </div>
<div class="line"><a name="l05849"></a><span class="lineno"><a class="line" href="group___technical.html#ga9982623aefbe28deab03b1252777ec2a"> 5849</a></span>&#160;               <a class="code" href="group___technical.html#ga9982623aefbe28deab03b1252777ec2a">_TX_HUGEBUFSIZE</a>            = <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a> * 20,  </div>
<div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160; </div>
<div class="line"><a name="l05851"></a><span class="lineno"><a class="line" href="group___technical.html#ga7b8b43782557dd87528da77b083364ec"> 5851</a></span>&#160;               <a class="code" href="group___technical.html#ga7b8b43782557dd87528da77b083364ec">_TX_STACKSIZE</a>              = 64 * 1024;         </div>
<div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160; </div>
<div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160; </div>
<div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;<span class="preprocessor">#if !defined (_TX_EXCEPTIONS_LIMIT)</span></div>
<div class="line"><a name="l05859"></a><span class="lineno"><a class="line" href="group___technical.html#ga15dc1a04b8701e2db400b005b7a17ced"> 5859</a></span>&#160;<span class="preprocessor">    #define   _TX_EXCEPTIONS_LIMIT        16</span></div>
<div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160; </div>
<div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;<span class="preprocessor">#if !defined (_TX_FATAL_EXCEPTIONS_LIMIT)</span></div>
<div class="line"><a name="l05863"></a><span class="lineno"><a class="line" href="group___technical.html#gaf274c058737ec7e680437d2a1cdcd7b6"> 5863</a></span>&#160;<span class="preprocessor">    #define   _TX_FATAL_EXCEPTIONS_LIMIT  16                   </span></div>
<div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160; </div>
<div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160; </div>
<div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;<span class="preprocessor">#define       _TX_FULL_STACKTRACE</span></div>
<div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160; </div>
<div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160; </div>
<div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED</span></div>
<div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160; </div>
<div class="line"><a name="l05882"></a><span class="lineno"><a class="line" href="group___technical.html#ga90ceca3b49e5f889f5f07a996b28b0b3"> 5882</a></span>&#160;       <span class="keywordtype">bool</span> <a class="code" href="group___technical.html#ga90ceca3b49e5f889f5f07a996b28b0b3">_txProcessSystemWarnings</a>      = <span class="keyword">true</span>;</div>
<div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160; </div>
<div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160; </div>
<div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">bool</span> <a class="code" href="group___technical.html#ga90ceca3b49e5f889f5f07a996b28b0b3">_txProcessSystemWarnings</a>;</div>
<div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160; </div>
<div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160; </div>
<div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;<span class="preprocessor">#if !defined  (_TX_WAITABLE_PARENTS)</span></div>
<div class="line"><a name="l05905"></a><span class="lineno"><a class="line" href="group___technical.html#ga2c0a4fe0612f109c5c88d6d55a061db5"> 5905</a></span>&#160;<span class="preprocessor">    #define    _TX_WAITABLE_PARENTS       &quot;Winpty-agent.exe:Clion.exe, &quot;</span>            <span class="comment">/* 0: CLion32       */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;<span class="preprocessor">                                          &quot;Winpty-agent.exe:Clion64.exe, &quot;</span>          <span class="comment">/* 1: CLion64       */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;<span class="preprocessor">                                          &quot;starter.exe:eclipse.exe, &quot;</span>               <span class="comment">/* 2: Eclipse 4     */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;<span class="preprocessor">                                          &quot;starter.exe:javaw.exe, &quot;</span>                 <span class="comment">/* 3: Eclipse 3     */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;<span class="preprocessor">                                          &quot;cmd.exe:devenv.exe, &quot;</span>                    <span class="comment">/* 4: MSVS 2003+    */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;<span class="preprocessor">                                          &quot;VSDebugConsole.exe:devenv.exe, &quot;</span>         <span class="comment">/* 5: MSVS 2019     */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;<span class="preprocessor">                                          &quot;consolepauser.exe:devcpp.exe, &quot;</span>          <span class="comment">/* 6: Dev-Cpp       */</span><span class="preprocessor"> \</span></div>
<div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;<span class="preprocessor">                                          &quot;cb_console_runner.exe:codeblocks.exe&quot;</span>    <span class="comment">/* 7: CodeBlocks 8+ */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160; </div>
<div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160; </div>
<div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;<span class="preprocessor">#if !defined (_TX_ALLOW_KILL_PARENT)            </span><span class="comment">// DISCLAIMER: Я не призываю к убийству родителей.</span></div>
<div class="line"><a name="l05937"></a><span class="lineno"><a class="line" href="group___technical.html#ga9a495d013c6f08cd50220aca99ca56c2"> 5937</a></span>&#160;<span class="preprocessor">    #define   _TX_ALLOW_KILL_PARENT       true  </span><span class="comment">//             Это технический термин.</span></div>
<div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;<span class="preprocessor">#endif                                          </span><span class="comment">//             г_дам юристам привет.</span></div>
<div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160; </div>
<div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160; </div>
<div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED</span></div>
<div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160; </div>
<div class="line"><a name="l05954"></a><span class="lineno"><a class="line" href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc"> 5954</a></span>&#160;       <span class="keywordtype">int</span>    <a class="code" href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc">_txWatchdogTimeout</a>          = 10*<a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>;</div>
<div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160; </div>
<div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160; </div>
<div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;<span class="keyword">extern</span> <span class="keywordtype">int</span>    <a class="code" href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc">_txWatchdogTimeout</a>;</div>
<div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160; </div>
<div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160; </div>
<div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;<span class="preprocessor">    #define TX_COMPILED</span></div>
<div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160; </div>
<div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160; </div>
<div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160; </div>
<div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160; </div>
<div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;<span class="comment">//{          Internal diagnostics</span></div>
<div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160; </div>
<div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;<span class="preprocessor">#define _TX_ALLOW_TRACE</span></div>
<div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160; </div>
<div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160; </div>
<div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;<span class="preprocessor">#ifdef FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;<span class="preprocessor">#define       TX_TRACE</span></div>
<div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160; </div>
<div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;<span class="preprocessor">#if !defined (TX_TRACE)</span></div>
<div class="line"><a name="l06132"></a><span class="lineno"><a class="line" href="group___technical.html#ga2aa2550a5302deb4d46b3759b26f4b41"> 6132</a></span>&#160;<span class="preprocessor">    #define   TX_TRACE  { if (_txLoc::Cur.trace) _txTrace (__FILE__, __LINE__, __TX_FUNCTION__); }</span></div>
<div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160; </div>
<div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;<span class="keywordtype">void</span> _txTrace (<span class="keyword">const</span> <span class="keywordtype">char</span> file[], <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span> func[], <span class="keyword">const</span> <span class="keywordtype">char</span> msg[] = NULL, ...);</div>
<div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160; </div>
<div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;<span class="preprocessor">#ifndef   FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160; </div>
<div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;<span class="keyword">struct </span>_txLoc</div>
<div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;    {</div>
<div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>*   func;</div>
<div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>*   file;</div>
<div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;    <span class="keywordtype">int</span>           line;</div>
<div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160; </div>
<div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;    <span class="keywordtype">int</span>           inTX;   <span class="comment">// We are inside one of TXLib functions</span></div>
<div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;    <span class="keywordtype">int</span>           trace;  <span class="comment">// Internal TX trace level, when enabled by _TX_ALLOW_TRACE</span></div>
<div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160; </div>
<div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;    <span class="keyword">const</span> _txLoc* prev;   <span class="comment">// Caller&#39;s location</span></div>
<div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160; </div>
<div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;    <span class="keyword">static</span> _txLoc _tx_thread Cur;</div>
<div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;    };</div>
<div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160; </div>
<div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;<span class="keyword">struct </span>_txFuncEntry</div>
<div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;    {</div>
<div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;    <span class="keyword">typedef</span> _txFuncEntry this_t;</div>
<div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160; </div>
<div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;    _txLoc loc;</div>
<div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160; </div>
<div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;    _txFuncEntry() : loc (_txLoc::Cur) { _txLoc::Cur.inTX++; _txLoc::Cur.prev = &amp;loc; }</div>
<div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;    <span class="keywordtype">void</span> restore()                     { _txLoc::Cur = loc;                           }</div>
<div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;   ~_txFuncEntry()                     { restore();                                   }</div>
<div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160; </div>
<div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;            _txFuncEntry (<span class="keyword">const</span> this_t&amp;) _tx_delete;</div>
<div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;    this_t&amp; operator =   (<span class="keyword">const</span> this_t&amp;) _tx_delete;</div>
<div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;    };</div>
<div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160; </div>
<div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;<span class="preprocessor">#if defined (_GCC_VER)</span></div>
<div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160; </div>
<div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;    <span class="keyword">inline</span> <span class="keywordtype">void</span> __txLocCurSet (<span class="keyword">const</span> <span class="keywordtype">char</span>* _file, <span class="keywordtype">int</span> _line, <span class="keyword">const</span> <span class="keywordtype">char</span>* _func)</div>
<div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;        { _txLoc::Cur.file = _file; _txLoc::Cur.line = _line; _txLoc::Cur.func = _func; }</div>
<div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160; </div>
<div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160; </div>
<div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;<span class="preprocessor">    #define __txLocCurSet( _file, _line, _func ) \</span></div>
<div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;<span class="preprocessor">        ( _txLoc::Cur.file = (_file), _txLoc::Cur.line = (_line), _txLoc::Cur.func = (_func) )</span></div>
<div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160; </div>
<div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160; </div>
<div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;<span class="preprocessor">#define _txLocCurSet()     __txLocCurSet (__FILE__, __LINE__, __TX_FUNCTION__)</span></div>
<div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160; </div>
<div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;<span class="preprocessor">#define _txLocLvlSet(lvl)  { _txLoc::Cur.trace = (lvl); }</span></div>
<div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160; </div>
<div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160; </div>
<div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;<span class="preprocessor">#if defined ($0)</span></div>
<div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;<span class="preprocessor">    #undef   $0</span></div>
<div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160; </div>
<div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;<span class="preprocessor">#if defined ($1)</span></div>
<div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;<span class="preprocessor">    #undef   $1</span></div>
<div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160; </div>
<div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;<span class="preprocessor">#if defined ($2)</span></div>
<div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;<span class="preprocessor">    #undef   $2</span></div>
<div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160; </div>
<div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;<span class="preprocessor">#if defined ($3)</span></div>
<div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;<span class="preprocessor">    #undef   $3</span></div>
<div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160; </div>
<div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;<span class="preprocessor">#if defined ($4)</span></div>
<div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;<span class="preprocessor">    #undef   $4</span></div>
<div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160; </div>
<div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;<span class="preprocessor">#if defined ($5)</span></div>
<div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;<span class="preprocessor">    #undef   $5</span></div>
<div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160; </div>
<div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;<span class="preprocessor">#if defined ($6)</span></div>
<div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;<span class="preprocessor">    #undef   $6</span></div>
<div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160; </div>
<div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;<span class="preprocessor">#if defined ($7)</span></div>
<div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;<span class="preprocessor">    #undef   $7</span></div>
<div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160; </div>
<div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;<span class="preprocessor">#if defined ($8)</span></div>
<div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;<span class="preprocessor">    #undef   $8</span></div>
<div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160; </div>
<div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;<span class="preprocessor">#if defined ($9)</span></div>
<div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;<span class="preprocessor">    #undef   $9</span></div>
<div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160; </div>
<div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;<span class="preprocessor">#if defined ($)</span></div>
<div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;<span class="preprocessor">    #undef   $</span></div>
<div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160; </div>
<div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;<span class="preprocessor">#if defined ($$)</span></div>
<div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;<span class="preprocessor">    #undef   $$</span></div>
<div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160; </div>
<div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160; </div>
<div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;<span class="preprocessor">#if defined (_TX_ALLOW_TRACE)</span></div>
<div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160; </div>
<div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;<span class="preprocessor">    #define _txEntry(lvl)  _txFuncEntry __txFuncEntry; { if (lvl) _txLocLvlSet (lvl);    $;          }</span></div>
<div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160; </div>
<div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;<span class="preprocessor">    #define  $           { _txLocCurSet(); if (_txLoc::Cur.trace &lt;= _TX_ALLOW_TRACE+0) { TX_TRACE; } }</span></div>
<div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160; </div>
<div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;<span class="preprocessor">    #define  $$          { __txFuncEntry.restore();                                                  }</span></div>
<div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160; </div>
<div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;<span class="preprocessor">#elif defined (_DEBUG)</span></div>
<div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160; </div>
<div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;<span class="preprocessor">    #define _txEntry(lvl)  _txFuncEntry __txFuncEntry; {                                 $;          }</span></div>
<div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160; </div>
<div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;<span class="preprocessor">    #define  $           { _txLocCurSet();                                                           }</span></div>
<div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160; </div>
<div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;<span class="preprocessor">    #define  $$          { __txFuncEntry.restore();                                                  }</span></div>
<div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160; </div>
<div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160; </div>
<div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;<span class="preprocessor">    #define _txEntry(lvl)  ;</span></div>
<div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;<span class="preprocessor">    #define  $             ;</span></div>
<div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;<span class="preprocessor">    #define  $$            ;</span></div>
<div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160; </div>
<div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160; </div>
<div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160; </div>
<div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;<span class="preprocessor">#define      $0            _txEntry (0)  </span><span class="comment">// (Log level unchanged)</span></div>
<div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;<span class="preprocessor">#define      $1            _txEntry (1)  </span><span class="comment">// Regular functions</span></div>
<div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;<span class="preprocessor">#define      $2            _txEntry (2)  </span><span class="comment">// Resvd</span></div>
<div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;<span class="preprocessor">#define      $3            _txEntry (3)  </span><span class="comment">// Init/Cleanup</span></div>
<div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;<span class="preprocessor">#define      $4            _txEntry (4)  </span><span class="comment">// Init/Cleanup, misc functions</span></div>
<div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;<span class="preprocessor">#define      $5            _txEntry (5)  </span><span class="comment">// Error handling, entry points</span></div>
<div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;<span class="preprocessor">#define      $6            _txEntry (6)  </span><span class="comment">// Error handling, main part</span></div>
<div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;<span class="preprocessor">#define      $7            _txEntry (7)  </span><span class="comment">// Error handling, misc functions</span></div>
<div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;<span class="preprocessor">#define      $8            _txEntry (8)  </span><span class="comment">// Canvas worker thread</span></div>
<div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;<span class="preprocessor">#define      $9            _txEntry (9)  </span><span class="comment">// Resvd</span></div>
<div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160; </div>
<div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160; </div>
<div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160; </div>
<div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;<span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160; </div>
<div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160; </div>
<div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;<span class="comment">//{          Sweet critical section blocking: txAutoLock class</span></div>
<div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160; </div>
<div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160; </div>
<div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;<span class="keyword">extern</span> CRITICAL_SECTION _txCanvas_LockBackBuf;</div>
<div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160; </div>
<div class="line"><a name="l06319"></a><span class="lineno"><a class="line" href="classtx_auto_lock.html"> 6319</a></span>&#160;<span class="keyword">class </span><a class="code" href="classtx_auto_lock.html">txAutoLock</a></div>
<div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;    {</div>
<div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classtx_auto_lock.html">txAutoLock</a> <a class="code" href="classtx_auto_lock.html">this_t</a>;</div>
<div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160; </div>
<div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160; </div>
<div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160; </div>
<div class="line"><a name="l06350"></a><span class="lineno"><a class="line" href="classtx_auto_lock.html#af28070ec9fc2a4466cb7dbd0868c9616"> 6350</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="classtx_auto_lock.html#af28070ec9fc2a4466cb7dbd0868c9616">txAutoLock</a> (CRITICAL_SECTION* cs, <span class="keywordtype">bool</span> mandatory = <span class="keyword">true</span>) :</div>
<div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;        <a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a> (cs)</div>
<div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;        {</div>
<div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;$1      <span class="keywordflow">if</span> (!<a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160; </div>
<div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;        <span class="keywordflow">if</span> (mandatory) {$    EnterCriticalSection (<a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a>);                   }</div>
<div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;        <span class="keywordflow">else</span>           {$ TryEnterCriticalSection (<a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a>)? 0 : (<a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a> = NULL); }</div>
<div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;        }</div>
<div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160; </div>
<div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160; </div>
<div class="line"><a name="l06374"></a><span class="lineno"><a class="line" href="classtx_auto_lock.html#acc8301ae37ef7ee9d5b9c774d27da379"> 6374</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="classtx_auto_lock.html#acc8301ae37ef7ee9d5b9c774d27da379">txAutoLock</a> (<span class="keywordtype">bool</span> mandatory = <span class="keyword">true</span>) :</div>
<div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;        <a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a> (NULL)</div>
<div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;        {</div>
<div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;$1      <span class="keyword">new</span> (<span class="keyword">this</span>) <a class="code" href="classtx_auto_lock.html">txAutoLock</a> (&amp;_txCanvas_LockBackBuf, mandatory);</div>
<div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;        }</div>
<div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160; </div>
<div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160; </div>
<div class="line"><a name="l06384"></a><span class="lineno"><a class="line" href="classtx_auto_lock.html#a838aae52b26597bf7aa0cd931611dca4"> 6384</a></span>&#160;   <a class="code" href="classtx_auto_lock.html#a838aae52b26597bf7aa0cd931611dca4">~txAutoLock</a>()</div>
<div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;        {</div>
<div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;$1      <span class="keywordflow">if</span> (!<a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;$       LeaveCriticalSection (<a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a>); <a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a> = NULL;</div>
<div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;        }</div>
<div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160; </div>
<div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160; </div>
<div class="line"><a name="l06395"></a><span class="lineno"><a class="line" href="classtx_auto_lock.html#a4c6250ede5d5b2d2ad57d8254aa7c72f"> 6395</a></span>&#160;    <span class="keyword">operator</span> bool ()<span class="keyword"> const</span></div>
<div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;<span class="keyword">        </span>{</div>
<div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;$1      <span class="keywordflow">return</span> (<a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a> != NULL);</div>
<div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;        }</div>
<div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160; </div>
<div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160; </div>
<div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;<span class="comment">//  private:</span></div>
<div class="line"><a name="l06405"></a><span class="lineno"><a class="line" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f"> 6405</a></span>&#160;    CRITICAL_SECTION* <a class="code" href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">cs_</a>;</div>
<div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160; </div>
<div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;            <a class="code" href="classtx_auto_lock.html#af28070ec9fc2a4466cb7dbd0868c9616">txAutoLock</a> (<span class="keyword">const</span> <a class="code" href="classtx_auto_lock.html">this_t</a>&amp;) _tx_delete;</div>
<div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;    <a class="code" href="classtx_auto_lock.html">this_t</a>&amp; operator = (<span class="keyword">const</span> <a class="code" href="classtx_auto_lock.html">this_t</a>&amp;) _tx_delete;</div>
<div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160; </div>
<div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160; </div>
<div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;    };</div>
<div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160; </div>
<div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160; </div>
<div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;<span class="comment">//{          Dialogs: txDialog class</span></div>
<div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160; </div>
<div class="line"><a name="l06451"></a><span class="lineno"><a class="line" href="structtx_dialog.html"> 6451</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structtx_dialog.html">txDialog</a></div>
<div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;    {</div>
<div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;    <span class="keyword">typedef</span> <a class="code" href="structtx_dialog.html">txDialog</a> <a class="code" href="structtx_dialog.html">this_t</a>;</div>
<div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160; </div>
<div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160; </div>
<div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l06471"></a><span class="lineno"><a class="line" href="group___dialogs.html#ga5b47575087d696b5fddf972ce4d83657"> 6471</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="group___dialogs.html#ga5b47575087d696b5fddf972ce4d83657">CONTROL</a></div>
<div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;        {</div>
<div class="line"><a name="l06473"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a1988e748c6846b398b020c0cb6f057ab"> 6473</a></span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a1988e748c6846b398b020c0cb6f057ab">DIALOG</a>    = (int) 0x00000000,            </div>
<div class="line"><a name="l06474"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aa4f15111fd03f7781dd5e910c9476085"> 6474</a></span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aa4f15111fd03f7781dd5e910c9476085">BUTTON</a>    = (<span class="keywordtype">int</span>) 0xFFFF0080,            </div>
<div class="line"><a name="l06475"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aef6361d5dcbf8ce520f398a079b414cb"> 6475</a></span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aef6361d5dcbf8ce520f398a079b414cb">EDIT</a>      = (int) 0xFFFF0081,            </div>
<div class="line"><a name="l06476"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aec6c84113cb4f1cd430238d4b909b40a"> 6476</a></span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aec6c84113cb4f1cd430238d4b909b40a">STATIC</a>    = (<span class="keywordtype">int</span>) 0xFFFF0082,            </div>
<div class="line"><a name="l06477"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a71c9095b5417af67a6a9b4a5140a09ea"> 6477</a></span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a71c9095b5417af67a6a9b4a5140a09ea">LISTBOX</a>   = (int) 0xFFFF0083,            </div>
<div class="line"><a name="l06478"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657af7644a14f317118ad12a6c5eaa216e9f"> 6478</a></span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657af7644a14f317118ad12a6c5eaa216e9f">SCROLLBAR</a> = (<span class="keywordtype">int</span>) 0xFFFF0084,            </div>
<div class="line"><a name="l06479"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a5e7719d9f62ad1839c67e21e8ebf64e2"> 6479</a></span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a5e7719d9f62ad1839c67e21e8ebf64e2">COMBOBOX</a>  = (int) 0xFFFF0085,            </div>
<div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;        <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a342a4f0af79f46e07894a95e5951b7aa">END</a>       = (<span class="keywordtype">int</span>) 0x00000000             </div>
<div class="line"><a name="l06481"></a><span class="lineno"><a class="line" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a342a4f0af79f46e07894a95e5951b7aa"> 6481</a></span>&#160;        };</div>
<div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160; </div>
<div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160; </div>
<div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l06503"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html"> 6503</a></span>&#160;    <span class="keyword">struct </span><a class="code" href="structtx_dialog_1_1_layout.html">Layout</a></div>
<div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;        {                                        <span class="comment">//-V802</span></div>
<div class="line"><a name="l06505"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#a2591914a85c05cce0fc862df1a569064"> 6505</a></span>&#160;        <a class="code" href="group___dialogs.html#ga5b47575087d696b5fddf972ce4d83657">CONTROL</a>     <a class="code" href="structtx_dialog_1_1_layout.html#a2591914a85c05cce0fc862df1a569064">wndclass</a>;                    </div>
<div class="line"><a name="l06506"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#a92bbfc790a6ba7c937e9e26491a46209"> 6506</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="structtx_dialog_1_1_layout.html#a92bbfc790a6ba7c937e9e26491a46209">caption</a>;                     </div>
<div class="line"><a name="l06507"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#aa1a483bb785e2564e3a478f9c2e248da"> 6507</a></span>&#160;        WORD        <a class="code" href="structtx_dialog_1_1_layout.html#aa1a483bb785e2564e3a478f9c2e248da">id</a>;                          </div>
<div class="line"><a name="l06508"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#a6291f513b3eeb124b0c431c4823a2293"> 6508</a></span>&#160;        <span class="keywordtype">short</span>        <a class="code" href="structtx_dialog_1_1_layout.html#a6291f513b3eeb124b0c431c4823a2293">x</a>;                          </div>
<div class="line"><a name="l06509"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#a21d57dc612006b3b3ee8a513ab35cdbb"> 6509</a></span>&#160;        <span class="keywordtype">short</span>        <a class="code" href="structtx_dialog_1_1_layout.html#a21d57dc612006b3b3ee8a513ab35cdbb">y</a>;                          </div>
<div class="line"><a name="l06510"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#a16c20d9825dc75ca91ce750b6b547d6a"> 6510</a></span>&#160;        <span class="keywordtype">short</span>       <a class="code" href="structtx_dialog_1_1_layout.html#a16c20d9825dc75ca91ce750b6b547d6a">sx</a>;                          </div>
<div class="line"><a name="l06511"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#ab54d04b7a9c3df4cd9596af74246da47"> 6511</a></span>&#160;        <span class="keywordtype">short</span>       <a class="code" href="structtx_dialog_1_1_layout.html#ab54d04b7a9c3df4cd9596af74246da47">sy</a>;                          </div>
<div class="line"><a name="l06512"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#a9b6528a0f3cd2b08cf78f947ad5bafab"> 6512</a></span>&#160;        DWORD       <a class="code" href="structtx_dialog_1_1_layout.html#a9b6528a0f3cd2b08cf78f947ad5bafab">style</a>;                       </div>
<div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160; </div>
<div class="line"><a name="l06514"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#a2fe7acf9e635627242825e58b2ff83ec"> 6514</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="structtx_dialog_1_1_layout.html#a2fe7acf9e635627242825e58b2ff83ec">font</a>;                        </div>
<div class="line"><a name="l06515"></a><span class="lineno"><a class="line" href="structtx_dialog_1_1_layout.html#ac78c2a12a9ca921adff890b03b867ff0"> 6515</a></span>&#160;        WORD        <a class="code" href="structtx_dialog_1_1_layout.html#ac78c2a12a9ca921adff890b03b867ff0">fontsize</a>;                    </div>
<div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;        };</div>
<div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160; </div>
<div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160; </div>
<div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l06529"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a081a2029ed8e4ffd6726c9f39966a04c"> 6529</a></span>&#160;    <a class="code" href="structtx_dialog.html#a081a2029ed8e4ffd6726c9f39966a04c">txDialog</a>();</div>
<div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160; </div>
<div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160; </div>
<div class="line"><a name="l06543"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a4ac4c473e24014b82cb62133f8c5ed4a"> 6543</a></span>&#160;    <span class="keyword">explicit</span> <a class="code" href="structtx_dialog.html#a4ac4c473e24014b82cb62133f8c5ed4a">txDialog</a> (<span class="keyword">const</span> <a class="code" href="structtx_dialog_1_1_layout.html">Layout</a>* layout);</div>
<div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160; </div>
<div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160; </div>
<div class="line"><a name="l06549"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a0a41d301a3d12cd2542f609bb77d81a1"> 6549</a></span>&#160;    <span class="keyword">virtual</span> <a class="code" href="structtx_dialog.html#a0a41d301a3d12cd2542f609bb77d81a1">~txDialog</a>() {};</div>
<div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160; </div>
<div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160; </div>
<div class="line"><a name="l06565"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a971fb450a33205168aff3a7b186e04a3"> 6565</a></span>&#160;    <span class="keyword">const</span> <a class="code" href="structtx_dialog_1_1_layout.html">Layout</a>* <a class="code" href="structtx_dialog.html#a971fb450a33205168aff3a7b186e04a3">setLayout</a> (<span class="keyword">const</span> <a class="code" href="structtx_dialog_1_1_layout.html">Layout</a> *layout);</div>
<div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160; </div>
<div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160; </div>
<div class="line"><a name="l06587"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a39efe9383833aedb0839d2519173930e"> 6587</a></span>&#160;    <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="structtx_dialog.html#a39efe9383833aedb0839d2519173930e">dialogProc</a> (HWND _wnd, UINT _msg, WPARAM _wParam, LPARAM _lParam);</div>
<div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160; </div>
<div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160; </div>
<div class="line"><a name="l06607"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a7b075b1d868782be0973d6eb82121b94"> 6607</a></span>&#160;    intptr_t <a class="code" href="structtx_dialog.html#a7b075b1d868782be0973d6eb82121b94">dialogBox</a> (<span class="keyword">const</span> <a class="code" href="structtx_dialog_1_1_layout.html">Layout</a>* layout = NULL, <span class="keywordtype">size_t</span> bufsize = 0);</div>
<div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160; </div>
<div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160; </div>
<div class="line"><a name="l06624"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a0601dff1e04c3f06c23fc443eb10093c"> 6624</a></span>&#160;    intptr_t <a class="code" href="structtx_dialog.html#a0601dff1e04c3f06c23fc443eb10093c">dialogBox</a> (WORD resource);</div>
<div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160; </div>
<div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160; </div>
<div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;            <a class="code" href="structtx_dialog.html#a081a2029ed8e4ffd6726c9f39966a04c">txDialog</a>   (<span class="keyword">const</span> <a class="code" href="structtx_dialog.html">this_t</a>&amp;) _tx_delete;</div>
<div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;    <a class="code" href="structtx_dialog.html">this_t</a>&amp; operator = (<span class="keyword">const</span> <a class="code" href="structtx_dialog.html">this_t</a>&amp;) _tx_delete;</div>
<div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160; </div>
<div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160; </div>
<div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;    <span class="keyword">protected</span>:</div>
<div class="line"><a name="l06639"></a><span class="lineno"><a class="line" href="structtx_dialog.html#a1224cc6dee12d46b554b3ef4de18aa6d"> 6639</a></span>&#160;    <span class="keyword">static</span> intptr_t CALLBACK <a class="code" href="structtx_dialog.html#a1224cc6dee12d46b554b3ef4de18aa6d">DialogProc_</a> (HWND wnd, UINT msg, WPARAM wParam, LPARAM lParam);</div>
<div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160; </div>
<div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160; </div>
<div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;    <span class="keyword">const</span> <a class="code" href="structtx_dialog_1_1_layout.html">Layout</a>* layout_;</div>
<div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;    };</div>
<div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160; </div>
<div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160; </div>
<div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;<span class="comment">//{          Dialogs: Message Map macros</span></div>
<div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160; </div>
<div class="line"><a name="l06681"></a><span class="lineno"><a class="line" href="group___misc.html#gaf6ea524e3c76ba5c8a0d1fa6b81d55b8"> 6681</a></span>&#160;<span class="preprocessor">#define TX_BEGIN_MESSAGE_MAP()                                                                 \</span></div>
<div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;<span class="preprocessor">    virtual int dialogProc (HWND _wnd, UINT _msg, WPARAM _wParam, LPARAM _lParam) _tx_override \</span></div>
<div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;<span class="preprocessor">        {                                                                                      \</span></div>
<div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;<span class="preprocessor">        int _result = txDialog::dialogProc (_wnd, _msg, _wParam, _lParam); (void) _result;     \</span></div>
<div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;<span class="preprocessor">                                                                                               \</span></div>
<div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;<span class="preprocessor">        switch (_msg)                                                                          \</span></div>
<div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;<span class="preprocessor">            {                                                                                  \</span></div>
<div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;<span class="preprocessor">            case WM_NULL:</span></div>
<div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160; </div>
<div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160; </div>
<div class="line"><a name="l06711"></a><span class="lineno"><a class="line" href="group___misc.html#gadbe2f17002d8d41056e9770066ef558b"> 6711</a></span>&#160;<span class="preprocessor">#define TX_HANDLE( id )                                                                        \</span></div>
<div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;<span class="preprocessor">            break;                                                                             \</span></div>
<div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;<span class="preprocessor">            case (id):</span></div>
<div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160; </div>
<div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160; </div>
<div class="line"><a name="l06737"></a><span class="lineno"><a class="line" href="group___misc.html#ga3637c3398b6ebfa337171beec0770fe4"> 6737</a></span>&#160;<span class="preprocessor">#define TX_COMMAND_MAP                                                                         \</span></div>
<div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;<span class="preprocessor">            default: break;                                                                    \</span></div>
<div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;<span class="preprocessor">            }                                                                                  \</span></div>
<div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;<span class="preprocessor">                                                                                               \</span></div>
<div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;<span class="preprocessor">        if (_msg == WM_COMMAND) switch (LOWORD (_wParam))                                      \</span></div>
<div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;<span class="preprocessor">            {                                                                                  \</span></div>
<div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;<span class="preprocessor">            case 0:</span></div>
<div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160; </div>
<div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160; </div>
<div class="line"><a name="l06766"></a><span class="lineno"><a class="line" href="group___misc.html#ga3f4a70a0e5076cb4f4addcab0ca760cd"> 6766</a></span>&#160;<span class="preprocessor">#define TX_END_MESSAGE_MAP                                                                     \</span></div>
<div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;<span class="preprocessor">            default: break;                                                                    \</span></div>
<div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;<span class="preprocessor">            }                                                                                  \</span></div>
<div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;<span class="preprocessor">                                                                                               \</span></div>
<div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;<span class="preprocessor">        return FALSE;                                                                          \</span></div>
<div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;<span class="preprocessor">        }</span></div>
<div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160; </div>
<div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160; </div>
<div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;<span class="comment">//{          Dialogs: txDialog example: txInputBox()</span></div>
<div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;<span class="comment"></span><span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160; </div>
<div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group___dialogs.html#gaf1f2c033b7edc26174a28771a708ee7c">txInputBox</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* text = NULL, <span class="keyword">const</span> <span class="keywordtype">char</span>* caption = NULL, <span class="keyword">const</span> <span class="keywordtype">char</span>* input = NULL) tx_nodiscard;</div>
<div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160; </div>
<div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160; </div>
<div class="line"><a name="l06808"></a><span class="lineno"><a class="line" href="group___dialogs.html#gaf1f2c033b7edc26174a28771a708ee7c"> 6808</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group___dialogs.html#gaf1f2c033b7edc26174a28771a708ee7c">txInputBox</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* text, <span class="keyword">const</span> <span class="keywordtype">char</span>* caption, <span class="keyword">const</span> <span class="keywordtype">char</span>* input)</div>
<div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;    {</div>
<div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;    <span class="comment">// Если не указаны параметры, приходится использовать хоть какие-то надписи.</span></div>
<div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;    <span class="comment">// txGetModuleFileName() -- имя EXE-файла, на случай, если кое-кто поленился задать название.</span></div>
<div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160; </div>
<div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;    <span class="keywordflow">if</span> (!text)    text    = <span class="stringliteral">&quot;Введите строку:&quot;</span>;</div>
<div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;    <span class="keywordflow">if</span> (!caption) caption = <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a> (<span class="keyword">false</span>);</div>
<div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;    <span class="keywordflow">if</span> (!input)   input   = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160; </div>
<div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;    <span class="comment">// Идентификаторы элементов диалога. Они требуются в GetDlgItemText().</span></div>
<div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;    <span class="comment">// Если диалог строится не вручную, а редактором ресурсов, то они задаются в нем автоматически.</span></div>
<div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;    <span class="comment">// У нас же тут -- хардкор стайл, к сожалению. Причина в том, что у разных сред программирования разные редакторы</span></div>
<div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;    <span class="comment">// ресурсов и системы сборки. Поэтому для независимости от них все будет строиться на этапе выполнения,</span></div>
<div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;    <span class="comment">// динамически. Вы еще гляньте, как это реализовано в txDialog::dialogBox() и функциях _tx_DLGTEMPLATE_()... О_о</span></div>
<div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160; </div>
<div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;<span class="preprocessor">    #define ID_TEXT_  101</span></div>
<div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;<span class="preprocessor">    #define ID_INPUT_ 102</span></div>
<div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160; </div>
<div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;    <span class="comment">// Задание макета (вида) диалога в виде массива структур.</span></div>
<div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;    <span class="comment">// С помощью особого порядка полей в структуре txDialog::Layout и констант из класса txDialog этот массив</span></div>
<div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;    <span class="comment">// становится похож на описание ресурса диалога в .rc-файле.</span></div>
<div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;    <span class="comment">// См. описание синтаксиса rc-файла в документации по Win32 (MSDN, http://msdn.com).</span></div>
<div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160; </div>
<div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;    <a class="code" href="structtx_dialog_1_1_layout.html">txDialog::Layout</a> layout[] =</div>
<div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160; </div>
<div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;    <span class="comment">//----------------------+----------+-----------+-----------------+---------------------------------------------</span></div>
<div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;    <span class="comment">//     Тип элемента     | Имя      | Иденти-   |   Координаты    | Флаги элементов</span></div>
<div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;    <span class="comment">//     диалога          | элемента | фикатор   |-----------------| (см. описание элементов</span></div>
<div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;    <span class="comment">//                      |          | элемента  | X | Y |Шир.|Выс.| окон диалога в MSDN)</span></div>
<div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;    <span class="comment">//----------------------+----------+-----------+---+---+----+----+---------------------------------------------</span></div>
<div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;    <span class="comment">//                      |          |           |   |   |    |    |</span></div>
<div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;        {{ <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a1988e748c6846b398b020c0cb6f057ab">txDialog::DIALOG</a>,  caption,   0,           0,  0, 240,  85                                                    },</div>
<div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;         { <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aec6c84113cb4f1cd430238d4b909b40a">txDialog::STATIC</a>,  text,      ID_TEXT_,   10, 10, 150,  40, SS_LEFT                                           },</div>
<div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;         { <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aef6361d5dcbf8ce520f398a079b414cb">txDialog::EDIT</a>,    input,     ID_INPUT_,  10, 60, 220,  15, ES_LEFT | WS_BORDER | ES_AUTOHSCROLL | WS_TABSTOP },</div>
<div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;         { <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aa4f15111fd03f7781dd5e910c9476085">txDialog::BUTTON</a>,  <span class="stringliteral">&quot;&amp;OK&quot;</span>,     IDOK,      180, 10,  50,  15, BS_DEFPUSHBUTTON                     | WS_TABSTOP },</div>
<div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;         { <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aa4f15111fd03f7781dd5e910c9476085">txDialog::BUTTON</a>,  <span class="stringliteral">&quot;&amp;Cancel&quot;</span>, IDCANCEL,  180, 30,  50,  15, BS_PUSHBUTTON                        | WS_TABSTOP },</div>
<div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;         { <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a342a4f0af79f46e07894a95e5951b7aa">txDialog::END</a>                                                                                                 }};</div>
<div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160; </div>
<div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;    <span class="comment">// Класс диалога для InputBox. Внутренний, т.к. зачем ему быть внешним.</span></div>
<div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;    <span class="comment">// Нужен в основном для задания строки ввода (str) и оконной функции диалогового окна, требуемой Win32 (она</span></div>
<div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;    <span class="comment">// построена макросами TX_BEGIN_MESSAGE_MAP и другими). Можно не делать внутреннего класса, но тогда оконную</span></div>
<div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;    <span class="comment">// функцию придется писать в глобальной области видимости, и str объявлять глобально тоже (или передавать ее</span></div>
<div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;    <span class="comment">// адрес через DialogBoxParam и записывать его в класс во время обработки WM_INITDIALOG).</span></div>
<div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;    <span class="keyword">struct </span>inputDlg : <a class="code" href="structtx_dialog.html">txDialog</a></div>
<div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;        {</div>
<div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;        <span class="keywordtype">char</span> str [1024];</div>
<div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160; </div>
<div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;        <span class="comment">//---------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160; </div>
<div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;        inputDlg() :</div>
<div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;            str()</div>
<div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;            {}</div>
<div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160; </div>
<div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;        <span class="comment">//---------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160; </div>
<div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;        <a class="code" href="group___misc.html#gaf6ea524e3c76ba5c8a0d1fa6b81d55b8">TX_BEGIN_MESSAGE_MAP</a>()    <span class="comment">// Карта сообщений (на самом деле это начало оконной функции).  //-V2525</span></div>
<div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160; </div>
<div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;            <a class="code" href="group___misc.html#ga3637c3398b6ebfa337171beec0770fe4">TX_COMMAND_MAP</a>        <span class="comment">// Здесь обрабатываются WM_COMMAND (на самом деле это оператор switch).</span></div>
<div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160; </div>
<div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;                <span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;                <span class="comment">// При нажатии кнопки OK копируем строку из поля ввода в нашу переменную str, т.к. после закрытия</span></div>
<div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;                <span class="comment">// диалога строка ввода умрет и текст уже из нее получить.</span></div>
<div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;                <span class="comment">// Этот макрос на самом деле превращается в case из оператора switch.</span></div>
<div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;                <span class="comment">// _wnd -- это параметр оконной функции, см. определение макроса TX_BEGIN_MESSAGE_MAP().</span></div>
<div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;                <span class="comment">//-------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160; </div>
<div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;                <a class="code" href="group___misc.html#gadbe2f17002d8d41056e9770066ef558b">TX_HANDLE</a> (IDOK) GetDlgItemText (_wnd, ID_INPUT_, str, <span class="keyword">sizeof</span> (str) - 1);</div>
<div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160; </div>
<div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;        <a class="code" href="group___misc.html#ga3f4a70a0e5076cb4f4addcab0ca760cd">TX_END_MESSAGE_MAP</a>        <span class="comment">//-V2522</span></div>
<div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160; </div>
<div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;        <span class="comment">//---------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;        <span class="comment">// Конец внутреннего класса диалога</span></div>
<div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;        <span class="comment">//---------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;        };</div>
<div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160; </div>
<div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;    <span class="comment">// Убираем дефайны, чтобы потом не мешали.</span></div>
<div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;    <span class="comment">// От этого они получаются &quot;локального действия&quot;, как будто у них была бы область видимости -- функция. На самом</span></div>
<div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;    <span class="comment">// деле это сделано вручную через #undef. Чтобы подчеркнуть их локальную природу, у них имена заканчиваются на _.</span></div>
<div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;    <span class="comment">// Такие дефайны потом не перекосячат весь код после того как, фактически, стали уже не нужны.</span></div>
<div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160; </div>
<div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;<span class="preprocessor">    #undef ID_TEXT_</span></div>
<div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;<span class="preprocessor">    #undef ID_INPUT_</span></div>
<div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160; </div>
<div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;    <span class="comment">// Это статический объект, потому что строка в нем должна жить после завершения функции.</span></div>
<div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160; </div>
<div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;    <span class="keyword">static</span> inputDlg dlg;</div>
<div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160; </div>
<div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;    <span class="comment">// Передаем layout и запускаем окно диалога</span></div>
<div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160; </div>
<div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;    dlg.dialogBox (layout);</div>
<div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160; </div>
<div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;    <span class="comment">// Возвращаем адрес строки из статического объекта. Так можно делать, потому что статический объект не умрет</span></div>
<div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;    <span class="comment">// при выходе из функции и строка в нем, соответственно, тоже. Адрес нестатических переменных передавать</span></div>
<div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;    <span class="comment">// синтаксически можно, но ведет к серьезным ошибкам.</span></div>
<div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;    <span class="comment">//-------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160; </div>
<div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;    <span class="keywordflow">return</span> dlg.str;</div>
<div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;    }</div>
<div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160; </div>
<div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160; </div>
<div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160; </div>
<div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160; </div>
<div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;<span class="comment">//{          TXLIB IMPLEMENTATION</span></div>
<div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;<span class="comment">//           Реализация функций библиотеки</span></div>
<div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;<span class="comment">//{          The Includes</span></div>
<div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160; </div>
<div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160; </div>
<div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;_TX_END_NAMESPACE</div>
<div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160; </div>
<div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160; </div>
<div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;<span class="preprocessor">    #pragma warning (push, 3)                    </span><span class="comment">// MSVC: At level /Wall, some std headers emit warnings... O_o</span></div>
<div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160; </div>
<div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;<span class="preprocessor">    #pragma warning (disable: 4365)              </span><span class="comment">// &#39;argument&#39;: conversion from &#39;long&#39; to &#39;unsigned int&#39;, signed/unsigned mismatch</span></div>
<div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;<span class="preprocessor">    #pragma warning (disable: 4005)              </span><span class="comment">// &#39;name&#39;: macro redefinition</span></div>
<div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160; </div>
<div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;<span class="preprocessor">#if defined (__STRICT_ANSI__) &amp;&amp; defined (__STRICT_ANSI__UNDEFINED)</span></div>
<div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;<span class="preprocessor">    #undef   __STRICT_ANSI__</span></div>
<div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160; </div>
<div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160; </div>
<div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;<span class="preprocessor">#include &lt;io.h&gt;</span></div>
<div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;<span class="preprocessor">#include &lt;process.h&gt;</span></div>
<div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;<span class="preprocessor">#include &lt;setjmp.h&gt;</span></div>
<div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;<span class="preprocessor">#include &lt;locale.h&gt;</span></div>
<div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div>
<div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160; </div>
<div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;<span class="preprocessor">#include &lt;exception&gt;</span></div>
<div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160; </div>
<div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;<span class="preprocessor">#include &lt;tlhelp32.h&gt;</span></div>
<div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;<span class="preprocessor">#include &lt;shellapi.h&gt;</span></div>
<div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160; </div>
<div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;<span class="preprocessor">#if defined (_GCC_VER)</span></div>
<div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160; </div>
<div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;<span class="preprocessor">#include &lt;shlobj.h&gt;</span></div>
<div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160; </div>
<div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;<span class="preprocessor">#include &lt;cxxabi.h&gt;</span></div>
<div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;<span class="preprocessor">#include &lt;unwind.h&gt;</span></div>
<div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160; </div>
<div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160; </div>
<div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;<span class="preprocessor">#if defined (__CYGWIN__)</span></div>
<div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160; </div>
<div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;<span class="preprocessor">#include &lt;termios.h&gt;</span></div>
<div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160; </div>
<div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160; </div>
<div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160; </div>
<div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;<span class="preprocessor">#include &lt;new.h&gt;</span></div>
<div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160; </div>
<div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;<span class="preprocessor">#include &lt;shlobj.h&gt;</span></div>
<div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;<span class="preprocessor">#include &lt;ntstatus.h&gt;</span></div>
<div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;<span class="preprocessor">#include &lt;crtdbg.h&gt;</span></div>
<div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;<span class="preprocessor">#include &lt;rtcapi.h&gt;</span></div>
<div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;<span class="preprocessor">#include &lt;dbghelp.h&gt;</span></div>
<div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160; </div>
<div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160; </div>
<div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;<span class="preprocessor">#if defined (_GCC_VER) || defined (_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1800)  </span><span class="comment">// MSVC 2013</span></div>
<div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160; </div>
<div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160; </div>
<div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;<span class="preprocessor">#if defined (TX_USE_SPEAK) </span><span class="comment">//--------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;<span class="preprocessor">#include &lt;SAPI.h&gt;</span>          <span class="comment">// &lt;== ЕСЛИ ЗДЕСЬ ОШИБКА, ТО У ВАС НЕТ ФАЙЛА SAPI.h. No SAPI.h file, TXLib isn&#39;t guilty :(</span></div>
<div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;<span class="preprocessor">#endif                     </span><span class="comment">//--------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160; </div>
<div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160; </div>
<div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;<span class="preprocessor">    #pragma warning (pop)                        </span><span class="comment">// MSVC: Restore max level</span></div>
<div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160; </div>
<div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;<span class="preprocessor">#if defined (__STRICT_ANSI__UNDEFINED)</span></div>
<div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;<span class="preprocessor">    #define  __STRICT_ANSI__                     </span><span class="comment">// Redefine back</span></div>
<div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160; </div>
<div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160; </div>
<div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;_TX_BEGIN_NAMESPACE</div>
<div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160; </div>
<div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160; </div>
<div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160; </div>
<div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;<span class="comment">//{          DLL functions import, missing types definitions</span></div>
<div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;<span class="comment">//{ Some of structs, consts and interfaces aren&#39;t defined in MinGW some early headers.</span></div>
<div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;<span class="comment">//  Copied from Windows SDK 7.0a.</span></div>
<div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160; </div>
<div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160; </div>
<div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;<span class="keyword">namespace </span>Win32 {</div>
<div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160; </div>
<div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;<span class="preprocessor">#ifndef AC_SRC_ALPHA</span></div>
<div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;<span class="preprocessor">#define AC_SRC_ALPHA                             0x01</span></div>
<div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160; </div>
<div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;<span class="preprocessor">#ifndef SMTO_ERRORONEXIT</span></div>
<div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;<span class="preprocessor">#define SMTO_ERRORONEXIT                         0x0020</span></div>
<div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160; </div>
<div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;<span class="preprocessor">#ifndef NT_CONSOLE_PROPS_SIG</span></div>
<div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;<span class="preprocessor">#define NT_CONSOLE_PROPS_SIG                     0xA0000002</span></div>
<div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160; </div>
<div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;<span class="preprocessor">#ifndef NIIF_INFO</span></div>
<div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;<span class="preprocessor">#define NIIF_INFO                                0x00000001</span></div>
<div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;<span class="preprocessor">#define NIIF_WARNING                             0x00000002</span></div>
<div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;<span class="preprocessor">#define NIIF_ERROR                               0x00000003</span></div>
<div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160; </div>
<div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;<span class="preprocessor">#ifndef NIF_INFO</span></div>
<div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;<span class="preprocessor">#define NIF_STATE                                0x00000008</span></div>
<div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;<span class="preprocessor">#define NIF_INFO                                 0x00000010</span></div>
<div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160; </div>
<div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;<span class="preprocessor">#ifndef GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS</span></div>
<div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;<span class="preprocessor">#define GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS   0x00000004</span></div>
<div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160; </div>
<div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;<span class="preprocessor">#ifndef SYMOPT_CASE_INSENSITIVE</span></div>
<div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;<span class="preprocessor">#define SYMOPT_CASE_INSENSITIVE                  0x00000001</span></div>
<div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;<span class="preprocessor">#define SYMOPT_UNDNAME                           0x00000002</span></div>
<div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;<span class="preprocessor">#define SYMOPT_DEFERRED_LOADS                    0x00000004</span></div>
<div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;<span class="preprocessor">#define SYMOPT_NO_CPP                            0x00000008</span></div>
<div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;<span class="preprocessor">#define SYMOPT_LOAD_LINES                        0x00000010</span></div>
<div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;<span class="preprocessor">#define SYMOPT_OMAP_FIND_NEAREST                 0x00000020</span></div>
<div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;<span class="preprocessor">#define SYMOPT_LOAD_ANYTHING                     0x00000040</span></div>
<div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;<span class="preprocessor">#define SYMOPT_IGNORE_CVREC                      0x00000080</span></div>
<div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;<span class="preprocessor">#define SYMOPT_NO_UNQUALIFIED_LOADS              0x00000100</span></div>
<div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;<span class="preprocessor">#define SYMOPT_FAIL_CRITICAL_ERRORS              0x00000200</span></div>
<div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;<span class="preprocessor">#define SYMOPT_EXACT_SYMBOLS                     0x00000400</span></div>
<div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;<span class="preprocessor">#define SYMOPT_ALLOW_ABSOLUTE_SYMBOLS            0x00000800</span></div>
<div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;<span class="preprocessor">#define SYMOPT_IGNORE_NT_SYMPATH                 0x00001000</span></div>
<div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;<span class="preprocessor">#define SYMOPT_INCLUDE_32BIT_MODULES             0x00002000</span></div>
<div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;<span class="preprocessor">#define SYMOPT_PUBLICS_ONLY                      0x00004000</span></div>
<div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;<span class="preprocessor">#define SYMOPT_NO_PUBLICS                        0x00008000</span></div>
<div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;<span class="preprocessor">#define SYMOPT_AUTO_PUBLICS                      0x00010000</span></div>
<div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;<span class="preprocessor">#define SYMOPT_NO_IMAGE_SEARCH                   0x00020000</span></div>
<div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;<span class="preprocessor">#define SYMOPT_SECURE                            0x00040000</span></div>
<div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;<span class="preprocessor">#define SYMOPT_NO_PROMPTS                        0x00080000</span></div>
<div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;<span class="preprocessor">#define SYMOPT_ALLOW_ZERO_ADDRESS                0x01000000</span></div>
<div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;<span class="preprocessor">#define SYMOPT_DISABLE_SYMSRV_AUTODETECT         0x02000000</span></div>
<div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;<span class="preprocessor">#define SYMOPT_FAVOR_COMPRESSED                  0x00800000</span></div>
<div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;<span class="preprocessor">#define SYMOPT_FLAT_DIRECTORY                    0x00400000</span></div>
<div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;<span class="preprocessor">#define SYMOPT_IGNORE_IMAGEDIR                   0x00200000</span></div>
<div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;<span class="preprocessor">#define SYMOPT_OVERWRITE                         0x00100000</span></div>
<div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;<span class="preprocessor">#define SYMOPT_DEBUG                             0x80000000</span></div>
<div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160; </div>
<div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;<span class="comment">// SEH exception codes. For GCC, see http://github.com/gcc-mirror/gcc/blob/master/libgcc/unwind-seh.c, lines 64-66.</span></div>
<div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160; </div>
<div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;<span class="preprocessor">#ifndef STATUS_POSSIBLE_DEADLOCK</span></div>
<div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;<span class="preprocessor">#define STATUS_POSSIBLE_DEADLOCK                 0xC0000194</span></div>
<div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160; </div>
<div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;<span class="preprocessor">#ifndef STATUS_FLOAT_MULTIPLE_FAULTS</span></div>
<div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;<span class="preprocessor">#define STATUS_FLOAT_MULTIPLE_FAULTS             0xC00002B4</span></div>
<div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160; </div>
<div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;<span class="preprocessor">#ifndef STATUS_STACK_BUFFER_OVERRUN</span></div>
<div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;<span class="preprocessor">#define STATUS_STACK_BUFFER_OVERRUN              0xC0000409</span></div>
<div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160; </div>
<div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;<span class="preprocessor">#ifndef STATUS_ASSERTION_FAILURE</span></div>
<div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;<span class="preprocessor">#define STATUS_ASSERTION_FAILURE                 0xC0000420</span></div>
<div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160; </div>
<div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;<span class="preprocessor">#ifndef STATUS_WX86_BREAKPOINT</span></div>
<div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;<span class="preprocessor">#define STATUS_WX86_BREAKPOINT                   0x4000001F</span></div>
<div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160; </div>
<div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;<span class="preprocessor">#ifndef DBG_PRINTEXCEPTION_C</span></div>
<div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;<span class="preprocessor">#define DBG_PRINTEXCEPTION_C                     0x40010006  </span><span class="comment">// OutputDebugStringA() call</span></div>
<div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160; </div>
<div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;<span class="preprocessor">#ifndef DBG_PRINTEXCEPTION_WIDE_C</span></div>
<div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;<span class="preprocessor">#define DBG_PRINTEXCEPTION_WIDE_C                0x4001000A  </span><span class="comment">// OutputDebugStringW() call</span></div>
<div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160; </div>
<div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;<span class="preprocessor">#ifndef DBG_THREAD_NAME</span></div>
<div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;<span class="preprocessor">#define DBG_THREAD_NAME                          0x406D1388</span></div>
<div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160; </div>
<div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_MSC                        0xE06D7363  </span><span class="comment">// &#39;?msc&#39;</span></div>
<div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER1       0x19930520  </span><span class="comment">// &#39;?msc&#39; version magic, see ehdata.h</span></div>
<div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER2       0x19930521  </span><span class="comment">// &#39;?msc&#39; version magic</span></div>
<div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER3       0x19930522  </span><span class="comment">// &#39;?msc&#39; version magic</span></div>
<div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_MSC_EH_PURE_MAGIC_NUMBER1  0x01994000  </span><span class="comment">// &#39;?msc&#39; version magic</span></div>
<div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160; </div>
<div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_GCC                        0x20474343  </span><span class="comment">// &#39; GCC&#39;</span></div>
<div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_GCC_UNWIND                 0x21474343  </span><span class="comment">// &#39;!GCC&#39;</span></div>
<div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_GCC_FORCED                 0x22474343  </span><span class="comment">// &#39;&quot;GCC&#39;</span></div>
<div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160; </div>
<div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;<span class="preprocessor">#define EXCEPTION_CLR_FAILURE                    0xE0434f4D  </span><span class="comment">// &#39;аCOM&#39;</span></div>
<div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160; </div>
<div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_BORLAND_BUILDER            0x0EEDFAE6  </span><span class="comment">// Should never occur here</span></div>
<div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;<span class="preprocessor">#define EXCEPTION_CPP_BORLAND_DELPHI             0x0EEDFADE  </span><span class="comment">// Should never occur here</span></div>
<div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160; </div>
<div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;<span class="preprocessor">#pragma pack (push, 1)</span></div>
<div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160; </div>
<div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;<span class="keyword">struct </span>CONSOLE_CURSOR_INFO</div>
<div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;    {</div>
<div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;    DWORD dwSize;</div>
<div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;    BOOL bVisible;</div>
<div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;    };</div>
<div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160; </div>
<div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;<span class="keyword">struct </span>CONSOLE_FONT_INFO</div>
<div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;    {</div>
<div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;    DWORD nFont;</div>
<div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;    COORD dwFontSize;</div>
<div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;    };</div>
<div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160; </div>
<div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;<span class="keyword">struct </span>CONSOLE_FONT_INFOEX</div>
<div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;    {</div>
<div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;    ULONG cbSize;</div>
<div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;    DWORD nFont;</div>
<div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;    COORD dwFontSize;</div>
<div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;    UINT  FontFamily;</div>
<div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;    UINT  FontWeight;</div>
<div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;    WCHAR FaceName[LF_FACESIZE];</div>
<div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;    };</div>
<div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160; </div>
<div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;<span class="keyword">struct </span>DATABLOCK_HEADER</div>
<div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;    {</div>
<div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;    DWORD cbSize;</div>
<div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;    DWORD dwSignature;</div>
<div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;    };</div>
<div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160; </div>
<div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;<span class="keyword">struct </span>NT_CONSOLE_PROPS</div>
<div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;    {</div>
<div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;    DATABLOCK_HEADER dbh;</div>
<div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160; </div>
<div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;    WORD  wFillAttribute;</div>
<div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;    WORD  wPopupFillAttribute;</div>
<div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;    COORD dwScreenBufferSize;</div>
<div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;    COORD dwWindowSize;</div>
<div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;    COORD dwWindowOrigin;</div>
<div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;    DWORD nFont;</div>
<div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;    DWORD nInputBufferSize;</div>
<div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;    COORD dwFontSize;</div>
<div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;    UINT  uFontFamily;</div>
<div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;    UINT  uFontWeight;</div>
<div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;    WCHAR FaceName[LF_FACESIZE];</div>
<div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;    UINT  uCursorSize;</div>
<div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;    BOOL  bFullScreen;</div>
<div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;    BOOL  bQuickEdit;</div>
<div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;    BOOL  bInsertMode;</div>
<div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;    BOOL  bAutoPosition;</div>
<div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;    UINT  uHistoryBufferSize;</div>
<div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;    UINT  uNumberOfHistoryBuffers;</div>
<div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;    BOOL  bHistoryNoDup;</div>
<div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160; </div>
<div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;    COLORREF ColorTable[16];</div>
<div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;    };</div>
<div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160; </div>
<div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;<span class="keyword">struct </span>FLASHWINFO</div>
<div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;    {</div>
<div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;    UINT  cbSize;</div>
<div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;    HWND  hwnd;</div>
<div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;    DWORD dwFlags;</div>
<div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;    UINT  uCount;</div>
<div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;    DWORD dwTimeout;</div>
<div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;    };</div>
<div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160; </div>
<div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;<span class="keyword">enum</span> TBPFLAG</div>
<div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;    {</div>
<div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;    TBPF_NOPROGRESS    = 0x0,</div>
<div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;    TBPF_INDETERMINATE = 0x1,</div>
<div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;    TBPF_NORMAL        = 0x2,</div>
<div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;    TBPF_ERROR         = 0x4,</div>
<div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;    TBPF_PAUSED        = 0x8</div>
<div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;    };</div>
<div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160; </div>
<div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;<span class="preprocessor">#pragma pack (pop)</span></div>
<div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160; </div>
<div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;<span class="preprocessor">#if !defined (_WIN64)</span></div>
<div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160; </div>
<div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;<span class="preprocessor">#undef  INTERFACE</span></div>
<div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;<span class="preprocessor">#define INTERFACE IShellLinkDataList</span></div>
<div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160; </div>
<div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;DECLARE_INTERFACE_ (IShellLinkDataList, IUnknown)</div>
<div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;    {</div>
<div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;    STDMETHOD (AddDataBlock)          (THIS_ <span class="keywordtype">void</span>* dataBlock)                                  PURE;</div>
<div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;    STDMETHOD (CopyDataBlock)         (THIS_ DWORD sig, <span class="keywordtype">void</span>** dataBlock)                      PURE;</div>
<div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;    STDMETHOD (RemoveDataBlock)       (THIS_ DWORD sig)                                        PURE;</div>
<div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;    STDMETHOD (GetFlags)              (THIS_ DWORD* flags)                                     PURE;</div>
<div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;    STDMETHOD (SetFlags)              (THIS_ DWORD  flags)                                     PURE;</div>
<div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;    };</div>
<div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160; </div>
<div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;<span class="preprocessor">#undef  INTERFACE</span></div>
<div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;<span class="preprocessor">#define INTERFACE ITaskbarList</span></div>
<div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160; </div>
<div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;DECLARE_INTERFACE_ (ITaskbarList, IUnknown)</div>
<div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;    {</div>
<div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;    STDMETHOD (HrInit)                (THIS)                                                   PURE;</div>
<div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;    STDMETHOD (AddTab)                (THIS_ HWND wnd)                                         PURE;</div>
<div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;    STDMETHOD (DeleteTab)             (THIS_ HWND wnd)                                         PURE;</div>
<div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;    STDMETHOD (ActivateTab)           (THIS_ HWND wnd)                                         PURE;</div>
<div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;    STDMETHOD (SetActiveAlt)          (THIS_ HWND wnd)                                         PURE;</div>
<div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;    };</div>
<div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160; </div>
<div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;<span class="preprocessor">#undef  INTERFACE</span></div>
<div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;<span class="preprocessor">#define INTERFACE ITaskbarList2</span></div>
<div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160; </div>
<div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;DECLARE_INTERFACE_ (ITaskbarList2, ITaskbarList)</div>
<div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;    {</div>
<div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;    STDMETHOD (MarkFullscreenWindow)  (THIS_ HWND wnd, BOOL fullscreen)                        PURE;</div>
<div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;    };</div>
<div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160; </div>
<div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;<span class="preprocessor">#undef  INTERFACE</span></div>
<div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;<span class="preprocessor">#define INTERFACE ITaskbarList3</span></div>
<div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160; </div>
<div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;DECLARE_INTERFACE_ (ITaskbarList3, ITaskbarList2)</div>
<div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;    {</div>
<div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;    STDMETHOD (SetProgressValue)      (THIS_ HWND wnd, ULONGLONG completed, ULONGLONG total)   PURE;</div>
<div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;    STDMETHOD (SetProgressState)      (THIS_ HWND wnd, <span class="keywordtype">unsigned</span> flags)                         PURE;</div>
<div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;    STDMETHOD (RegisterTab)           (THIS_ HWND wndTab, HWND wndMDI)                         PURE;</div>
<div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;    STDMETHOD (UnregisterTab)         (THIS_ HWND wndTab)                                      PURE;</div>
<div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;    STDMETHOD (SetTabOrder)           (THIS_ HWND wndTab, HWND wndInsertBefore)                PURE;</div>
<div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;    STDMETHOD (SetTabActive)          (THIS_ HWND wndTab, HWND wndMDI, DWORD reserved)         PURE;</div>
<div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;    STDMETHOD (ThumbBarAddButtons)    (THIS_ HWND wnd, UINT buttons, <span class="keyword">const</span> <span class="keywordtype">void</span>* button)       PURE;</div>
<div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;    STDMETHOD (ThumbBarUpdateButtons) (THIS_ HWND wnd, UINT buttons, <span class="keyword">const</span> <span class="keywordtype">void</span>* button)       PURE;</div>
<div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;    STDMETHOD (ThumbBarSetImageList)  (THIS_ HWND wnd, HIMAGELIST himl)                        PURE;</div>
<div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;    STDMETHOD (SetOverlayIcon)        (THIS_ HWND wnd, HICON icon, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* description) PURE;</div>
<div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;    STDMETHOD (SetThumbnailTooltip)   (THIS_ THIS_ HWND wnd, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* tip)               PURE;</div>
<div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;    STDMETHOD (SetThumbnailClip)      (THIS_ HWND wnd, RECT* clip)                             PURE;</div>
<div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;    };</div>
<div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160; </div>
<div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;<span class="preprocessor">#undef  INTERFACE</span></div>
<div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160; </div>
<div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;<span class="preprocessor">#define __IShellLinkDataList_INTERFACE_DEFINED__</span></div>
<div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;<span class="preprocessor">#define __ITaskbarList_INTERFACE_DEFINED__</span></div>
<div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;<span class="preprocessor">#define __ITaskbarList2_INTERFACE_DEFINED__</span></div>
<div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;<span class="preprocessor">#define __ITaskbarList3_INTERFACE_DEFINED__</span></div>
<div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160; </div>
<div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;<span class="preprocessor">#define IShellLinkDataList            Win32::IShellLinkDataList</span></div>
<div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;<span class="preprocessor">#define ITaskbarList                  Win32::ITaskbarList</span></div>
<div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;<span class="preprocessor">#define ITaskbarList2                 Win32::ITaskbarList2</span></div>
<div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;<span class="preprocessor">#define ITaskbarList3                 Win32::ITaskbarList3</span></div>
<div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;<span class="preprocessor">#define TBPFLAG                       Win32::TBPFLAG</span></div>
<div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160; </div>
<div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160; </div>
<div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;<span class="keyword">const</span> GUID IID_IShellLink             = {0x000214ee, 0x0000, 0x0000, {0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x46}};</div>
<div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;<span class="keyword">const</span> GUID IID_IShellLinkDataList     = {0x45e2b4ae, 0xb1c3, 0x11d0, {0xb9,0x2f,0x00,0xa0,0xc9,0x03,0x12,0xe1}};</div>
<div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;<span class="keyword">const</span> GUID IID_IPersistFile           = {0x0000010b, 0x0000, 0x0000, {0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x46}};</div>
<div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160; </div>
<div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;<span class="keyword">const</span> GUID IID_ITaskbarList3          = {0xea1afb91, 0x9e28, 0x4b86, {0x90,0xe9,0x9e,0x9f,0x8a,0x5e,0xef,0xaf}};</div>
<div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;<span class="keyword">const</span> GUID CLSID_TaskbarList          = {0x56fdf344, 0xfd6d, 0x11d0, {0x95,0x8a,0x00,0x60,0x97,0xc9,0xa0,0x90}};</div>
<div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160; </div>
<div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;<span class="keyword">const</span> GUID CLSID_SpVoice              = {0x96749377, 0x3391, 0x11d2, {0x9e,0xe3,0x00,0xc0,0x4f,0x79,0x73,0x96}};</div>
<div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;<span class="keyword">const</span> GUID IID_ISpVoice               = {0x6c44df74, 0x72b9, 0x4992, {0xa1,0xec,0xef,0x99,0x6e,0x04,0x22,0xd4}};</div>
<div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160; </div>
<div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;<span class="keyword">typedef</span> DWORD     NTSTATUS;</div>
<div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;<span class="keyword">typedef</span> ULONG_PTR KAFFINITY;</div>
<div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;<span class="keyword">typedef</span> LONG      KPRIORITY;</div>
<div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160; </div>
<div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;<span class="keyword">struct </span>UNICODE_STRING</div>
<div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;    {</div>
<div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;    USHORT   Length;</div>
<div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;    USHORT   MaximumLength;</div>
<div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;    <span class="keywordtype">wchar_t</span>* Buffer;</div>
<div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;    };</div>
<div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160; </div>
<div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;<span class="keyword">struct </span>RTL_DRIVE_LETTER_CURDIR</div>
<div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;    {</div>
<div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;    USHORT         Flags;</div>
<div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;    USHORT         Length;</div>
<div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;    ULONG          TimeStamp;</div>
<div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;    UNICODE_STRING DosPath;</div>
<div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;    };</div>
<div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160; </div>
<div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;<span class="keyword">struct </span>CURDIR</div>
<div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;    {</div>
<div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;    UNICODE_STRING DosPath;</div>
<div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;    <span class="keywordtype">void</span>*          Handle;</div>
<div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;    };</div>
<div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160; </div>
<div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;<span class="keyword">struct </span>RTL_USER_PROCESS_PARAMETERS</div>
<div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;    {</div>
<div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;    ULONG          AllocationSize;</div>
<div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;    ULONG          Size;</div>
<div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;    ULONG          Flags;</div>
<div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;    ULONG          DebugFlags;</div>
<div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;    HANDLE         ConsoleHandle;</div>
<div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;    ULONG          ConsoleFlags;</div>
<div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;    HANDLE         hStdInput;</div>
<div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;    HANDLE         hStdOutput;</div>
<div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;    HANDLE         hStdError;</div>
<div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;    CURDIR         CurrentDirectory;</div>
<div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;    UNICODE_STRING DllPath;</div>
<div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;    UNICODE_STRING ImagePathName;</div>
<div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;    UNICODE_STRING CommandLine;</div>
<div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;    <span class="keywordtype">wchar_t</span>*       Environment;</div>
<div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;    ULONG          dwX;</div>
<div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;    ULONG          dwY;</div>
<div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;    ULONG          dwXSize;</div>
<div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;    ULONG          dwYSize;</div>
<div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;    ULONG          dwXCountChars;</div>
<div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;    ULONG          dwYCountChars;</div>
<div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;    ULONG          dwFillAttribute;</div>
<div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;    ULONG          dwFlags;</div>
<div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;    ULONG          wShowWindow;</div>
<div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;    UNICODE_STRING WindowTitle;</div>
<div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;    UNICODE_STRING Desktop;</div>
<div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;    UNICODE_STRING ShellInfo;</div>
<div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;    UNICODE_STRING RuntimeInfo;</div>
<div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;    RTL_DRIVE_LETTER_CURDIR DLCurrentDirectory[0x20];</div>
<div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;    };</div>
<div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160; </div>
<div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;<span class="keyword">struct </span>PEB</div>
<div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;    {</div>
<div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;    BYTE  Reserved1[2];</div>
<div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;    BYTE  BeingDebugged;</div>
<div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;    BYTE  Reserved2[1];</div>
<div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;    <span class="keywordtype">void</span>* Reserved3[2];</div>
<div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;    <span class="keywordtype">void</span>* Ldr;</div>
<div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;    RTL_USER_PROCESS_PARAMETERS* ProcessParameters;</div>
<div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;    <span class="keywordtype">void</span>* Reserved4[3];</div>
<div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;    <span class="keywordtype">void</span>* AtlThunkSListPtr;</div>
<div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;    <span class="keywordtype">void</span>* Reserved5;</div>
<div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;    ULONG Reserved6;</div>
<div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;    <span class="keywordtype">void</span>* Reserved7;</div>
<div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;    ULONG Reserved8;</div>
<div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;    ULONG AtlThunkSListPtr32;</div>
<div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;    <span class="keywordtype">void</span>* Reserved9[45];</div>
<div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;    BYTE  Reserved10[96];</div>
<div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;    <span class="keywordtype">void</span>* PostProcessInitRoutine;</div>
<div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;    BYTE  Reserved11[128];</div>
<div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;    <span class="keywordtype">void</span>* Reserved12[1];</div>
<div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;    ULONG SessionId;</div>
<div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;    };</div>
<div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160; </div>
<div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;<span class="keyword">struct </span>TEB</div>
<div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;    {</div>
<div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;    <span class="keywordtype">void</span>* Reserved1[12];</div>
<div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;    PEB*  ProcessEnvironmentBlock;</div>
<div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;    <span class="keywordtype">void</span>* Reserved2[399];</div>
<div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;    BYTE  Reserved3[1952];</div>
<div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;    <span class="keywordtype">void</span>* TlsSlots[64];</div>
<div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;    BYTE  Reserved4[8];</div>
<div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;    <span class="keywordtype">void</span>* Reserved5[26];</div>
<div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;    <span class="keywordtype">void</span>* ReservedForOle;</div>
<div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;    <span class="keywordtype">void</span>* Reserved6[4];</div>
<div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;    <span class="keywordtype">void</span>* TlsExpansionSlots;</div>
<div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;    };</div>
<div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160; </div>
<div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;<span class="keyword">struct </span>PROCESS_BASIC_INFORMATION</div>
<div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;    {</div>
<div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;    NTSTATUS  ExitStatus;</div>
<div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;    PEB*      PebBaseAddress;</div>
<div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;    KAFFINITY AffinityMask;</div>
<div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;    KPRIORITY BasePriority;</div>
<div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;    ULONG_PTR UniqueProcessId;</div>
<div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;    ULONG_PTR InheritedFromUniqueProcessId;</div>
<div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;    };</div>
<div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160; </div>
<div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;<span class="keyword">enum</span> ADDRESS_MODE</div>
<div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;    {</div>
<div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;    AddrMode1616,</div>
<div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;    AddrMode1632,</div>
<div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;    AddrModeReal,</div>
<div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;    AddrModeFlat</div>
<div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;    };</div>
<div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160; </div>
<div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;<span class="keyword">struct </span>ADDRESS64</div>
<div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;    {</div>
<div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;    DWORD64      Offset;</div>
<div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;    WORD         Segment;</div>
<div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;    ADDRESS_MODE Mode;</div>
<div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;    };</div>
<div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160; </div>
<div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;<span class="keyword">struct </span>KDHELP64</div>
<div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;    {</div>
<div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;    DWORD64 Thread;</div>
<div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;    DWORD   ThCallbackStack;</div>
<div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;    DWORD   ThCallbackBStore;</div>
<div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;    DWORD   NextCallback;</div>
<div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;    DWORD   FramePointer;</div>
<div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;    DWORD64 KiCallUserMode;</div>
<div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;    DWORD64 KeUserCallbackDispatcher;</div>
<div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;    DWORD64 SystemRangeStart;</div>
<div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;    DWORD64 KiUserExceptionDispatcher;</div>
<div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;    DWORD64 StackBase;</div>
<div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;    DWORD64 StackLimit;</div>
<div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;    DWORD64 Reserved[5];</div>
<div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;    };</div>
<div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160; </div>
<div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;<span class="keyword">struct </span>STACKFRAME64</div>
<div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;    {</div>
<div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;    ADDRESS64 AddrPC;</div>
<div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;    ADDRESS64 AddrReturn;</div>
<div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;    ADDRESS64 AddrFrame;</div>
<div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;    ADDRESS64 AddrStack;</div>
<div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;    ADDRESS64 AddrBStore;</div>
<div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;    <span class="keywordtype">void</span>*     FuncTableEntry;</div>
<div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;    DWORD64   Params[4];</div>
<div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;    BOOL      Far;</div>
<div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;    BOOL      Virtual;</div>
<div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;    DWORD64   Reserved[3];</div>
<div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;    KDHELP64  KdHelp;</div>
<div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;    };</div>
<div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160; </div>
<div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;<span class="keyword">struct </span>WOW64_FLOATING_SAVE_AREA</div>
<div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;    {</div>
<div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;    DWORD ControlWord;</div>
<div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;    DWORD StatusWord;</div>
<div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;    DWORD TagWord;</div>
<div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;    DWORD ErrorOffset;</div>
<div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;    DWORD ErrorSelector;</div>
<div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;    DWORD DataOffset;</div>
<div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;    DWORD DataSelector;</div>
<div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;    BYTE  RegisterArea[80];</div>
<div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;    DWORD Cr0NpxState;</div>
<div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;    };</div>
<div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160; </div>
<div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;<span class="preprocessor">#pragma pack (push, 4)</span></div>
<div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160; </div>
<div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;<span class="keyword">struct </span>WOW64_CONTEXT</div>
<div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;    {</div>
<div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;    DWORD ContextFlags;</div>
<div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160; </div>
<div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;    DWORD Dr0;</div>
<div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;    DWORD Dr1;</div>
<div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;    DWORD Dr2;</div>
<div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;    DWORD Dr3;</div>
<div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;    DWORD Dr6;</div>
<div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;    DWORD Dr7;</div>
<div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160; </div>
<div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;    WOW64_FLOATING_SAVE_AREA FloatSave;</div>
<div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160; </div>
<div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;    DWORD SegGs;</div>
<div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;    DWORD SegFs;</div>
<div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;    DWORD SegEs;</div>
<div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;    DWORD SegDs;</div>
<div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160; </div>
<div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;    DWORD Edi;</div>
<div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;    DWORD Esi;</div>
<div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;    DWORD Ebx;</div>
<div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;    DWORD Edx;</div>
<div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;    DWORD Ecx;</div>
<div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;    DWORD Eax;</div>
<div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160; </div>
<div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;    DWORD Ebp;</div>
<div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;    DWORD Eip;</div>
<div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;    DWORD SegCs;</div>
<div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;    DWORD EFlags;</div>
<div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;    DWORD Esp;</div>
<div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;    DWORD SegSs;</div>
<div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160; </div>
<div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;    BYTE  ExtendedRegisters[512];</div>
<div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;    };</div>
<div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160; </div>
<div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;<span class="preprocessor">#pragma pack (pop)</span></div>
<div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160; </div>
<div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;<span class="keyword">struct </span>SYMBOL_INFO</div>
<div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;    {</div>
<div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;    ULONG   SizeOfStruct;</div>
<div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;    ULONG   TypeIndex;</div>
<div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;    ULONG64 Reserved[2];</div>
<div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;    ULONG   info;</div>
<div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;    ULONG   Size;</div>
<div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;    ULONG64 ModBase;</div>
<div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;    ULONG   Flags;</div>
<div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;    ULONG64 Value;</div>
<div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;    ULONG64 Address;</div>
<div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;    ULONG   Register;</div>
<div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;    ULONG   Scope;</div>
<div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;    ULONG   Tag;</div>
<div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;    ULONG   NameLen;</div>
<div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;    ULONG   MaxNameLen;</div>
<div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;    <span class="keywordtype">char</span>    Name[1];</div>
<div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;    };</div>
<div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160; </div>
<div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;<span class="keyword">struct </span>IMAGEHLP_LINE64</div>
<div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;    {</div>
<div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;    DWORD   SizeOfStruct;</div>
<div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;    <span class="keywordtype">void</span>*   Key;</div>
<div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;    DWORD   LineNumber;</div>
<div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;    <span class="keywordtype">char</span>*   FileName;</div>
<div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;    DWORD64 Address;</div>
<div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;    };</div>
<div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160; </div>
<div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;<span class="keyword">typedef</span> bool    (__stdcall *PREAD_PROCESS_MEMORY_ROUTINE64)   (HANDLE process, DWORD64 baseAddress, <span class="keywordtype">void</span>* buffer, DWORD size, DWORD* bytesRead);</div>
<div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">void</span>*   (__stdcall *PFUNCTION_TABLE_ACCESS_ROUTINE64) (HANDLE process, DWORD64 baseAddress);</div>
<div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;<span class="keyword">typedef</span> DWORD64 (__stdcall *PGET_MODULE_BASE_ROUTINE64)       (HANDLE process, DWORD64 address);</div>
<div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;<span class="keyword">typedef</span> DWORD64 (__stdcall *PTRANSLATE_ADDRESS_ROUTINE64)     (HANDLE process, HANDLE thread, ADDRESS64* address);</div>
<div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160; </div>
<div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;<span class="keyword">typedef</span> void (*unexpected_handler)();</div>
<div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160; </div>
<div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;<span class="preprocessor">#pragma pack (push, 4)</span></div>
<div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160; </div>
<div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;<span class="keyword">struct </span>MINIDUMP_THREAD_CALLBACK</div>
<div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;    {</div>
<div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;    ULONG    ThreadId;</div>
<div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;    HANDLE   ThreadHandle;</div>
<div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;    CONTEXT  Context;</div>
<div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;    ULONG    SizeOfContext;</div>
<div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;    ULONG64  StackBase;</div>
<div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;    ULONG64  StackEnd;</div>
<div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;    };</div>
<div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160; </div>
<div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;<span class="keyword">struct </span>MINIDUMP_THREAD_EX_CALLBACK</div>
<div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;    {</div>
<div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;    ULONG    ThreadId;</div>
<div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;    HANDLE   ThreadHandle;</div>
<div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;    CONTEXT  Context;</div>
<div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;    ULONG    SizeOfContext;</div>
<div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;    ULONG64  StackBase;</div>
<div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;    ULONG64  StackEnd;</div>
<div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;    ULONG64  BackingStoreBase;</div>
<div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;    ULONG64  BackingStoreEnd;</div>
<div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;    };</div>
<div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160; </div>
<div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;<span class="keyword">struct </span>MINIDUMP_MODULE_CALLBACK</div>
<div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;    {</div>
<div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;    <span class="keywordtype">wchar_t</span>* FullPath;</div>
<div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;    ULONG64  BaseOfImage;</div>
<div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;    ULONG    SizeOfImage;</div>
<div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;    ULONG    CheckSum;</div>
<div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;    ULONG    TimeDateStamp;</div>
<div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;    VS_FIXEDFILEINFO VersionInfo;</div>
<div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;    <span class="keywordtype">void</span>*    CvRecord;</div>
<div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;    ULONG    SizeOfCvRecord;</div>
<div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;    <span class="keywordtype">void</span>*    MiscRecord;</div>
<div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;    ULONG    SizeOfMiscRecord;</div>
<div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;    };</div>
<div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160; </div>
<div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;<span class="keyword">struct </span>MINIDUMP_INCLUDE_THREAD_CALLBACK</div>
<div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;    {</div>
<div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;    ULONG    ThreadId;</div>
<div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;    };</div>
<div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160; </div>
<div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;<span class="keyword">struct </span>MINIDUMP_INCLUDE_MODULE_CALLBACK</div>
<div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;    {</div>
<div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;    ULONG64  BaseOfImage;</div>
<div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;    };</div>
<div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160; </div>
<div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;<span class="keyword">struct </span>MINIDUMP_MEMORY_INFO</div>
<div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;    {</div>
<div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;    ULONG64  BaseAddress;</div>
<div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;    ULONG64  AllocationBase;</div>
<div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;    ULONG32  AllocationProtect;</div>
<div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;    ULONG32  __alignment1;</div>
<div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;    ULONG64  RegionSize;</div>
<div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;    ULONG32  State;</div>
<div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;    ULONG32  Protect;</div>
<div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;    ULONG32  Type;</div>
<div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;    ULONG32  __alignment2;</div>
<div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;    };</div>
<div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160; </div>
<div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;<span class="keyword">struct </span>MINIDUMP_USER_STREAM</div>
<div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;    {</div>
<div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;    ULONG32  Type;</div>
<div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;    ULONG    BufferSize;</div>
<div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;    <span class="keywordtype">void</span>*    Buffer;</div>
<div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;    };</div>
<div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160; </div>
<div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;<span class="keyword">struct </span>MINIDUMP_USER_STREAM_INFORMATION</div>
<div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;    {</div>
<div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;    ULONG                 UserStreamCount;</div>
<div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;    MINIDUMP_USER_STREAM* UserStreamArray;</div>
<div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;    };</div>
<div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160; </div>
<div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;<span class="keyword">struct </span>MINIDUMP_CALLBACK_INPUT</div>
<div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;    {</div>
<div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;    ULONG    ProcessId;</div>
<div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;    HANDLE   ProcessHandle;</div>
<div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;    ULONG    CallbackType;</div>
<div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160; </div>
<div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;    <span class="keyword">union  </span><span class="comment">//-V2514</span></div>
<div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;        {</div>
<div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;        MINIDUMP_THREAD_CALLBACK         Thread;</div>
<div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;        MINIDUMP_THREAD_EX_CALLBACK      ThreadEx;</div>
<div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;        MINIDUMP_MODULE_CALLBACK         Module;</div>
<div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;        MINIDUMP_INCLUDE_THREAD_CALLBACK IncludeThread;</div>
<div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;        MINIDUMP_INCLUDE_MODULE_CALLBACK IncludeModule;</div>
<div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;        };</div>
<div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;    };</div>
<div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160; </div>
<div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;<span class="keyword">struct </span>MINIDUMP_CALLBACK_OUTPUT</div>
<div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;    {</div>
<div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;    <span class="keyword">union  </span><span class="comment">//-V2514</span></div>
<div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;        {</div>
<div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;        ULONG ModuleWriteFlags;</div>
<div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;        ULONG ThreadWriteFlags;</div>
<div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;        ULONG SecondaryFlags;</div>
<div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160; </div>
<div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;        <span class="keyword">struct</span></div>
<div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;            {</div>
<div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;            ULONG64  MemoryBase;</div>
<div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;            ULONG    MemorySize;</div>
<div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;            };</div>
<div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160; </div>
<div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;        <span class="keyword">struct</span></div>
<div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;            {</div>
<div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;            <span class="keywordtype">unsigned</span> CheckCancel;</div>
<div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;            <span class="keywordtype">unsigned</span> Cancel;</div>
<div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;            };</div>
<div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160; </div>
<div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;        HANDLE Handle;  <span class="comment">//-V117</span></div>
<div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;        };</div>
<div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160; </div>
<div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;    <span class="keyword">struct</span></div>
<div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;        {</div>
<div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;        MINIDUMP_MEMORY_INFO VmRegion;</div>
<div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;        <span class="keywordtype">unsigned</span>             Continue;</div>
<div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;        };</div>
<div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160; </div>
<div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;    HRESULT Status;</div>
<div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;    };</div>
<div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160; </div>
<div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;<span class="keyword">struct </span>MINIDUMP_EXCEPTION_INFORMATION</div>
<div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;    {</div>
<div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;    DWORD               ThreadId;</div>
<div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;    EXCEPTION_POINTERS* ExceptionPointers;</div>
<div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;    <span class="keywordtype">unsigned</span>            ClientPointers;</div>
<div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;    };</div>
<div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160; </div>
<div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;<span class="keyword">typedef</span> int (WINAPI* MINIDUMP_CALLBACK_ROUTINE) (<span class="keywordtype">void</span>* param, MINIDUMP_CALLBACK_INPUT* input, MINIDUMP_CALLBACK_OUTPUT* output);</div>
<div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160; </div>
<div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;<span class="keyword">struct </span>MINIDUMP_CALLBACK_INFORMATION</div>
<div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;    {</div>
<div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;    MINIDUMP_CALLBACK_ROUTINE CallbackRoutine;</div>
<div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;    <span class="keywordtype">void</span>*                     CallbackParam;</div>
<div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;    };</div>
<div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160; </div>
<div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;<span class="keyword">enum</span> MINIDUMP_TYPE</div>
<div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;    {</div>
<div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;    MiniDumpNormal                         = 0x00000000,</div>
<div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;    MiniDumpWithDataSegs                   = 0x00000001,</div>
<div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;    MiniDumpWithFullMemory                 = 0x00000002,</div>
<div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;    MiniDumpWithHandleData                 = 0x00000004,</div>
<div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;    MiniDumpFilterMemory                   = 0x00000008,</div>
<div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;    MiniDumpScanMemory                     = 0x00000010,</div>
<div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;    MiniDumpWithUnloadedModules            = 0x00000020,</div>
<div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;    MiniDumpWithIndirectlyReferencedMemory = 0x00000040,</div>
<div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;    MiniDumpFilterModulePaths              = 0x00000080,</div>
<div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;    MiniDumpWithProcessThreadData          = 0x00000100,</div>
<div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;    MiniDumpWithPrivateReadWriteMemory     = 0x00000200,</div>
<div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;    MiniDumpWithoutOptionalData            = 0x00000400,</div>
<div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;    MiniDumpWithFullMemoryInfo             = 0x00000800,</div>
<div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;    MiniDumpWithThreadInfo                 = 0x00001000,</div>
<div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;    MiniDumpWithCodeSegs                   = 0x00002000,</div>
<div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;    MiniDumpWithoutAuxiliaryState          = 0x00004000,</div>
<div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;    MiniDumpWithFullAuxiliaryState         = 0x00008000,</div>
<div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;    MiniDumpWithPrivateWriteCopyMemory     = 0x00010000,</div>
<div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;    MiniDumpIgnoreInaccessibleMemory       = 0x00020000,</div>
<div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;    MiniDumpWithTokenInformation           = 0x00040000</div>
<div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;    };</div>
<div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160; </div>
<div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;<span class="preprocessor">#ifndef CONTEXT_ALL</span></div>
<div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;<span class="preprocessor">#define CONTEXT_ALL              ( CONTEXT_CONTROL | CONTEXT_INTEGER | CONTEXT_SEGMENTS | CONTEXT_FLOATING_POINT | CONTEXT_DEBUG_REGISTERS )</span></div>
<div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160; </div>
<div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;<span class="preprocessor">#pragma pack (pop)</span></div>
<div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160; </div>
<div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;} <span class="comment">// namespace Win32</span></div>
<div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160; </div>
<div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160; </div>
<div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;<span class="preprocessor">#define FOREGROUND_BLACK         ( 0                                                         )</span></div>
<div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;<span class="preprocessor">#define FOREGROUND_CYAN          ( FOREGROUND_BLUE       | FOREGROUND_GREEN                  )</span></div>
<div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;<span class="preprocessor">#define FOREGROUND_MAGENTA       ( FOREGROUND_BLUE       | FOREGROUND_RED                    )</span></div>
<div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;<span class="preprocessor">#define FOREGROUND_DARKYELLOW    ( FOREGROUND_GREEN      | FOREGROUND_RED                    )</span></div>
<div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;<span class="preprocessor">#define FOREGROUND_LIGHTGRAY     ( FOREGROUND_BLUE       | FOREGROUND_GREEN | FOREGROUND_RED )</span></div>
<div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;<span class="preprocessor">#define FOREGROUND_DARKGRAY      (                         FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;<span class="preprocessor">#define FOREGROUND_LIGHTBLUE     ( FOREGROUND_BLUE       | FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;<span class="preprocessor">#define FOREGROUND_LIGHTGREEN    ( FOREGROUND_GREEN      | FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;<span class="preprocessor">#define FOREGROUND_LIGHTCYAN     ( FOREGROUND_CYAN       | FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;<span class="preprocessor">#define FOREGROUND_LIGHTRED      ( FOREGROUND_RED        | FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;<span class="preprocessor">#define FOREGROUND_LIGHTMAGENTA  ( FOREGROUND_MAGENTA    | FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;<span class="preprocessor">#define FOREGROUND_YELLOW        ( FOREGROUND_DARKYELLOW | FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;<span class="preprocessor">#define FOREGROUND_WHITE         ( FOREGROUND_LIGHTGRAY  | FOREGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160; </div>
<div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;<span class="preprocessor">#define BACKGROUND_BLACK         ( 0                                                         )</span></div>
<div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;<span class="preprocessor">#define BACKGROUND_CYAN          ( BACKGROUND_BLUE       | BACKGROUND_GREEN                  )</span></div>
<div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;<span class="preprocessor">#define BACKGROUND_MAGENTA       ( BACKGROUND_BLUE       | BACKGROUND_RED                    )</span></div>
<div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;<span class="preprocessor">#define BACKGROUND_DARKYELLOW    ( BACKGROUND_GREEN      | BACKGROUND_RED                    )</span></div>
<div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;<span class="preprocessor">#define BACKGROUND_GRAY          ( BACKGROUND_BLUE       | BACKGROUND_GREEN | BACKGROUND_RED )</span></div>
<div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;<span class="preprocessor">#define BACKGROUND_DARKGRAY      (                         BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;<span class="preprocessor">#define BACKGROUND_LIGHTBLUE     ( BACKGROUND_BLUE       | BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;<span class="preprocessor">#define BACKGROUND_LIGHTGREEN    ( BACKGROUND_GREEN      | BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;<span class="preprocessor">#define BACKGROUND_LIGHTCYAN     ( BACKGROUND_CYAN       | BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;<span class="preprocessor">#define BACKGROUND_LIGHTRED      ( BACKGROUND_RED        | BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;<span class="preprocessor">#define BACKGROUND_LIGHTMAGENTA  ( BACKGROUND_MAGENTA    | BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;<span class="preprocessor">#define BACKGROUND_LIGHTYELLOW   ( BACKGROUND_DARKYELLOW | BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;<span class="preprocessor">#define BACKGROUND_WHITE         ( BACKGROUND_DARKGRAY   | BACKGROUND_INTENSITY              )</span></div>
<div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160; </div>
<div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160; </div>
<div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;<span class="comment">//{ There are copies of MSVC compiler built-in predefined definitions, which are wrong in 64-bit mode.</span></div>
<div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;<span class="comment">//  So we have to override them. See: http://stackoverflow.com/questions/39113168</span></div>
<div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160; </div>
<div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160; </div>
<div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;                                                    <span class="comment">//  MS ABI C++ Exception Layout</span></div>
<div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;<span class="keyword">namespace </span>Win32 {                                   <span class="comment">//  ---------------------------</span></div>
<div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;                                                    <span class="comment">//</span></div>
<div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;<span class="preprocessor">#pragma pack (push, 4)                              </span><span class="comment">//   EXCEPTION_RECORD:</span></div>
<div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;                                                    <span class="comment">//  +==================================================+</span></div>
<div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;<span class="keyword">struct </span>ThrowInfo                                    <span class="comment">//  |...                                               |</span></div>
<div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;    {                                               <span class="comment">//  |NumberParameters:        3, 4 or more             |</span></div>
<div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;    __int32 attributes;                             <span class="comment">//  |ExceptionInformation[0]: MS signature 0x19930520  |</span></div>
<div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;    __int32 pmfnUnwind;                             <span class="comment">//  |ExceptionInformation[1]: object* thrown           |</span></div>
<div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;    __int32 pForwardCompat;                         <span class="comment">//  |ExceptionInformation[2]: ThrowInfo* --------------+---+</span></div>
<div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;    __int32 pCatchableTypeArray;                    <span class="comment">//  |ExceptionInformation[3]: ImageBase (if params &gt; 3)|   |</span></div>
<div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;    };                                              <span class="comment">//  +==================================================+   |</span></div>
<div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;                                                    <span class="comment">//                                                         |</span></div>
<div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;<span class="keyword">struct </span>CatchableTypeArray                           <span class="comment">//        ThrowInfo:                                       |</span></div>
<div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;    {                                               <span class="comment">//        +======================================+ &lt;-------+</span></div>
<div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;    __int32 nCatchableTypes;                        <span class="comment">//        |   ...                                |</span></div>
<div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;    __int32 arrayOfCatchableTypes[];                <span class="comment">//  +-----+-- pCatchableTypeArray (ptr/RVA)      |</span></div>
<div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;    };                                              <span class="comment">//  |     +======================================+</span></div>
<div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;                                                    <span class="comment">//  |</span></div>
<div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;<span class="keyword">struct </span>CatchableType                                <span class="comment">//  |     CatchableTypeArray:</span></div>
<div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;    {                                               <span class="comment">//  +---&gt; +======================================+</span></div>
<div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;    __int32 properties;                             <span class="comment">//        |   ...                                |</span></div>
<div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;    __int32 pType;                                  <span class="comment">//  +-----+-- arrayOfCatchableTypes[0] (ptr/RVA) |</span></div>
<div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;    __int32 thisDisplacement[3]; <span class="comment">// struct _PMD     //  |     +======================================+</span></div>
<div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;    __int32 sizeOrOffset;                           <span class="comment">//  |</span></div>
<div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;    __int32 copyFunction;                           <span class="comment">//  |     CatchableType:</span></div>
<div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;    };                                              <span class="comment">//  +---&gt; +====================+</span></div>
<div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;                                                    <span class="comment">//        | ...                |        std::type_info:</span></div>
<div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;<span class="preprocessor">#pragma pack (pop)                                  </span><span class="comment">//        | pType (ptr/RVA) ---+------&gt; +==================+</span></div>
<div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;                                                    <span class="comment">//        | ...                |        |type_info data    |</span></div>
<div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;} <span class="comment">// namespace Win32                                //        +====================+        |...               |</span></div>
<div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;                                                    <span class="comment">//                                      +==================+</span></div>
<div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160; </div>
<div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;<span class="comment">// Similar to __CxxDetectRethrow(), see C:\Bin\Microsoft Visual Studio 14.0\VC\crt\src\crtsrc\vcruntime\frame.cpp:</span></div>
<div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160; </div>
<div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;<span class="preprocessor">#define _TX_MSC__CXX_DETECT_RETHROW( exc )                                     \</span></div>
<div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;<span class="preprocessor">    (                                                                          \</span></div>
<div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;<span class="preprocessor">    (exc)                                          &amp;&amp;                          \</span></div>
<div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;<span class="preprocessor">    (exc) -&gt; ExceptionCode    == EXCEPTION_CPP_MSC &amp;&amp;                          \</span></div>
<div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;<span class="preprocessor">    (exc) -&gt; NumberParameters &gt;= 3                 &amp;&amp;                          \</span></div>
<div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;<span class="preprocessor">                                                                               \</span></div>
<div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;<span class="preprocessor">    ((exc)-&gt; ExceptionInformation[0] == EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER1 ||  \</span></div>
<div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;<span class="preprocessor">     (exc)-&gt; ExceptionInformation[0] == EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER2 ||  \</span></div>
<div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;<span class="preprocessor">     (exc)-&gt; ExceptionInformation[0] == EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER3) &amp;&amp; \</span></div>
<div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;<span class="preprocessor">                                                                               \</span></div>
<div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;<span class="preprocessor">    (exc) -&gt; ExceptionInformation[2] == 0                                      \</span></div>
<div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;<span class="preprocessor">    )</span></div>
<div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160; </div>
<div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160; </div>
<div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160; </div>
<div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;<span class="comment">//{ The corresponding structures for GCC</span></div>
<div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;<span class="comment">//  From: http://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/libsupc%2B%2B/unwind-cxx.h</span></div>
<div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;<span class="comment">//  See:  http://mentorembedded.github.io/cxx-abi/abi-eh.html#cxx-abi</span></div>
<div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160; </div>
<div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;<span class="preprocessor">#if defined (_GCC_VER)</span></div>
<div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160; </div>
<div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160; </div>
<div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;                                                    <span class="comment">// GCC ABI C++ Exception layout. A/B are ExceptionInformation[0].</span></div>
<div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;<span class="keyword">namespace </span>ABI {                                     <span class="comment">// --------------------------------------------------------------</span></div>
<div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;                                                    <span class="comment">//</span></div>
<div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;<span class="keyword">struct </span>__cxa_exception                              <span class="comment">// Case A: &quot;_Unwind_Exception* A&quot; is undependent exception:</span></div>
<div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;    {                                               <span class="comment">// --------------------------------------------------------</span></div>
<div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;    <span class="keyword">union </span>{                                         <span class="comment">//</span></div>
<div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;        <span class="keyword">struct                                      </span><span class="comment">//           __cxa_exception:           std::type_info:</span></div>
<div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;            {                                       <span class="comment">//       -*--+====================+     +==================+</span></div>
<div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;            ::std::type_info* exceptionType;        <span class="comment">//        ^  |exceptionType* -----+----&gt;|type_info data    |</span></div>
<div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;            void (*exceptionDestructor)(<span class="keywordtype">void</span>*);     <span class="comment">//        |  |...                 |     |...               |</span></div>
<div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;            };                                      <span class="comment">//       -1  |                    |     +==================+</span></div>
<div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;        <span class="keyword">struct                                      </span><span class="comment">//        |  |                    |</span></div>
<div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;            {                                       <span class="comment">// A &gt;----|--+--------------------+</span></div>
<div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;            __cxa_exception*  primaryException;     <span class="comment">//     |  |  |unwindHeader        |</span></div>
<div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;            void (*padding)();                      <span class="comment">//    +1  |  |                    |</span></div>
<div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;            };                                      <span class="comment">//     |  |  |                    |</span></div>
<div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;        };                                          <span class="comment">//     V  |  |                    |</span></div>
<div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;                                                    <span class="comment">//    -*---  +====================+</span></div>
<div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;    std::unexpected_handler   unexpectedHandler;    <span class="comment">//           |object              |</span></div>
<div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;    std::terminate_handler    terminateHandler;     <span class="comment">//           +--------------------+</span></div>
<div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;                                                    <span class="comment">//</span></div>
<div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;    __cxa_exception*          nextException;        <span class="comment">// Case B: &quot;_Unwind_Exception* B&quot; is dependent exception</span></div>
<div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;    <span class="keywordtype">int</span>                       handlerCount;         <span class="comment">// (unwindHeader.exception_class &amp; 1 != 0):</span></div>
<div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;    <span class="keywordtype">int</span>                       handlerSwitchValue;   <span class="comment">// -----------------------------------------------------</span></div>
<div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*      actionRecord;         <span class="comment">//</span></div>
<div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*      languageSpecificData; <span class="comment">//           __cxa_exception:               __cxa_exception:</span></div>
<div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;    <span class="keywordtype">void</span>*                     catchTemp;            <span class="comment">//       -*--+====================+     -*--+=================+</span></div>
<div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;    <span class="keywordtype">void</span>*                     adjustedPtr;          <span class="comment">//        ^  |primaryException* --+--    ^  |exceptionType*   |</span></div>
<div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;                                                    <span class="comment">//        |  |...                 |  \   |  |...              |</span></div>
<div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;    _Unwind_Exception         unwindHeader;         <span class="comment">//       -1  |                    |  |   |  |                 |</span></div>
<div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;    };                                              <span class="comment">//        |  |                    |  |   |  |                 |</span></div>
<div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;                                                    <span class="comment">// B &gt;----|--+--------------------+  |  -1  +-----------------+</span></div>
<div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;<span class="keyword">struct </span>__cxa_eh_globals                             <span class="comment">//     |  |  |unwindHeader        |  |   |  |unwindHeader     |</span></div>
<div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;    {                                               <span class="comment">//    +1  |  |                    |  |   |  |                 |</span></div>
<div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;    __cxa_exception* caughtExceptions;              <span class="comment">//     |  |  |                    |  |   |  |                 |</span></div>
<div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>     uncaughtExceptions;            <span class="comment">//     V  |  |                    |  \   |  |                 |</span></div>
<div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;    };                                              <span class="comment">//    -*---  +====================+   --&gt;*--+=================+</span></div>
<div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;                                                    <span class="comment">//           |...                 |         |object           |</span></div>
<div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;} <span class="comment">// namespace ABI                                  //           .                    .         |                 |</span></div>
<div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;                                                    <span class="comment">//                                          +-----------------+</span></div>
<div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160; </div>
<div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> ABI::__cxa_eh_globals* __cxa_get_globals();</div>
<div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160; </div>
<div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160; </div>
<div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160; </div>
<div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160; </div>
<div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;<span class="comment">//{ Hand-made IAT.</span></div>
<div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;<span class="comment">//  Some IDEs don&#39;t link with these libs by default in console projects, so do sunrise by hand. :(</span></div>
<div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160; </div>
<div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;<span class="comment">// Hand-made DLLIMPORT helpers</span></div>
<div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160; </div>
<div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;<span class="preprocessor">#define _TX_DLLIMPORT(     lib, retval, name, params )  TX_DLLIMPORT (true,  lib &quot;.dll&quot;</span>, retval, name, params, WINAPI)</div>
<div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;<span class="preprocessor">#define _TX_DLLIMPORT_OPT( lib, retval, name, params )  TX_DLLIMPORT (false, lib &quot;.dll&quot;</span>, retval, name, params, WINAPI)</div>
<div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;<span class="preprocessor">#define _TX_DLLIMPORT_CRT( lib, retval, name, params )  TX_DLLIMPORT (false, lib &quot;.dll&quot;</span>, retval, name, params, __stdcall)</div>
<div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160; </div>
<div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;void (*_txDllImport (<span class="keyword">const</span> <span class="keywordtype">char</span> dllFileName[], <span class="keyword">const</span> <span class="keywordtype">char</span> funcName[], <span class="keywordtype">bool</span> required = <span class="keyword">true</span>)) ();</div>
<div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160; </div>
<div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160; </div>
<div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160; </div>
<div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;<span class="keyword">namespace </span>Win32 {</div>
<div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160; </div>
<div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HDC,      CreateCompatibleDC,            (HDC dc));</div>
<div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HBITMAP,  CreateCompatibleBitmap,        (HDC dc, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height));</div>
<div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HGDIOBJ,  GetStockObject,                (<span class="keywordtype">int</span> <span class="keywordtype">object</span>));</div>
<div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HGDIOBJ,  SelectObject,                  (HDC dc, HGDIOBJ <span class="keywordtype">object</span>));</div>
<div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HGDIOBJ,  GetCurrentObject,              (HDC dc, <span class="keywordtype">unsigned</span> objectType));</div>
<div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">int</span>,      GetObjectA,                    (HGDIOBJ obj, <span class="keywordtype">int</span> bufsize, <span class="keywordtype">void</span>* buffer));</div>
<div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    DWORD,    GetObjectType,                 (HGDIOBJ <span class="keywordtype">object</span>));</div>
<div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     DeleteDC,                      (HDC dc));</div>
<div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     DeleteObject,                  (HGDIOBJ <span class="keywordtype">object</span>));</div>
<div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    COLORREF, SetTextColor,                  (HDC dc, COLORREF color));</div>
<div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    COLORREF, SetBkColor,                    (HDC dc, COLORREF color));</div>
<div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">int</span>,      SetBkMode,                     (HDC dc, <span class="keywordtype">int</span> bkMode));</div>
<div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HFONT,    CreateFontA,                   (<span class="keywordtype">int</span> height, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> escapement, <span class="keywordtype">int</span> orientation,</div>
<div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;                                                                         <span class="keywordtype">int</span> weight, DWORD italic, DWORD underline, DWORD strikeout,</div>
<div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;                                                                         DWORD charSet, DWORD outputPrec, DWORD clipPrec,</div>
<div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;                                                                         DWORD quality, DWORD pitchAndFamily, <span class="keyword">const</span> <span class="keywordtype">char</span> face[]));</div>
<div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">int</span>,      EnumFontFamiliesExA,           (HDC dc, LPLOGFONT logFont, FONTENUMPROC enumProc,</div>
<div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;                                                                         LPARAM lParam, DWORD reserved));</div>
<div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    COLORREF, SetPixel,                      (HDC dc, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, COLORREF color));</div>
<div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    COLORREF, GetPixel,                      (HDC dc, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y));</div>
<div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HPEN,     CreatePen,                     (<span class="keywordtype">int</span> penStyle, <span class="keywordtype">int</span> width, COLORREF color));</div>
<div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HBRUSH,   CreateSolidBrush,              (COLORREF color));</div>
<div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     MoveToEx,                      (HDC dc, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, POINT* point));</div>
<div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     LineTo,                        (HDC dc, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y));</div>
<div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     Polygon,                       (HDC dc, <span class="keyword">const</span> POINT points[], <span class="keywordtype">int</span> count));</div>
<div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     Polyline,                      (HDC dc, <span class="keyword">const</span> POINT points[], <span class="keywordtype">int</span> count));</div>
<div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     PolyBezier,                    (HDC dc, <span class="keyword">const</span> POINT points[], <span class="keywordtype">int</span> count));</div>
<div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     Rectangle,                     (HDC dc, <span class="keywordtype">int</span> x0, <span class="keywordtype">int</span> y0, <span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1));</div>
<div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     RoundRect,                     (HDC dc, <span class="keywordtype">int</span> x0, <span class="keywordtype">int</span> y0, <span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1, <span class="keywordtype">int</span> sizeX, <span class="keywordtype">int</span> sizeY));</div>
<div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     Ellipse,                       (HDC dc, <span class="keywordtype">int</span> x0, <span class="keywordtype">int</span> y0, <span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1));</div>
<div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     Arc,                           (HDC dc, <span class="keywordtype">int</span> x0, <span class="keywordtype">int</span> y0, <span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1,</div>
<div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;                                                                         <span class="keywordtype">int</span> xStart, <span class="keywordtype">int</span> yStart, <span class="keywordtype">int</span> xEnd, <span class="keywordtype">int</span> yEnd));</div>
<div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     Pie,                           (HDC dc, <span class="keywordtype">int</span> x0, <span class="keywordtype">int</span> y0, <span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1,</div>
<div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;                                                                         <span class="keywordtype">int</span> xStart, <span class="keywordtype">int</span> yStart, <span class="keywordtype">int</span> xEnd, <span class="keywordtype">int</span> yEnd));</div>
<div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     Chord,                         (HDC dc, <span class="keywordtype">int</span> x0, <span class="keywordtype">int</span> y0, <span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1,</div>
<div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;                                                                         <span class="keywordtype">int</span> xStart, <span class="keywordtype">int</span> yStart, <span class="keywordtype">int</span> xEnd, <span class="keywordtype">int</span> yEnd));</div>
<div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     TextOutA,                      (HDC dc, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keyword">const</span> <span class="keywordtype">char</span> <span class="keywordtype">string</span>[], <span class="keywordtype">int</span> length));</div>
<div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    UINT,     SetTextAlign,                  (HDC dc, <span class="keywordtype">unsigned</span> mode));</div>
<div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     GetTextExtentPoint32A,         (HDC dc, <span class="keyword">const</span> <span class="keywordtype">char</span> <span class="keywordtype">string</span>[], <span class="keywordtype">int</span> length, SIZE* size));</div>
<div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     ExtFloodFill,                  (HDC dc, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, COLORREF color, <span class="keywordtype">unsigned</span> type));</div>
<div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     BitBlt,                        (HDC dest, <span class="keywordtype">int</span> xDest, <span class="keywordtype">int</span> yDest, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height,</div>
<div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;                                                                         HDC src,  <span class="keywordtype">int</span> xSrc,  <span class="keywordtype">int</span> ySrc,  DWORD rOp));</div>
<div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     StretchBlt,                    (HDC dest, <span class="keywordtype">int</span> xDest, <span class="keywordtype">int</span> yDest, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height,</div>
<div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;                                                                         HDC src, <span class="keywordtype">int</span> xSrc, <span class="keywordtype">int</span> ySrc, <span class="keywordtype">int</span> wSrc, <span class="keywordtype">int</span> hSrc, DWORD rOp));</div>
<div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     PlgBlt,                        (HDC dest, <span class="keyword">const</span> POINT* parallelogram,</div>
<div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;                                                                         HDC src, <span class="keywordtype">int</span> xSrc, <span class="keywordtype">int</span> ySrc, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height,</div>
<div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;                                                                         HBITMAP mask, <span class="keywordtype">int</span> xMask, <span class="keywordtype">int</span> yMask));</div>
<div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">int</span>,      SetDIBitsToDevice,             (HDC dc, <span class="keywordtype">int</span> xDest, <span class="keywordtype">int</span> yDest, DWORD width, DWORD height,</div>
<div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;                                                                         <span class="keywordtype">int</span> xSrc, <span class="keywordtype">int</span> ySrc, <span class="keywordtype">unsigned</span> startLine, <span class="keywordtype">unsigned</span> numLines,</div>
<div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;                                                                         <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keyword">const</span> BITMAPINFO* info, <span class="keywordtype">unsigned</span> colorUse));</div>
<div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">int</span>,      GetDIBits,                     (HDC hdc, HBITMAP hbmp, <span class="keywordtype">unsigned</span> uStartScan, <span class="keywordtype">unsigned</span> cScanLines,</div>
<div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;                                                                         <span class="keywordtype">void</span>* lpvBits, BITMAPINFO* lpbi, <span class="keywordtype">unsigned</span> usage));</div>
<div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">bool</span>,     PatBlt,                        (HDC dc, <span class="keywordtype">int</span> x0, <span class="keywordtype">int</span> y0, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, DWORD rOp));</div>
<div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">int</span>,      SetROP2,                       (HDC dc, <span class="keywordtype">int</span> mode));</div>
<div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    <span class="keywordtype">int</span>,      SetStretchBltMode,             (HDC dc, <span class="keywordtype">int</span> mode));</div>
<div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    DWORD,    GdiSetBatchLimit,              (DWORD limit));</div>
<div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;GDI32&quot;</span>,    HBITMAP,  CreateDIBSection,              (HDC dc, <span class="keyword">const</span> BITMAPINFO* bmInfo, <span class="keywordtype">unsigned</span> colorUsage, <span class="keywordtype">void</span> **vBits,</div>
<div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;                                                                         HANDLE section, DWORD offset));</div>
<div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160; </div>
<div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;User32&quot;</span>,   <span class="keywordtype">int</span>,      DrawTextA,                     (HDC dc, <span class="keyword">const</span> <span class="keywordtype">char</span> text[], <span class="keywordtype">int</span> length, RECT* rect, <span class="keywordtype">unsigned</span> format));</div>
<div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;User32&quot;</span>,   HANDLE,   LoadImageA,                    (HINSTANCE inst, <span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">unsigned</span> type,</div>
<div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;                                                                        <span class="keywordtype">int</span> sizex, <span class="keywordtype">int</span> sizey, <span class="keywordtype">unsigned</span> mode));</div>
<div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;User32&quot;</span>,   <span class="keywordtype">bool</span>,     IsHungAppWindow,               (HWND wnd));</div>
<div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;User32&quot;</span>,   HWND,     GhostWindowFromHungWindow,     (HWND wnd));</div>
<div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;User32&quot;</span>,   <span class="keywordtype">bool</span>,     FlashWindowEx,                 (<span class="keyword">const</span> FLASHWINFO* flash));</div>
<div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160; </div>
<div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;WinMM&quot;</span>,    <span class="keywordtype">bool</span>,     PlaySound,                     (<span class="keyword">const</span> <span class="keywordtype">char</span> sound[], HMODULE mod, DWORD mode));</div>
<div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160; </div>
<div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MSImg32&quot;</span>,  <span class="keywordtype">bool</span>,     TransparentBlt,                (HDC dest, <span class="keywordtype">int</span> destX, <span class="keywordtype">int</span> destY, <span class="keywordtype">int</span> destWidth, <span class="keywordtype">int</span> destHeight,</div>
<div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;                                                                         HDC src,  <span class="keywordtype">int</span> srcX,  <span class="keywordtype">int</span> srcY,  <span class="keywordtype">int</span> srcWidth,  <span class="keywordtype">int</span> srcHeight,</div>
<div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;                                                                         <span class="keywordtype">unsigned</span> transparentColor));</div>
<div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MSImg32&quot;</span>,  <span class="keywordtype">bool</span>,     AlphaBlend,                    (HDC dest, <span class="keywordtype">int</span> destX, <span class="keywordtype">int</span> destY, <span class="keywordtype">int</span> destWidth, <span class="keywordtype">int</span> destHeight,</div>
<div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;                                                                         HDC src,  <span class="keywordtype">int</span> srcX,  <span class="keywordtype">int</span> srcY,  <span class="keywordtype">int</span> srcWidth,  <span class="keywordtype">int</span> srcHeight,</div>
<div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;                                                                         BLENDFUNCTION blending));</div>
<div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160; </div>
<div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">void</span>,     ExitProcess,                   (<span class="keywordtype">unsigned</span> retcode));</div>
<div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     TerminateProcess,              (HANDLE process, <span class="keywordtype">unsigned</span> retcode));</div>
<div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">void</span>,     FatalExit,                     (<span class="keywordtype">int</span> retcode));</div>
<div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">void</span>,     FatalAppExitA,                 (<span class="keywordtype">unsigned</span> action, <span class="keyword">const</span> <span class="keywordtype">char</span> message[]));</div>
<div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, DWORD,    GetThreadId,                   (HANDLE thread));</div>
<div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;Kernel32&quot;</span>, HWND,     GetConsoleWindow,              (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     SetConsoleFont,                (HANDLE con, DWORD fontIndex));</div>
<div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, DWORD,    GetNumberOfConsoleFonts,       (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     GetCurrentConsoleFont,         (HANDLE con, <span class="keywordtype">bool</span> maxWnd, CONSOLE_FONT_INFO*   curFont));</div>
<div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     GetCurrentConsoleFontEx,       (HANDLE con, <span class="keywordtype">bool</span> maxWnd, CONSOLE_FONT_INFOEX* curFont));</div>
<div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     SetCurrentConsoleFontEx,       (HANDLE con, <span class="keywordtype">bool</span> maxWnd, CONSOLE_FONT_INFOEX* curFont));</div>
<div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">void</span>,     RtlCaptureContext,             (CONTEXT* contextRecord));</div>
<div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, USHORT,   RtlCaptureStackBackTrace,      (DWORD framesToSkip, DWORD framesToCapture, <span class="keywordtype">void</span>** backTrace, DWORD* hash));</div>
<div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">void</span>*,    AddVectoredExceptionHandler,   (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> firstHandler, PVECTORED_EXCEPTION_HANDLER handler));</div>
<div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">unsigned</span>, RemoveVectoredExceptionHandler,(<span class="keywordtype">void</span>* handler));</div>
<div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     GetModuleHandleEx,             (DWORD flags, <span class="keyword">const</span> <span class="keywordtype">char</span> moduleName[], HMODULE* module));</div>
<div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     IsWow64Process,                (HANDLE process, <span class="keywordtype">int</span>* isWow64Process));</div>
<div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     Wow64GetThreadContext,         (HANDLE thread, WOW64_CONTEXT* context));</div>
<div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Kernel32&quot;</span>, <span class="keywordtype">bool</span>,     SetThreadStackGuarantee,       (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>* stackSize));</div>
<div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160; </div>
<div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;OLE32&quot;</span>,    HRESULT,  CoInitialize,                  (<span class="keywordtype">void</span>*));</div>
<div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;OLE32&quot;</span>,    HRESULT,  CoCreateInstance,              (REFCLSID clsId, IUnknown*, DWORD, REFIID iId, <span class="keywordtype">void</span>** value));</div>
<div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;OLE32&quot;</span>,    <span class="keywordtype">void</span>,     CoUninitialize,                (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160; </div>
<div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;Shell32&quot;</span>,  HINSTANCE,ShellExecuteA,                 (HWND wnd, <span class="keyword">const</span> <span class="keywordtype">char</span> operation[], <span class="keyword">const</span> <span class="keywordtype">char</span> file[],</div>
<div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;                                                                         <span class="keyword">const</span> <span class="keywordtype">char</span> parameters[], <span class="keyword">const</span> <span class="keywordtype">char</span> directory[], <span class="keywordtype">int</span> showCmd));</div>
<div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160; </div>
<div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;ShlWAPI&quot;</span>,  <span class="keywordtype">char</span>*,    StrStrIA,                      (<span class="keyword">const</span> <span class="keywordtype">char</span>    <span class="keywordtype">string</span>[], <span class="keyword">const</span> <span class="keywordtype">char</span>    search[]));</div>
<div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;ShlWAPI&quot;</span>,  <span class="keywordtype">char</span>*,    StrStrIW,                      (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span> <span class="keywordtype">string</span>[], <span class="keyword">const</span> <span class="keywordtype">wchar_t</span> search[]));</div>
<div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160; </div>
<div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;NTDLL&quot;</span>,    <span class="keywordtype">char</span>*,    wine_get_version,              (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;_TX_DLLIMPORT     (<span class="stringliteral">&quot;NTDLL&quot;</span>,    NTSTATUS, NtQueryInformationProcess,     (HANDLE process, <span class="keywordtype">int</span> infoClass,</div>
<div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;                                                                         <span class="keywordtype">void</span>* processInfo, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> szProcessInfo, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>* szReturnInfo));</div>
<div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160; </div>
<div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   <span class="keywordtype">void</span>,     exit,                          (<span class="keywordtype">int</span> retcode));</div>
<div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   <span class="keywordtype">void</span>,     _cexit,                        (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   <span class="keywordtype">unsigned</span>, _fpreset,                      (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   <span class="keywordtype">unsigned</span>, _controlfp,                    (<span class="keywordtype">unsigned</span> control, <span class="keywordtype">unsigned</span> mask));</div>
<div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   uintptr_t,_beginthread,                  (<span class="keywordtype">void</span> (__cdecl* start_address) (<span class="keywordtype">void</span>*), <span class="keywordtype">unsigned</span> stack_size, <span class="keywordtype">void</span>* arglist));</div>
<div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   uintptr_t,_beginthreadex,                (<span class="keywordtype">void</span>* security, <span class="keywordtype">unsigned</span> stack_size, <span class="keywordtype">unsigned</span> (__stdcall* start_address) (<span class="keywordtype">void</span>*),</div>
<div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;                                                                         <span class="keywordtype">void</span> *arglist, <span class="keywordtype">unsigned</span> init_flag, <span class="keywordtype">unsigned</span>* thread_addr));</div>
<div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   <span class="keywordtype">char</span>*,    __unDName,                     (<span class="keywordtype">char</span>* outStr, <span class="keyword">const</span> <span class="keywordtype">char</span>* mangledName, <span class="keywordtype">int</span> outStrLen,</div>
<div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;                                                                         <span class="keywordtype">void</span>* (*mallocFunc) (<span class="keywordtype">size_t</span> size), <span class="keywordtype">void</span> (*freeFunc) (<span class="keywordtype">void</span> *pointer),</div>
<div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;                                                                         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> flags));</div>
<div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;_TX_DLLIMPORT_CRT (<span class="stringliteral">&quot;MSVCRT&quot;</span>,   unexpected_handler, set_unexpected,      (unexpected_handler handler));</div>
<div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160; </div>
<div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;OpenGL32&quot;</span>, HDC,         wglGetCurrentDC,            (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;OpenGL32&quot;</span>, <span class="keywordtype">unsigned</span>,    glGetError,                 (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;Glu32&quot;</span>,    <span class="keyword">const</span> <span class="keywordtype">char</span>*, gluErrorString,             (<span class="keywordtype">unsigned</span> error));</div>
<div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160; </div>
<div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;ComDlg32&quot;</span>, DWORD,    CommDlgExtendedError,          (<span class="keywordtype">void</span>));</div>
<div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160; </div>
<div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, <span class="keywordtype">bool</span>,     MiniDumpWriteDump,             (HANDLE process, DWORD processId, HANDLE file, MINIDUMP_TYPE dumpType,</div>
<div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;                                                                         MINIDUMP_EXCEPTION_INFORMATION*   exceptionParam,</div>
<div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;                                                                         MINIDUMP_USER_STREAM_INFORMATION* userStreamParam,</div>
<div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;                                                                         MINIDUMP_CALLBACK_INFORMATION*    callbackParam));</div>
<div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160; </div>
<div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, DWORD,    SymSetOptions,                 (DWORD options));</div>
<div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymInitialize,                 (HANDLE process, <span class="keyword">const</span> <span class="keywordtype">char</span> userSearchPath[], <span class="keywordtype">bool</span> invadeProcess));</div>
<div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymFromAddr,                   (HANDLE process, DWORD64 addr, DWORD64* offset, SYMBOL_INFO*     symbol));</div>
<div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymGetLineFromAddr64,          (HANDLE process, DWORD64 addr, DWORD*   offset, IMAGEHLP_LINE64* line));</div>
<div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, DWORD64,  SymGetModuleBase64,            (HANDLE process, DWORD64 addr));</div>
<div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymCleanup,                    (HANDLE process));</div>
<div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, <span class="keywordtype">void</span>*,    SymFunctionTableAccess64,      (HANDLE process, DWORD64 addrBase));</div>
<div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;DbgHelp*&quot;</span>, <span class="keywordtype">bool</span>,     StackWalk64,                   (DWORD arch, HANDLE process, HANDLE thread, STACKFRAME64* frame, <span class="keywordtype">void</span>* ctxRecord,</div>
<div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;                                                                         PREAD_PROCESS_MEMORY_ROUTINE64   readMemoryFunc,</div>
<div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;                                                                         PFUNCTION_TABLE_ACCESS_ROUTINE64 tableAccessFunc,</div>
<div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;                                                                         PGET_MODULE_BASE_ROUTINE64       getModuleBaseFunc,</div>
<div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;                                                                         PTRANSLATE_ADDRESS_ROUTINE64     translateAddressFunc));</div>
<div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;<span class="keyword">namespace </span>MinGW {</div>
<div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, DWORD,    SymSetOptions,                 (DWORD options));</div>
<div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymInitialize,                 (HANDLE process, <span class="keyword">const</span> <span class="keywordtype">char</span> userSearchPath[], <span class="keywordtype">bool</span> invadeProcess));</div>
<div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymFromAddr,                   (HANDLE process, DWORD64 addr, DWORD64* offset, SYMBOL_INFO*     symbol));</div>
<div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymGetLineFromAddr64,          (HANDLE process, DWORD64 addr, DWORD*   offset, IMAGEHLP_LINE64* line));</div>
<div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, DWORD64,  SymGetModuleBase64,            (HANDLE process, DWORD64 addr));</div>
<div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, <span class="keywordtype">bool</span>,     SymCleanup,                    (HANDLE process));</div>
<div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, <span class="keywordtype">void</span>*,    SymFunctionTableAccess64,      (HANDLE process, DWORD64 addrBase));</div>
<div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;_TX_DLLIMPORT_OPT (<span class="stringliteral">&quot;MgwHelp*&quot;</span>, <span class="keywordtype">bool</span>,     StackWalk64,                   (DWORD arch, HANDLE process, HANDLE thread, STACKFRAME64* frame, <span class="keywordtype">void</span>* ctxRecord,</div>
<div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;                                                                         PREAD_PROCESS_MEMORY_ROUTINE64   readMemoryFunc,</div>
<div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;                                                                         PFUNCTION_TABLE_ACCESS_ROUTINE64 tableAccessFunc,</div>
<div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;                                                                         PGET_MODULE_BASE_ROUTINE64       getModuleBaseFunc,</div>
<div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;                                                                         PTRANSLATE_ADDRESS_ROUTINE64     translateAddressFunc));</div>
<div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;} <span class="comment">// namespace MinGW</span></div>
<div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;} <span class="comment">// namespace Win32</span></div>
<div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160; </div>
<div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160; </div>
<div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160; </div>
<div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160; </div>
<div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;<span class="comment">//{          Internal function prototypes, macros and constants</span></div>
<div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;<span class="comment">//  @name    Прототипы внутренних функций, макросы и константы</span></div>
<div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160; </div>
<div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;<span class="keywordtype">int</span>              _txInitialize();</div>
<div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;<span class="keywordtype">void</span>             _txCleanup();</div>
<div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160; </div>
<div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;HWND             _txCanvas_CreateWindow      (<span class="keyword">const</span> SIZE* size);</div>
<div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160; </div>
<div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnCREATE          (HWND wnd);</div>
<div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnDESTROY         (HWND wnd);</div>
<div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnCLOSE           (HWND);</div>
<div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnPAINT           (HWND wnd);</div>
<div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnKEY             (HWND wnd, WPARAM vk, LPARAM info, <span class="keywordtype">bool</span> down);</div>
<div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnCHAR            (HWND wnd, WPARAM ch, LPARAM info);</div>
<div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnTIMER           (HWND wnd, WPARAM <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnMOUSEMOVE       (HWND wnd, WPARAM buttons, LPARAM coords);</div>
<div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnMOUSELEAVE      (HWND wnd);</div>
<div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnCREATEWND       (HWND wnd, WPARAM, LPARAM lpar);</div>
<div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnDESTROYWND      (HWND wnd, WPARAM, LPARAM lpar);</div>
<div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnCmdCONSOLE      (HWND wnd, WPARAM cmd);</div>
<div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;<span class="keywordtype">bool</span>             _txCanvas_OnCmdABOUT        (HWND wnd, WPARAM cmd);</div>
<div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160; </div>
<div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;<span class="keywordtype">unsigned</span> WINAPI  _txCanvas_ThreadProc        (<span class="keywordtype">void</span>* data);</div>
<div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;LRESULT CALLBACK _txCanvas_WndProc           (HWND wnd, UINT msg, WPARAM wpar, LPARAM lpar);</div>
<div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160; </div>
<div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;HDC              _txBuffer_Create            (HWND wnd = NULL, <span class="keyword">const</span> POINT* size = NULL, HBITMAP bitmap = NULL,</div>
<div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;                                              RGBQUAD** pixels = NULL) tx_nodiscard;</div>
<div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;<span class="keywordtype">bool</span>             _txBuffer_Delete            (HDC* dc);</div>
<div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;<span class="keywordtype">bool</span>             _txBuffer_Select            (HGDIOBJ obj, HDC dc = <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());</div>
<div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160; </div>
<div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;HWND             _txConsole_Attach();</div>
<div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;<span class="keywordtype">bool</span>             _txConsole_OK() tx_nodiscard;</div>
<div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;<span class="keywordtype">bool</span>             _txConsole_Detach           (<span class="keywordtype">bool</span> activate);</div>
<div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;<span class="keywordtype">bool</span>             _txConsole_Draw             (HDC dc);</div>
<div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;<span class="keywordtype">bool</span>             _txConsole_SetUnicodeFont();</div>
<div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160; </div>
<div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;const <span class="keywordtype">char</span>*       txRegisterClass            (const <span class="keywordtype">char</span> classId[], WNDPROC wndProc, <span class="keywordtype">unsigned</span> style, <span class="keywordtype">int</span> backBrush, <span class="keywordtype">int</span> wndExtra);</div>
<div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;HWND              txCreateExtraWindow        (CREATESTRUCT createData);</div>
<div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;HICON            _txCreateTXIcon             (<span class="keywordtype">int</span> size) tx_nodiscard;</div>
<div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;<span class="keywordtype">int</span>              _txSetFinishedText          (HWND wnd);</div>
<div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;<span class="keywordtype">void</span>             _txPauseBeforeTermination   (HWND canvas);</div>
<div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;<span class="keywordtype">int</span>              _txIsParentWaitable         (DWORD* parentPID = NULL) tx_nodiscard;</div>
<div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;<span class="keywordtype">void</span>             _txActivateWindow           (HWND wnd, <span class="keywordtype">unsigned</span> mode);</div>
<div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;<span class="keywordtype">int</span>              _txGetInput();</div>
<div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160; </div>
<div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;LRESULT CALLBACK _txPlayVideo_WndProc        (HWND wnd, UINT msg, WPARAM wpar, LPARAM lpar);</div>
<div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;const <span class="keywordtype">char</span>*      _txPlayVideo_FindVLC() tx_nodiscard;</div>
<div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160; </div>
<div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;<span class="keywordtype">bool</span>             _txCreateShortcut           (const <span class="keywordtype">char</span> shortcutName[],</div>
<div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;                                              const <span class="keywordtype">char</span> fileToLink[], const <span class="keywordtype">char</span> args[] = NULL, const <span class="keywordtype">char</span> workDir[] = NULL,</div>
<div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;                                              const <span class="keywordtype">char</span> description[] = NULL, <span class="keywordtype">int</span> cmdShow = SW_SHOWNORMAL,</div>
<div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;                                              const <span class="keywordtype">char</span> iconFile[] = NULL, <span class="keywordtype">int</span> iconIndex = 0, <span class="keywordtype">int</span> fontSize = 0,</div>
<div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;                                              COORD bufSize = <a class="code" href="group___misc.html#gade9b60c36576ef735b3e1d1f628ad9c6">ZERO</a> (COORD), COORD wndSize = <a class="code" href="group___misc.html#gade9b60c36576ef735b3e1d1f628ad9c6">ZERO</a> (COORD), COORD wndOrg = <a class="code" href="group___misc.html#gade9b60c36576ef735b3e1d1f628ad9c6">ZERO</a> (COORD));</div>
<div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160; </div>
<div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;<span class="keywordtype">void</span>*            _tx_DLGTEMPLATE_Create      (<span class="keywordtype">void</span>* globalMem, <span class="keywordtype">size_t</span> bufsize, DWORD style, DWORD exStyle,</div>
<div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;                                              WORD controls, <span class="keywordtype">short</span> x, <span class="keywordtype">short</span> y, <span class="keywordtype">short</span> cx, <span class="keywordtype">short</span> cy,</div>
<div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;                                              const <span class="keywordtype">char</span> caption[], const <span class="keywordtype">char</span> font[], WORD fontsize,</div>
<div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;                                              const <span class="keywordtype">char</span> menu[]) tx_nodiscard;</div>
<div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160; </div>
<div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;<span class="keywordtype">void</span>*            _tx_DLGTEMPLATE_Add         (<span class="keywordtype">void</span>* dlgTemplatePtr, <span class="keywordtype">size_t</span> bufsize, DWORD style, DWORD exStyle,</div>
<div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;                                              <span class="keywordtype">short</span> x, <span class="keywordtype">short</span> y, <span class="keywordtype">short</span> cx, <span class="keywordtype">short</span> cy,</div>
<div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;                                              WORD <span class="keywordtype">id</span>, const <span class="keywordtype">char</span> wclass[], const <span class="keywordtype">char</span> caption[]);</div>
<div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160; </div>
<div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;const <span class="keywordtype">char</span>*      _txProcessError             (const <span class="keywordtype">char</span> file[], <span class="keywordtype">int</span> line, const <span class="keywordtype">char</span> func[], <span class="keywordtype">unsigned</span> color,</div>
<div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;                                              const <span class="keywordtype">char</span> msg[], va_list args);</div>
<div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;<span class="keywordtype">void</span>             _txOnTerminate();</div>
<div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;<span class="keywordtype">void</span>             _txOnUnexpected();</div>
<div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;<span class="keywordtype">void</span>             _txOnPureCall();</div>
<div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;<span class="keywordtype">void</span>             _txOnNewHandlerAnsi();</div>
<div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;<span class="keywordtype">int</span>              _txOnNewHandler             (<span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;<span class="keywordtype">void</span>             _txOnSignal                 (<span class="keywordtype">int</span> signal = 0, <span class="keywordtype">int</span> fpe = 0);</div>
<div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;BOOL WINAPI      _txOnConsoleCtrlEvent       (DWORD type);</div>
<div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;<span class="keywordtype">void</span>             _txOnSecurityError          (<span class="keywordtype">int</span> code, <span class="keywordtype">void</span>*);</div>
<div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;<span class="keywordtype">void</span>             _txOnSecurityErrorAnsi      (const <span class="keywordtype">char</span>* msg, <span class="keywordtype">void</span>* ptr, <span class="keywordtype">int</span> code);</div>
<div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;<span class="keywordtype">int</span>              _txOnMatherr                (_exception* except);</div>
<div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;<span class="keywordtype">void</span>             _txOnInvalidParam           (const <span class="keywordtype">wchar_t</span>* expr, const <span class="keywordtype">wchar_t</span>* func, const <span class="keywordtype">wchar_t</span>* file,</div>
<div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;                                              <span class="keywordtype">unsigned</span> line, uintptr_t);</div>
<div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;<span class="keywordtype">int</span>              _txOnAllocHook              (<span class="keywordtype">int</span> type, <span class="keywordtype">void</span>* data, <span class="keywordtype">size_t</span> size, <span class="keywordtype">int</span> use, <span class="keywordtype">long</span> request,</div>
<div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;                                              const <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* file, <span class="keywordtype">int</span> line);</div>
<div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;<span class="keywordtype">int</span>              _txOnRTCFailure             (<span class="keywordtype">int</span> type, const <span class="keywordtype">char</span>* file, <span class="keywordtype">int</span> line, const <span class="keywordtype">char</span>* module, const <span class="keywordtype">char</span>* format, ...) tx_printfy (5);</div>
<div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;<span class="keywordtype">int</span>              _txOnErrorReport            (<span class="keywordtype">int</span> type, const <span class="keywordtype">char</span>* text, <span class="keywordtype">int</span>* ret);</div>
<div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;<span class="keywordtype">int</span>               tx_glGetError              (<span class="keywordtype">int</span> setError = INT_MIN);</div>
<div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160; </div>
<div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;<span class="keywordtype">void</span>             _txOnCExit();</div>
<div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;<span class="keywordtype">void</span>             _txOnExit                   (<span class="keywordtype">int</span>      retcode);</div>
<div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;<span class="keywordtype">void</span>             _txOnFatalExit              (<span class="keywordtype">int</span>      retcode);</div>
<div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;<span class="keywordtype">void</span>             _txOnExitProcess            (<span class="keywordtype">unsigned</span> retcode);</div>
<div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;<span class="keywordtype">void</span>             _txOnFatalAppExitA          (<span class="keywordtype">unsigned</span> action, const <span class="keywordtype">char</span> message[]);</div>
<div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;<span class="keywordtype">bool</span>             _txOnTerminateProcess       (HANDLE process, <span class="keywordtype">unsigned</span> retcode);</div>
<div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;LPTOP_LEVEL_EXCEPTION_FILTER WINAPI</div>
<div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;                 _txOnSetUnhandledExceptionFilter (LPTOP_LEVEL_EXCEPTION_FILTER filter);</div>
<div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;<span class="keywordtype">void</span>             _txWatchdogTerminator       (<span class="keywordtype">void</span>* timeout);  <span class="comment">// Only Arnold-type series are supported, not T1000</span></div>
<div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160; </div>
<div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;<span class="keywordtype">long</span> WINAPI      _txVectoredExceptionHandler (EXCEPTION_POINTERS* exc);</div>
<div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;<span class="keywordtype">long</span> WINAPI      _txUnhandledExceptionFilter (EXCEPTION_POINTERS* exc);</div>
<div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;<span class="keywordtype">long</span>             _txOnExceptionSEH           (EXCEPTION_POINTERS* exc, const <span class="keywordtype">char</span> func[]);</div>
<div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;intptr_t         _txDumpExceptionSEH         (<span class="keywordtype">char</span> what[], intptr_t size, const EXCEPTION_RECORD* exc, const <span class="keywordtype">char</span> func[]);</div>
<div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;intptr_t         _txDumpExceptionObj         (<span class="keywordtype">char</span> what[], intptr_t size, <span class="keywordtype">void</span>* <span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> sizeObj, const std::type_info* type);</div>
<div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;intptr_t         _txDumpExceptionCPP         (<span class="keywordtype">char</span> what[], intptr_t size, <span class="keywordtype">unsigned</span> code = 0,</div>
<div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;                                              <span class="keywordtype">unsigned</span> params = 0, const ULONG_PTR info[] = NULL);</div>
<div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160; </div>
<div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;<span class="keywordtype">void</span>             _txStackBackTrace           (const <span class="keywordtype">char</span> file[] = &quot;?&quot;, <span class="keywordtype">int</span> line = 0, const <span class="keywordtype">char</span> func[] = &quot;?&quot;,</div>
<div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;                                              <span class="keywordtype">bool</span> readSource = true);</div>
<div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;const <span class="keywordtype">char</span>*      _txCaptureStackBackTrace    (<span class="keywordtype">int</span> framesToSkip = 0, <span class="keywordtype">bool</span> readSource = true,</div>
<div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;                                              CONTEXT* context = NULL, EXCEPTION_POINTERS* exc = NULL, HANDLE thread = GetCurrentThread());</div>
<div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;<span class="keywordtype">int</span>              _txStackWalk                (<span class="keywordtype">int</span> framesToSkip, <span class="keywordtype">size_t</span> szCapture, <span class="keywordtype">void</span>* capture[], CONTEXT* context = NULL,</div>
<div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;                                              HANDLE thread = GetCurrentThread());</div>
<div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;const <span class="keywordtype">char</span>*      _txCaptureStackBackTraceTX  (<span class="keywordtype">int</span> framesToSkip = 0, <span class="keywordtype">bool</span> readSource = false);</div>
<div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160; </div>
<div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;const <span class="keywordtype">char</span>*      _txSymPrintFromAddr         (<span class="keywordtype">void</span>* addr = NULL, const <span class="keywordtype">char</span> format[] = NULL, ...) tx_printfy (2);</div>
<div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;<span class="keywordtype">bool</span>             _txSymGetFromAddr           (<span class="keywordtype">void</span>* addr, Win32::SYMBOL_INFO** symbol = NULL,</div>
<div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;                                              Win32::IMAGEHLP_LINE64** line = NULL, const <span class="keywordtype">char</span>** module = NULL,</div>
<div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;                                              const <span class="keywordtype">char</span>** source = NULL, <span class="keywordtype">int</span> context = 2);</div>
<div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;intptr_t         _txReadSource               (<span class="keywordtype">char</span> buf[], intptr_t size, const <span class="keywordtype">char</span> file[],</div>
<div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;                                              <span class="keywordtype">int</span> linStart = 0, <span class="keywordtype">int</span> linEnd = INT_MIN, <span class="keywordtype">int</span> linMark = INT_MIN);</div>
<div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;<span class="keywordtype">bool</span>             _txCreateMiniDump           (EXCEPTION_POINTERS* exc = NULL);</div>
<div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160; </div>
<div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;uintptr_t        _txSetProcAddress           (const <span class="keywordtype">char</span> funcName[], uintptr_t newFunc, const <span class="keywordtype">char</span> dllName[] = NULL,</div>
<div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;                                              <span class="keywordtype">int</span> useHotPatching = false, HMODULE module = NULL, <span class="keywordtype">bool</span> debug = false);</div>
<div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;<span class="keywordtype">bool</span>             _txInDll() tx_nodiscard;</div>
<div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;PROCESSENTRY32*  _txFindProcess              (<span class="keywordtype">unsigned</span> pid = GetCurrentProcessId()) tx_nodiscard;</div>
<div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;<span class="keywordtype">bool</span>             _txKillProcess              (DWORD pid);</div>
<div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;<span class="keywordtype">int</span>              _txTaskKill                 (const <span class="keywordtype">char</span> name[] <span class="comment">/*= NULL*/</span>, const <span class="keywordtype">char</span> cmdLineSubstr[] <span class="comment">/*= NULL*/</span>, <span class="keywordtype">unsigned</span> pid <span class="comment">/*= 0*/</span>);</div>
<div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;<span class="keywordtype">bool</span>             _txCheckSourceCP            (<span class="keywordtype">int</span> needCP = <a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, <span class="keywordtype">bool</span> verbose = true);</div>
<div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;<span class="keywordtype">bool</span>             _txGetCommandLine           (<span class="keywordtype">wchar_t</span> cmdLine[], <span class="keywordtype">size_t</span> szCmdLine, <span class="keywordtype">unsigned</span> pid = _getpid());</div>
<div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;IMAGE_NT_HEADERS*_txGetNtHeaders             (HMODULE module = GetModuleHandle (NULL)) tx_nodiscard;</div>
<div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;<span class="keywordtype">bool</span>             _txIsConsoleSubsystem();</div>
<div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;const <span class="keywordtype">char</span>*      _txAppInfo() tx_nodiscard;</div>
<div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160; </div>
<div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;<span class="preprocessor">#if defined (_CLANG_VER) &amp;&amp; !defined (_MSC_VER)</span></div>
<div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;<span class="keywordtype">void</span>             _txLibCppDebugFunction      (std::__libcpp_debug_info <span class="keyword">const</span>&amp; info);</div>
<div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160; </div>
<div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160; </div>
<div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span>      _txCanvas_OK                () tx_nodiscard;</div>
<div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;<span class="keywordtype">int</span>              _txCanvas_SetRefreshLock    (<span class="keywordtype">int</span> count);</div>
<div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160; </div>
<div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;const <span class="keywordtype">char</span>*      _txError                    (const <span class="keywordtype">char</span> file[] = NULL, <span class="keywordtype">int</span> line = 0, const <span class="keywordtype">char</span> func[] = NULL, <span class="keywordtype">unsigned</span> color = 0,</div>
<div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;                                              const <span class="keywordtype">char</span> msg[] = NULL, ...) tx_printfy (5);</div>
<div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160; </div>
<div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;<span class="keywordtype">bool</span>             _txIsBadReadPtr             (const <span class="keywordtype">void</span>* address);</div>
<div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160; </div>
<div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;intptr_t         _tx_snprintf_s              (<span class="keywordtype">char</span> stream[], intptr_t size, const <span class="keywordtype">char</span> format[], ...) tx_printfy (3);</div>
<div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;intptr_t         _tx_vsnprintf_s             (<span class="keywordtype">char</span> stream[], intptr_t size, const <span class="keywordtype">char</span> format[], va_list arg);</div>
<div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;<span class="keywordtype">void</span>              txReopenStdio();</div>
<div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160; </div>
<div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;<span class="preprocessor">#if defined (__CYGWIN__)</span></div>
<div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160; </div>
<div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;<span class="keywordtype">int</span>              _getch();</div>
<div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;<span class="keywordtype">int</span>              _putch (<span class="keywordtype">int</span> ch);</div>
<div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;<span class="keywordtype">int</span>              _kbhit() tx_nodiscard;</div>
<div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160; </div>
<div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160; </div>
<div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;<span class="comment">// There are macros for __FILE__ and __LINE__ to work properly.</span></div>
<div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160; </div>
<div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160; </div>
<div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;<span class="preprocessor">    #define  _TX_ARGUMENT_FAILED( cond )       ( !(cond) &amp;&amp;                                           \</span></div>
<div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;<span class="preprocessor">                                                     (SetLastErrorEx (ERROR_BAD_ARGUMENTS, 0),  1) &amp;&amp; \</span></div>
<div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;<span class="preprocessor">                                                     (assert (cond), true) )</span></div>
<div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160; </div>
<div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;<span class="preprocessor">    #define  _TX_TXWINDOW_FAILED()             ( !txOK() &amp;&amp;                                           \</span></div>
<div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;<span class="preprocessor">                                                     (SetLastErrorEx (ERROR_INVALID_DATA,  0),  1) &amp;&amp; \</span></div>
<div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;<span class="preprocessor">                                                     (TX_ERROR (&quot;\a&quot;</span> &quot;Возможно, окно рисования не создано или не в порядке.&quot;), 1) )</div>
<div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160; </div>
<div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;<span class="preprocessor">    #define  _TX_HDC_FAILED( dc )              ( !Win32::GetObjectType (dc) &amp;&amp;                                                            \</span></div>
<div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;<span class="preprocessor">                                                     (SetLastErrorEx (ERROR_INVALID_DATA,  0),  1) &amp;&amp;                                     \</span></div>
<div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;<span class="preprocessor">                                                     (TX_ERROR (&quot;\a&quot;</span> &quot;Параметр \&quot;%s\&quot; неверен.&quot;                                           \</div>
<div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;                                                                                   &quot; Возможно, этот холст не создан, или уже уничтожен, &quot; \</div>
<div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;                                                                                    &quot;или не загрузилась картинка.&quot;, #dc), 1) )</div>
<div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;<span class="preprocessor">    #define _TX_DEFAULT_HDC_FAILED( dc )       ( !(dc) &amp;&amp;                                                                                 \</span></div>
<div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;<span class="preprocessor">                                                     (TX_ERROR (&quot;\a&quot;</span> &quot;%s&quot;                                                                 \</div>
<div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;                                                                     &quot;Если вы указали параметр \&quot;%s\&quot;, то он неверен.%s&quot;,                 \</div>
<div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;                                                                     (!txWindow()? &quot;Окно рисования не создано или не в порядке.\n&quot; : &quot;&quot;), \</div>
<div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;                                                                     #dc,                                                                 \</div>
<div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;                                                                     ( txWindow()? &quot; Возможно, этот холст не создан, или уже уничтожен, &quot; \</div>
<div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;                                                                                    &quot;или не загрузилась картинка.&quot; : &quot;&quot;)), 1) )</div>
<div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160; </div>
<div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;<span class="preprocessor">    #define  _TX_ARGUMENT_FAILED( cond )       ( !(cond) &amp;&amp;                                           \</span></div>
<div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;<span class="preprocessor">                                                     (SetLastErrorEx (ERROR_BAD_ARGUMENTS, 0),  1) )</span></div>
<div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160; </div>
<div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;<span class="preprocessor">    #define  _TX_TXWINDOW_FAILED()             ( !txOK() &amp;&amp;                                           \</span></div>
<div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;<span class="preprocessor">                                                     (SetLastErrorEx (ERROR_INVALID_DATA,  0),  1) )</span></div>
<div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160; </div>
<div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;<span class="preprocessor">    #define  _TX_HDC_FAILED( dc )              ( !Win32::GetObjectType (dc) &amp;&amp;                        \</span></div>
<div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;<span class="preprocessor">                                                     (SetLastErrorEx (ERROR_INVALID_DATA,  0),  1) )</span></div>
<div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160; </div>
<div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;<span class="preprocessor">    #define _TX_DEFAULT_HDC_FAILED( dc )       ( !(dc) &amp;&amp;                                             \</span></div>
<div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;<span class="preprocessor">                                                     (SetLastErrorEx (ERROR_INVALID_DATA,  0),  1) )</span></div>
<div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160; </div>
<div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;<span class="comment">// Take action in debug configuration only.</span></div>
<div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;<span class="comment">// Definition ({ expr; }) would be better, but MSVC rejects it. So sad. :&#39;(</span></div>
<div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160; </div>
<div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;<span class="preprocessor">    #define  _TX_ON_DEBUG( code )              { code; }</span></div>
<div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;<span class="preprocessor">    #define  _TX_ON_DEBUG( code )              ;</span></div>
<div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160; </div>
<div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;<span class="comment">// Invokes an error without location information. &quot;$$&quot; restores TX-related call location context</span></div>
<div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160; </div>
<div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;<span class="preprocessor">#define _TX_UNEXPECTED( ... )                  $$ _txError (NULL, 0, NULL, 0, ##__VA_ARGS__)</span></div>
<div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160; </div>
<div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;<span class="comment">// Safe call of a function via its pointer</span></div>
<div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160; </div>
<div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;<span class="preprocessor">#define _TX_CALL(  func, param )               ( (func)? ((func) param) :       0 )</span></div>
<div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;<span class="preprocessor">#define _TX_CALLv( func, param )               ( (func)? ((func) param) : (void)0 )</span></div>
<div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160; </div>
<div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;<span class="comment">// This is a macro because cond is an expression and is not always a function. Lack of lambdas in pre-C++0x.</span></div>
<div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160; </div>
<div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;<span class="preprocessor">#define _txWaitFor( cond, time )               { for (DWORD _t = GetTickCount() + (time); \</span></div>
<div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;<span class="preprocessor">                                                      !(cond) &amp;&amp; GetTickCount() &lt; _t;     \</span></div>
<div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;<span class="preprocessor">                                                      Sleep (_txWindowUpdateInterval))    \</span></div>
<div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;<span class="preprocessor">                                                      ;                                   \</span></div>
<div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;<span class="preprocessor">                                                                                          \</span></div>
<div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;<span class="preprocessor">                                                 if  (!(cond))                            \</span></div>
<div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;<span class="preprocessor">                                                      _txTrace (__FILE__, __LINE__, NULL, &quot;WARNING: Timeout: &quot;</span> #cond &quot;.&quot;); }</div>
<div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160; </div>
<div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;<span class="comment">// Detouring in case of SEH mechanism</span></div>
<div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160; </div>
<div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;<span class="preprocessor">#define _txSetJmp()                            ( setjmp (_txDumpExceptionObjJmp) == 0 )</span></div>
<div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160; </div>
<div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;<span class="preprocessor">#define _txClearJmp()                          { *(unsigned long long*) _txDumpExceptionObjJmp = 0; }</span></div>
<div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160; </div>
<div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;<span class="comment">// IN and OUT are defined in WinDef.h to support Microsoft SAL. Remove them because they are often confused with user&#39;s code.</span></div>
<div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160; </div>
<div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;<span class="preprocessor">#if defined (IN)</span></div>
<div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;<span class="preprocessor">    #undef  IN</span></div>
<div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160; </div>
<div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;<span class="preprocessor">#if defined (IN)</span></div>
<div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;<span class="preprocessor">    #undef  OUT</span></div>
<div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160; </div>
<div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160; </div>
<div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160;<span class="comment">//{          Internal global data</span></div>
<div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;<span class="comment">//           Данные не упакованы в структуру или класс, для того, чтобы это сделали Вы сами :)</span></div>
<div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;<span class="comment">//           Если вы пишете свою библиотеку и используете TXLib.h как пример, не следуйте ему и не делайте так же.</span></div>
<div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;<span class="comment">//           Здесь это сделано только в образовательных целях.</span></div>
<div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;<span class="comment">//           Будьте практичнее, сделайте структуру и глобальную функцию для доступа к ней, или класс.</span></div>
<div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                      </span><span class="comment">// &lt;&lt;&lt;&lt;&lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160; </div>
<div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>                      _TX_IDM_ABOUT               = 40000,      <span class="comment">// Идентификаторы системного меню окна</span></div>
<div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;                               _TX_IDM_CONSOLE             = 40001,</div>
<div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;                               _TX_WM_CREATEWND            = 0x7FF0,     <span class="comment">// Сообщения для создания/уничтожения</span></div>
<div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;                               _TX_WM_DESTROYWND           = 0x7FF1;     <span class="comment">// окон в потоке Canvas</span></div>
<div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160; </div>
<div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160; </div>
<div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">unsigned</span>              _txCanaryFirst              = 0x776F656D; <span class="comment">// A very system value</span></div>
<div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160; </div>
<div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;<span class="keywordtype">int</span>                            _txInitialized              = (<a class="code" href="group___technical.html#gaab281ee20ea6be5eae34d0e15bf03dcf">_TX_NOINIT</a> +0)? 0 : _txInitialize();</div>
<div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160; </div>
<div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">unsigned</span>              _txMainThreadId             = 0;          <span class="comment">// ID потока, где выполняется main()</span></div>
<div class="line"><a name="l08343"></a><span class="lineno"> 8343</span>&#160;<span class="keyword">volatile</span> HANDLE                _txMainThread               = NULL;       <span class="comment">// Дексриптор этого потока</span></div>
<div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160; </div>
<div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">unsigned</span>              _txCanvas_ThreadId          = 0;          <span class="comment">// ID потока, владеющего окном холста TXLib</span></div>
<div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;<span class="keyword">volatile</span> HANDLE                _txCanvas_Thread            = NULL;       <span class="comment">// Дексриптор этого потока</span></div>
<div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;<span class="keyword">volatile</span> HWND                  _txCanvas_Window            = NULL;       <span class="comment">// Дескриптор окна холста TXLib</span></div>
<div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160; </div>
<div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;HDC                            _txCanvas_BackBuf[2]        = {NULL,      <span class="comment">// [0] Main TXLib in-memory DC, where user&#39;s pictures lies</span></div>
<div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160;                                                              NULL};     <span class="comment">// [1] Image ready for auto-refresh, see txCanvas_OnPAINT()</span></div>
<div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160; </div>
<div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;RGBQUAD*                       _txCanvas_Pixels            = NULL;       <span class="comment">// Memory buffer of _txCanvas_BackBuf[0]</span></div>
<div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160; </div>
<div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;HBITMAP                        _txStockBitmap              = NULL;       <span class="comment">// Equivalent of GetStockObject (BITMAP),</span></div>
<div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;                                                                         <span class="comment">// see https://devblogs.microsoft.com/oldnewthing/20100416-00/?p=14313</span></div>
<div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160; </div>
<div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;CRITICAL_SECTION               _txCanvas_LockBackBuf       = {0,-1};     <span class="comment">// Prevent simultaneous access to back buffer, see txLock()</span></div>
<div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160; </div>
<div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;UINT_PTR                       _txCanvas_RefreshTimer      = 1;          <span class="comment">// Timer ID to redraw TXLib window</span></div>
<div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">int</span>                   _txCanvas_RefreshLock       = 0;          <span class="comment">// Blocks auto on-timer canvas update, see txBegin/txEnd</span></div>
<div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160; </div>
<div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;::std::vector&lt;HDC&gt;*            _txCanvas_UserDCs           = NULL;       <span class="comment">// List of DCs allocated, for auto-free</span></div>
<div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160; </div>
<div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">bool</span>                  _txConsole_IsBlinking       = <span class="keyword">true</span>;       <span class="comment">// To blink or not to blink, that is the question.</span></div>
<div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160; </div>
<div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;<span class="keywordtype">int</span>                            _txConsole                  = <span class="keyword">false</span>;      <span class="comment">// Only first TXLib module in app can own the console</span></div>
<div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;<span class="keywordtype">bool</span>                           _txMain                     = <span class="keyword">false</span>;      <span class="comment">// First TXLib wnd opened (closing it terminates program)</span></div>
<div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;<span class="keywordtype">bool</span>                           _txIsDll                    = <span class="keyword">false</span>;      <span class="comment">// TXLib module is in DLL</span></div>
<div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">bool</span>                  _txRunning                  = <span class="keyword">false</span>;      <span class="comment">// main() is still running</span></div>
<div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">bool</span>                  _txExit                     = <span class="keyword">false</span>;      <span class="comment">// exit() is active</span></div>
<div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160; </div>
<div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;<span class="keyword">volatile</span> POINT                 _txMousePos                 = {-1,-1};    <span class="comment">// Ask Captn Obviouos about it. See txCanvas_OnMOUSE()</span></div>
<div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">unsigned</span>              _txMouseButtons             = 0;</div>
<div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160; </div>
<div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;<span class="keyword">volatile</span> WNDPROC               _txAltWndProc               = NULL;       <span class="comment">// Альтернативная оконная функция. См. txSetWindowsHook().</span></div>
<div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160; </div>
<div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;_tx_thread _txLoc              _txLoc::Cur                 = {};         <span class="comment">// Execution point tracking and trace state, see &quot;$&quot; macro</span></div>
<div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160; </div>
<div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">int</span>                   _txErrors                   = 0;          <span class="comment">// TX_ERROR calls sequental number</span></div>
<div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">int</span>                   _txOGLError                 = 0;          <span class="comment">// Last OpenGL error when using tx_glGetError()</span></div>
<div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">long</span>                  _txSENumber                 = 0;          <span class="comment">// SEH exceptions sequental number</span></div>
<div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">long</span>                  _txSEFatalNumber            = 0;          <span class="comment">// SEH fatal exceptions sequental number</span></div>
<div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;<span class="keywordtype">char</span>                           _txDumpSE [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>]     = <span class="stringliteral">&quot;&quot;</span>;         <span class="comment">// SEH dump data area</span></div>
<div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160;<span class="keywordtype">char</span>                           _txTraceSE[<a class="code" href="group___technical.html#ga9982623aefbe28deab03b1252777ec2a">_TX_HUGEBUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;         <span class="comment">// Stack trace data area</span></div>
<div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160; </div>
<div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;LPTOP_LEVEL_EXCEPTION_FILTER   _txPrevUEFilter             = NULL;       <span class="comment">// Previous UnhandledExceptionFilter</span></div>
<div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160; </div>
<div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;jmp_buf                        _txDumpExceptionObjJmp      = {};         <span class="comment">// Hook for _txDumpExceptionObj</span></div>
<div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160; </div>
<div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;<span class="keyword">const</span> <span class="keyword">volatile</span> uintptr_t       _txForceImport[]            = { (uintptr_t) ::TerminateProcess,              (uintptr_t) ::ExitProcess,</div>
<div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;                                                               (uintptr_t) ::FatalExit,                     (uintptr_t) ::FatalAppExitA,</div>
<div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;                                                               (uintptr_t) ::exit,                          (uintptr_t) Win32::_controlfp,</div>
<div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;                                                               (uintptr_t) Win32::Polyline,                 (uintptr_t) Win32::PolyBezier,</div>
<div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;                                                               (uintptr_t) Win32::RoundRect,                (uintptr_t) Win32::RemoveVectoredExceptionHandler,</div>
<div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;                                                               (uintptr_t) Win32::PlgBlt,                   (uintptr_t) Win32::RtlCaptureStackBackTrace,</div>
<div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;                                                               (uintptr_t) Win32::SymInitialize,            (uintptr_t) Win32::MinGW::SymInitialize,</div>
<div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;                                                               (uintptr_t) Win32::SymSetOptions,            (uintptr_t) Win32::MinGW::SymSetOptions,</div>
<div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;                                                               (uintptr_t) Win32::SymGetLineFromAddr64,     (uintptr_t) Win32::MinGW::SymGetLineFromAddr64,</div>
<div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;                                                               (uintptr_t) Win32::SymFromAddr,              (uintptr_t) Win32::MinGW::SymFromAddr,</div>
<div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;                                                               (uintptr_t) Win32::SymCleanup,               (uintptr_t) Win32::MinGW::SymCleanup,</div>
<div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;                                                               (uintptr_t) Win32::SymGetModuleBase64,       (uintptr_t) Win32::MinGW::SymGetModuleBase64,</div>
<div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;                                                               (uintptr_t) Win32::SymFunctionTableAccess64, (uintptr_t) Win32::MinGW::SymFunctionTableAccess64,</div>
<div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;                                                               (uintptr_t) Win32::StackWalk64,              (uintptr_t) Win32::MinGW::StackWalk64,</div>
<div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;                                                               (uintptr_t) Win32::StrStrIA,                 (uintptr_t) Win32::Wow64GetThreadContext };</div>
<div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160; </div>
<div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;<span class="keyword">volatile</span> <span class="keywordtype">unsigned</span>              _txCanaryLast               = 0x5E2E2E5E; <span class="comment">// Another very system value</span></div>
<div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160; </div>
<div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160; </div>
<div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160; </div>
<div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> _txCanaryFirst;</div>
<div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> _txCanaryLast;</div>
<div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> HWND     _txCanvas_Window;</div>
<div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> _txCanvas_ThreadId;</div>
<div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;<span class="keyword">extern</span>          HDC      _txCanvas_BackBuf[2];</div>
<div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;<span class="keyword">extern</span>          RGBQUAD* _txCanvas_Pixels;</div>
<div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span>      _txCanvas_RefreshLock;</div>
<div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> WNDPROC  _txAltWndProc;</div>
<div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">bool</span>     _txExit;</div>
<div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;<span class="keyword">extern</span> <span class="keyword">volatile</span> <span class="keywordtype">int</span>      _txOGLError;</div>
<div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160; </div>
<div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160; </div>
<div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;<span class="comment">//{          TXLib engine init/check/cleanup</span></div>
<div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;<span class="comment">//{          Early initialization</span></div>
<div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160; </div>
<div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160; </div>
<div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;<span class="keywordtype">int</span> _txInitialize()</div>
<div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;    {</div>
<div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;    <span class="keywordflow">if</span> (_txInitialized) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;    _txInitialized = 1;</div>
<div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160; </div>
<div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;<span class="preprocessor">    #if defined (_TX_ALLOC_BREAK) &amp;&amp; defined (_MSC_VER)  </span><span class="comment">// See http://msdn.microsoft.com/en-us/library/w2fhc9a3%28v=vs.90%29.aspx</span></div>
<div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;    _CrtSetBreakAlloc (_TX_ALLOC_BREAK);                 <span class="comment">// and http://support.microsoft.com/ru-ru/kb/151585</span></div>
<div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160; </div>
<div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;<span class="preprocessor">    #if defined (_TX_ALLOW_TRACE)</span></div>
<div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;    _txLocLvlSet (1);</div>
<div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160; </div>
<div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;    _TX_ON_DEBUG (OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;                  OutputDebugString (_TX_VERSION <span class="stringliteral">&quot; - The Dumb Artist Library, &quot;</span> _TX_AUTHOR <span class="stringliteral">&quot;: \&quot;&quot;</span> __FILE__ <span class="stringliteral">&quot;\&quot; &quot;</span></div>
<div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;                                     <span class="stringliteral">&quot;compiled &quot;</span> __DATE__ <span class="stringliteral">&quot; &quot;</span> __TIME__ <span class="stringliteral">&quot;, &quot;</span> <a class="code" href="group___technical.html#ga3e287c38947fea870d01588fbd2a5fc9">_TX_BUILDMODE</a> <span class="stringliteral">&quot; mode, module: &quot;</span> <a class="code" href="group___technical.html#ga43d277b4418068ebef1fd2bdbaf550f6">_TX_MODULE</a> <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;                  OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160; </div>
<div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;    _txMainThreadId = GetCurrentThreadId();</div>
<div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;    _txMainThread   = OpenThread (THREAD_ALL_ACCESS, <span class="keyword">false</span>, _txMainThreadId);</div>
<div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160; </div>
<div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;$3  _txIsDll = _txInDll();</div>
<div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160; </div>
<div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;$   <span class="keywordflow">if</span> (!_txIsDll)</div>
<div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;        {</div>
<div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;$       _txConsole = ! FindAtom (<span class="stringliteral">&quot;_txConsole&quot;</span>);</div>
<div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;$       (void)          AddAtom (<span class="stringliteral">&quot;_txConsole&quot;</span>);  <span class="comment">//-V530</span></div>
<div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;        }</div>
<div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160; </div>
<div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;$   <span class="keywordflow">if</span> (_txConsole)</div>
<div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;        {</div>
<div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;$       _txCheckSourceCP (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160; </div>
<div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;$       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> stackSize = <a class="code" href="group___technical.html#ga7b8b43782557dd87528da77b083364ec">_TX_STACKSIZE</a>;</div>
<div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;$       _TX_CALL (Win32::SetThreadStackGuarantee, (&amp;stackSize));</div>
<div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160; </div>
<div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;$       _txOnSignal();</div>
<div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160; </div>
<div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;$       <span class="keywordflow">if</span> (!*<a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>)</div>
<div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;            {$ _tx_snprintf_s (<a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>, <span class="keyword">sizeof</span> (<a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>) - 1, <span class="stringliteral">&quot;%s.log&quot;</span>, <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a>()); }</div>
<div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160; </div>
<div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;$       <span class="keywordflow">if</span> (!_txIsDll)</div>
<div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;            {</div>
<div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;$           _TX_CALL  (Win32::AddVectoredExceptionHandler, (1, (PVECTORED_EXCEPTION_HANDLER)  _txVectoredExceptionHandler));</div>
<div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;$           _txPrevUEFilter = SetUnhandledExceptionFilter  (   (LPTOP_LEVEL_EXCEPTION_FILTER) _txUnhandledExceptionFilter);</div>
<div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;            }</div>
<div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160; </div>
<div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;$       ::std::set_terminate             (_txOnTerminate);</div>
<div class="line"><a name="l08487"></a><span class="lineno"> 8487</span>&#160;$       ::std::set_new_handler           (_txOnNewHandlerAnsi);</div>
<div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;$       _TX_CALL (Win32::set_unexpected, (_txOnUnexpected));</div>
<div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160; </div>
<div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;<span class="preprocessor">        #if defined (_CLANG_VER) &amp;&amp; !defined (_MSC_VER)</span></div>
<div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;$       ::std::__libcpp_debug_function = _txLibCppDebugFunction;</div>
<div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160; </div>
<div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;$       SetConsoleCtrlHandler (_txOnConsoleCtrlEvent, <span class="keyword">true</span>);</div>
<div class="line"><a name="l08495"></a><span class="lineno"> 8495</span>&#160; </div>
<div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;$       SetErrorMode (SEM_FAILCRITICALERRORS | SEM_NOGPFAULTERRORBOX);</div>
<div class="line"><a name="l08497"></a><span class="lineno"> 8497</span>&#160; </div>
<div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;<span class="preprocessor">        #if defined (_MSC_VER)</span></div>
<div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160; </div>
<div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;$       _set_printf_count_output (1);</div>
<div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160; </div>
<div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;$       _set_new_handler (_txOnNewHandler);</div>
<div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;$       _set_new_mode (1);</div>
<div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160; </div>
<div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;<span class="preprocessor">        #if !defined (_CLANG_VER)</span></div>
<div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160; </div>
<div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;$       _CrtSetDbgFlag (_CRTDBG_ALLOC_MEM_DF | _CRTDBG_CHECK_ALWAYS_DF | _CRTDBG_LEAK_CHECK_DF);</div>
<div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;$       _CrtSetAllocHook (_txOnAllocHook);</div>
<div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160; </div>
<div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;$       <span class="keywordtype">unsigned</span> mode = _CRTDBG_MODE_FILE;</div>
<div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;$       <span class="keywordflow">if</span> (_CrtSetReportHook2 (_CRT_RPTHOOK_INSTALL, (_CRT_REPORT_HOOK) _txOnErrorReport) &gt; 0) mode = 0;</div>
<div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160; </div>
<div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;$       _CrtSetReportMode (_CRT_WARN,   _CRTDBG_MODE_DEBUG | mode);</div>
<div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;$       _CrtSetReportMode (_CRT_ERROR,  _CRTDBG_MODE_DEBUG | mode | _CRTDBG_MODE_WNDW);</div>
<div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;$       _CrtSetReportMode (_CRT_ASSERT, _CRTDBG_MODE_DEBUG | mode | _CRTDBG_MODE_WNDW);</div>
<div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;$       _CrtSetReportFile (_CRT_WARN,   _CRTDBG_FILE_STDERR);</div>
<div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;$       _CrtSetReportFile (_CRT_ERROR,  _CRTDBG_FILE_STDERR);</div>
<div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;$       _CrtSetReportFile (_CRT_ASSERT, _CRTDBG_FILE_STDERR);</div>
<div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160; </div>
<div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160; </div>
<div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;$       _set_abort_behavior (_WRITE_ABORT_MSG, _WRITE_ABORT_MSG);</div>
<div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;$       _set_abort_behavior (0,                _CALL_REPORTFAULT);</div>
<div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160; </div>
<div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;$       _RTC_SetErrorFunc              (_txOnRTCFailure);</div>
<div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;$       _set_purecall_handler          (_txOnPureCall);</div>
<div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;$       _set_invalid_parameter_handler (_txOnInvalidParam);</div>
<div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160; </div>
<div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160; </div>
<div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;<span class="preprocessor">        #if defined (__STDC_LIB_EXT1__)</span></div>
<div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160;$       ::std::set_constraint_handler_s (_txOnSecurityErrorAnsi);</div>
<div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160; </div>
<div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;<span class="preprocessor">        #if !defined (__CYGWIN__) &amp;&amp; defined (_GCC_VER) &amp;&amp; (_GCC_VER &gt;= 530) &amp;&amp; !defined (i386)</span></div>
<div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;$       __setusermatherr (_txOnMatherr);</div>
<div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160; </div>
<div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;<span class="preprocessor">        #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;$       _set_error_mode (_OUT_TO_MSGBOX | _OUT_TO_STDERR);</div>
<div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160; </div>
<div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;$       HWND console = _txConsole_Attach();</div>
<div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;$       SetWindowTextA (console, <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a> (<span class="keyword">false</span>));</div>
<div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;        }</div>
<div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160; </div>
<div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;ExitProcess&quot;</span>,                 (uintptr_t) _txOnExitProcess,                 <span class="stringliteral">&quot;KERNEL32.DLL&quot;</span>);</div>
<div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;TerminateProcess&quot;</span>,            (uintptr_t) _txOnTerminateProcess,            <span class="stringliteral">&quot;KERNEL32.DLL&quot;</span>);</div>
<div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;FatalExit&quot;</span>,                   (uintptr_t) _txOnFatalExit,                   <span class="stringliteral">&quot;KERNEL32.DLL&quot;</span>);</div>
<div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;FatalAppExitA&quot;</span>,               (uintptr_t) _txOnFatalAppExitA,               <span class="stringliteral">&quot;KERNEL32.DLL&quot;</span>);</div>
<div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;UnhandledExceptionFilter&quot;</span>,    (uintptr_t) _txUnhandledExceptionFilter,      <span class="stringliteral">&quot;KERNEL32.DLL&quot;</span>, <span class="keyword">true</span>);  <span class="comment">//-V601</span></div>
<div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;SetUnhandledExceptionFilter&quot;</span>, (uintptr_t) _txOnSetUnhandledExceptionFilter, <span class="stringliteral">&quot;KERNEL32.DLL&quot;</span>);</div>
<div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;exit&quot;</span>,                        (uintptr_t) _txOnExit);   <span class="comment">//???</span></div>
<div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160;$   _txSetProcAddress (<span class="stringliteral">&quot;_cexit&quot;</span>,                      (uintptr_t) _txOnCExit);  <span class="comment">//???</span></div>
<div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160; </div>
<div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;$   InitializeCriticalSection (&amp;_txCanvas_LockBackBuf);</div>
<div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160; </div>
<div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;$   HDC dc = Win32::CreateCompatibleDC (NULL); dc <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160;$   _txStockBitmap = (HBITMAP) Win32::SelectObject (dc, Win32::CreateCompatibleBitmap (dc, 1, 1)); _txStockBitmap <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;$   Win32::DeleteObject (Win32::SelectObject (dc, _txStockBitmap)) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;$   Win32::DeleteDC (dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160; </div>
<div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;$   atexit (_txCleanup);</div>
<div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160; </div>
<div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;$   <span class="keywordflow">if</span> (_txConsole)</div>
<div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;        {</div>
<div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160;$       <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_LIGHTGRAY);</div>
<div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160; </div>
<div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;$       <a class="code" href="group___misc.html#ga5de732de72c46b992ac2feeac2de7e42">tx_fpreset</a>();</div>
<div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160; </div>
<div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;$       srand ((<span class="keywordtype">unsigned</span>) time (NULL));  <span class="comment">//-V202</span></div>
<div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160; </div>
<div class="line"><a name="l08573"></a><span class="lineno"> 8573</span>&#160;$       SetLastError (0);</div>
<div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;$       errno = 0;</div>
<div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160; </div>
<div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;<span class="preprocessor">        #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;$       _doserrno = 0;</div>
<div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;        }</div>
<div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160; </div>
<div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;$   <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;    }</div>
<div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160; </div>
<div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160; </div>
<div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;<span class="keywordtype">bool</span> _txCheckSourceCP (<span class="keywordtype">int</span> needCP <span class="comment">/*= _TX_CODEPAGE*/</span>, <span class="keywordtype">bool</span> verbose <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;    {</div>
<div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;$3  <span class="keyword">const</span> <span class="keywordtype">char</span>* sCodePage = NULL;</div>
<div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;$   <span class="keywordtype">int</span> codePage = 0;</div>
<div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160; </div>
<div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;$   <span class="keywordflow">switch</span> (((<span class="keywordtype">unsigned</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*) <span class="stringliteral">&quot;А&quot;</span>) [0])</div>
<div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;        {</div>
<div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;        <span class="keywordflow">case</span> 192: {$ codePage =  1251; sCodePage = <span class="stringliteral">&quot;1251.&quot;</span>;          <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;        <span class="keywordflow">case</span> 208: {$ codePage = 65001; sCodePage = <span class="stringliteral">&quot;UTF-8.&quot;</span>;         <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;        <span class="keywordflow">case</span> 128: {$ codePage =   866; sCodePage = <span class="stringliteral">&quot;866.&quot;</span>;           <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;        <span class="keywordflow">case</span> 225: {$ codePage = 20866; sCodePage = <span class="stringliteral">&quot;KOI-8, waaat?!&quot;</span>; <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;        <span class="keywordflow">default</span>:  {$ codePage =    -1; sCodePage = <span class="stringliteral">&quot;(Unknown)&quot;</span>;      <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;        }</div>
<div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160; </div>
<div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;$   <span class="keywordflow">if</span> (codePage != needCP &amp;&amp; verbose)</div>
<div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;        {</div>
<div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;$       *_txTraceSE = <span class="charliteral">&#39; &#39;</span>;  <span class="comment">// No stack trace please</span></div>
<div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160; </div>
<div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;$       _TX_UNEXPECTED (<span class="stringliteral">&quot;\v\t&quot;</span> <span class="stringliteral">&quot;\n\n&quot;</span> <span class="stringliteral">&quot;WARNING: CHECK TXLib.h file CODEPAGE. Maybe it is %s It should be %d.\n\n&quot;</span></div>
<div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;                        <span class="stringliteral">&quot;This is NOT an error of TXLib itself. Please note:\n\n&quot;</span></div>
<div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;                        <span class="stringliteral">&quot;Do NOT copy-and-paste TXLib.h file contents into a new file and them save it inside your &quot;</span></div>
<div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;                        <span class="stringliteral">&quot;IDE or editor. This can change original TXLib codepage (%d) to another one. Instead, DO &quot;</span></div>
<div class="line"><a name="l08608"></a><span class="lineno"> 8608</span>&#160;                        <span class="stringliteral">&quot;use copy / move / cut-and-paste operations in Windows Explorer (Far Manager etc) only. &quot;</span></div>
<div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;                        <span class="stringliteral">&quot;Or, when you see TXLib.h being opened in browser, use &#39;Save as...&#39; (Ctrl+S) command.\n\n&quot;</span></div>
<div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;                        <span class="stringliteral">&quot;Now you should re-download TXLib.h file from the http://txlib.ru site.\n\n&quot;</span></div>
<div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;                        <span class="stringliteral">&quot;You can continue, but Russian messages and symbols may appear unreadable.&quot;</span>,</div>
<div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;                        sCodePage, needCP, needCP);</div>
<div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;        }</div>
<div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160; </div>
<div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;$   <span class="keywordflow">return</span> (codePage == needCP);</div>
<div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;    }</div>
<div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160; </div>
<div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160; </div>
<div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;void (*_txDllImport (<span class="keyword">const</span> <span class="keywordtype">char</span> dllFileName[], <span class="keyword">const</span> <span class="keywordtype">char</span> funcName[], <span class="keywordtype">bool</span> required <span class="comment">/*= true*/</span>)) ()</div>
<div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;    {</div>
<div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (dllFileName &amp;&amp; *dllFileName)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (funcName    &amp;&amp; *funcName))    <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160; </div>
<div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> dllPaths [2][MAX_PATH] = {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>};</div>
<div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160; </div>
<div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;    <span class="keywordflow">if</span> (!*dllPaths[0])</div>
<div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;        {</div>
<div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> dllDir[]  = <span class="stringliteral">&quot;\\Windows\\&quot;</span>;</div>
<div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160; </div>
<div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;        <span class="comment">// dllPaths[0] is relative to the TX Setup directory stored in the Registry</span></div>
<div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160; </div>
<div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;        <span class="keywordtype">char</span>* path = dllPaths[0];</div>
<div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160; </div>
<div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;        <a class="code" href="group___misc.html#gad942f797bce07af74cd11c88d50ddd3e">txRegQuery</a> (<span class="stringliteral">&quot;HKCU\\Software\\TX Library&quot;</span>, <span class="stringliteral">&quot;ProductDir&quot;</span>, path, MAX_PATH);</div>
<div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;        strncat_s (path, MAX_PATH, dllDir, <span class="keyword">sizeof</span> (dllDir) - 1);</div>
<div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160; </div>
<div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;        <span class="comment">// dllPaths[1] is relative to TXib.h file used in compilation</span></div>
<div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160; </div>
<div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;        path = dllPaths[1];</div>
<div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160; </div>
<div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;        <span class="keywordflow">if</span> (strchr (__FILE__, <span class="charliteral">&#39;:&#39;</span>))</div>
<div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;            {</div>
<div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;            strncpy_s (path, MAX_PATH, __FILE__, <span class="keyword">sizeof</span> (__FILE__) - 1);</div>
<div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;            }</div>
<div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;            {</div>
<div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;            GetCurrentDirectory (MAX_PATH, path);</div>
<div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;            strncat_s (path, MAX_PATH, <span class="stringliteral">&quot;\\&quot;</span> __FILE__, <span class="keyword">sizeof</span> (<span class="stringliteral">&quot;\\&quot;</span> __FILE__) - 1);</div>
<div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;            }</div>
<div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160; </div>
<div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;        <span class="keywordflow">if</span> (<span class="keywordtype">char</span>* dir = strrchr (path, <span class="charliteral">&#39;\\&#39;</span>)) *dir = 0;</div>
<div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160; </div>
<div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;        strncat_s (path, MAX_PATH, dllDir, <span class="keyword">sizeof</span> (dllDir) - 1);</div>
<div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;        }</div>
<div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160; </div>
<div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;    <span class="keywordtype">char</span> dllName[MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>, dllArch[MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* arch = (dllFileName? strchr (dllFileName, <span class="charliteral">&#39;*&#39;</span>) : NULL);  <span class="comment">//-V547</span></div>
<div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160; </div>
<div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;    <span class="keywordflow">if</span> (arch)</div>
<div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;        {</div>
<div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;        assert (arch &gt;= dllFileName);  <span class="comment">//-V547</span></div>
<div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160; </div>
<div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;        strncpy_s (dllName, <span class="keyword">sizeof</span> (dllName), dllFileName, (<span class="keywordtype">size_t</span>) (arch - dllFileName));</div>
<div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;        strncat_s (dllName, <span class="keyword">sizeof</span> (dllName), arch+1, <span class="keyword">sizeof</span> (dllName) - 1 - strlen (dllName));</div>
<div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160; </div>
<div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;        strncpy_s (dllArch, <span class="keyword">sizeof</span> (dllArch), dllFileName, (<span class="keywordtype">size_t</span>) (arch - dllFileName));</div>
<div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;        strncat_s (dllArch, <span class="keyword">sizeof</span> (dllArch), <span class="keyword">sizeof</span> (<span class="keywordtype">void</span>*) == 8? <span class="stringliteral">&quot;64&quot;</span> : <span class="stringliteral">&quot;32&quot;</span>, 3);</div>
<div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;        strncat_s (dllArch, <span class="keyword">sizeof</span> (dllArch), arch+1, <span class="keyword">sizeof</span> (dllArch) - 1 - strlen (dllArch));</div>
<div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;        }</div>
<div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dllFileName)  <span class="comment">//-V547 //-V2516</span></div>
<div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;        {</div>
<div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;        strncat_s (dllName, <span class="keyword">sizeof</span> (dllName), dllFileName, <span class="keyword">sizeof</span> (dllName) - 1);</div>
<div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;        }</div>
<div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160; </div>
<div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;    HMODULE   dll = GetModuleHandle (dllFileName);</div>
<div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160; </div>
<div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;    <span class="keywordflow">if</span> (!dll) dll = GetModuleHandle (dllArch);</div>
<div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;    <span class="keywordflow">if</span> (!dll) dll = GetModuleHandle (dllName);</div>
<div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160; </div>
<div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; !dll &amp;&amp; i &lt; (int) <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (dllPaths); i++)</div>
<div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;        {</div>
<div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;        <span class="keywordtype">char</span> path [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;        strncpy_s (path, <span class="keyword">sizeof</span> (path), dllPaths[i], <span class="keyword">sizeof</span> (dllPaths[i]));</div>
<div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;        <span class="keywordtype">size_t</span> len = strlen (path);</div>
<div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160; </div>
<div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;        strncpy_s (path + len, <span class="keyword">sizeof</span> (path) - len, dllArch, <span class="keyword">sizeof</span> (dllArch));</div>
<div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;        <span class="keywordflow">if</span> (!dll) dll = LoadLibrary (path);  <span class="comment">//-V547</span></div>
<div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160; </div>
<div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;        strncpy_s (path + len, <span class="keyword">sizeof</span> (path) - len, dllName, <span class="keyword">sizeof</span> (dllName));</div>
<div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;        <span class="keywordflow">if</span> (!dll) dll = LoadLibrary (path);</div>
<div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;        }</div>
<div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160; </div>
<div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;    <span class="keywordflow">if</span> (!dll) dll = LoadLibrary (dllArch);</div>
<div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;    <span class="keywordflow">if</span> (!dll) dll = LoadLibrary (dllName);</div>
<div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160; </div>
<div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;    <span class="keywordflow">if</span> (!dll  &amp;&amp; required) <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Cannot load library \&quot;%s%s%s\&quot;.&quot;</span>,</div>
<div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;                                           dllName, (arch? <span class="stringliteral">&quot;\&quot; / \&quot;&quot;</span> : <span class="stringliteral">&quot;&quot;</span>), dllArch);</div>
<div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;    <span class="keywordflow">if</span> (!dll) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160; </div>
<div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;    void (*addr)() = (<span class="keywordtype">void</span>(*)()) GetProcAddress (dll, funcName);</div>
<div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160; </div>
<div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;    <span class="keywordflow">if</span> (!addr &amp;&amp; required) <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Cannot import \&quot;%s\&quot; from library \&quot;%s%s%s\&quot;.&quot;</span>,</div>
<div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;                                           funcName, dllName, (arch? <span class="stringliteral">&quot;\&quot; / \&quot;&quot;</span> : <span class="stringliteral">&quot;&quot;</span>), dllArch);</div>
<div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;    <span class="keywordflow">return</span> addr;</div>
<div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;    }</div>
<div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160; </div>
<div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160; </div>
<div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;<span class="preprocessor">#if defined (_MSC_VER) &amp;&amp; (_MSC_VER == 1800) </span><span class="comment">// MSVC 2013</span></div>
<div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;<span class="preprocessor">    #pragma warning (push)</span></div>
<div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;<span class="preprocessor">    #pragma warning (disable: 6102)          </span><span class="comment">// Использование &#39;name&#39; из завершившегося ошибкой вызова функции</span></div>
<div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160; </div>
<div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#gad942f797bce07af74cd11c88d50ddd3e">txRegQuery</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* keyName, <span class="keyword">const</span> <span class="keywordtype">char</span>* valueName, <span class="keywordtype">void</span>* value, <span class="keywordtype">size_t</span> szValue)</div>
<div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;    {</div>
<div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (keyName)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160; </div>
<div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;    HKEY hive = NULL;</div>
<div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160; </div>
<div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;<span class="preprocessor">    #define EQU_(name1, name2)  ( _strnicmp (keyName, name1 &quot;\\&quot;</span>, sizeof (name1)) == 0 || \</div>
<div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160;                                  _strnicmp (keyName, name2 &quot;\\&quot;, sizeof (name2)) == 0 )</div>
<div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160; </div>
<div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;    <span class="keywordflow">if</span>      (EQU_(<span class="stringliteral">&quot;HKLM&quot;</span>, <span class="stringliteral">&quot;HKEY_LOCAL_MACHINE&quot;</span>))  hive = HKEY_LOCAL_MACHINE;</div>
<div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (EQU_(<span class="stringliteral">&quot;HKCU&quot;</span>, <span class="stringliteral">&quot;HKEY_CURRENT_USER&quot;</span>))   hive = HKEY_CURRENT_USER;</div>
<div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (EQU_(<span class="stringliteral">&quot;HKCR&quot;</span>, <span class="stringliteral">&quot;HKEY_CLASSES_ROOT&quot;</span>))   hive = HKEY_CLASSES_ROOT;</div>
<div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (EQU_(<span class="stringliteral">&quot;HKU&quot;</span>,  <span class="stringliteral">&quot;HKEY_USERS&quot;</span>))          hive = HKEY_USERS;</div>
<div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (EQU_(<span class="stringliteral">&quot;HKCC&quot;</span>, <span class="stringliteral">&quot;HKEY_CURRENT_CONFIG&quot;</span>)) hive = HKEY_CURRENT_CONFIG;</div>
<div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160; </div>
<div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;    <span class="keywordflow">else</span> { _TX_ARGUMENT_FAILED ((<span class="stringliteral">&quot;keyName должно начинаться с HKLM\\, HKCU\\, HKCR\\, HKU\\ или HKCC\\ &quot;</span>, hive)); <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160; </div>
<div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;<span class="preprocessor">    #undef EQU_</span></div>
<div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160; </div>
<div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;    keyName = strchr (keyName, <span class="charliteral">&#39;\\&#39;</span>) + 1;  <span class="comment">//-V769</span></div>
<div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;    assert (keyName &gt; (<span class="keyword">const</span> <span class="keywordtype">char</span>*) 1);</div>
<div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160; </div>
<div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;    HKEY  key  = NULL;</div>
<div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;    DWORD size = 0;</div>
<div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160; </div>
<div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;    <span class="keywordtype">bool</span>                               ok  = (RegOpenKeyEx    (hive, keyName,   0, KEY_QUERY_VALUE, &amp;key)         == ERROR_SUCCESS);</div>
<div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;    <span class="keywordflow">if</span> (ok)                            ok &amp;= (RegQueryValueEx (key,  valueName, NULL, NULL, NULL,          &amp;size) == ERROR_SUCCESS);</div>
<div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; value &amp;&amp; size &lt; szValue) ok &amp;= (RegQueryValueEx (key,  valueName, NULL, NULL, (BYTE*) value, &amp;size) == ERROR_SUCCESS);  <span class="comment">//-V104</span></div>
<div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;    <span class="keywordflow">if</span> (key)                           ok &amp;= (RegCloseKey     (key)                                               == ERROR_SUCCESS);</div>
<div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160; </div>
<div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;    <span class="keywordflow">return</span> size;</div>
<div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;    }</div>
<div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160; </div>
<div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;<span class="preprocessor">#if defined (_MSC_VER) &amp;&amp; (_MSC_VER == 1800)</span></div>
<div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;<span class="preprocessor">    #pragma warning (pop)</span></div>
<div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160; </div>
<div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160; </div>
<div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160; </div>
<div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160; </div>
<div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;HWND <a class="code" href="group___drawing.html#gafce21ce98474d5559f316b3d47cdbfab">txCreateWindow</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, <span class="keywordtype">bool</span> centered <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;    {</div>
<div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;$1  <span class="keywordflow">if</span> (!_txInitialized) _txInitialized = _txInitialize();</div>
<div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160; </div>
<div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;$   <span class="keywordflow">if</span> (HWND wnd = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>())</div>
<div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;        {</div>
<div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;$       SetLastErrorEx (ERROR_INVALID_DATA, 0);</div>
<div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160;$       _TX_ON_DEBUG (<a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Окно рисования уже создано!&quot;</span>));</div>
<div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;$       <span class="keywordflow">return</span> wnd;</div>
<div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;        }</div>
<div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160; </div>
<div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;$   <span class="keywordflow">if</span> (!_txIsDll)</div>
<div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;        {</div>
<div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;$       _txMain = ! FindAtom (<span class="stringliteral">&quot;_txMain&quot;</span>);  <span class="comment">// Not a thread-safe</span></div>
<div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;$       (void)       AddAtom (<span class="stringliteral">&quot;_txMain&quot;</span>);  <span class="comment">//-V530</span></div>
<div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;        }</div>
<div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160; </div>
<div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a> &lt; 10) {$ <a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a> = 10; }  <span class="comment">//-V1048</span></div>
<div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160; </div>
<div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;$   _txRunning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160; </div>
<div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;    <span class="comment">// Store the size</span></div>
<div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160; </div>
<div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;$   <span class="keyword">static</span> SIZE size = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (sizeX), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (sizeY) };</div>
<div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;$   <span class="keywordflow">if</span> (centered) { size.cx *= -1; size.cy *= -1; }</div>
<div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160; </div>
<div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;    <span class="comment">// In Thread, where REAL creation lies...</span></div>
<div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160; </div>
<div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;$   <span class="keywordtype">unsigned</span> <span class="keywordtype">id</span> = 0;</div>
<div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;$   _txCanvas_Thread = (HANDLE) Win32::_beginthreadex (NULL, 0, _txCanvas_ThreadProc, &amp;size, 0, &amp;<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160; </div>
<div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160;$   <span class="keywordflow">if</span> (!_txCanvas_Thread) <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Cannot start canvas thread.&quot;</span>),  (HWND) NULL;</div>
<div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160; </div>
<div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;$   _txWaitFor (_txRunning, 10*<a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160; </div>
<div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;$   <span class="keywordflow">if</span> (!_txRunning)       <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Cannot create canvas window.&quot;</span>), (HWND) NULL;</div>
<div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;$   <span class="keywordflow">if</span> (!<a class="code" href="group___drawing.html#ga3291ffa23a348c25985d780ab8f7088b">txOK</a>())           <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Canvas window is not OK.&quot;</span>),     (HWND) NULL;</div>
<div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160; </div>
<div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;$   HWND console = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160; </div>
<div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;$   DWORD proc = 0;</div>
<div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;$   GetWindowThreadProcessId (console, &amp;proc);</div>
<div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160; </div>
<div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;$   <span class="keywordflow">if</span> (console &amp;&amp; (proc == GetCurrentProcessId() || _txIsParentWaitable()))</div>
<div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;        {$ ShowWindow (console, <a class="code" href="group___technical.html#ga82c63be7c47e2b13e5b6f7661cc3fbe4">TX_CONSOLE_MODE</a>); }</div>
<div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160; </div>
<div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;$   HMENU menu = GetSystemMenu (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;    <span class="keywordflow">if</span> (menu) {$ CheckMenuItem (menu, _TX_IDM_CONSOLE, (console? (IsWindowVisible (console)? MF_CHECKED : 0) : MF_DISABLED)); }</div>
<div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160; </div>
<div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;$   Win32::GdiSetBatchLimit (1);</div>
<div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160; </div>
<div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;$   SetLastError (0);</div>
<div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160; </div>
<div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;$   errno = 0;</div>
<div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160; </div>
<div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;<span class="preprocessor">    #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;$   _doserrno = 0;</div>
<div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160; </div>
<div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>();</div>
<div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;    }</div>
<div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160; </div>
<div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160; </div>
<div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;HWND txCreateExtraWindow (CREATESTRUCT createData)</div>
<div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;    {</div>
<div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;$1  <span class="keywordflow">if</span> (_TX_TXWINDOW_FAILED()) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160; </div>
<div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;$   <span class="keyword">volatile</span> HWND wnd = NULL;</div>
<div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;$   createData.hInstance = (HINSTANCE)(uintptr_t) &amp;wnd;</div>
<div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160; </div>
<div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;$   PostMessage (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), _TX_WM_CREATEWND, 0, (LPARAM) &amp;createData) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160; </div>
<div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;$   _txWaitFor (wnd, 5*<a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160; </div>
<div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;$   <span class="keywordflow">return</span> wnd;</div>
<div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;    }</div>
<div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160; </div>
<div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160; </div>
<div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaa72c4849ac0c9bf6f95893f4265b9843">txSetDefaults</a> (HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;    {</div>
<div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;$1  <span class="keywordflow">if</span> (dc == <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()) <a class="code" href="group___drawing.html#gaff3d9c60900531f438a19216485bdd41">txUpdateWindow</a> (<span class="keyword">false</span>);  <span class="comment">//-V601</span></div>
<div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;$   <a class="code" href="classtx_auto_lock.html">txAutoLock</a> _lock;</div>
<div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160; </div>
<div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;$   RECT r = {};</div>
<div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;$   GetClientRect (Win32::GetConsoleWindow(), &amp;r);</div>
<div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;$   SIZE szCon = { r.right - r.left, r.bottom - r.top };</div>
<div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160; </div>
<div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;$   HANDLE out = GetStdHandle (STD_OUTPUT_HANDLE);</div>
<div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160; </div>
<div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;$   CONSOLE_SCREEN_BUFFER_INFO con = {{80, 25}, {}, 0, {0, 0, 80-1, 25-1}, {80, 25}};</div>
<div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;$   GetConsoleScreenBufferInfo (out, &amp;con);</div>
<div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160; </div>
<div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;$   SIZE szTxt = { (short) (con.srWindow.Right  - con.srWindow.Left + 1),</div>
<div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;                   (short) (con.srWindow.Bottom - con.srWindow.Top  + 1) };</div>
<div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160; </div>
<div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;<span class="comment">//{ Set defaults for graphics layer</span></div>
<div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160; </div>
<div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;$   _txBuffer_Select (Win32::GetStockObject (WHITE_PEN),   dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;$   _txBuffer_Select (Win32::GetStockObject (WHITE_BRUSH), dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160; </div>
<div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;$   _txBuffer_Select (Win32::CreateFont (szCon.cy/szTxt.cy, szCon.cx/szTxt.cx,</div>
<div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;                                         0, 0, FW_REGULAR, FALSE, FALSE, FALSE,</div>
<div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;                                         RUSSIAN_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,</div>
<div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;                                         DEFAULT_QUALITY, FIXED_PITCH, <a class="code" href="group___technical.html#gada3539ec53f9e712cf1e0aceafaecf97">TX_CONSOLE_FONT</a>),</div>
<div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;                      dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160; </div>
<div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;$  (Win32::SetTextColor      (dc, <a class="code" href="group___drawing.html#ga90c5bf9144d5eed4926fb92ba854eca9">TX_WHITE</a>) != CLR_INVALID) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;$   Win32::SetBkMode         (dc, TRANSPARENT)              <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160; </div>
<div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;$   Win32::SetROP2           (dc, R2_COPYPEN)               <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;$   Win32::SetStretchBltMode (dc, HALFTONE)                 <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160; </div>
<div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160; </div>
<div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;$   <span class="keywordflow">if</span> (dc != <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>())</div>
<div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;        {$ <span class="keywordflow">return</span> <span class="keyword">true</span>; }</div>
<div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160; </div>
<div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;<span class="comment">//{ Set defaults for console  layer</span></div>
<div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160; </div>
<div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;$   POINT szCanvas = <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (dc);</div>
<div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160; </div>
<div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;$   HGDIOBJ font = <a class="code" href="group___drawing.html#ga794901725b6c4a96f585742b70c0ea05">txFontExist</a> (<a class="code" href="group___technical.html#gada3539ec53f9e712cf1e0aceafaecf97">TX_CONSOLE_FONT</a>)?</div>
<div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;                       Win32::CreateFont (szCanvas.y/szTxt.cy, szCanvas.x/szTxt.cx,</div>
<div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;                                          0, 0, FW_REGULAR, FALSE, FALSE, FALSE,</div>
<div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;                                          RUSSIAN_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,</div>
<div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;                                          DEFAULT_QUALITY, FIXED_PITCH, <a class="code" href="group___technical.html#gada3539ec53f9e712cf1e0aceafaecf97">TX_CONSOLE_FONT</a>)</div>
<div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;                       :</div>
<div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;                       Win32::GetStockObject (SYSTEM_FIXED_FONT);</div>
<div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160; </div>
<div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;$   _txBuffer_Select (font, _txCanvas_BackBuf[1]);</div>
<div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160; </div>
<div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;<span class="comment">//{ Scroll the console for text to go above top of window and don&#39;t mix with graphics</span></div>
<div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160; </div>
<div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;$   <span class="keywordflow">if</span> (con.dwCursorPosition.X) _putch (<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160; </div>
<div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;$   <span class="keywordtype">short</span> delta = (short) (con.dwCursorPosition.Y - con.srWindow.Top);</div>
<div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160; </div>
<div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;$   con.srWindow.Top    = (short) (con.srWindow.Top    + delta);</div>
<div class="line"><a name="l08900"></a><span class="lineno"> 8900</span>&#160;$   con.srWindow.Bottom = (short) (con.srWindow.Bottom + delta);</div>
<div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160; </div>
<div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;$   SMALL_RECT src  = { 0, 0, (short) (con.dwSize.X - 1), (short) (con.dwSize.Y - 1) };</div>
<div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;$   CHAR_INFO  fill = { {<span class="charliteral">&#39; &#39;</span>}, FOREGROUND_LIGHTGRAY };</div>
<div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160;$   COORD      dest = { 0, (short) -delta };  <span class="comment">// New UL-corner of src, scroll up</span></div>
<div class="line"><a name="l08905"></a><span class="lineno"> 8905</span>&#160; </div>
<div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;$   con.dwCursorPosition.X = 0;</div>
<div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;$   con.dwCursorPosition.Y = (short) (con.dwCursorPosition.Y - delta);</div>
<div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160; </div>
<div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;$   (con.srWindow.Bottom &lt; con.dwSize.Y &amp;&amp;                        <span class="comment">// Move the &quot;window&quot;</span></div>
<div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;     SetConsoleWindowInfo      (out, <span class="keyword">true</span>, &amp;con.srWindow))</div>
<div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;    ||</div>
<div class="line"><a name="l08912"></a><span class="lineno"> 8912</span>&#160;    (ScrollConsoleScreenBuffer (out, &amp;src, NULL, dest, &amp;fill),    <span class="comment">// Or scroll the buffer</span></div>
<div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160;     SetConsoleCursorPosition  (out, con.dwCursorPosition));</div>
<div class="line"><a name="l08914"></a><span class="lineno"> 8914</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160; </div>
<div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;$   <a class="code" href="group___drawing.html#gaff3d9c60900531f438a19216485bdd41">txUpdateWindow</a> (<span class="keyword">true</span>);  <span class="comment">//-V601</span></div>
<div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160; </div>
<div class="line"><a name="l08918"></a><span class="lineno"> 8918</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l08919"></a><span class="lineno"> 8919</span>&#160;    }</div>
<div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160; </div>
<div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160; </div>
<div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160; </div>
<div class="line"><a name="l08925"></a><span class="lineno"> 8925</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga3291ffa23a348c25985d780ab8f7088b">txOK</a>()</div>
<div class="line"><a name="l08926"></a><span class="lineno"> 8926</span>&#160;    {</div>
<div class="line"><a name="l08927"></a><span class="lineno"> 8927</span>&#160;    <span class="keywordflow">return</span> (_txCanaryFirst == 0x776F656D &amp;&amp;  <span class="comment">// Too well-known values to use constants. You know these values, don&#39;t you?</span></div>
<div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;            _txCanaryLast  == 0x5E2E2E5E &amp;&amp;</div>
<div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;            _txCanvas_OK()</div>
<div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160; </div>
<div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;    #<span class="keywordflow">if</span> defined (_MSC_VER)</div>
<div class="line"><a name="l08932"></a><span class="lineno"> 8932</span>&#160;         &amp;&amp; _CrtCheckMemory()</div>
<div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;    #endif</div>
<div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;            );</div>
<div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;    }</div>
<div class="line"><a name="l08936"></a><span class="lineno"> 8936</span>&#160; </div>
<div class="line"><a name="l08937"></a><span class="lineno"> 8937</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08938"></a><span class="lineno"> 8938</span>&#160;<span class="comment">//{          Cleanup</span></div>
<div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160; </div>
<div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160; </div>
<div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160;<span class="comment">// Implicit std(MSVCRT.dll)::_cexit() call before _txCleanup can lead to hangs in _cexit handlers chain.</span></div>
<div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;<span class="comment">// So redefining ::std::_cexit(). Do it dynamically via PE Import Table hook to avoid duplicate symbols</span></div>
<div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;<span class="comment">// if several modules linked together include TXLib.h. See _txSetProcAddress() call in _txInitialize().</span></div>
<div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160; </div>
<div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;<span class="keywordtype">void</span> _txOnCExit()</div>
<div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;    {</div>
<div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;    OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160; </div>
<div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;$5  _txCleanup();</div>
<div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160; </div>
<div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;    _TX_CALLv (Win32::_cexit, ());</div>
<div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;    }</div>
<div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160; </div>
<div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160; </div>
<div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;<span class="keywordtype">void</span> _txOnExit (<span class="keywordtype">int</span> retcode)</div>
<div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;    {</div>
<div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;    <span class="keywordflow">if</span> (retcode != 0)</div>
<div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;        {</div>
<div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;        OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;        <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%d) called\n&quot;</span>, _TX_VERSION, __func__, retcode);</div>
<div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;        }</div>
<div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160; </div>
<div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;$5  _txCleanup();</div>
<div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160; </div>
<div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;    <span class="keywordflow">if</span> (retcode != 0)</div>
<div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;        <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: calling Win32::exit (%d)\n&quot;</span>, _TX_VERSION, retcode);</div>
<div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160; </div>
<div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;    Win32::exit (retcode);</div>
<div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;    }</div>
<div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160; </div>
<div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160; </div>
<div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;<span class="keywordtype">void</span> _txOnExitProcess (<span class="keywordtype">unsigned</span> retcode)</div>
<div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;    {</div>
<div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;    <span class="keywordflow">if</span> (retcode != 0)</div>
<div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;        {</div>
<div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;        OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;        <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%u) called\n&quot;</span>, _TX_VERSION, __func__, retcode);</div>
<div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;        }</div>
<div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160; </div>
<div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;$5  _txCleanup();</div>
<div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160; </div>
<div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;    <span class="keywordflow">if</span> (retcode != 0)</div>
<div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;        <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: calling Win32::ExitProcess (%u)\n&quot;</span>, _TX_VERSION, retcode);</div>
<div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160; </div>
<div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;    Win32::ExitProcess (retcode);</div>
<div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;    }</div>
<div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160; </div>
<div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160; </div>
<div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;<span class="keywordtype">bool</span> _txOnTerminateProcess (HANDLE process, <span class="keywordtype">unsigned</span> retcode)</div>
<div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;    {</div>
<div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;    <span class="keywordflow">if</span> (retcode != 0)</div>
<div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;        {</div>
<div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;        OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;        <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (0x%p, %u) called\n&quot;</span>, _TX_VERSION, __func__, process, retcode);</div>
<div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;        }</div>
<div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160; </div>
<div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;$5  _txCleanup();</div>
<div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160; </div>
<div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;    <span class="keywordflow">if</span> (retcode != 0)</div>
<div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;        <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: calling Win32::TerminateProcess (0x%p, %u)\n&quot;</span>, _TX_VERSION, process, retcode);</div>
<div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160; </div>
<div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;    <span class="keywordflow">return</span> Win32::TerminateProcess (process, retcode);</div>
<div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;    }</div>
<div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160; </div>
<div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160; </div>
<div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;<span class="keywordtype">void</span> _txOnFatalExit (<span class="keywordtype">int</span> retcode)</div>
<div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;    {</div>
<div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;    OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%d) called\n&quot;</span>, _TX_VERSION, __func__, retcode);</div>
<div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160; </div>
<div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;$5  _txCleanup();</div>
<div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160; </div>
<div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: calling Win32::FatalExit (%d)\n&quot;</span>, _TX_VERSION, retcode);</div>
<div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;    _TX_CALLv (Win32::FatalExit, (retcode));</div>
<div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160; </div>
<div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: Win32::FatalExit() failure, calling Win32::TerminateProcess (%d)\n&quot;</span>, _TX_VERSION, retcode);</div>
<div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;    Win32::TerminateProcess (GetCurrentProcess(), retcode);</div>
<div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;    }</div>
<div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160; </div>
<div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160; </div>
<div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;<span class="keywordtype">void</span> _txOnFatalAppExitA (<span class="keywordtype">unsigned</span> action, <span class="keyword">const</span> <span class="keywordtype">char</span> message[])</div>
<div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;    {</div>
<div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;    OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%u, \&quot;%s\&quot;) called\n&quot;</span>, _TX_VERSION, __func__, action, message);</div>
<div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160; </div>
<div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;$5  _txCleanup();</div>
<div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160; </div>
<div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: calling Win32::FatalAppExitA (%u, %s)\n&quot;</span>, _TX_VERSION, action, message);</div>
<div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;    _TX_CALLv (Win32::FatalAppExitA, (action, message));</div>
<div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160; </div>
<div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: Win32::FatalExit() failure, calling Win32::TerminateProcess (EXIT_FAILURE)\n&quot;</span>, _TX_VERSION);</div>
<div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;    Win32::TerminateProcess (GetCurrentProcess(), EXIT_FAILURE);</div>
<div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;    }</div>
<div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160; </div>
<div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160; </div>
<div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;BOOL WINAPI _txOnConsoleCtrlEvent (DWORD type)</div>
<div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;    {</div>
<div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;    OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (0x%04lX) called\n&quot;</span>, _TX_VERSION, __func__, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) type);</div>
<div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160; </div>
<div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;$5  <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;        {</div>
<div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;        <span class="keywordflow">case</span> CTRL_LOGOFF_EVENT:</div>
<div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;        <span class="keywordflow">case</span> CTRL_SHUTDOWN_EVENT: $ _txExit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;                                  $ _txCleanup();</div>
<div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;        <span class="keywordflow">case</span> CTRL_C_EVENT:</div>
<div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;        <span class="keywordflow">case</span> CTRL_CLOSE_EVENT:</div>
<div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;        <span class="keywordflow">case</span> CTRL_BREAK_EVENT:</div>
<div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160; </div>
<div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;        <span class="keywordflow">default</span>:                  <span class="keywordflow">break</span>;  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;        }</div>
<div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160; </div>
<div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;    }</div>
<div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160; </div>
<div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160; </div>
<div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;<span class="keywordtype">void</span> _txCleanup()</div>
<div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;    {</div>
<div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;    <span class="keywordflow">if</span> (!_txInitialized) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;    <span class="keywordflow">else</span> _txInitialized = <span class="keyword">false</span>;  <span class="comment">//-V601</span></div>
<div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160; </div>
<div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;$3  _txRunning = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;$   _txConsole_IsBlinking = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160; </div>
<div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;$   <a class="code" href="group___misc.html#ga3f81b81baf3d43ec066bac4493149708">txSetProgress</a> (100, (!_txErrors)? Win32::TBPF_PAUSED : Win32::TBPF_ERROR);</div>
<div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160; </div>
<div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;$   <a class="code" href="group___misc.html#ga30fb1a6913174dfcea5079391f655be2">txSetWindowsHook</a> (NULL);</div>
<div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160; </div>
<div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;$   HWND canvas     = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>();</div>
<div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;$   HWND console    = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;$   <span class="keywordtype">unsigned</span> thread = GetCurrentThreadId();</div>
<div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160; </div>
<div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;$   HWND wnd        = (canvas)? canvas : console;</div>
<div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160; </div>
<div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;$   <span class="keywordtype">bool</span> externTerm = (thread != _txMainThreadId &amp;&amp;</div>
<div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;                       thread != _txCanvas_ThreadId);</div>
<div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;$   DWORD parent = 0;</div>
<div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;$   <span class="keywordtype">int</span>  isParentWaitable = _txIsParentWaitable (&amp;parent);</div>
<div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;$   <span class="keywordtype">bool</span> waitableParent   = !externTerm &amp;&amp; isParentWaitable;</div>
<div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160; </div>
<div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;$   <span class="keywordflow">if</span> (canvas)</div>
<div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;        {$ <a class="code" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a> (5*<a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a>); }</div>
<div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160; </div>
<div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;$   <span class="keywordflow">if</span> (_txConsole)</div>
<div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;        {</div>
<div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;$       <span class="keywordflow">if</span> (_txMain) <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_LIGHTGRAY);</div>
<div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160; </div>
<div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;$       <span class="keywordflow">if</span> (console)</div>
<div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;            {</div>
<div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;$           EnableWindow       (console, <span class="keyword">true</span>);</div>
<div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;$           _txSetFinishedText (console);</div>
<div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;            }</div>
<div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;        }</div>
<div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160; </div>
<div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;$   <span class="keywordflow">if</span> (_txMain &amp;&amp; !externTerm &amp;&amp; canvas)</div>
<div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;        {$ _txSetFinishedText (canvas); }</div>
<div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160; </div>
<div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;$   std::cout.flush();</div>
<div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;$   std::cerr.flush();</div>
<div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;$   std::clog.flush();</div>
<div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;$   _flushall();</div>
<div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160; </div>
<div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;$   <span class="keywordtype">bool</span> paused = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;$   <span class="keywordflow">if</span> (((canvas? _txMain : _txConsole) &amp;&amp; !_txExit) || (_txErrors &amp;&amp; thread == _txMainThreadId))</div>
<div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;        {</div>
<div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;$       <span class="keywordflow">if</span> (wnd)</div>
<div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;            {</div>
<div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;$           <span class="keywordflow">if</span> (isParentWaitable &gt;= 0)</div>
<div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;                {$ _txActivateWindow (wnd, 0x0A); }</div>
<div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160; </div>
<div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;$           EnableWindow (wnd, <span class="keyword">true</span>);</div>
<div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;            }</div>
<div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160; </div>
<div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;$       <span class="keywordflow">if</span> (console &amp;&amp; isParentWaitable &gt;= 0)</div>
<div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;            {</div>
<div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160;$           _txPauseBeforeTermination (canvas);</div>
<div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;$           paused = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;            }</div>
<div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;        }</div>
<div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160; </div>
<div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc">_txWatchdogTimeout</a> &gt;= 0)</div>
<div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;     {$ Win32::_beginthread (_txWatchdogTerminator, 0, &amp;<a class="code" href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc">_txWatchdogTimeout</a>); }</div>
<div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160; </div>
<div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>())</div>
<div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;        {$ SendNotifyMessage (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), WM_DESTROY, 0, 0); }</div>
<div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160; </div>
<div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;$   _txWaitFor (!<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), 5*<a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160; </div>
<div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;$   <a class="code" href="group___misc.html#gad6db0ee1b36288c7eb3f2196077971f9">txSpeak</a>     (NULL);</div>
<div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;$   <a class="code" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a> (NULL);</div>
<div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160; </div>
<div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;$   <span class="keyword">delete</span> _txCanvas_UserDCs;</div>
<div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;$   _txCanvas_UserDCs = NULL;</div>
<div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160; </div>
<div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;$   <span class="keywordflow">if</span> (GetCurrentThreadId() != _txMainThreadId)</div>
<div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;        {$ SuspendThread (_txMainThread);    }  <span class="comment">//-V720</span></div>
<div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;$   <span class="keywordflow">if</span> (GetCurrentThreadId() != _txCanvas_ThreadId)</div>
<div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;        {$ SuspendThread (_txCanvas_Thread); }  <span class="comment">//-V720</span></div>
<div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160; </div>
<div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;$   <span class="keywordflow">if</span> (_txMainThread)</div>
<div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;        {$ CloseHandle (_txMainThread)    <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>; _txMainThread    = NULL; }</div>
<div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_Thread)</div>
<div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;        {$ CloseHandle (_txCanvas_Thread) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>; _txCanvas_Thread = NULL; }</div>
<div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160; </div>
<div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;$   <span class="keywordflow">if</span> (!<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>())</div>
<div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;        {$ DeleteCriticalSection (&amp;_txCanvas_LockBackBuf); CRITICAL_SECTION zero = {0, -1}; _txCanvas_LockBackBuf = zero; }</div>
<div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160; </div>
<div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;$   <span class="keywordtype">bool</span> parentKilled = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;$   <span class="keywordflow">if</span> (waitableParent &amp;&amp; paused &amp;&amp; _txNOP (<a class="code" href="group___technical.html#ga9a495d013c6f08cd50220aca99ca56c2">_TX_ALLOW_KILL_PARENT</a>))</div>
<div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;        {</div>
<div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;$       console = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160; </div>
<div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;$       parentKilled = _txKillProcess (parent);</div>
<div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160; </div>
<div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;$       <span class="keywordflow">if</span> (!parentKilled)</div>
<div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;            {</div>
<div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;$           PostMessage (console, WM_KEYDOWN, VK_RETURN, 0x001C0001);  <span class="comment">// Scancode = 0x1C, Count = 1</span></div>
<div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;$           PostMessage (console, WM_KEYUP,   VK_RETURN, 0xC01C0001);  <span class="comment">// Scancode = 0x1C, Count = 1, Prev = 1, Trans = 1</span></div>
<div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;            }</div>
<div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;        }</div>
<div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160; </div>
<div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;$   <span class="keywordflow">if</span> (_txMain &amp;&amp; _txConsole)</div>
<div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;        {$ _txConsole_Detach (waitableParent &amp;&amp; !parentKilled &amp;&amp; !externTerm); }  <span class="comment">//-V560</span></div>
<div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160; </div>
<div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;$   std::cout.flush();</div>
<div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;$   std::cerr.flush();</div>
<div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;$   std::clog.flush();</div>
<div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;$   _flushall();</div>
<div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160; </div>
<div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;$   _txSymGetFromAddr (NULL);</div>
<div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160; </div>
<div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;    <span class="comment">// That&#39;s all, folks</span></div>
<div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160; </div>
<div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;    _TX_ON_DEBUG (OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;                  OutputDebugString (_TX_VERSION <span class="stringliteral">&quot; - FINISHED: &quot;</span> <a class="code" href="group___technical.html#ga43d277b4418068ebef1fd2bdbaf550f6">_TX_MODULE</a> <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;                  OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;    }</div>
<div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160; </div>
<div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160; </div>
<div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;<span class="keywordtype">int</span> _txSetFinishedText (HWND wnd)</div>
<div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;    {</div>
<div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;    <span class="keyword">struct </span>tools</div>
<div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;        {</div>
<div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;        <span class="keyword">static</span> LRESULT getWindowText (HWND window, <span class="keywordtype">wchar_t</span> text[], <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;            {</div>
<div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;$3          memset (text, 0, size * <span class="keyword">sizeof</span> (*text));</div>
<div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160; </div>
<div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;$           <span class="keywordflow">return</span> SendMessageTimeoutW (window, WM_GETTEXT, (WPARAM) size, (LPARAM) text, SMTO_BLOCK | SMTO_ABORTIFHUNG, <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>, NULL);</div>
<div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;            }</div>
<div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160; </div>
<div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;        <span class="keyword">static</span> LRESULT setWindowText (HWND window, <span class="keywordtype">wchar_t</span> text[])</div>
<div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160;            {</div>
<div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;$1          <span class="keywordflow">return</span> SendMessageTimeoutW (window, WM_SETTEXT, 0,             (LPARAM) text, SMTO_BLOCK | SMTO_ABORTIFHUNG, <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>, NULL);</div>
<div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;            }</div>
<div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;        };</div>
<div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160; </div>
<div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;$1  <span class="keyword">static</span> <span class="keywordtype">wchar_t</span> title [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>+15] = L<span class="stringliteral">&quot;TXLib&quot;</span>;</div>
<div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160; </div>
<div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;$   tools::getWindowText (wnd, title, <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>-1);</div>
<div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;$   <span class="keywordtype">int</span> len = (int) wcslen (title); <span class="keywordflow">if</span> (len &gt;= (<span class="keywordtype">int</span>)<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>) len = <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>-1;</div>
<div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160; </div>
<div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;$   MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, <span class="stringliteral">&quot; [ЗАВЕРШЕНО]&quot;</span>, -1, title + len, (<span class="keywordtype">int</span>)<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a> - len);</div>
<div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160; </div>
<div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;$   tools::setWindowText (wnd, title);</div>
<div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;$   tools::getWindowText (wnd, title, <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>-1);</div>
<div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;$   <span class="keywordflow">if</span> (len &lt;= (<span class="keywordtype">int</span>)<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>-1-2 &amp;&amp; title [len+2] == (<span class="keywordtype">wchar_t</span>) 0x0417 <span class="comment">/* &#39;З&#39; */</span>) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160; </div>
<div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;$   MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, <span class="stringliteral">&quot; [FINISHED]&quot;</span>,  -1, title + len, (<span class="keywordtype">int</span>)<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a> - len);</div>
<div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160; </div>
<div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;$   tools::setWindowText (wnd, title);</div>
<div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;$   tools::getWindowText (wnd, title, <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>-1);</div>
<div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;$   <span class="keywordflow">if</span> (len &lt;= (<span class="keywordtype">int</span>)<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>-1-2 &amp;&amp; title [len+2] == <span class="comment">/* &#39;F&#39; */</span> (<span class="keywordtype">wchar_t</span>) 0x0046) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160; </div>
<div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160;$   <span class="keywordflow">return</span> 2;</div>
<div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;    }</div>
<div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160; </div>
<div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160; </div>
<div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;<span class="keywordtype">void</span> _txPauseBeforeTermination (HWND canvas)</div>
<div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;    {</div>
<div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;$3  <span class="keywordflow">while</span> (_kbhit()) (void)_getch();</div>
<div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160; </div>
<div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;$   CONSOLE_SCREEN_BUFFER_INFO con = {};</div>
<div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;$   <span class="keywordtype">bool</span> kbRedir = !GetConsoleScreenBufferInfo (GetStdHandle (STD_OUTPUT_HANDLE), &amp;con);</div>
<div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;$   <span class="keywordtype">bool</span> kbWait  = (_txGetInput() == EOF);</div>
<div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;$   <span class="keywordtype">bool</span> wine    = !!Win32::wine_get_version;</div>
<div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160; </div>
<div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;$   txSetLocale();</div>
<div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;$   <span class="keywordtype">int</span> attr = <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_LIGHTGRAY);</div>
<div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160; </div>
<div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;$   Win32::FLASHWINFO flash = { <span class="keyword">sizeof</span> (flash), <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), FLASHW_ALL | FLASHW_TIMERNOFG, 0xFFFFFFFF };</div>
<div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;$   _TX_CALL (Win32::FlashWindowEx, (&amp;flash));</div>
<div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160; </div>
<div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;$   <span class="keywordflow">if</span> (kbWait &amp;&amp; !kbRedir &amp;&amp; !wine)</div>
<div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;        {</div>
<div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;$       <span class="keywordflow">if</span> (!_txErrors)</div>
<div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;            {</div>
<div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;$           <span class="keywordflow">if</span> (!canvas)</div>
<div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;                {$ fprintf (stderr, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;[Нажмите любую клавишу для завершения]&quot;</span>); }</div>
<div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;            }</div>
<div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;            {</div>
<div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;$           fprintf        (stderr, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;[Press F to Pay Respects...]&quot;</span>);  <span class="comment">// https://knowyourmeme.com/memes/press-f-to-pay-respects</span></div>
<div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;            }</div>
<div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160; </div>
<div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;$       fflush (stderr);</div>
<div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;$       <a class="code" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a>();</div>
<div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;        }</div>
<div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160; </div>
<div class="line"><a name="l09260"></a><span class="lineno"> 9260</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; ; i++)  <span class="comment">//-V2530</span></div>
<div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;        {</div>
<div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;$       Sleep (<a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a>);</div>
<div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160; </div>
<div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;        <span class="keywordflow">if</span> (!kbWait || (kbRedir &amp;&amp; !canvas)) {$ <span class="keywordflow">break</span>; }  <span class="comment">// No need to run and hide</span></div>
<div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160; </div>
<div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;        <span class="keywordflow">if</span> (!wine &amp;&amp; _txGetInput() != EOF)   {$ <span class="keywordflow">break</span>; }  <span class="comment">// Somebody hit something.</span></div>
<div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160; </div>
<div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;        <span class="keywordflow">if</span> (canvas &amp;&amp; !_txCanvas_ThreadId)   {$ <span class="keywordflow">break</span>; }  <span class="comment">// There was a window, and now there is not.</span></div>
<div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160; </div>
<div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;        <span class="keywordflow">if</span> (!Win32::GetConsoleWindow())      {$ <span class="keywordflow">break</span>; }  <span class="comment">// Console was destroyed</span></div>
<div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160; </div>
<div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;        <span class="keywordflow">if</span> (_TX_CALL (Win32::GhostWindowFromHungWindow, (canvas)))</div>
<div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;            {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;Программа зависла и будет завершена.&quot;</span>); <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160; </div>
<div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;        <span class="keywordflow">if</span> (canvas &amp;&amp; _TX_CALL (Win32::IsHungAppWindow, (canvas)))</div>
<div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;            {$ _txTrace (__FILE__, __LINE__, NULL, <span class="stringliteral">&quot;WARNING: Программа-таки зависла и будет завершена.&quot;</span>); <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160; </div>
<div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;        <span class="keywordflow">if</span> (canvas &amp;&amp; !SendMessageTimeout (canvas, WM_NULL, 0,0, SMTO_BLOCK | SMTO_ABORTIFHUNG, <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>, NULL))</div>
<div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;            {$ _txTrace (__FILE__, __LINE__, NULL, <span class="stringliteral">&quot;WARNING: Программа не отвечает и будет завершена.&quot;</span>);  <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160; </div>
<div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;        <span class="keywordflow">if</span> (!wine &amp;&amp; !(i % 100500))</div>
<div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;            {$ fprintf (stderr, <span class="stringliteral">&quot;\r&quot;</span> <span class="stringliteral">&quot;[Так нажмите же какую-нибудь клавишу для моего завершения]&quot;</span>); }</div>
<div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;        }</div>
<div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160; </div>
<div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;$   <span class="keywordflow">while</span> (!wine &amp;&amp; _kbhit()) (void)_getch();</div>
<div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160; </div>
<div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;$   <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (attr);</div>
<div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;$   fprintf (stderr, <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160;    }</div>
<div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160; </div>
<div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160; </div>
<div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;<span class="keywordtype">int</span> _txGetInput()</div>
<div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;    {</div>
<div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;$4  HANDLE con = GetStdHandle (STD_INPUT_HANDLE);</div>
<div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160; </div>
<div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;$   DWORD nChars = 0;</div>
<div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;$   <span class="keywordflow">if</span> (GetConsoleMode (con, &amp;nChars) == 0 &amp;&amp;</div>
<div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;        PeekNamedPipe  (con, NULL, 0, NULL, &amp;nChars, NULL))</div>
<div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;        {</div>
<div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;$       <span class="keywordflow">return</span> (nChars)? fgetc (stdin) : EOF;</div>
<div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160;        }</div>
<div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160; </div>
<div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;$   <span class="keywordflow">if</span> (_kbhit())</div>
<div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;        {</div>
<div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;$       <span class="keywordflow">return</span> _getch();</div>
<div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160;        }</div>
<div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160; </div>
<div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;<span class="preprocessor">#if defined (_MSC_VER) &amp;&amp; (_MSC_VER &lt; 1700)</span></div>
<div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160; </div>
<div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;$   <span class="keywordflow">if</span> (fseek (stdin, 1, SEEK_CUR) != EOF)</div>
<div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;        {</div>
<div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;$       (void) fseek (stdin, -1, SEEK_CUR);</div>
<div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;$       <span class="keywordflow">return</span> fgetc (stdin);                              <span class="comment">// This causes blocking in MSVC 2011 beta</span></div>
<div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;        }</div>
<div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160; </div>
<div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160; </div>
<div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;$   <span class="keywordflow">return</span> EOF;</div>
<div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;    }</div>
<div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160; </div>
<div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160; </div>
<div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;<span class="keywordtype">int</span> _txIsParentWaitable (DWORD* parentPID <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;    {</div>
<div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;$4  PROCESSENTRY32* info = _txFindProcess();</div>
<div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;$   <span class="keywordflow">if</span> (!info) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160; </div>
<div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;$   info = _txFindProcess (info-&gt;th32ParentProcessID);</div>
<div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;$   <span class="keywordflow">if</span> (!info) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160; </div>
<div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;$   <span class="keywordtype">char</span> parent [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;$   strncpy_s (parent, <span class="keyword">sizeof</span> (parent), info-&gt;szExeFile, sizeof (parent) - 1);</div>
<div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;$   <span class="keywordflow">if</span> (parentPID) *parentPID = info-&gt;th32ProcessID;</div>
<div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160; </div>
<div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;$   info = _txFindProcess (info-&gt;th32ParentProcessID);          <span class="comment">// info: grandparent</span></div>
<div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160; </div>
<div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;$   <span class="keywordtype">char</span> list[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <a class="code" href="group___technical.html#ga2c0a4fe0612f109c5c88d6d55a061db5">_TX_WAITABLE_PARENTS</a>;</div>
<div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;$   <span class="keywordtype">char</span>* ctx = NULL;</div>
<div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160; </div>
<div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">char</span>* p = strtok_s (list, <span class="stringliteral">&quot;, &quot;</span>, &amp;ctx); p; p = strtok_s (NULL, <span class="stringliteral">&quot;, &quot;</span>, &amp;ctx))</div>
<div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;        {</div>
<div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;$       <span class="keywordtype">char</span>* gp = strchr (p, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160; </div>
<div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;$       <span class="keywordflow">if</span> (gp)</div>
<div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;            {</div>
<div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;$           *gp++ = 0;</div>
<div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160; </div>
<div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;$           <span class="keywordflow">if</span> (_stricmp (p, parent) != 0) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160; </div>
<div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;$           <span class="keywordflow">if</span> (info) <span class="keywordflow">if</span> (_stricmp (gp, info-&gt;szExeFile) == 0)  <span class="comment">// Was &amp;&amp;, but MSVC /analyze is so paranoid</span></div>
<div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;                {$ <span class="keywordflow">return</span> islower ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) *gp)? +1 : -1; }</div>
<div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;            }</div>
<div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;            {</div>
<div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;$           <span class="keywordflow">if</span> (_stricmp (p, parent) == 0)</div>
<div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;                {$ <span class="keywordflow">return</span> islower ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)  *p)? +1 : -1; }</div>
<div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;            }</div>
<div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;        }</div>
<div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160; </div>
<div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;$   <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;    }</div>
<div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160; </div>
<div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160; </div>
<div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;<span class="keywordtype">void</span> _txWatchdogTerminator (<span class="keywordtype">void</span>* timeout)  <span class="comment">// Or Watchcat? Possibly will change in future versions</span></div>
<div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;    {</div>
<div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;$3  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (timeout)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160; </div>
<div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;$   Sleep (*(<span class="keywordtype">int</span>*) timeout);  <span class="comment">//-V206</span></div>
<div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160; </div>
<div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;$   OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s(): Timeout (%d) expired, activating. %s\n&quot;</span>,  <span class="comment">// Kinda static reflection...</span></div>
<div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;                         _TX_VERSION, __func__, *(<span class="keywordtype">int</span>*) timeout, ((__func__[8] == <span class="charliteral">&#39;d&#39;</span>)? <span class="stringliteral">&quot;Bark, bark&quot;</span> : <span class="stringliteral">&quot;Meow, meow&quot;</span>));  <span class="comment">//-V206</span></div>
<div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;$   DWORD parent = 0;</div>
<div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;$   <span class="keywordflow">if</span> (_txIsParentWaitable (&amp;parent))</div>
<div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;        {</div>
<div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;        <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s(): Calling _txKillProcess (0x%04lu)\n&quot;</span>,</div>
<div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;                             _TX_VERSION, __func__, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) parent);</div>
<div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160; </div>
<div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;$       _txKillProcess (parent);</div>
<div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160; </div>
<div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;$       HWND console = GetConsoleWindow();</div>
<div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;$       PostMessage (console, WM_KEYDOWN, VK_RETURN, 0x001C0001);  <span class="comment">// Scancode = 0x1C, Count = 1</span></div>
<div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;$       PostMessage (console, WM_KEYUP,   VK_RETURN, 0xC01C0001);  <span class="comment">// Scancode = 0x1C, Count = 1, Prev = 1, Trans = 1</span></div>
<div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;        }</div>
<div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160; </div>
<div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s(): Calling Win32::TerminateProcess (EXIT_FAILURE)\n&quot;</span>, _TX_VERSION, __func__);</div>
<div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;$   Win32::TerminateProcess (GetCurrentProcess(), EXIT_FAILURE);</div>
<div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;    }</div>
<div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160; </div>
<div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160; </div>
<div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160; </div>
<div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;<span class="comment">//{          Tools</span></div>
<div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160; </div>
<div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160; </div>
<div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;<span class="comment">// You are here, little hacker?</span></div>
<div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160; </div>
<div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;<span class="keywordtype">int</span> _txTaskKill (<span class="keyword">const</span> <span class="keywordtype">char</span> i[] <span class="comment">/*= NULL*/</span>,</div>
<div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;                 <span class="keyword">const</span> <span class="keywordtype">char</span> doYouWantToFindSomethingInTheCommandLineIDidSomethingForYouToFindSomethingInTheCommandLineMaybeYouWillFindSomeInterestingInTheCommandLineSoIDidSomethingForYouInTheCommandLine[] <span class="comment">/*= NULL*/</span>,</div>
<div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;                 <span class="keywordtype">unsigned</span>   x   <span class="comment">/*= 0*/</span>)</div>
<div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;    {</div>
<div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;    <span class="comment">// ...so tired of it already...</span></div>
<div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160; </div>
<div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;<span class="preprocessor">    #define name          i  </span><span class="comment">// Great name!</span></div>
<div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;<span class="preprocessor">    #define cmdLineSubstr doYouWantToFindSomethingInTheCommandLineIDidSomethingForYouToFindSomethingInTheCommandLineMaybeYouWillFindSomeInterestingInTheCommandLineSoIDidSomethingForYouInTheCommandLine</span></div>
<div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;<span class="preprocessor">    #define pid           x  </span><span class="comment">// Another great name, isn&#39;t it?</span></div>
<div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160; </div>
<div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;$3  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED ((name || cmdLineSubstr || pid) &amp;&amp; <span class="stringliteral">&quot;Вот такие тут интересные имена встречаются...&quot;</span>)) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//-V560 //-V601</span></div>
<div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160; </div>
<div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;$   <span class="keywordtype">wchar_t</span> cmdLineSubstrW[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = L<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;    <span class="keywordflow">if</span> (cmdLineSubstr) {$ MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, cmdLineSubstr, -1, cmdLineSubstrW, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (cmdLineSubstrW)); }</div>
<div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160; </div>
<div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;$   HANDLE sshot = CreateToolhelp32Snapshot (TH32CS_SNAPPROCESS, 0);</div>
<div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;$   assert (sshot); <span class="keywordflow">if</span> (!sshot) <span class="keywordflow">return</span> 0;  <span class="comment">//-V547</span></div>
<div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160; </div>
<div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;$   <span class="keywordtype">int</span> killed = 0;</div>
<div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160; </div>
<div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;$   PROCESSENTRY32 info = { <span class="keyword">sizeof</span> (info) };</div>
<div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">bool</span> ok = !!Process32First (sshot, &amp;info); ok; ok = !!Process32Next (sshot, &amp;info))</div>
<div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;        {</div>
<div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;        <span class="keywordtype">bool</span> kill = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160; </div>
<div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;        <span class="keywordflow">if</span> (!kill &amp;&amp; pid  &amp;&amp; info.th32ParentProcessID        == pid) {$ kill = <span class="keyword">true</span>; }  <span class="comment">//-V560</span></div>
<div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160; </div>
<div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;        <span class="keywordflow">if</span> (!kill &amp;&amp; name &amp;&amp; _stricmp (info.szExeFile, name) == 0)   {$ kill = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160; </div>
<div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;        <span class="keywordflow">if</span> (!kill)</div>
<div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;            {</div>
<div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;            <span class="keywordtype">wchar_t</span> cmdLineW[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = L<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;            <span class="keywordflow">if</span> (!_txGetCommandLine (cmdLineW, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (cmdLineW), info.th32ProcessID)) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160; </div>
<div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;            <span class="keywordflow">if</span> (*cmdLineW &amp;&amp; stristrw (cmdLineW, cmdLineSubstrW))    {$ kill = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;            }</div>
<div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160; </div>
<div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;        <span class="keywordflow">if</span> (kill)</div>
<div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;            {</div>
<div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;$           <span class="keywordflow">if</span> (_txKillProcess (info.th32ProcessID))</div>
<div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;                {$ killed++; }</div>
<div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;            }</div>
<div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;        }</div>
<div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160; </div>
<div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;$   CloseHandle (sshot);</div>
<div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160; </div>
<div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;$   <span class="keywordflow">return</span> killed;</div>
<div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160; </div>
<div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;<span class="preprocessor">    #undef name</span></div>
<div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;<span class="preprocessor">    #undef cmdLine</span></div>
<div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;<span class="preprocessor">    #undef pid</span></div>
<div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;    }</div>
<div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160; </div>
<div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160; </div>
<div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160;<span class="keywordtype">bool</span> _txKillProcess (DWORD pid)</div>
<div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;    {</div>
<div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;$3  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (pid)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160; </div>
<div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;$   HANDLE token = INVALID_HANDLE_VALUE;</div>
<div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;$   OpenProcessToken (GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &amp;token) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160; </div>
<div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;$   LUID luid = {};</div>
<div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;$   LookupPrivilegeValue (NULL, SE_DEBUG_NAME, &amp;luid) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160; </div>
<div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;$   TOKEN_PRIVILEGES priv = { 1, {{{ luid.LowPart, luid.HighPart}, SE_PRIVILEGE_ENABLED }}};</div>
<div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;$   TOKEN_PRIVILEGES old  = {};</div>
<div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160; </div>
<div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;$   DWORD oldSz = 0;</div>
<div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;$   AdjustTokenPrivileges (token, <span class="keyword">false</span>, &amp;priv, <span class="keyword">sizeof</span> (priv), &amp;old, &amp;oldSz) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160; </div>
<div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;$   HANDLE proc = OpenProcess (PROCESS_ALL_ACCESS, 0, pid);</div>
<div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;$   <span class="keywordflow">if</span> (!proc) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160; </div>
<div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;$   <span class="keywordtype">bool</span> ok = !!Win32::TerminateProcess (proc, 0);</div>
<div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;$   CloseHandle (proc);</div>
<div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160; </div>
<div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;    }</div>
<div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160; </div>
<div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160; </div>
<div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;PROCESSENTRY32* _txFindProcess (<span class="keywordtype">unsigned</span> pid <span class="comment">/*= GetCurrentProcessId()*/</span>)</div>
<div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;    {</div>
<div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;$4  <span class="keyword">static</span> PROCESSENTRY32 info = { <span class="keyword">sizeof</span> (info) };</div>
<div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;$   <span class="keywordflow">if</span> (!pid) <span class="keywordflow">return</span> &amp;info;</div>
<div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160; </div>
<div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;$   HANDLE sshot = CreateToolhelp32Snapshot (TH32CS_SNAPPROCESS, 0);</div>
<div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;$   assert (sshot); <span class="keywordflow">if</span> (!sshot) <span class="keywordflow">return</span> NULL;  <span class="comment">//-V547</span></div>
<div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160; </div>
<div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">bool</span> ok = !!Process32First (sshot, &amp;info); ok; ok = !!Process32Next (sshot, &amp;info))</div>
<div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;        <span class="keywordflow">if</span> (info.th32ProcessID == pid) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160; </div>
<div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;$   CloseHandle (sshot);</div>
<div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160; </div>
<div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;$   <span class="keywordflow">return</span> &amp;info;</div>
<div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;    }</div>
<div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160; </div>
<div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160; </div>
<div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;<span class="keywordtype">bool</span> _txGetCommandLine (<span class="keywordtype">wchar_t</span> cmdLine[], <span class="keywordtype">size_t</span> szCmdLine, <span class="keywordtype">unsigned</span> pid <span class="comment">/*= _getpid()*/</span>)</div>
<div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;    {</div>
<div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;$6  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (cmdLine))        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (szCmdLine &gt;= 2)) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//-V547</span></div>
<div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160; </div>
<div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;$   <span class="keywordflow">if</span> (pid == (<span class="keywordtype">unsigned</span>) _getpid())</div>
<div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160;        {</div>
<div class="line"><a name="l09512"></a><span class="lineno"> 9512</span>&#160;$       wcsncpy_s (cmdLine, szCmdLine, GetCommandLineW(), szCmdLine-1);</div>
<div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;$       <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;        }</div>
<div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160; </div>
<div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;$   HANDLE proc = OpenProcess (PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, <span class="keyword">false</span>, pid);</div>
<div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;    <span class="keywordflow">if</span> (!proc) {$ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160; </div>
<div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;$   Win32::PROCESS_BASIC_INFORMATION pbi = {};</div>
<div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;$   <span class="keywordtype">bool</span> ok = (Win32::NtQueryInformationProcess (proc, 0 <span class="comment">/*ProcessBasicInformation*/</span>, &amp;pbi, <span class="keyword">sizeof</span> (pbi), NULL) == 0);</div>
<div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160; </div>
<div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;    <span class="comment">// Should use ReadProcessMemory() because the info is actually in another address space</span></div>
<div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160; </div>
<div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;$   Win32::PEB peb = {};</div>
<div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; pbi.PebBaseAddress)        {$ ok &amp;= !!ReadProcessMemory (proc, pbi.PebBaseAddress,        &amp;peb,    sizeof (peb),    NULL); }</div>
<div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160; </div>
<div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;$   Win32::RTL_USER_PROCESS_PARAMETERS params = {};</div>
<div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; peb.ProcessParameters)     {$ ok &amp;= !!ReadProcessMemory (proc, peb.ProcessParameters,     &amp;params, sizeof (params), NULL); }</div>
<div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160; </div>
<div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;$   *cmdLine = 0;</div>
<div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; params.CommandLine.Buffer) {$ ok &amp;= !!ReadProcessMemory (proc, params.CommandLine.Buffer, cmdLine,  <span class="comment">//-V106</span></div>
<div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;                                                                       <a class="code" href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>  (params.CommandLine.Length + 2, (<span class="keywordtype">int</span>) (szCmdLine * sizeof (*cmdLine)) - 2),  <span class="comment">//-V202</span></div>
<div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;                                                                       NULL); }</div>
<div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;$   CloseHandle (proc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160; </div>
<div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;    }</div>
<div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160; </div>
<div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160; </div>
<div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;<span class="preprocessor">#define RVA_(type, module, addr)  ( (type) ((uintptr_t) (module) + (uintptr_t) (addr)) )</span></div>
<div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160; </div>
<div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;IMAGE_NT_HEADERS* _txGetNtHeaders (HMODULE module <span class="comment">/*= GetModuleHandle (NULL)*/</span>)</div>
<div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;    {</div>
<div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;$4  assert (module);</div>
<div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160; </div>
<div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;$   IMAGE_DOS_HEADER* dosHdr = RVA_ (IMAGE_DOS_HEADER*, module, 0);</div>
<div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;$   IMAGE_NT_HEADERS* ntHdr  = RVA_ (IMAGE_NT_HEADERS*, module, dosHdr-&gt;e_lfanew);</div>
<div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160; </div>
<div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;$   <span class="keywordflow">return</span> (dosHdr-&gt;e_magic  == IMAGE_DOS_SIGNATURE &amp;&amp;</div>
<div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;            ntHdr-&gt;Signature == IMAGE_NT_SIGNATURE)? ntHdr : NULL;</div>
<div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;    }</div>
<div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160; </div>
<div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160; </div>
<div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;<span class="comment">// TXLib continues to hack the reality to make your life better, sweeter and easier</span></div>
<div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160; </div>
<div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;uintptr_t _txSetProcAddress (<span class="keyword">const</span> <span class="keywordtype">char</span> funcName[], uintptr_t newFunc, <span class="keyword">const</span> <span class="keywordtype">char</span> dllName[] <span class="comment">/*= NULL*/</span>, <span class="keywordtype">int</span> useHotPatching <span class="comment">/*= false*/</span>,</div>
<div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;                             HMODULE module <span class="comment">/*= NULL*/</span>, <span class="keywordtype">bool</span> debug <span class="comment">/*= false*/</span>)</div>
<div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;    {</div>
<div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;$4  <span class="keywordflow">if</span> (debug) <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;_txSetProcAddress (%s, 0x%p, %s, 0x%p):\n&quot;</span>, funcName, (<span class="keywordtype">void</span>*) newFunc, dllName, (<span class="keywordtype">void</span>*) module);</div>
<div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160; </div>
<div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (funcName)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (newFunc))  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160; </div>
<div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;$   <span class="keywordflow">if</span> (!module) module = GetModuleHandle (NULL);</div>
<div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;$   <span class="keywordflow">if</span> (!module) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160; </div>
<div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;$   HMODULE dll     = (dllName)? GetModuleHandle (dllName)       : NULL;</div>
<div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;$   PROC    oldFunc = (dll)?     GetProcAddress  (dll, funcName) : NULL;</div>
<div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160; </div>
<div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;$   <span class="keywordflow">if</span> (useHotPatching &amp;&amp; oldFunc)</div>
<div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;        {</div>
<div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;$       <span class="keyword">const</span> <span class="keywordtype">size_t</span> jmpSz = 1 + <span class="keyword">sizeof</span> (DWORD);  <span class="comment">// sizeof (JMP rel instruction)</span></div>
<div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160; </div>
<div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;$       DWORD oldRights = 0;</div>
<div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160;$       <span class="keywordflow">if</span> (!VirtualProtect ((<span class="keywordtype">void</span>*)(uintptr_t) oldFunc, jmpSz, PAGE_EXECUTE_READWRITE, &amp;oldRights)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160; </div>
<div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;        <span class="comment">// Overwrite oldFunc prolog with JMP trampoline to newFunc.</span></div>
<div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;        <span class="comment">// Calling oldFunc from any location will lead to newFunc call anyway.</span></div>
<div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160; </div>
<div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;$       *(BYTE*)  ((<span class="keywordtype">char</span>*)(uintptr_t) oldFunc + 0) = 0xE9;  <span class="comment">// JMP rel</span></div>
<div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;$       *(DWORD*) ((<span class="keywordtype">char</span>*)(uintptr_t) oldFunc + 1) = ((<span class="keywordtype">char</span>*)(uintptr_t) newFunc - (<span class="keywordtype">char</span>*)(uintptr_t) oldFunc - jmpSz) &amp; 0xFFFFFFFF;  <span class="comment">//-V206 //-V112 //-V2007 //-V104 //-V103</span></div>
<div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160; </div>
<div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;$       FlushInstructionCache (GetCurrentProcess(), (<span class="keywordtype">void</span>*)(uintptr_t) oldFunc, jmpSz);</div>
<div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160; </div>
<div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;$       VirtualProtect ((<span class="keywordtype">void</span>*)(uintptr_t) oldFunc, jmpSz, oldRights, &amp;oldRights);</div>
<div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160; </div>
<div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;$       <span class="keywordflow">return</span> (uintptr_t) oldFunc;</div>
<div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;        }</div>
<div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160; </div>
<div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;<span class="comment">//  For PE structure and Import Table format, e.g. see https://books.google.ru/books?id=ifQPC86G66sC&amp;pg=PA255</span></div>
<div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;<span class="comment">//  and below through Figure 5-5, and/or http://www.brokenthorn.com/Resources/OSDevPE.html.</span></div>
<div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160; </div>
<div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;$   IMAGE_NT_HEADERS* ntHdr = _txGetNtHeaders (module);</div>
<div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;    <span class="keywordflow">if</span> (!ntHdr || (ntHdr -&gt;OptionalHeader.Magic != IMAGE_NT_OPTIONAL_HDR_MAGIC)) {$ <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160; </div>
<div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;$   DWORD impOffset = ntHdr-&gt;OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT].VirtualAddress;</div>
<div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;$   IMAGE_IMPORT_DESCRIPTOR* desc = RVA_ (IMAGE_IMPORT_DESCRIPTOR*, module, impOffset);</div>
<div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160; </div>
<div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;$   <span class="keywordflow">if</span> (desc == (IMAGE_IMPORT_DESCRIPTOR*) ntHdr) <span class="keywordflow">return</span> 0;  <span class="comment">//-V1027</span></div>
<div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160; </div>
<div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;$   IMAGE_THUNK_DATA* thunk0 = NULL, * thunk1 = NULL;</div>
<div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;$   <span class="keywordtype">char</span>*  impDll  = NULL;</div>
<div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;$   <span class="keywordtype">char</span>*  impName = NULL;</div>
<div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;$   <span class="keywordtype">void</span>** impPtr  = NULL;</div>
<div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;$   <span class="keywordtype">bool</span>   found   = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160; </div>
<div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;    <span class="keywordflow">for</span> (; desc-&gt;Name; desc++)</div>
<div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;        {</div>
<div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;$       impDll = RVA_ (<span class="keywordtype">char</span>*, module, desc-&gt;Name);</div>
<div class="line"><a name="l09612"></a><span class="lineno"> 9612</span>&#160;$       <span class="keywordflow">if</span> (dllName &amp;&amp; _stricmp (impDll, dllName) != 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160; </div>
<div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;$       <span class="keywordflow">for</span> (thunk0 = RVA_ (IMAGE_THUNK_DATA*, module, desc-&gt;OriginalFirstThunk),</div>
<div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;             thunk1 = RVA_ (IMAGE_THUNK_DATA*, module, desc-&gt;FirstThunk);</div>
<div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160; </div>
<div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;             thunk0 &amp;&amp; thunk1 &amp;&amp; thunk1-&gt;u1.Function;</div>
<div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160; </div>
<div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;             thunk0++,</div>
<div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;             thunk1++)</div>
<div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;            {</div>
<div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;            impName = (<span class="keywordtype">char</span>*) RVA_ (IMAGE_IMPORT_BY_NAME*, module, thunk0-&gt;u1.AddressOfData) -&gt; Name;</div>
<div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;            impPtr  = (<span class="keywordtype">void</span>**)(uintptr_t)                         &amp;thunk1-&gt;u1.Function;  <span class="comment">// Should change it, so this is ptr</span></div>
<div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160; </div>
<div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;            <span class="keywordflow">if</span> (debug) <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;[0x%p] %s!%s\n&quot;</span>, *impPtr, impDll, impName);</div>
<div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160; </div>
<div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;            <span class="keywordflow">if</span> ((oldFunc &amp;&amp; (uintptr_t) oldFunc == (uintptr_t) *impPtr) ||</div>
<div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;                (impName &amp;&amp; _stricmp (funcName, impName) == 0))  <span class="comment">//-V560</span></div>
<div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;                {</div>
<div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;                found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;                }</div>
<div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;            }</div>
<div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160; </div>
<div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;$       <span class="keywordflow">if</span> (found) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;        }</div>
<div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160; </div>
<div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;    <span class="keywordflow">if</span> (debug) <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;_txSetProcAddress (%s, 0x%p, %s, 0x%p): %s\n\n&quot;</span>,</div>
<div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;                                    funcName, (<span class="keywordtype">void</span>*) newFunc, dllName, (<span class="keywordtype">void</span>*) module, (found? <span class="stringliteral">&quot;FOUND&quot;</span> : <span class="stringliteral">&quot;NOT found&quot;</span>));</div>
<div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;$   <span class="keywordflow">if</span> (!found) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160; </div>
<div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;$   DWORD rights = PAGE_READWRITE;</div>
<div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;$   <span class="keywordflow">if</span> (!VirtualProtect (impPtr, <span class="keyword">sizeof</span> (*impPtr), rights, &amp;rights)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160; </div>
<div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;$   *(uintptr_t*) impPtr = newFunc;</div>
<div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160; </div>
<div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;$   VirtualProtect (impPtr, <span class="keyword">sizeof</span> (*impPtr), rights, &amp;rights);</div>
<div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160; </div>
<div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;$   <span class="keywordflow">return</span> (uintptr_t) oldFunc;</div>
<div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;    }</div>
<div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160; </div>
<div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;<span class="preprocessor">#undef RVA_</span></div>
<div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160; </div>
<div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160; </div>
<div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;<span class="keywordtype">bool</span> _txInDll()</div>
<div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;    {</div>
<div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;$4  MODULEENTRY32 mod = { <span class="keyword">sizeof</span> (mod) };</div>
<div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160; </div>
<div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;$   HANDLE sshot = CreateToolhelp32Snapshot (TH32CS_SNAPMODULE, 0);</div>
<div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;$   assert (sshot); <span class="keywordflow">if</span> (!sshot) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//-V547</span></div>
<div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160; </div>
<div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;$   <span class="keywordtype">bool</span> inDll = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160; </div>
<div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">bool</span> ok = !!Module32First (sshot, &amp;mod); ok; ok = !!Module32Next (sshot, &amp;mod))</div>
<div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;        {</div>
<div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;$       <span class="keywordflow">if</span> (!mod.modBaseAddr) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160; </div>
<div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;$       IMAGE_NT_HEADERS* ntHdr = _txGetNtHeaders ((HMODULE) mod.modBaseAddr);</div>
<div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160; </div>
<div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;$       inDll = ntHdr &amp;&amp; ((ntHdr-&gt;FileHeader.Characteristics &amp; IMAGE_FILE_DLL) != 0);</div>
<div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160; </div>
<div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;$       <span class="keywordflow">if</span> (<a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, (BYTE*)(uintptr_t)_txInDll, mod.modBaseAddr, mod.modBaseAddr + mod.modBaseSize))  <span class="comment">//-V104</span></div>
<div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;            {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;        }</div>
<div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160; </div>
<div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;$   CloseHandle (sshot);</div>
<div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;$   <span class="keywordflow">return</span> inDll;</div>
<div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;    }</div>
<div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160; </div>
<div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160; </div>
<div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;<span class="keywordtype">bool</span> _txIsConsoleSubsystem()</div>
<div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160;    {</div>
<div class="line"><a name="l09685"></a><span class="lineno"> 9685</span>&#160;$4  IMAGE_NT_HEADERS* ntHdr = _txGetNtHeaders();</div>
<div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160; </div>
<div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;$   <span class="keywordflow">return</span>  ntHdr &amp;&amp;</div>
<div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;            ntHdr -&gt;OptionalHeader.Magic == IMAGE_NT_OPTIONAL_HDR_MAGIC &amp;&amp;</div>
<div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160; </div>
<div class="line"><a name="l09690"></a><span class="lineno"> 9690</span>&#160;           (ntHdr -&gt;OptionalHeader.Subsystem == IMAGE_SUBSYSTEM_WINDOWS_CUI ||</div>
<div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;            ntHdr -&gt;OptionalHeader.Subsystem == IMAGE_SUBSYSTEM_POSIX_CUI);</div>
<div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;    }</div>
<div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160; </div>
<div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160; </div>
<div class="line"><a name="l09696"></a><span class="lineno"> 9696</span>&#160;<span class="keywordtype">bool</span> _txIsBadReadPtr (<span class="keyword">const</span> <span class="keywordtype">void</span>* address)</div>
<div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;    {</div>
<div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;    MEMORY_BASIC_INFORMATION mbi = {};</div>
<div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;    <span class="keywordflow">if</span> (!VirtualQuery (address, &amp;mbi, <span class="keyword">sizeof</span> (mbi))) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160; </div>
<div class="line"><a name="l09701"></a><span class="lineno"> 9701</span>&#160;    <span class="keywordflow">if</span> (mbi.Protect &amp; (PAGE_GUARD | PAGE_NOACCESS))  <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// Guard page -&gt; bad ptr</span></div>
<div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160; </div>
<div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;    DWORD readRights = PAGE_READONLY | PAGE_READWRITE | PAGE_WRITECOPY | PAGE_EXECUTE_READ | PAGE_EXECUTE_READWRITE | PAGE_EXECUTE_WRITECOPY;</div>
<div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160; </div>
<div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160;    <span class="keywordflow">return</span> !(mbi.Protect &amp; readRights);</div>
<div class="line"><a name="l09706"></a><span class="lineno"> 9706</span>&#160;    }</div>
<div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160; </div>
<div class="line"><a name="l09708"></a><span class="lineno"> 9708</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09709"></a><span class="lineno"> 9709</span>&#160; </div>
<div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160;<span class="keywordtype">void</span> _txActivateWindow (HWND wnd, <span class="keywordtype">unsigned</span> mode)</div>
<div class="line"><a name="l09711"></a><span class="lineno"> 9711</span>&#160;    {</div>
<div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;$1  EnableWindow (wnd, <span class="keyword">true</span>);</div>
<div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160; </div>
<div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;$   <span class="keywordflow">if</span> (mode &amp; 0x10)</div>
<div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160;        {</div>
<div class="line"><a name="l09716"></a><span class="lineno"> 9716</span>&#160;$       ShowWindow (wnd, SW_MINIMIZE);</div>
<div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160;$       ShowWindow (wnd, SW_RESTORE);</div>
<div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;        }</div>
<div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160; </div>
<div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160;$   <span class="keywordflow">if</span> (mode &amp; 0x08)</div>
<div class="line"><a name="l09721"></a><span class="lineno"> 9721</span>&#160;        {</div>
<div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;$       <span class="keywordtype">int</span> focus = GetWindowThreadProcessId (GetForegroundWindow(), 0);</div>
<div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160; </div>
<div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;$       AttachThreadInput   (GetCurrentThreadId(), focus, <span class="keyword">true</span>);</div>
<div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160;$       SetForegroundWindow (wnd);</div>
<div class="line"><a name="l09726"></a><span class="lineno"> 9726</span>&#160;$       AttachThreadInput   (GetCurrentThreadId(), focus, <span class="keyword">false</span>);</div>
<div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;        }</div>
<div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160; </div>
<div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;$   <span class="keywordflow">if</span> (mode &amp; 0x04)</div>
<div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160;        {</div>
<div class="line"><a name="l09731"></a><span class="lineno"> 9731</span>&#160;$       SetWindowPos (wnd, HWND_NOTOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);</div>
<div class="line"><a name="l09732"></a><span class="lineno"> 9732</span>&#160;        }</div>
<div class="line"><a name="l09733"></a><span class="lineno"> 9733</span>&#160; </div>
<div class="line"><a name="l09734"></a><span class="lineno"> 9734</span>&#160;$   <span class="keywordflow">if</span> (mode &amp; 0x02)</div>
<div class="line"><a name="l09735"></a><span class="lineno"> 9735</span>&#160;        {</div>
<div class="line"><a name="l09736"></a><span class="lineno"> 9736</span>&#160;$       SetWindowPos (wnd, HWND_NOTOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW | SWP_ASYNCWINDOWPOS);</div>
<div class="line"><a name="l09737"></a><span class="lineno"> 9737</span>&#160;        }</div>
<div class="line"><a name="l09738"></a><span class="lineno"> 9738</span>&#160; </div>
<div class="line"><a name="l09739"></a><span class="lineno"> 9739</span>&#160;$   <span class="keywordflow">if</span> (mode &amp; 0x01)</div>
<div class="line"><a name="l09740"></a><span class="lineno"> 9740</span>&#160;        {</div>
<div class="line"><a name="l09741"></a><span class="lineno"> 9741</span>&#160;$       UpdateWindow (wnd);</div>
<div class="line"><a name="l09742"></a><span class="lineno"> 9742</span>&#160;        }</div>
<div class="line"><a name="l09743"></a><span class="lineno"> 9743</span>&#160;    }</div>
<div class="line"><a name="l09744"></a><span class="lineno"> 9744</span>&#160; </div>
<div class="line"><a name="l09745"></a><span class="lineno"> 9745</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l09746"></a><span class="lineno"> 9746</span>&#160; </div>
<div class="line"><a name="l09747"></a><span class="lineno"> 9747</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l09748"></a><span class="lineno"> 9748</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09749"></a><span class="lineno"> 9749</span>&#160; </div>
<div class="line"><a name="l09751"></a><span class="lineno"> 9751</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l09752"></a><span class="lineno"> 9752</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l09753"></a><span class="lineno"> 9753</span>&#160; </div>
<div class="line"><a name="l09754"></a><span class="lineno"> 9754</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l09755"></a><span class="lineno"> 9755</span>&#160;<span class="comment">//{          Internal TXLib window functions     (_txCanvas...)</span></div>
<div class="line"><a name="l09757"></a><span class="lineno"> 9757</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l09758"></a><span class="lineno"> 9758</span>&#160; </div>
<div class="line"><a name="l09759"></a><span class="lineno"> 9759</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l09760"></a><span class="lineno"> 9760</span>&#160; </div>
<div class="line"><a name="l09761"></a><span class="lineno"> 9761</span>&#160;<span class="keywordtype">unsigned</span> WINAPI _txCanvas_ThreadProc (<span class="keywordtype">void</span>* data)</div>
<div class="line"><a name="l09762"></a><span class="lineno"> 9762</span>&#160;    {</div>
<div class="line"><a name="l09763"></a><span class="lineno"> 9763</span>&#160;<span class="preprocessor">    #define SetClassLong_  SetClassLongPtr</span></div>
<div class="line"><a name="l09764"></a><span class="lineno"> 9764</span>&#160;<span class="preprocessor">    #define GCL_HICON_     GCLP_HICON</span></div>
<div class="line"><a name="l09765"></a><span class="lineno"> 9765</span>&#160;<span class="preprocessor">    #define GCL_HICONSM_   GCLP_HICONSM</span></div>
<div class="line"><a name="l09766"></a><span class="lineno"> 9766</span>&#160;<span class="preprocessor">    #define GCL_HCURSOR_   GCLP_HCURSOR</span></div>
<div class="line"><a name="l09767"></a><span class="lineno"> 9767</span>&#160; </div>
<div class="line"><a name="l09768"></a><span class="lineno"> 9768</span>&#160;$8  _txCanvas_ThreadId = GetCurrentThreadId();</div>
<div class="line"><a name="l09769"></a><span class="lineno"> 9769</span>&#160; </div>
<div class="line"><a name="l09770"></a><span class="lineno"> 9770</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (data)) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//-V601</span></div>
<div class="line"><a name="l09771"></a><span class="lineno"> 9771</span>&#160; </div>
<div class="line"><a name="l09772"></a><span class="lineno"> 9772</span>&#160;$   <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> stackSize = <a class="code" href="group___technical.html#ga7b8b43782557dd87528da77b083364ec">_TX_STACKSIZE</a>;</div>
<div class="line"><a name="l09773"></a><span class="lineno"> 9773</span>&#160;$   _TX_CALL (Win32::SetThreadStackGuarantee, (&amp;stackSize));</div>
<div class="line"><a name="l09774"></a><span class="lineno"> 9774</span>&#160; </div>
<div class="line"><a name="l09775"></a><span class="lineno"> 9775</span>&#160;$   HWND wnd = _txCanvas_CreateWindow ((SIZE*) data);</div>
<div class="line"><a name="l09776"></a><span class="lineno"> 9776</span>&#160;$   <span class="keywordflow">if</span> (!<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>()) <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Cannot create canvas!&quot;</span>), 0;</div>
<div class="line"><a name="l09777"></a><span class="lineno"> 9777</span>&#160; </div>
<div class="line"><a name="l09778"></a><span class="lineno"> 9778</span>&#160;$   HICON   icon32 = LoadIcon         (NULL, <span class="stringliteral">&quot;_TX_ICON&quot;</span>);</div>
<div class="line"><a name="l09779"></a><span class="lineno"> 9779</span>&#160;$   HICON   icon16 = LoadIcon         (NULL, <span class="stringliteral">&quot;_TX_ICONSM&quot;</span>);</div>
<div class="line"><a name="l09780"></a><span class="lineno"> 9780</span>&#160;$   HCURSOR cursor = LoadCursor       (NULL, <span class="stringliteral">&quot;_TX_CURSOR&quot;</span>);</div>
<div class="line"><a name="l09781"></a><span class="lineno"> 9781</span>&#160;$   HMENU   menu   = LoadMenu         (NULL, <span class="stringliteral">&quot;_TX_MENU&quot;</span>);</div>
<div class="line"><a name="l09782"></a><span class="lineno"> 9782</span>&#160;$   HACCEL  accel  = LoadAccelerators (NULL, <span class="stringliteral">&quot;_TX_ACCELERATORS&quot;</span>);</div>
<div class="line"><a name="l09783"></a><span class="lineno"> 9783</span>&#160; </div>
<div class="line"><a name="l09784"></a><span class="lineno"> 9784</span>&#160;$   SetClassLong_ (wnd, GCL_HICON_,   (LONG_PTR) (icon32? icon32 : _txCreateTXIcon (32)));          <span class="comment">//-V107 //-V112</span></div>
<div class="line"><a name="l09785"></a><span class="lineno"> 9785</span>&#160;$   SetClassLong_ (wnd, GCL_HICONSM_, (LONG_PTR) (icon16? icon16 : _txCreateTXIcon (16)));          <span class="comment">//-V107</span></div>
<div class="line"><a name="l09786"></a><span class="lineno"> 9786</span>&#160;$   SetClassLong_ (wnd, GCL_HCURSOR_, (LONG_PTR) (cursor? cursor : LoadCursor (NULL, IDC_ARROW)));  <span class="comment">//-V107</span></div>
<div class="line"><a name="l09787"></a><span class="lineno"> 9787</span>&#160; </div>
<div class="line"><a name="l09788"></a><span class="lineno"> 9788</span>&#160;    <span class="keywordflow">if</span> (menu) {$ SetMenu (wnd, menu); DrawMenuBar (wnd); }</div>
<div class="line"><a name="l09789"></a><span class="lineno"> 9789</span>&#160; </div>
<div class="line"><a name="l09790"></a><span class="lineno"> 9790</span>&#160;$   Win32::GdiSetBatchLimit (1);</div>
<div class="line"><a name="l09791"></a><span class="lineno"> 9791</span>&#160; </div>
<div class="line"><a name="l09792"></a><span class="lineno"> 9792</span>&#160;    _TX_ON_DEBUG (OutputDebugString (_TX_VERSION <span class="stringliteral">&quot; - STARTED: &quot;</span> <a class="code" href="group___technical.html#ga43d277b4418068ebef1fd2bdbaf550f6">_TX_MODULE</a> <span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l09793"></a><span class="lineno"> 9793</span>&#160; </div>
<div class="line"><a name="l09794"></a><span class="lineno"> 9794</span>&#160;$   _txActivateWindow (wnd, 0x10);</div>
<div class="line"><a name="l09795"></a><span class="lineno"> 9795</span>&#160; </div>
<div class="line"><a name="l09796"></a><span class="lineno"> 9796</span>&#160;$   ShowWindow   (wnd, SW_SHOW);</div>
<div class="line"><a name="l09797"></a><span class="lineno"> 9797</span>&#160;$   UpdateWindow (wnd);</div>
<div class="line"><a name="l09798"></a><span class="lineno"> 9798</span>&#160; </div>
<div class="line"><a name="l09799"></a><span class="lineno"> 9799</span>&#160;$   _txRunning = <span class="keyword">true</span>;</div>
<div class="line"><a name="l09800"></a><span class="lineno"> 9800</span>&#160; </div>
<div class="line"><a name="l09801"></a><span class="lineno"> 9801</span>&#160;$   MSG msg = {};</div>
<div class="line"><a name="l09802"></a><span class="lineno"> 9802</span>&#160;$   <span class="keywordflow">while</span> (GetMessage (&amp;msg, NULL, 0, 0))</div>
<div class="line"><a name="l09803"></a><span class="lineno"> 9803</span>&#160;        {</div>
<div class="line"><a name="l09804"></a><span class="lineno"> 9804</span>&#160;        <span class="keywordflow">if</span> (!msg.hwnd) {$ <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l09805"></a><span class="lineno"> 9805</span>&#160; </div>
<div class="line"><a name="l09806"></a><span class="lineno"> 9806</span>&#160;        <span class="keywordflow">if</span> (accel &amp;&amp; TranslateAccelerator (wnd, accel, &amp;msg)) {$ <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l09807"></a><span class="lineno"> 9807</span>&#160; </div>
<div class="line"><a name="l09808"></a><span class="lineno"> 9808</span>&#160;$       TranslateMessage (&amp;msg);</div>
<div class="line"><a name="l09809"></a><span class="lineno"> 9809</span>&#160;$       DispatchMessage  (&amp;msg);</div>
<div class="line"><a name="l09810"></a><span class="lineno"> 9810</span>&#160; </div>
<div class="line"><a name="l09811"></a><span class="lineno"> 9811</span>&#160;$       Sleep (0);</div>
<div class="line"><a name="l09812"></a><span class="lineno"> 9812</span>&#160;        }</div>
<div class="line"><a name="l09813"></a><span class="lineno"> 9813</span>&#160; </div>
<div class="line"><a name="l09814"></a><span class="lineno"> 9814</span>&#160;$   <span class="keywordflow">if</span> (icon16) DestroyIcon (icon16);  <span class="comment">// If Explorer is displaying Tray Notification, these</span></div>
<div class="line"><a name="l09815"></a><span class="lineno"> 9815</span>&#160;$   <span class="keywordflow">if</span> (icon32) DestroyIcon (icon32);  <span class="comment">// calls will possibly fail, and we&#39;ll get resource leak.</span></div>
<div class="line"><a name="l09816"></a><span class="lineno"> 9816</span>&#160; </div>
<div class="line"><a name="l09817"></a><span class="lineno"> 9817</span>&#160;$   LeaveCriticalSection (&amp;_txCanvas_LockBackBuf);</div>
<div class="line"><a name="l09818"></a><span class="lineno"> 9818</span>&#160; </div>
<div class="line"><a name="l09819"></a><span class="lineno"> 9819</span>&#160;    _TX_ON_DEBUG (OutputDebugString (_TX_VERSION <span class="stringliteral">&quot; - STOPPED: &quot;</span> <a class="code" href="group___technical.html#ga43d277b4418068ebef1fd2bdbaf550f6">_TX_MODULE</a> <span class="stringliteral">&quot;\n&quot;</span>));</div>
<div class="line"><a name="l09820"></a><span class="lineno"> 9820</span>&#160; </div>
<div class="line"><a name="l09821"></a><span class="lineno"> 9821</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc">_txWatchdogTimeout</a> &gt;= 0)</div>
<div class="line"><a name="l09822"></a><span class="lineno"> 9822</span>&#160;        {$ Win32::_beginthread (_txWatchdogTerminator, 0, &amp;<a class="code" href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc">_txWatchdogTimeout</a>); }</div>
<div class="line"><a name="l09823"></a><span class="lineno"> 9823</span>&#160; </div>
<div class="line"><a name="l09824"></a><span class="lineno"> 9824</span>&#160;$   <span class="keywordflow">if</span> (_txRunning &amp;&amp; _txMain)         <span class="comment">// Main window is destroyed but main() is still running.</span></div>
<div class="line"><a name="l09825"></a><span class="lineno"> 9825</span>&#160;        {                              <span class="comment">// No chances for good termination, so use exit().</span></div>
<div class="line"><a name="l09826"></a><span class="lineno"> 9826</span>&#160;$       _txCleanup();</div>
<div class="line"><a name="l09827"></a><span class="lineno"> 9827</span>&#160;$       ::exit ((<span class="keywordtype">int</span>) msg.wParam);     <span class="comment">//-V202 //-V2509 //-V2014</span></div>
<div class="line"><a name="l09828"></a><span class="lineno"> 9828</span>&#160;        }</div>
<div class="line"><a name="l09829"></a><span class="lineno"> 9829</span>&#160; </div>
<div class="line"><a name="l09830"></a><span class="lineno"> 9830</span>&#160;$   _txCanvas_ThreadId = 0;</div>
<div class="line"><a name="l09831"></a><span class="lineno"> 9831</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;                       <span class="comment">//-V601</span></div>
<div class="line"><a name="l09832"></a><span class="lineno"> 9832</span>&#160; </div>
<div class="line"><a name="l09833"></a><span class="lineno"> 9833</span>&#160;<span class="preprocessor">    #undef SetClassLong</span></div>
<div class="line"><a name="l09834"></a><span class="lineno"> 9834</span>&#160;<span class="preprocessor">    #undef GCL_HICON_</span></div>
<div class="line"><a name="l09835"></a><span class="lineno"> 9835</span>&#160;<span class="preprocessor">    #undef GCL_HICONSM_</span></div>
<div class="line"><a name="l09836"></a><span class="lineno"> 9836</span>&#160;<span class="preprocessor">    #undef GCL_HCURSOR_</span></div>
<div class="line"><a name="l09837"></a><span class="lineno"> 9837</span>&#160;    }</div>
<div class="line"><a name="l09838"></a><span class="lineno"> 9838</span>&#160; </div>
<div class="line"><a name="l09839"></a><span class="lineno"> 9839</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09840"></a><span class="lineno"> 9840</span>&#160; </div>
<div class="line"><a name="l09841"></a><span class="lineno"> 9841</span>&#160;HWND _txCanvas_CreateWindow (<span class="keyword">const</span> SIZE* sizePtr)</div>
<div class="line"><a name="l09842"></a><span class="lineno"> 9842</span>&#160;    {</div>
<div class="line"><a name="l09843"></a><span class="lineno"> 9843</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (sizePtr)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l09844"></a><span class="lineno"> 9844</span>&#160; </div>
<div class="line"><a name="l09845"></a><span class="lineno"> 9845</span>&#160;$   <span class="keywordtype">bool</span> centered = <span class="keyword">false</span>;</div>
<div class="line"><a name="l09846"></a><span class="lineno"> 9846</span>&#160;    <span class="keywordflow">if</span> (sizePtr-&gt;cx &lt; 0 &amp;&amp; sizePtr-&gt;cy &lt; 0) {$ centered = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l09847"></a><span class="lineno"> 9847</span>&#160; </div>
<div class="line"><a name="l09848"></a><span class="lineno"> 9848</span>&#160;$   SIZE screen  = { GetSystemMetrics (SM_CXSCREEN), GetSystemMetrics (SM_CYSCREEN) };</div>
<div class="line"><a name="l09849"></a><span class="lineno"> 9849</span>&#160;$   RECT rect    = { 0, 0, abs (sizePtr-&gt;cx), abs (sizePtr-&gt;cy) }; AdjustWindowRect (&amp;rect, <a class="code" href="group___technical.html#ga4ddb32d7a8a676537014da7aea7bf273">_txWindowStyle</a>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l09850"></a><span class="lineno"> 9850</span>&#160;$   SIZE size    = { rect.right - rect.left, rect.bottom - rect.top };</div>
<div class="line"><a name="l09851"></a><span class="lineno"> 9851</span>&#160;$   RECT conPos  = {};</div>
<div class="line"><a name="l09852"></a><span class="lineno"> 9852</span>&#160; </div>
<div class="line"><a name="l09853"></a><span class="lineno"> 9853</span>&#160;$   HWND console = _TX_CALL (Win32::GetConsoleWindow, ());</div>
<div class="line"><a name="l09854"></a><span class="lineno"> 9854</span>&#160;    <span class="keywordflow">if</span> (console) {$ GetWindowRect (console, &amp;conPos); }</div>
<div class="line"><a name="l09855"></a><span class="lineno"> 9855</span>&#160; </div>
<div class="line"><a name="l09856"></a><span class="lineno"> 9856</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* wndClass = txRegisterClass (<span class="stringliteral">&quot;MAIN&quot;</span>, _txCanvas_WndProc, CS_HREDRAW | CS_VREDRAW | CS_OWNDC, BLACK_BRUSH, 0);</div>
<div class="line"><a name="l09857"></a><span class="lineno"> 9857</span>&#160;$   <span class="keywordflow">if</span> (!wndClass) <span class="keywordflow">return</span> (HWND) NULL;</div>
<div class="line"><a name="l09858"></a><span class="lineno"> 9858</span>&#160; </div>
<div class="line"><a name="l09859"></a><span class="lineno"> 9859</span>&#160;$   HWND wnd = CreateWindowEx (WS_EX_APPWINDOW, wndClass, <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a> (<span class="keyword">false</span>), <a class="code" href="group___technical.html#ga4ddb32d7a8a676537014da7aea7bf273">_txWindowStyle</a> | WS_CLIPCHILDREN,</div>
<div class="line"><a name="l09860"></a><span class="lineno"> 9860</span>&#160;                              (centered)? screen.cx/2 - size.cx/2 : (console)? conPos.left : CW_USEDEFAULT,</div>
<div class="line"><a name="l09861"></a><span class="lineno"> 9861</span>&#160;                              (centered)? screen.cy/2 - size.cy/2 : (console)? conPos.top  : CW_USEDEFAULT,</div>
<div class="line"><a name="l09862"></a><span class="lineno"> 9862</span>&#160;                               size.cx, size.cy, NULL, NULL, NULL, NULL);</div>
<div class="line"><a name="l09863"></a><span class="lineno"> 9863</span>&#160;$   <span class="keywordflow">if</span> (!wnd || !<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>())</div>
<div class="line"><a name="l09864"></a><span class="lineno"> 9864</span>&#160;        {$ <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;Cannot create canvas: CreateWindowEx() failed&quot;</span>), (HWND) NULL; }</div>
<div class="line"><a name="l09865"></a><span class="lineno"> 9865</span>&#160; </div>
<div class="line"><a name="l09866"></a><span class="lineno"> 9866</span>&#160;$   HMENU menu = GetSystemMenu (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), <span class="keyword">false</span>);</div>
<div class="line"><a name="l09867"></a><span class="lineno"> 9867</span>&#160;    <span class="keywordflow">if</span> (!menu) {$ <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(); }</div>
<div class="line"><a name="l09868"></a><span class="lineno"> 9868</span>&#160; </div>
<div class="line"><a name="l09869"></a><span class="lineno"> 9869</span>&#160;$   AppendMenu (menu, MF_SEPARATOR, 0, NULL)                       <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09870"></a><span class="lineno"> 9870</span>&#160;$   AppendMenu (menu, MF_STRING, _TX_IDM_CONSOLE, <span class="stringliteral">&quot;Show &amp;Console&quot;</span>) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09871"></a><span class="lineno"> 9871</span>&#160;$   AppendMenu (menu, MF_STRING, _TX_IDM_ABOUT,   &quot;&amp;About...&quot;)     <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09872"></a><span class="lineno"> 9872</span>&#160; </div>
<div class="line"><a name="l09873"></a><span class="lineno"> 9873</span>&#160;$   return <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>();</div>
<div class="line"><a name="l09874"></a><span class="lineno"> 9874</span>&#160;    }</div>
<div class="line"><a name="l09875"></a><span class="lineno"> 9875</span>&#160; </div>
<div class="line"><a name="l09876"></a><span class="lineno"> 9876</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09877"></a><span class="lineno"> 9877</span>&#160; </div>
<div class="line"><a name="l09878"></a><span class="lineno"> 9878</span>&#160;const <span class="keywordtype">char</span>* txRegisterClass (const <span class="keywordtype">char</span> classId[], WNDPROC wndProc, <span class="keywordtype">unsigned</span> style, <span class="keywordtype">int</span> backBrush, <span class="keywordtype">int</span> wndExtra)</div>
<div class="line"><a name="l09879"></a><span class="lineno"> 9879</span>&#160;    {</div>
<div class="line"><a name="l09880"></a><span class="lineno"> 9880</span>&#160;$8  assert (classId);</div>
<div class="line"><a name="l09881"></a><span class="lineno"> 9881</span>&#160;$   assert (wndProc);</div>
<div class="line"><a name="l09882"></a><span class="lineno"> 9882</span>&#160; </div>
<div class="line"><a name="l09883"></a><span class="lineno"> 9883</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span> name[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l09884"></a><span class="lineno"> 9884</span>&#160;$   _tx_snprintf_s (name, <span class="keyword">sizeof</span> (name) - 1, <span class="stringliteral">&quot;/*---[TXLib]-[%s]------------ &quot;</span></div>
<div class="line"><a name="l09885"></a><span class="lineno"> 9885</span>&#160;                                             _TX_VERSION <span class="stringliteral">&quot;  &quot;</span> __FILE__ <span class="stringliteral">&quot;  WndClass %08lX &quot;</span></div>
<div class="line"><a name="l09886"></a><span class="lineno"> 9886</span>&#160;                                             <span class="stringliteral">&quot;-------------[%s]-[TXLib]---*/&quot;</span>,</div>
<div class="line"><a name="l09887"></a><span class="lineno"> 9887</span>&#160;                                             classId, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) GetTickCount(), classId);</div>
<div class="line"><a name="l09888"></a><span class="lineno"> 9888</span>&#160;$   WNDCLASS wc      = { <span class="keyword">sizeof</span> (wc) };</div>
<div class="line"><a name="l09889"></a><span class="lineno"> 9889</span>&#160; </div>
<div class="line"><a name="l09890"></a><span class="lineno"> 9890</span>&#160;$   wc.lpszClassName = name;</div>
<div class="line"><a name="l09891"></a><span class="lineno"> 9891</span>&#160;$   wc.lpfnWndProc   = wndProc;</div>
<div class="line"><a name="l09892"></a><span class="lineno"> 9892</span>&#160;$   wc.style         = style;</div>
<div class="line"><a name="l09893"></a><span class="lineno"> 9893</span>&#160;$   wc.cbWndExtra    = (wndExtra + 1) * (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span> (long);</div>
<div class="line"><a name="l09894"></a><span class="lineno"> 9894</span>&#160; </div>
<div class="line"><a name="l09895"></a><span class="lineno"> 9895</span>&#160;$   wc.hCursor       = LoadCursor (NULL, IDC_ARROW);</div>
<div class="line"><a name="l09896"></a><span class="lineno"> 9896</span>&#160;$   wc.hbrBackground = (HBRUSH) Win32::GetStockObject (backBrush);</div>
<div class="line"><a name="l09897"></a><span class="lineno"> 9897</span>&#160; </div>
<div class="line"><a name="l09898"></a><span class="lineno"> 9898</span>&#160;$   ATOM atom = RegisterClass (&amp;wc);</div>
<div class="line"><a name="l09899"></a><span class="lineno"> 9899</span>&#160;    <span class="keywordflow">if</span> (!atom) {$ <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;RegisterClass (\&quot;%s\&quot;) failed&quot;</span>, name); <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l09900"></a><span class="lineno"> 9900</span>&#160; </div>
<div class="line"><a name="l09901"></a><span class="lineno"> 9901</span>&#160;$   <span class="keywordflow">return</span> (<span class="keyword">const</span> <span class="keywordtype">char</span>*)(uintptr_t) atom;</div>
<div class="line"><a name="l09902"></a><span class="lineno"> 9902</span>&#160;    }</div>
<div class="line"><a name="l09903"></a><span class="lineno"> 9903</span>&#160; </div>
<div class="line"><a name="l09904"></a><span class="lineno"> 9904</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09905"></a><span class="lineno"> 9905</span>&#160; </div>
<div class="line"><a name="l09906"></a><span class="lineno"> 9906</span>&#160;<span class="keywordtype">int</span> _txCanvas_SetRefreshLock (<span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l09907"></a><span class="lineno"> 9907</span>&#160;    {</div>
<div class="line"><a name="l09908"></a><span class="lineno"> 9908</span>&#160;$8  <span class="keywordtype">int</span> oldCount = _txCanvas_RefreshLock;</div>
<div class="line"><a name="l09909"></a><span class="lineno"> 9909</span>&#160; </div>
<div class="line"><a name="l09910"></a><span class="lineno"> 9910</span>&#160;$   _txCanvas_RefreshLock = count;</div>
<div class="line"><a name="l09911"></a><span class="lineno"> 9911</span>&#160; </div>
<div class="line"><a name="l09912"></a><span class="lineno"> 9912</span>&#160;$   HWND wnd = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>();</div>
<div class="line"><a name="l09913"></a><span class="lineno"> 9913</span>&#160; </div>
<div class="line"><a name="l09914"></a><span class="lineno"> 9914</span>&#160;$   <span class="keywordflow">if</span> ((_txCanvas_RefreshLock &lt;= 0 || oldCount &lt;= 0) &amp;&amp; wnd)</div>
<div class="line"><a name="l09915"></a><span class="lineno"> 9915</span>&#160;        {$ RedrawWindow (wnd, NULL, NULL, RDW_INVALIDATE | RDW_INTERNALPAINT | RDW_UPDATENOW); }</div>
<div class="line"><a name="l09916"></a><span class="lineno"> 9916</span>&#160; </div>
<div class="line"><a name="l09917"></a><span class="lineno"> 9917</span>&#160;$   <span class="keywordflow">return</span> oldCount;</div>
<div class="line"><a name="l09918"></a><span class="lineno"> 9918</span>&#160;    }</div>
<div class="line"><a name="l09919"></a><span class="lineno"> 9919</span>&#160; </div>
<div class="line"><a name="l09920"></a><span class="lineno"> 9920</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09921"></a><span class="lineno"> 9921</span>&#160; </div>
<div class="line"><a name="l09922"></a><span class="lineno"> 9922</span>&#160;HICON _txCreateTXIcon (<span class="keywordtype">int</span> size)</div>
<div class="line"><a name="l09923"></a><span class="lineno"> 9923</span>&#160;    {</div>
<div class="line"><a name="l09924"></a><span class="lineno"> 9924</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (size == 32 || size == 16)) <span class="keywordflow">return</span> NULL;  <span class="comment">//-V112 //-V560</span></div>
<div class="line"><a name="l09925"></a><span class="lineno"> 9925</span>&#160; </div>
<div class="line"><a name="l09926"></a><span class="lineno"> 9926</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> image32 [32*32+1] =</div>
<div class="line"><a name="l09927"></a><span class="lineno"> 9927</span>&#160;        <span class="stringliteral">&quot;00000000000000000000000000000000&quot;</span><span class="stringliteral">&quot;0FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0&quot;</span><span class="stringliteral">&quot;0F0000000000000000000000000000F0&quot;</span><span class="stringliteral">&quot;0F0000000000000000000000000000F0&quot;</span></div>
<div class="line"><a name="l09928"></a><span class="lineno"> 9928</span>&#160;        <span class="stringliteral">&quot;0F0000000000000099999999999900F0&quot;</span><span class="stringliteral">&quot;0F0000000000000090300333330900F0&quot;</span><span class="stringliteral">&quot;0F0000000990000090000000000900F0&quot;</span><span class="stringliteral">&quot;0F00000099990000900BB000000900F0&quot;</span></div>
<div class="line"><a name="l09929"></a><span class="lineno"> 9929</span>&#160;        <span class="stringliteral">&quot;0F0000039999000090B00090900900F0&quot;</span><span class="stringliteral">&quot;0F0000009999000090B00999990900F0&quot;</span><span class="stringliteral">&quot;0F00000009903799900BB090900900F0&quot;</span><span class="stringliteral">&quot;0F000000009BB70090000010000900F0&quot;</span></div>
<div class="line"><a name="l09930"></a><span class="lineno"> 9930</span>&#160;        <span class="stringliteral">&quot;0F0000000B90000090000000000900F0&quot;</span><span class="stringliteral">&quot;0F000000B0B0000099999999999900F0&quot;</span><span class="stringliteral">&quot;0F00007B30B0000090000000000000F0&quot;</span><span class="stringliteral">&quot;0F00007300B0000090000000000000F0&quot;</span></div>
<div class="line"><a name="l09931"></a><span class="lineno"> 9931</span>&#160;        <span class="stringliteral">&quot;0F00000000B3000090000000000000F0&quot;</span><span class="stringliteral">&quot;0F0000000B0B000090000000000000F0&quot;</span><span class="stringliteral">&quot;0F000000B303B00090000000000000F0&quot;</span><span class="stringliteral">&quot;0F000003B000B00090000000000000F0&quot;</span></div>
<div class="line"><a name="l09932"></a><span class="lineno"> 9932</span>&#160;        <span class="stringliteral">&quot;0F00003B00003B0090000000000000F0&quot;</span><span class="stringliteral">&quot;0F0000300000030090000000000000F0&quot;</span><span class="stringliteral">&quot;0F0000000448888888888844000000F0&quot;</span><span class="stringliteral">&quot;0F00004886E6E6E60E66E6EEEE4400F0&quot;</span></div>
<div class="line"><a name="l09933"></a><span class="lineno"> 9933</span>&#160;        <span class="stringliteral">&quot;0F4488866E0E60E00660E06E66EEE4F0&quot;</span><span class="stringliteral">&quot;0F868806E06E06E666E66E00E06EE6F0&quot;</span><span class="stringliteral">&quot;0F08606E66E0066000E006E66E00E6F0&quot;</span><span class="stringliteral">&quot;0F8666E006600E00006600E006E00EF0&quot;</span></div>
<div class="line"><a name="l09934"></a><span class="lineno"> 9934</span>&#160;        <span class="stringliteral">&quot;0F000E066888888888888888606660F0&quot;</span><span class="stringliteral">&quot;0F66EEE6EE000E00000E00086EEEE6F0&quot;</span><span class="stringliteral">&quot;0FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0&quot;</span><span class="stringliteral">&quot;00000000000000000000000000000000&quot;</span>;</div>
<div class="line"><a name="l09935"></a><span class="lineno"> 9935</span>&#160; </div>
<div class="line"><a name="l09936"></a><span class="lineno"> 9936</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> image16 [16*16+1] =</div>
<div class="line"><a name="l09937"></a><span class="lineno"> 9937</span>&#160;        <span class="stringliteral">&quot;0000000000000000&quot;</span><span class="stringliteral">&quot;0000000999999990&quot;</span><span class="stringliteral">&quot;0009000900000090&quot;</span><span class="stringliteral">&quot;0099900909973090&quot;</span><span class="stringliteral">&quot;0059700909009390&quot;</span><span class="stringliteral">&quot;0009799909973090&quot;</span><span class="stringliteral">&quot;0099000900000090&quot;</span><span class="stringliteral">&quot;0959330999999990&quot;</span></div>
<div class="line"><a name="l09938"></a><span class="lineno"> 9938</span>&#160;        <span class="stringliteral">&quot;0709500900000000&quot;</span><span class="stringliteral">&quot;0095930900000000&quot;</span><span class="stringliteral">&quot;0090393900000000&quot;</span><span class="stringliteral">&quot;0790073900000000&quot;</span><span class="stringliteral">&quot;0900000900000000&quot;</span><span class="stringliteral">&quot;000EE6E6E6E6E000&quot;</span><span class="stringliteral">&quot;0EE6E6E6E6E6EEE0&quot;</span><span class="stringliteral">&quot;0000000000000000&quot;</span>;</div>
<div class="line"><a name="l09939"></a><span class="lineno"> 9939</span>&#160; </div>
<div class="line"><a name="l09940"></a><span class="lineno"> 9940</span>&#160;$   <span class="keyword">const</span> COLORREF pal[<span class="charliteral">&#39;F&#39;</span>-<span class="charliteral">&#39;0&#39;</span>+1] = { 0x000000, 0x002b2b, 0x555500, 0x005555, 0x808000, 0x008080, 0xaaaa00, 0x00aaaa, 0xd5d500, 0x00d5d5, 0,0,0,0,0,0,0,</div>
<div class="line"><a name="l09941"></a><span class="lineno"> 9941</span>&#160;                                      0xffff00, 0x00ffff, 0xffffaa, 0xaaffff, 0xd5d500, 0xffffff };</div>
<div class="line"><a name="l09942"></a><span class="lineno"> 9942</span>&#160; </div>
<div class="line"><a name="l09943"></a><span class="lineno"> 9943</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* image = (size == 32)? image32 : image16;  <span class="comment">//-V112</span></div>
<div class="line"><a name="l09944"></a><span class="lineno"> 9944</span>&#160; </div>
<div class="line"><a name="l09945"></a><span class="lineno"> 9945</span>&#160;$   POINT sz = { size, size };</div>
<div class="line"><a name="l09946"></a><span class="lineno"> 9946</span>&#160;$   HDC dcMask  = _txBuffer_Create (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), &amp;sz); assert (dcMask);</div>
<div class="line"><a name="l09947"></a><span class="lineno"> 9947</span>&#160;$   HDC dcColor = _txBuffer_Create (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), &amp;sz); assert (dcColor);</div>
<div class="line"><a name="l09948"></a><span class="lineno"> 9948</span>&#160; </div>
<div class="line"><a name="l09949"></a><span class="lineno"> 9949</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; size*size; i++)</div>
<div class="line"><a name="l09950"></a><span class="lineno"> 9950</span>&#160;        {</div>
<div class="line"><a name="l09951"></a><span class="lineno"> 9951</span>&#160;        assert (<a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, image[i], <span class="charliteral">&#39;0&#39;</span>, <span class="charliteral">&#39;9&#39;</span>) ||</div>
<div class="line"><a name="l09952"></a><span class="lineno"> 9952</span>&#160;                <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, image[i], <span class="charliteral">&#39;A&#39;</span>, <span class="charliteral">&#39;F&#39;</span>));</div>
<div class="line"><a name="l09953"></a><span class="lineno"> 9953</span>&#160; </div>
<div class="line"><a name="l09954"></a><span class="lineno"> 9954</span>&#160;        Win32::SetPixel (dcColor, i % size, i / size, pal [image[i] - <span class="charliteral">&#39;0&#39;</span>]);</div>
<div class="line"><a name="l09955"></a><span class="lineno"> 9955</span>&#160;        }</div>
<div class="line"><a name="l09956"></a><span class="lineno"> 9956</span>&#160; </div>
<div class="line"><a name="l09957"></a><span class="lineno"> 9957</span>&#160;$   ICONINFO info = { <span class="keyword">true</span>, 0, 0, (HBITMAP) Win32::GetCurrentObject (dcMask,  OBJ_BITMAP),</div>
<div class="line"><a name="l09958"></a><span class="lineno"> 9958</span>&#160;                                  (HBITMAP) Win32::GetCurrentObject (dcColor, OBJ_BITMAP) };</div>
<div class="line"><a name="l09959"></a><span class="lineno"> 9959</span>&#160; </div>
<div class="line"><a name="l09960"></a><span class="lineno"> 9960</span>&#160;$   HICON icon = CreateIconIndirect (&amp;info);</div>
<div class="line"><a name="l09961"></a><span class="lineno"> 9961</span>&#160;$   assert (icon);</div>
<div class="line"><a name="l09962"></a><span class="lineno"> 9962</span>&#160; </div>
<div class="line"><a name="l09963"></a><span class="lineno"> 9963</span>&#160;$   _txBuffer_Delete (&amp;dcMask)  <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09964"></a><span class="lineno"> 9964</span>&#160;$   _txBuffer_Delete (&amp;dcColor) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l09965"></a><span class="lineno"> 9965</span>&#160; </div>
<div class="line"><a name="l09966"></a><span class="lineno"> 9966</span>&#160;$   <span class="keywordflow">return</span> icon;</div>
<div class="line"><a name="l09967"></a><span class="lineno"> 9967</span>&#160;    }</div>
<div class="line"><a name="l09968"></a><span class="lineno"> 9968</span>&#160; </div>
<div class="line"><a name="l09969"></a><span class="lineno"> 9969</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l09970"></a><span class="lineno"> 9970</span>&#160; </div>
<div class="line"><a name="l09971"></a><span class="lineno"> 9971</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l09972"></a><span class="lineno"> 9972</span>&#160; </div>
<div class="line"><a name="l09973"></a><span class="lineno"> 9973</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> _txCanvas_OK()</div>
<div class="line"><a name="l09974"></a><span class="lineno"> 9974</span>&#160;    {</div>
<div class="line"><a name="l09975"></a><span class="lineno"> 9975</span>&#160;    <span class="keywordflow">return</span> _txCanvas_ThreadId   &amp;&amp;</div>
<div class="line"><a name="l09976"></a><span class="lineno"> 9976</span>&#160;           _txCanvas_Window     &amp;&amp;</div>
<div class="line"><a name="l09977"></a><span class="lineno"> 9977</span>&#160;           _txCanvas_BackBuf[0] &amp;&amp;</div>
<div class="line"><a name="l09978"></a><span class="lineno"> 9978</span>&#160;           _txCanvas_BackBuf[1] &amp;&amp;</div>
<div class="line"><a name="l09979"></a><span class="lineno"> 9979</span>&#160;           _txCanvas_Pixels;</div>
<div class="line"><a name="l09980"></a><span class="lineno"> 9980</span>&#160;    }</div>
<div class="line"><a name="l09981"></a><span class="lineno"> 9981</span>&#160; </div>
<div class="line"><a name="l09982"></a><span class="lineno"> 9982</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l09983"></a><span class="lineno"> 9983</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l09984"></a><span class="lineno"> 9984</span>&#160; </div>
<div class="line"><a name="l09985"></a><span class="lineno"> 9985</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l09986"></a><span class="lineno"> 9986</span>&#160;<span class="comment">//{          Main window event handlers          (_txCanvas_On...)</span></div>
<div class="line"><a name="l09988"></a><span class="lineno"> 9988</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l09990"></a><span class="lineno"> 9990</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l09991"></a><span class="lineno"> 9991</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l09992"></a><span class="lineno"> 9992</span>&#160; </div>
<div class="line"><a name="l09993"></a><span class="lineno"> 9993</span>&#160;LRESULT CALLBACK _txCanvas_WndProc (HWND wnd, UINT msg, WPARAM wpar, LPARAM lpar)</div>
<div class="line"><a name="l09994"></a><span class="lineno"> 9994</span>&#160;    {</div>
<div class="line"><a name="l09995"></a><span class="lineno"> 9995</span>&#160;<span class="preprocessor">#if defined (_TX_ALLOW_TRACE)</span></div>
<div class="line"><a name="l09996"></a><span class="lineno"> 9996</span>&#160; </div>
<div class="line"><a name="l09997"></a><span class="lineno"> 9997</span>&#160;    <span class="keywordtype">int</span> inTX = _txLoc::Cur.inTX++;</div>
<div class="line"><a name="l09998"></a><span class="lineno"> 9998</span>&#160; </div>
<div class="line"><a name="l09999"></a><span class="lineno"> 9999</span>&#160;    <span class="keywordflow">if</span> (_txLoc::Cur.trace) _txTrace (__FILE__, __LINE__, <a class="code" href="group___misc.html#gab170f39ac0e379c324c73495f14a1309">__TX_FUNCTION__</a>, <span class="stringliteral">&quot;%*s&quot;</span> <span class="stringliteral">&quot;0x%X &lt;- 0x%04X (0x%08X, 0x%08lX)&quot;</span>,</div>
<div class="line"><a name="l10000"></a><span class="lineno">10000</span>&#160;                                     2 * (_txLoc::Cur.inTX - 1), <span class="stringliteral">&quot;&quot;</span>, wnd, msg, wpar, lpar);</div>
<div class="line"><a name="l10001"></a><span class="lineno">10001</span>&#160;    _txLoc::Cur.inTX = inTX;</div>
<div class="line"><a name="l10002"></a><span class="lineno">10002</span>&#160; </div>
<div class="line"><a name="l10003"></a><span class="lineno">10003</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l10004"></a><span class="lineno">10004</span>&#160; </div>
<div class="line"><a name="l10005"></a><span class="lineno">10005</span>&#160;$8  <span class="keywordflow">if</span> (msg == WM_KEYDOWN &amp;&amp; wpar == VK_F12 &amp;&amp;</div>
<div class="line"><a name="l10006"></a><span class="lineno">10006</span>&#160;        GetKeyState (VK_SHIFT) &amp;&amp; GetKeyState (VK_CONTROL) &amp;&amp; GetKeyState (VK_MENU))</div>
<div class="line"><a name="l10007"></a><span class="lineno">10007</span>&#160;        {</div>
<div class="line"><a name="l10008"></a><span class="lineno">10008</span>&#160;$       _txCanvas_OnCmdABOUT (wnd,      wpar);</div>
<div class="line"><a name="l10009"></a><span class="lineno">10009</span>&#160;$       <span class="keywordflow">return</span> DefWindowProc (wnd, msg, wpar, lpar);</div>
<div class="line"><a name="l10010"></a><span class="lineno">10010</span>&#160;        }</div>
<div class="line"><a name="l10011"></a><span class="lineno">10011</span>&#160; </div>
<div class="line"><a name="l10012"></a><span class="lineno">10012</span>&#160;    WNDPROC altWndProc = _txAltWndProc;  <span class="comment">// Cache to prevent change from main thread</span></div>
<div class="line"><a name="l10013"></a><span class="lineno">10013</span>&#160;    <span class="keywordflow">if</span> (altWndProc)</div>
<div class="line"><a name="l10014"></a><span class="lineno">10014</span>&#160;        {</div>
<div class="line"><a name="l10015"></a><span class="lineno">10015</span>&#160;$       LRESULT res = altWndProc (wnd, msg, wpar, lpar);</div>
<div class="line"><a name="l10016"></a><span class="lineno">10016</span>&#160;$       <span class="keywordflow">if</span> (res) <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l10017"></a><span class="lineno">10017</span>&#160;        }</div>
<div class="line"><a name="l10018"></a><span class="lineno">10018</span>&#160; </div>
<div class="line"><a name="l10019"></a><span class="lineno">10019</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">bool</span> bkErased = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10020"></a><span class="lineno">10020</span>&#160; </div>
<div class="line"><a name="l10021"></a><span class="lineno">10021</span>&#160;    <span class="keywordflow">switch</span> (msg)</div>
<div class="line"><a name="l10022"></a><span class="lineno">10022</span>&#160;        {</div>
<div class="line"><a name="l10023"></a><span class="lineno">10023</span>&#160;        <span class="keywordflow">case</span> WM_CREATE:         {$     _txCanvas_OnCREATE     (wnd);                    <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10024"></a><span class="lineno">10024</span>&#160; </div>
<div class="line"><a name="l10025"></a><span class="lineno">10025</span>&#160;        <span class="keywordflow">case</span> WM_CLOSE:          {$ <span class="keywordflow">if</span> (_txCanvas_OnCLOSE      (wnd))  <span class="keywordflow">break</span>;       <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10026"></a><span class="lineno">10026</span>&#160;        <span class="keywordflow">case</span> WM_DESTROY:        {$     _txCanvas_OnDESTROY    (wnd);                    <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10027"></a><span class="lineno">10027</span>&#160; </div>
<div class="line"><a name="l10028"></a><span class="lineno">10028</span>&#160;        <span class="keywordflow">case</span> WM_ERASEBKGND:     {$ <span class="keywordflow">if</span> (!bkErased) { bkErased = <span class="keyword">true</span>;  <span class="keywordflow">break</span>; }     <span class="keywordflow">else</span> <span class="keywordflow">return</span> 1; }</div>
<div class="line"><a name="l10029"></a><span class="lineno">10029</span>&#160;        <span class="keywordflow">case</span> WM_SIZE:           {$                  bkErased = <span class="keyword">false</span>; <span class="keywordflow">break</span>;                      }</div>
<div class="line"><a name="l10030"></a><span class="lineno">10030</span>&#160; </div>
<div class="line"><a name="l10031"></a><span class="lineno">10031</span>&#160;        <span class="keywordflow">case</span> WM_PAINT:          {$     _txCanvas_OnPAINT      (wnd);                    <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10032"></a><span class="lineno">10032</span>&#160; </div>
<div class="line"><a name="l10033"></a><span class="lineno">10033</span>&#160;        <span class="keywordflow">case</span> WM_TIMER:          {$     _txCanvas_OnTIMER      (wnd, wpar);              <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10034"></a><span class="lineno">10034</span>&#160; </div>
<div class="line"><a name="l10035"></a><span class="lineno">10035</span>&#160;<span class="comment">/*???*/</span> <span class="keywordflow">case</span> WM_KEYUP:          {$ <span class="keywordflow">if</span> (_txCanvas_OnKEY        (wnd, wpar, lpar, <span class="keyword">false</span>)) <span class="keywordflow">return</span> 0; <span class="keywordflow">else</span> <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l10036"></a><span class="lineno">10036</span>&#160;<span class="comment">/*???*/</span> <span class="keywordflow">case</span> WM_KEYDOWN:        {$ <span class="keywordflow">if</span> (_txCanvas_OnKEY        (wnd, wpar, lpar, <span class="keyword">true</span>))  <span class="keywordflow">return</span> 0; <span class="keywordflow">else</span> <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l10037"></a><span class="lineno">10037</span>&#160;        <span class="keywordflow">case</span> WM_CHAR:           {$ <span class="keywordflow">if</span> (_txCanvas_OnCHAR       (wnd, wpar, lpar))        <span class="keywordflow">return</span> 0; <span class="keywordflow">else</span> <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l10038"></a><span class="lineno">10038</span>&#160; </div>
<div class="line"><a name="l10039"></a><span class="lineno">10039</span>&#160;        <span class="keywordflow">case</span> WM_LBUTTONUP:</div>
<div class="line"><a name="l10040"></a><span class="lineno">10040</span>&#160;        <span class="keywordflow">case</span> WM_LBUTTONDOWN:</div>
<div class="line"><a name="l10041"></a><span class="lineno">10041</span>&#160;        <span class="keywordflow">case</span> WM_RBUTTONUP:</div>
<div class="line"><a name="l10042"></a><span class="lineno">10042</span>&#160;        <span class="keywordflow">case</span> WM_RBUTTONDOWN:</div>
<div class="line"><a name="l10043"></a><span class="lineno">10043</span>&#160;        <span class="keywordflow">case</span> WM_MBUTTONUP:</div>
<div class="line"><a name="l10044"></a><span class="lineno">10044</span>&#160;        <span class="keywordflow">case</span> WM_MBUTTONDOWN:</div>
<div class="line"><a name="l10045"></a><span class="lineno">10045</span>&#160;        <span class="keywordflow">case</span> WM_MOUSEMOVE:      {$     _txCanvas_OnMOUSEMOVE  (wnd, wpar, lpar);        <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10046"></a><span class="lineno">10046</span>&#160; </div>
<div class="line"><a name="l10047"></a><span class="lineno">10047</span>&#160;        <span class="keywordflow">case</span> WM_MOUSELEAVE:     {$     _txCanvas_OnMOUSELEAVE (wnd);                    <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10048"></a><span class="lineno">10048</span>&#160; </div>
<div class="line"><a name="l10049"></a><span class="lineno">10049</span>&#160;        <span class="keywordflow">case</span> _TX_WM_CREATEWND:  {$     _txCanvas_OnCREATEWND  (wnd, wpar, lpar);        <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10050"></a><span class="lineno">10050</span>&#160;        <span class="keywordflow">case</span> _TX_WM_DESTROYWND: {$     _txCanvas_OnDESTROYWND (wnd, wpar, lpar);        <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10051"></a><span class="lineno">10051</span>&#160; </div>
<div class="line"><a name="l10052"></a><span class="lineno">10052</span>&#160;        <span class="keywordflow">case</span> WM_NULL:           {$                                                      <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10053"></a><span class="lineno">10053</span>&#160; </div>
<div class="line"><a name="l10054"></a><span class="lineno">10054</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l10055"></a><span class="lineno">10055</span>&#160;        }</div>
<div class="line"><a name="l10056"></a><span class="lineno">10056</span>&#160; </div>
<div class="line"><a name="l10057"></a><span class="lineno">10057</span>&#160;    <span class="keywordflow">if</span> (msg == WM_SYSCOMMAND) <span class="keywordflow">switch</span> (wpar)</div>
<div class="line"><a name="l10058"></a><span class="lineno">10058</span>&#160;        {</div>
<div class="line"><a name="l10059"></a><span class="lineno">10059</span>&#160;        <span class="keywordflow">case</span> _TX_IDM_ABOUT:     {$     _txCanvas_OnCmdABOUT   (wnd, wpar);              <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10060"></a><span class="lineno">10060</span>&#160;        <span class="keywordflow">case</span> _TX_IDM_CONSOLE:   {$     _txCanvas_OnCmdCONSOLE (wnd, wpar);              <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l10061"></a><span class="lineno">10061</span>&#160; </div>
<div class="line"><a name="l10062"></a><span class="lineno">10062</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l10063"></a><span class="lineno">10063</span>&#160;        }</div>
<div class="line"><a name="l10064"></a><span class="lineno">10064</span>&#160; </div>
<div class="line"><a name="l10065"></a><span class="lineno">10065</span>&#160;$   <span class="keywordflow">return</span> DefWindowProc (wnd, msg, wpar, lpar);</div>
<div class="line"><a name="l10066"></a><span class="lineno">10066</span>&#160;    }</div>
<div class="line"><a name="l10067"></a><span class="lineno">10067</span>&#160; </div>
<div class="line"><a name="l10068"></a><span class="lineno">10068</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10069"></a><span class="lineno">10069</span>&#160; </div>
<div class="line"><a name="l10070"></a><span class="lineno">10070</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnCREATE (HWND wnd)</div>
<div class="line"><a name="l10071"></a><span class="lineno">10071</span>&#160;    {</div>
<div class="line"><a name="l10072"></a><span class="lineno">10072</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (wnd)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10073"></a><span class="lineno">10073</span>&#160; </div>
<div class="line"><a name="l10074"></a><span class="lineno">10074</span>&#160;$   _txCanvas_BackBuf[0] = _txBuffer_Create (wnd, NULL, NULL, &amp;_txCanvas_Pixels); assert (_txCanvas_BackBuf[0]);</div>
<div class="line"><a name="l10075"></a><span class="lineno">10075</span>&#160;$   _txCanvas_BackBuf[1] = _txBuffer_Create (wnd, NULL, NULL, NULL);              assert (_txCanvas_BackBuf[1]);</div>
<div class="line"><a name="l10076"></a><span class="lineno">10076</span>&#160; </div>
<div class="line"><a name="l10077"></a><span class="lineno">10077</span>&#160;$   <span class="keywordflow">if</span> (!SetTimer (wnd, _txCanvas_RefreshTimer, <a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a>, NULL)) _txCanvas_RefreshTimer = 0;</div>
<div class="line"><a name="l10078"></a><span class="lineno">10078</span>&#160;$   assert (_txCanvas_RefreshTimer);</div>
<div class="line"><a name="l10079"></a><span class="lineno">10079</span>&#160; </div>
<div class="line"><a name="l10080"></a><span class="lineno">10080</span>&#160;$   _txCanvas_UserDCs = new ::std::vector &lt;HDC&gt;;</div>
<div class="line"><a name="l10081"></a><span class="lineno">10081</span>&#160; </div>
<div class="line"><a name="l10082"></a><span class="lineno">10082</span>&#160;$   _txCanvas_Window = wnd;</div>
<div class="line"><a name="l10083"></a><span class="lineno">10083</span>&#160; </div>
<div class="line"><a name="l10084"></a><span class="lineno">10084</span>&#160;$   <a class="code" href="group___drawing.html#gaa72c4849ac0c9bf6f95893f4265b9843">txSetDefaults</a>();</div>
<div class="line"><a name="l10085"></a><span class="lineno">10085</span>&#160; </div>
<div class="line"><a name="l10086"></a><span class="lineno">10086</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10087"></a><span class="lineno">10087</span>&#160;    }</div>
<div class="line"><a name="l10088"></a><span class="lineno">10088</span>&#160; </div>
<div class="line"><a name="l10089"></a><span class="lineno">10089</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10090"></a><span class="lineno">10090</span>&#160; </div>
<div class="line"><a name="l10091"></a><span class="lineno">10091</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnDESTROY (HWND wnd)</div>
<div class="line"><a name="l10092"></a><span class="lineno">10092</span>&#160;    {</div>
<div class="line"><a name="l10093"></a><span class="lineno">10093</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (wnd)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10094"></a><span class="lineno">10094</span>&#160; </div>
<div class="line"><a name="l10095"></a><span class="lineno">10095</span>&#160;    <span class="comment">// Инициируем остановку цикла сообщений</span></div>
<div class="line"><a name="l10096"></a><span class="lineno">10096</span>&#160; </div>
<div class="line"><a name="l10097"></a><span class="lineno">10097</span>&#160;$   PostQuitMessage (_txRunning? WM_DESTROY : EXIT_SUCCESS);</div>
<div class="line"><a name="l10098"></a><span class="lineno">10098</span>&#160; </div>
<div class="line"><a name="l10099"></a><span class="lineno">10099</span>&#160;$   <span class="keywordflow">if</span> (!_txCanvas_Window) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10100"></a><span class="lineno">10100</span>&#160; </div>
<div class="line"><a name="l10101"></a><span class="lineno">10101</span>&#160;    <span class="comment">// Indicate that we are about to manually terminate</span></div>
<div class="line"><a name="l10102"></a><span class="lineno">10102</span>&#160; </div>
<div class="line"><a name="l10103"></a><span class="lineno">10103</span>&#160;$   _txExit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10104"></a><span class="lineno">10104</span>&#160; </div>
<div class="line"><a name="l10105"></a><span class="lineno">10105</span>&#160;    <span class="comment">// Lock GDI resources</span></div>
<div class="line"><a name="l10106"></a><span class="lineno">10106</span>&#160; </div>
<div class="line"><a name="l10107"></a><span class="lineno">10107</span>&#160;$   <span class="keywordtype">bool</span> locked = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10108"></a><span class="lineno">10108</span>&#160;$   _txWaitFor ((locked = <a class="code" href="group___misc.html#ga532fa8a55c4f3d4f94ff0fdceae732b2">txLock</a> (<span class="keyword">false</span>), locked), <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l10109"></a><span class="lineno">10109</span>&#160;$   <span class="keywordflow">if</span> (!locked) <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;Cannot lock GDI to free resources&quot;</span>);</div>
<div class="line"><a name="l10110"></a><span class="lineno">10110</span>&#160; </div>
<div class="line"><a name="l10111"></a><span class="lineno">10111</span>&#160;    <span class="comment">// Освобождаем пользовательские ресурсы</span></div>
<div class="line"><a name="l10112"></a><span class="lineno">10112</span>&#160; </div>
<div class="line"><a name="l10113"></a><span class="lineno">10113</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_UserDCs &amp;&amp; !_txCanvas_UserDCs-&gt;empty())</div>
<div class="line"><a name="l10114"></a><span class="lineno">10114</span>&#160;        {</div>
<div class="line"><a name="l10115"></a><span class="lineno">10115</span>&#160;$       txNotifyIcon (NIIF_ERROR, NULL, <span class="stringliteral">&quot;Вы забыли освободить %d HDC.&quot;</span>, (<span class="keywordtype">int</span>) _txCanvas_UserDCs-&gt;size());  <span class="comment">//-V202</span></div>
<div class="line"><a name="l10116"></a><span class="lineno">10116</span>&#160;$       Sleep (<a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l10117"></a><span class="lineno">10117</span>&#160; </div>
<div class="line"><a name="l10118"></a><span class="lineno">10118</span>&#160;$       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; _txCanvas_UserDCs-&gt;size(); i++) _txBuffer_Delete (&amp;_txCanvas_UserDCs-&gt;at (i));</div>
<div class="line"><a name="l10119"></a><span class="lineno">10119</span>&#160;$       _txCanvas_UserDCs-&gt;clear();</div>
<div class="line"><a name="l10120"></a><span class="lineno">10120</span>&#160;        }</div>
<div class="line"><a name="l10121"></a><span class="lineno">10121</span>&#160; </div>
<div class="line"><a name="l10122"></a><span class="lineno">10122</span>&#160;    <span class="comment">// Освобождаем ресурсы, связанные с окном</span></div>
<div class="line"><a name="l10123"></a><span class="lineno">10123</span>&#160; </div>
<div class="line"><a name="l10124"></a><span class="lineno">10124</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_RefreshTimer) KillTimer (wnd, _txCanvas_RefreshTimer) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10125"></a><span class="lineno">10125</span>&#160; </div>
<div class="line"><a name="l10126"></a><span class="lineno">10126</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_BackBuf[1]) _txBuffer_Delete (&amp;_txCanvas_BackBuf[1])  <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10127"></a><span class="lineno">10127</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_BackBuf[0]) _txBuffer_Delete (&amp;_txCanvas_BackBuf[0])  <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10128"></a><span class="lineno">10128</span>&#160;$   _txCanvas_Pixels = NULL;</div>
<div class="line"><a name="l10129"></a><span class="lineno">10129</span>&#160; </div>
<div class="line"><a name="l10130"></a><span class="lineno">10130</span>&#160;$   <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a>();</div>
<div class="line"><a name="l10131"></a><span class="lineno">10131</span>&#160; </div>
<div class="line"><a name="l10132"></a><span class="lineno">10132</span>&#160;    <span class="comment">// Indicate that we are destroyed</span></div>
<div class="line"><a name="l10133"></a><span class="lineno">10133</span>&#160; </div>
<div class="line"><a name="l10134"></a><span class="lineno">10134</span>&#160;$   _txCanvas_Window = NULL;</div>
<div class="line"><a name="l10135"></a><span class="lineno">10135</span>&#160; </div>
<div class="line"><a name="l10136"></a><span class="lineno">10136</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10137"></a><span class="lineno">10137</span>&#160;    }</div>
<div class="line"><a name="l10138"></a><span class="lineno">10138</span>&#160; </div>
<div class="line"><a name="l10139"></a><span class="lineno">10139</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10140"></a><span class="lineno">10140</span>&#160; </div>
<div class="line"><a name="l10141"></a><span class="lineno">10141</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnCLOSE (HWND wnd)  <span class="comment">//-V2009 //-V2558</span></div>
<div class="line"><a name="l10142"></a><span class="lineno">10142</span>&#160;    {</div>
<div class="line"><a name="l10143"></a><span class="lineno">10143</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (wnd)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10144"></a><span class="lineno">10144</span>&#160;$   <span class="keywordflow">if</span> (!_txCanvas_OK())           <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10145"></a><span class="lineno">10145</span>&#160; </div>
<div class="line"><a name="l10146"></a><span class="lineno">10146</span>&#160;$   <span class="keywordflow">if</span> (_txMain &amp;&amp; _txRunning &amp;&amp;</div>
<div class="line"><a name="l10147"></a><span class="lineno">10147</span>&#160;        <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (<span class="stringliteral">&quot;Функция main() не завершена. Программа все еще работает. Прервать аварийно?\n\n&quot;</span></div>
<div class="line"><a name="l10148"></a><span class="lineno">10148</span>&#160;                      <span class="stringliteral">&quot;Лучше подождать, когда main() завершится - это отображается в заголовке окна.&quot;</span>,</div>
<div class="line"><a name="l10149"></a><span class="lineno">10149</span>&#160;                      <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a> (<span class="keyword">false</span>), MB_YESNOCANCEL | MB_ICONSTOP) != IDYES) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10150"></a><span class="lineno">10150</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10151"></a><span class="lineno">10151</span>&#160;    }</div>
<div class="line"><a name="l10152"></a><span class="lineno">10152</span>&#160; </div>
<div class="line"><a name="l10153"></a><span class="lineno">10153</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10154"></a><span class="lineno">10154</span>&#160; </div>
<div class="line"><a name="l10155"></a><span class="lineno">10155</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnTIMER (HWND wnd, WPARAM)</div>
<div class="line"><a name="l10156"></a><span class="lineno">10156</span>&#160;    {</div>
<div class="line"><a name="l10157"></a><span class="lineno">10157</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (wnd)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10158"></a><span class="lineno">10158</span>&#160; </div>
<div class="line"><a name="l10159"></a><span class="lineno">10159</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_RefreshLock &gt; 0 || !_txRunning) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10160"></a><span class="lineno">10160</span>&#160; </div>
<div class="line"><a name="l10161"></a><span class="lineno">10161</span>&#160;$   InvalidateRect (wnd, NULL, <span class="keyword">false</span>) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10162"></a><span class="lineno">10162</span>&#160;$   UpdateWindow   (wnd)              <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10163"></a><span class="lineno">10163</span>&#160; </div>
<div class="line"><a name="l10164"></a><span class="lineno">10164</span>&#160;$   return true;</div>
<div class="line"><a name="l10165"></a><span class="lineno">10165</span>&#160;    }</div>
<div class="line"><a name="l10166"></a><span class="lineno">10166</span>&#160; </div>
<div class="line"><a name="l10167"></a><span class="lineno">10167</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10168"></a><span class="lineno">10168</span>&#160; </div>
<div class="line"><a name="l10169"></a><span class="lineno">10169</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnPAINT (HWND wnd)</div>
<div class="line"><a name="l10170"></a><span class="lineno">10170</span>&#160;    {</div>
<div class="line"><a name="l10171"></a><span class="lineno">10171</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (wnd)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10172"></a><span class="lineno">10172</span>&#160;$   <span class="keywordflow">if</span> (!_txCanvas_OK())           <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10173"></a><span class="lineno">10173</span>&#160; </div>
<div class="line"><a name="l10174"></a><span class="lineno">10174</span>&#160;$   <span class="keywordtype">bool</span> forceRedraw = GetAsyncKeyState (VK_MENU)  &amp;&amp; GetAsyncKeyState (VK_CONTROL) &amp;&amp;</div>
<div class="line"><a name="l10175"></a><span class="lineno">10175</span>&#160;                       GetAsyncKeyState (VK_SHIFT) &amp;&amp; GetAsyncKeyState (VK_SNAPSHOT);</div>
<div class="line"><a name="l10176"></a><span class="lineno">10176</span>&#160; </div>
<div class="line"><a name="l10177"></a><span class="lineno">10177</span>&#160;$   PAINTSTRUCT ps = {};</div>
<div class="line"><a name="l10178"></a><span class="lineno">10178</span>&#160;$   HDC wndDc = BeginPaint (wnd, &amp;ps);</div>
<div class="line"><a name="l10179"></a><span class="lineno">10179</span>&#160;$   <span class="keywordflow">if</span> (!wndDc) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10180"></a><span class="lineno">10180</span>&#160; </div>
<div class="line"><a name="l10181"></a><span class="lineno">10181</span>&#160;$   HDC dc0 = _txCanvas_BackBuf[0],</div>
<div class="line"><a name="l10182"></a><span class="lineno">10182</span>&#160;        dc1 = _txCanvas_BackBuf[1];</div>
<div class="line"><a name="l10183"></a><span class="lineno">10183</span>&#160; </div>
<div class="line"><a name="l10184"></a><span class="lineno">10184</span>&#160;$   RECT r = {};</div>
<div class="line"><a name="l10185"></a><span class="lineno">10185</span>&#160;$   GetClientRect (wnd, &amp;r) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10186"></a><span class="lineno">10186</span>&#160;$   POINT wndSize = { r.right - r.left, r.bottom - r.top };</div>
<div class="line"><a name="l10187"></a><span class="lineno">10187</span>&#160; </div>
<div class="line"><a name="l10188"></a><span class="lineno">10188</span>&#160;$   POINT dcSize = <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (dc1);</div>
<div class="line"><a name="l10189"></a><span class="lineno">10189</span>&#160; </div>
<div class="line"><a name="l10190"></a><span class="lineno">10190</span>&#160;$   <span class="keywordflow">if</span> ((_txCanvas_RefreshLock &lt;= 0 || forceRedraw) &amp;&amp;</div>
<div class="line"><a name="l10191"></a><span class="lineno">10191</span>&#160;        <a class="code" href="group___misc.html#ga532fa8a55c4f3d4f94ff0fdceae732b2">txLock</a> (<span class="keyword">false</span>))</div>
<div class="line"><a name="l10192"></a><span class="lineno">10192</span>&#160;        {</div>
<div class="line"><a name="l10193"></a><span class="lineno">10193</span>&#160;$       Win32::BitBlt          (dc1,   0, 0, dcSize.x,  dcSize.y,  dc0, 0, 0, SRCCOPY);</div>
<div class="line"><a name="l10194"></a><span class="lineno">10194</span>&#160; </div>
<div class="line"><a name="l10195"></a><span class="lineno">10195</span>&#160;$       <span class="keywordflow">if</span> (_txConsole &gt;= 0)</div>
<div class="line"><a name="l10196"></a><span class="lineno">10196</span>&#160;            {$ _txConsole_Draw (dc1); }</div>
<div class="line"><a name="l10197"></a><span class="lineno">10197</span>&#160; </div>
<div class="line"><a name="l10198"></a><span class="lineno">10198</span>&#160;$       <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a>();</div>
<div class="line"><a name="l10199"></a><span class="lineno">10199</span>&#160;        }</div>
<div class="line"><a name="l10200"></a><span class="lineno">10200</span>&#160; </div>
<div class="line"><a name="l10201"></a><span class="lineno">10201</span>&#160;    <span class="comment">// Magic 100500 value is used to completely block screen refresh.</span></div>
<div class="line"><a name="l10202"></a><span class="lineno">10202</span>&#160;    <span class="comment">// Since no value can be 100500 or above, this condition is always true and the refresh cannot be blocked IRL.</span></div>
<div class="line"><a name="l10203"></a><span class="lineno">10203</span>&#160;    <span class="comment">// Do not use 100501 because it may lead to errors on some compilers and possible may crash the compilers</span></div>
<div class="line"><a name="l10204"></a><span class="lineno">10204</span>&#160;    <span class="comment">// themselves.</span></div>
<div class="line"><a name="l10205"></a><span class="lineno">10205</span>&#160;    <span class="comment">// Yes guys, with all your software installed. :(</span></div>
<div class="line"><a name="l10206"></a><span class="lineno">10206</span>&#160; </div>
<div class="line"><a name="l10207"></a><span class="lineno">10207</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_RefreshLock != 100500)</div>
<div class="line"><a name="l10208"></a><span class="lineno">10208</span>&#160;        {</div>
<div class="line"><a name="l10209"></a><span class="lineno">10209</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group___technical.html#gad85278fd5caaf0ce42e307d6ce8d79c5">_txSwapBuffers</a>)</div>
<div class="line"><a name="l10210"></a><span class="lineno">10210</span>&#160;            {</div>
<div class="line"><a name="l10211"></a><span class="lineno">10211</span>&#160;$           <a class="code" href="group___technical.html#gad85278fd5caaf0ce42e307d6ce8d79c5">_txSwapBuffers</a>     (wndDc, 0, 0, wndSize.x, wndSize.y, dc1, 0, 0, dcSize.x, dcSize.y, SRCCOPY);</div>
<div class="line"><a name="l10212"></a><span class="lineno">10212</span>&#160;            }</div>
<div class="line"><a name="l10213"></a><span class="lineno">10213</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dcSize.x == wndSize.x &amp;&amp; dcSize.y == wndSize.y)</div>
<div class="line"><a name="l10214"></a><span class="lineno">10214</span>&#160;            {</div>
<div class="line"><a name="l10215"></a><span class="lineno">10215</span>&#160;$           Win32::BitBlt      (wndDc, 0, 0, wndSize.x, wndSize.y, dc1, 0, 0,                     SRCCOPY);</div>
<div class="line"><a name="l10216"></a><span class="lineno">10216</span>&#160;            }</div>
<div class="line"><a name="l10217"></a><span class="lineno">10217</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l10218"></a><span class="lineno">10218</span>&#160;            {</div>
<div class="line"><a name="l10219"></a><span class="lineno">10219</span>&#160;$           Win32::SetStretchBltMode (wndDc, HALFTONE);</div>
<div class="line"><a name="l10220"></a><span class="lineno">10220</span>&#160;$           Win32::StretchBlt  (wndDc, 0, 0, wndSize.x, wndSize.y, dc1, 0, 0, dcSize.x, dcSize.y, SRCCOPY);</div>
<div class="line"><a name="l10221"></a><span class="lineno">10221</span>&#160;            }</div>
<div class="line"><a name="l10222"></a><span class="lineno">10222</span>&#160;        }</div>
<div class="line"><a name="l10223"></a><span class="lineno">10223</span>&#160; </div>
<div class="line"><a name="l10224"></a><span class="lineno">10224</span>&#160;$   EndPaint (wnd, &amp;ps) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10225"></a><span class="lineno">10225</span>&#160; </div>
<div class="line"><a name="l10226"></a><span class="lineno">10226</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10227"></a><span class="lineno">10227</span>&#160;    }</div>
<div class="line"><a name="l10228"></a><span class="lineno">10228</span>&#160; </div>
<div class="line"><a name="l10229"></a><span class="lineno">10229</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10230"></a><span class="lineno">10230</span>&#160; </div>
<div class="line"><a name="l10231"></a><span class="lineno">10231</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnCHAR (HWND, WPARAM ch, LPARAM info)</div>
<div class="line"><a name="l10232"></a><span class="lineno">10232</span>&#160;    {</div>
<div class="line"><a name="l10233"></a><span class="lineno">10233</span>&#160;$8  INPUT_RECORD evt[2] = {};</div>
<div class="line"><a name="l10234"></a><span class="lineno">10234</span>&#160; </div>
<div class="line"><a name="l10235"></a><span class="lineno">10235</span>&#160;$   evt[0].EventType                        = KEY_EVENT;</div>
<div class="line"><a name="l10236"></a><span class="lineno">10236</span>&#160;$   evt[0].Event.KeyEvent.bKeyDown          = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10237"></a><span class="lineno">10237</span>&#160;$   evt[0].Event.KeyEvent.wRepeatCount      = 1;</div>
<div class="line"><a name="l10238"></a><span class="lineno">10238</span>&#160;$   evt[0].Event.KeyEvent.uChar.AsciiChar   = (char) (ch);</div>
<div class="line"><a name="l10239"></a><span class="lineno">10239</span>&#160;$   evt[0].Event.KeyEvent.wVirtualScanCode  = (WORD) (info &gt;&gt; 16);</div>
<div class="line"><a name="l10240"></a><span class="lineno">10240</span>&#160;$   evt[0].Event.KeyEvent.wVirtualKeyCode   = (WORD) MapVirtualKey ((WORD) (info &gt;&gt; 16), 3);  <span class="comment">// 3 == MAPVK_VSC_TO_VK_EX</span></div>
<div class="line"><a name="l10241"></a><span class="lineno">10241</span>&#160;$   evt[0].Event.KeyEvent.dwControlKeyState = 0;</div>
<div class="line"><a name="l10242"></a><span class="lineno">10242</span>&#160; </div>
<div class="line"><a name="l10243"></a><span class="lineno">10243</span>&#160;$   evt[1] = evt[0];</div>
<div class="line"><a name="l10244"></a><span class="lineno">10244</span>&#160;$   evt[1].Event.KeyEvent.bKeyDown          = <span class="keyword">false</span>;</div>
<div class="line"><a name="l10245"></a><span class="lineno">10245</span>&#160; </div>
<div class="line"><a name="l10246"></a><span class="lineno">10246</span>&#160;$   DWORD written = 0;</div>
<div class="line"><a name="l10247"></a><span class="lineno">10247</span>&#160;$   WriteConsoleInput (GetStdHandle (STD_INPUT_HANDLE),  evt, 2, &amp;written);</div>
<div class="line"><a name="l10248"></a><span class="lineno">10248</span>&#160; </div>
<div class="line"><a name="l10249"></a><span class="lineno">10249</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10250"></a><span class="lineno">10250</span>&#160;    }</div>
<div class="line"><a name="l10251"></a><span class="lineno">10251</span>&#160; </div>
<div class="line"><a name="l10252"></a><span class="lineno">10252</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10253"></a><span class="lineno">10253</span>&#160; </div>
<div class="line"><a name="l10254"></a><span class="lineno">10254</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnKEY (HWND, WPARAM vk, LPARAM info, <span class="keywordtype">bool</span> down)</div>
<div class="line"><a name="l10255"></a><span class="lineno">10255</span>&#160;    {</div>
<div class="line"><a name="l10256"></a><span class="lineno">10256</span>&#160;$8  INPUT_RECORD evt = {};</div>
<div class="line"><a name="l10257"></a><span class="lineno">10257</span>&#160; </div>
<div class="line"><a name="l10258"></a><span class="lineno">10258</span>&#160;$   evt.EventType                           = KEY_EVENT;</div>
<div class="line"><a name="l10259"></a><span class="lineno">10259</span>&#160;$   evt.Event.KeyEvent.bKeyDown             = down;</div>
<div class="line"><a name="l10260"></a><span class="lineno">10260</span>&#160;$   evt.Event.KeyEvent.wRepeatCount         = 1;</div>
<div class="line"><a name="l10261"></a><span class="lineno">10261</span>&#160;$   evt.Event.KeyEvent.uChar.AsciiChar      = (char)  MapVirtualKey ((WORD) vk, 2);           <span class="comment">// 2 == MAPVK_VK_TO_CHAR</span></div>
<div class="line"><a name="l10262"></a><span class="lineno">10262</span>&#160;$   evt.Event.KeyEvent.wVirtualScanCode     = (WORD)  (info &gt;&gt; 16);</div>
<div class="line"><a name="l10263"></a><span class="lineno">10263</span>&#160;$   evt.Event.KeyEvent.wVirtualKeyCode      = (WORD)  vk;</div>
<div class="line"><a name="l10264"></a><span class="lineno">10264</span>&#160;$   evt.Event.KeyEvent.dwControlKeyState    = (DWORD) (info &amp; (1 &lt;&lt; (24-1)))? ENHANCED_KEY : 0;</div>
<div class="line"><a name="l10265"></a><span class="lineno">10265</span>&#160; </div>
<div class="line"><a name="l10266"></a><span class="lineno">10266</span>&#160;$   <span class="keywordflow">if</span> (evt.Event.KeyEvent.uChar.AsciiChar) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">// Let TranslateMessage() and WM_CHAR do the job</span></div>
<div class="line"><a name="l10267"></a><span class="lineno">10267</span>&#160; </div>
<div class="line"><a name="l10268"></a><span class="lineno">10268</span>&#160;$   DWORD written = 0;</div>
<div class="line"><a name="l10269"></a><span class="lineno">10269</span>&#160;$   WriteConsoleInput (GetStdHandle (STD_INPUT_HANDLE), &amp;evt, 1, &amp;written);</div>
<div class="line"><a name="l10270"></a><span class="lineno">10270</span>&#160; </div>
<div class="line"><a name="l10271"></a><span class="lineno">10271</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10272"></a><span class="lineno">10272</span>&#160;    }</div>
<div class="line"><a name="l10273"></a><span class="lineno">10273</span>&#160; </div>
<div class="line"><a name="l10274"></a><span class="lineno">10274</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10275"></a><span class="lineno">10275</span>&#160; </div>
<div class="line"><a name="l10276"></a><span class="lineno">10276</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnMOUSEMOVE (HWND wnd, WPARAM buttons, LPARAM coords)</div>
<div class="line"><a name="l10277"></a><span class="lineno">10277</span>&#160;    {</div>
<div class="line"><a name="l10278"></a><span class="lineno">10278</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (wnd)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10279"></a><span class="lineno">10279</span>&#160;$   <span class="keywordflow">if</span> (!_txCanvas_OK())           <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10280"></a><span class="lineno">10280</span>&#160; </div>
<div class="line"><a name="l10281"></a><span class="lineno">10281</span>&#160;$   <span class="keywordflow">if</span> (_txMousePos.x == -1 &amp;&amp; _txMousePos.y == -1)</div>
<div class="line"><a name="l10282"></a><span class="lineno">10282</span>&#160;        {</div>
<div class="line"><a name="l10283"></a><span class="lineno">10283</span>&#160;$       TRACKMOUSEEVENT track = { <span class="keyword">sizeof</span> (track), TME_HOVER | TME_LEAVE, wnd, HOVER_DEFAULT };</div>
<div class="line"><a name="l10284"></a><span class="lineno">10284</span>&#160;$       TrackMouseEvent (&amp;track);</div>
<div class="line"><a name="l10285"></a><span class="lineno">10285</span>&#160;        }</div>
<div class="line"><a name="l10286"></a><span class="lineno">10286</span>&#160; </div>
<div class="line"><a name="l10287"></a><span class="lineno">10287</span>&#160;$   _txMousePos.x   = LOWORD (coords);</div>
<div class="line"><a name="l10288"></a><span class="lineno">10288</span>&#160;$   _txMousePos.y   = HIWORD (coords);</div>
<div class="line"><a name="l10289"></a><span class="lineno">10289</span>&#160;$   _txMouseButtons = (unsigned) buttons;  <span class="comment">//-V202</span></div>
<div class="line"><a name="l10290"></a><span class="lineno">10290</span>&#160; </div>
<div class="line"><a name="l10291"></a><span class="lineno">10291</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10292"></a><span class="lineno">10292</span>&#160;    }</div>
<div class="line"><a name="l10293"></a><span class="lineno">10293</span>&#160; </div>
<div class="line"><a name="l10294"></a><span class="lineno">10294</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10295"></a><span class="lineno">10295</span>&#160; </div>
<div class="line"><a name="l10296"></a><span class="lineno">10296</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnMOUSELEAVE (HWND)</div>
<div class="line"><a name="l10297"></a><span class="lineno">10297</span>&#160;    {</div>
<div class="line"><a name="l10298"></a><span class="lineno">10298</span>&#160;$8  _txMousePos.x   = -1;</div>
<div class="line"><a name="l10299"></a><span class="lineno">10299</span>&#160;$   _txMousePos.y   = -1;</div>
<div class="line"><a name="l10300"></a><span class="lineno">10300</span>&#160;$   _txMouseButtons = 0;</div>
<div class="line"><a name="l10301"></a><span class="lineno">10301</span>&#160; </div>
<div class="line"><a name="l10302"></a><span class="lineno">10302</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10303"></a><span class="lineno">10303</span>&#160;    }</div>
<div class="line"><a name="l10304"></a><span class="lineno">10304</span>&#160; </div>
<div class="line"><a name="l10305"></a><span class="lineno">10305</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10306"></a><span class="lineno">10306</span>&#160; </div>
<div class="line"><a name="l10307"></a><span class="lineno">10307</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnCREATEWND (HWND, WPARAM, LPARAM lpar)</div>
<div class="line"><a name="l10308"></a><span class="lineno">10308</span>&#160;    {</div>
<div class="line"><a name="l10309"></a><span class="lineno">10309</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (lpar)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10310"></a><span class="lineno">10310</span>&#160; </div>
<div class="line"><a name="l10311"></a><span class="lineno">10311</span>&#160;$   <span class="keyword">const</span> CREATESTRUCT* create = (CREATESTRUCT*) lpar;</div>
<div class="line"><a name="l10312"></a><span class="lineno">10312</span>&#160; </div>
<div class="line"><a name="l10313"></a><span class="lineno">10313</span>&#160;$   HWND wnd = CreateWindowEx (create-&gt;dwExStyle, create-&gt;lpszClass, create-&gt;lpszName, create-&gt;style,</div>
<div class="line"><a name="l10314"></a><span class="lineno">10314</span>&#160;                               create-&gt;x, create-&gt;y, create-&gt;cx, create-&gt;cy,</div>
<div class="line"><a name="l10315"></a><span class="lineno">10315</span>&#160;                               create-&gt;hwndParent, create-&gt;hMenu, NULL, create-&gt;lpCreateParams);</div>
<div class="line"><a name="l10316"></a><span class="lineno">10316</span>&#160; </div>
<div class="line"><a name="l10317"></a><span class="lineno">10317</span>&#160;$   *(HWND*) create-&gt;hInstance = wnd;</div>
<div class="line"><a name="l10318"></a><span class="lineno">10318</span>&#160; </div>
<div class="line"><a name="l10319"></a><span class="lineno">10319</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10320"></a><span class="lineno">10320</span>&#160;    }</div>
<div class="line"><a name="l10321"></a><span class="lineno">10321</span>&#160; </div>
<div class="line"><a name="l10322"></a><span class="lineno">10322</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10323"></a><span class="lineno">10323</span>&#160; </div>
<div class="line"><a name="l10324"></a><span class="lineno">10324</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnDESTROYWND (HWND, WPARAM, LPARAM lpar)</div>
<div class="line"><a name="l10325"></a><span class="lineno">10325</span>&#160;    {</div>
<div class="line"><a name="l10326"></a><span class="lineno">10326</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (lpar)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10327"></a><span class="lineno">10327</span>&#160; </div>
<div class="line"><a name="l10328"></a><span class="lineno">10328</span>&#160;$   DestroyWindow ((HWND) lpar);</div>
<div class="line"><a name="l10329"></a><span class="lineno">10329</span>&#160; </div>
<div class="line"><a name="l10330"></a><span class="lineno">10330</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10331"></a><span class="lineno">10331</span>&#160;    }</div>
<div class="line"><a name="l10332"></a><span class="lineno">10332</span>&#160; </div>
<div class="line"><a name="l10333"></a><span class="lineno">10333</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10334"></a><span class="lineno">10334</span>&#160; </div>
<div class="line"><a name="l10335"></a><span class="lineno">10335</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnCmdCONSOLE (HWND wnd, WPARAM cmd)</div>
<div class="line"><a name="l10336"></a><span class="lineno">10336</span>&#160;    {</div>
<div class="line"><a name="l10337"></a><span class="lineno">10337</span>&#160;$8  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (wnd)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10338"></a><span class="lineno">10338</span>&#160; </div>
<div class="line"><a name="l10339"></a><span class="lineno">10339</span>&#160;$   HWND console = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l10340"></a><span class="lineno">10340</span>&#160;$   <span class="keywordflow">if</span> (!console) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10341"></a><span class="lineno">10341</span>&#160; </div>
<div class="line"><a name="l10342"></a><span class="lineno">10342</span>&#160;$   <span class="keywordtype">bool</span> visible = !!IsWindowVisible (console);</div>
<div class="line"><a name="l10343"></a><span class="lineno">10343</span>&#160; </div>
<div class="line"><a name="l10344"></a><span class="lineno">10344</span>&#160;$   ShowWindow (console, visible? SW_HIDE : SW_RESTORE);</div>
<div class="line"><a name="l10345"></a><span class="lineno">10345</span>&#160; </div>
<div class="line"><a name="l10346"></a><span class="lineno">10346</span>&#160;$   visible = !!IsWindowVisible (console);</div>
<div class="line"><a name="l10347"></a><span class="lineno">10347</span>&#160;$   CheckMenuItem (GetSystemMenu (wnd, <span class="keyword">false</span>), (<span class="keywordtype">int</span>) cmd, visible? MF_CHECKED : MF_UNCHECKED);  <span class="comment">//-V202</span></div>
<div class="line"><a name="l10348"></a><span class="lineno">10348</span>&#160; </div>
<div class="line"><a name="l10349"></a><span class="lineno">10349</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10350"></a><span class="lineno">10350</span>&#160;    }</div>
<div class="line"><a name="l10351"></a><span class="lineno">10351</span>&#160; </div>
<div class="line"><a name="l10352"></a><span class="lineno">10352</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10353"></a><span class="lineno">10353</span>&#160; </div>
<div class="line"><a name="l10354"></a><span class="lineno">10354</span>&#160;<span class="keywordtype">bool</span> _txCanvas_OnCmdABOUT (HWND, WPARAM)</div>
<div class="line"><a name="l10355"></a><span class="lineno">10355</span>&#160;    {</div>
<div class="line"><a name="l10356"></a><span class="lineno">10356</span>&#160;$8  <span class="comment">//{ Overriding the missing names, if the set is uncomplete</span></div>
<div class="line"><a name="l10357"></a><span class="lineno">10357</span>&#160; </div>
<div class="line"><a name="l10358"></a><span class="lineno">10358</span>&#160;<span class="preprocessor">    #if defined (__MODULE)</span></div>
<div class="line"><a name="l10359"></a><span class="lineno">10359</span>&#160;<span class="preprocessor">        #define ABOUT_NAME_    __MODULE</span></div>
<div class="line"><a name="l10360"></a><span class="lineno">10360</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l10361"></a><span class="lineno">10361</span>&#160;<span class="preprocessor">        #define ABOUT_NAME_    &quot;TXLib&quot;</span></div>
<div class="line"><a name="l10362"></a><span class="lineno">10362</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l10363"></a><span class="lineno">10363</span>&#160; </div>
<div class="line"><a name="l10364"></a><span class="lineno">10364</span>&#160;<span class="preprocessor">    #if defined (__MODULE) || defined (__VERSION) || defined (__DESCRIPTION) || defined (__AUTHOR)</span></div>
<div class="line"><a name="l10365"></a><span class="lineno">10365</span>&#160; </div>
<div class="line"><a name="l10366"></a><span class="lineno">10366</span>&#160;<span class="preprocessor">        #ifndef __MODULE</span></div>
<div class="line"><a name="l10367"></a><span class="lineno">10367</span>&#160;<span class="preprocessor">        #define __MODULE       &quot;TXLib&quot;</span>                           &quot;\n&quot;  &quot;#define __MODULE to set the name.\n&quot;</div>
<div class="line"><a name="l10368"></a><span class="lineno">10368</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l10369"></a><span class="lineno">10369</span>&#160; </div>
<div class="line"><a name="l10370"></a><span class="lineno">10370</span>&#160;<span class="preprocessor">        #ifndef __VERSION</span></div>
<div class="line"><a name="l10371"></a><span class="lineno">10371</span>&#160;<span class="preprocessor">        #define __VERSION      &quot;(0.000000000).&quot;</span>                  &quot;\n&quot; &quot;#define __VERSION to set the string value.\n&quot;</div>
<div class="line"><a name="l10372"></a><span class="lineno">10372</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l10373"></a><span class="lineno">10373</span>&#160; </div>
<div class="line"><a name="l10374"></a><span class="lineno">10374</span>&#160;<span class="preprocessor">        #ifndef __DESCRIPTION</span></div>
<div class="line"><a name="l10375"></a><span class="lineno">10375</span>&#160;<span class="preprocessor">        #define __DESCRIPTION  &quot;(Да, мне лень задать описание).&quot;</span> &quot;\n&quot; &quot;#define __DESCRIPTION to override project role.\n&quot;</div>
<div class="line"><a name="l10376"></a><span class="lineno">10376</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l10377"></a><span class="lineno">10377</span>&#160; </div>
<div class="line"><a name="l10378"></a><span class="lineno">10378</span>&#160;<span class="preprocessor">        #ifndef __AUTHOR</span></div>
<div class="line"><a name="l10379"></a><span class="lineno">10379</span>&#160;<span class="preprocessor">        #define __AUTHOR       &quot;(Непонятно кто).&quot;</span>                &quot;\n&quot; &quot;#define __AUTHOR to override this name.&quot;</div>
<div class="line"><a name="l10380"></a><span class="lineno">10380</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l10381"></a><span class="lineno">10381</span>&#160; </div>
<div class="line"><a name="l10382"></a><span class="lineno">10382</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l10383"></a><span class="lineno">10383</span>&#160;    <span class="comment">//}</span></div>
<div class="line"><a name="l10384"></a><span class="lineno">10384</span>&#160; </div>
<div class="line"><a name="l10385"></a><span class="lineno">10385</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span> text[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l10386"></a><span class="lineno">10386</span>&#160; </div>
<div class="line"><a name="l10387"></a><span class="lineno">10387</span>&#160;$   _tx_snprintf_s (text, <span class="keyword">sizeof</span> (text) - 1,</div>
<div class="line"><a name="l10388"></a><span class="lineno">10388</span>&#160; </div>
<div class="line"><a name="l10389"></a><span class="lineno">10389</span>&#160;                    <span class="stringliteral">&quot;Application:\n\n&quot;</span></div>
<div class="line"><a name="l10390"></a><span class="lineno">10390</span>&#160; </div>
<div class="line"><a name="l10391"></a><span class="lineno">10391</span>&#160;                    #<span class="keywordflow">if</span> defined (__MODULE) || defined (__VERSION) || defined (__DESCRIPTION) || defined (__AUTHOR)</div>
<div class="line"><a name="l10392"></a><span class="lineno">10392</span>&#160;                        __MODULE <span class="stringliteral">&quot; version &quot;</span> __VERSION <span class="stringliteral">&quot;\n&quot;</span> __DESCRIPTION <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;Copyright (c) &quot;</span> __AUTHOR <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l10393"></a><span class="lineno">10393</span>&#160;                    #<span class="keywordflow">else</span></div>
<div class="line"><a name="l10394"></a><span class="lineno">10394</span>&#160;                        <span class="stringliteral">&quot;Здесь могла бы быть Ваша реклама :)\n&quot;</span></div>
<div class="line"><a name="l10395"></a><span class="lineno">10395</span>&#160;                        <span class="stringliteral">&quot;#define __MODULE to \&quot;your program name\&quot; before including TXLib.h to use this billboard...\n&quot;</span></div>
<div class="line"><a name="l10396"></a><span class="lineno">10396</span>&#160;                    #endif</div>
<div class="line"><a name="l10397"></a><span class="lineno">10397</span>&#160; </div>
<div class="line"><a name="l10398"></a><span class="lineno">10398</span>&#160;                    <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;%s&quot;</span>, _txAppInfo());</div>
<div class="line"><a name="l10399"></a><span class="lineno">10399</span>&#160; </div>
<div class="line"><a name="l10400"></a><span class="lineno">10400</span>&#160;$   <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (text, <span class="stringliteral">&quot;About &quot;</span> ABOUT_NAME_, MB_ICONINFORMATION);</div>
<div class="line"><a name="l10401"></a><span class="lineno">10401</span>&#160; </div>
<div class="line"><a name="l10402"></a><span class="lineno">10402</span>&#160;    <span class="comment">// And a bit of HTTP-code in C++ function:</span></div>
<div class="line"><a name="l10403"></a><span class="lineno">10403</span>&#160; </div>
<div class="line"><a name="l10404"></a><span class="lineno">10404</span>&#160;    <span class="keywordflow">goto</span> http;</div>
<div class="line"><a name="l10405"></a><span class="lineno">10405</span>&#160;    http:<span class="comment">//sizeof.livejournal.com</span></div>
<div class="line"><a name="l10406"></a><span class="lineno">10406</span>&#160; </div>
<div class="line"><a name="l10407"></a><span class="lineno">10407</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10408"></a><span class="lineno">10408</span>&#160; </div>
<div class="line"><a name="l10409"></a><span class="lineno">10409</span>&#160;<span class="preprocessor">    #undef ABOUT_NAME_</span></div>
<div class="line"><a name="l10410"></a><span class="lineno">10410</span>&#160;    }</div>
<div class="line"><a name="l10411"></a><span class="lineno">10411</span>&#160; </div>
<div class="line"><a name="l10412"></a><span class="lineno">10412</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l10413"></a><span class="lineno">10413</span>&#160; </div>
<div class="line"><a name="l10415"></a><span class="lineno">10415</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l10416"></a><span class="lineno">10416</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10417"></a><span class="lineno">10417</span>&#160; </div>
<div class="line"><a name="l10418"></a><span class="lineno">10418</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10419"></a><span class="lineno">10419</span>&#160;<span class="comment">//{          Console-support functions           (_txConsole...)</span></div>
<div class="line"><a name="l10421"></a><span class="lineno">10421</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10423"></a><span class="lineno">10423</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l10424"></a><span class="lineno">10424</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l10425"></a><span class="lineno">10425</span>&#160; </div>
<div class="line"><a name="l10426"></a><span class="lineno">10426</span>&#160;HWND _txConsole_Attach()</div>
<div class="line"><a name="l10427"></a><span class="lineno">10427</span>&#160;    {</div>
<div class="line"><a name="l10428"></a><span class="lineno">10428</span>&#160;$1  HWND console = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l10429"></a><span class="lineno">10429</span>&#160; </div>
<div class="line"><a name="l10430"></a><span class="lineno">10430</span>&#160;$   <span class="keywordflow">if</span> (!console)</div>
<div class="line"><a name="l10431"></a><span class="lineno">10431</span>&#160;        {</div>
<div class="line"><a name="l10432"></a><span class="lineno">10432</span>&#160;$       <span class="keywordtype">bool</span> minimizeConsole = ((<a class="code" href="group___technical.html#ga82c63be7c47e2b13e5b6f7661cc3fbe4">TX_CONSOLE_MODE</a>) == SW_HIDE &amp;&amp; !_txIsConsoleSubsystem());</div>
<div class="line"><a name="l10433"></a><span class="lineno">10433</span>&#160; </div>
<div class="line"><a name="l10434"></a><span class="lineno">10434</span>&#160;$       Win32::TEB* teb = (Win32::TEB*) NtCurrentTeb();</div>
<div class="line"><a name="l10435"></a><span class="lineno">10435</span>&#160;$       assert (teb);</div>
<div class="line"><a name="l10436"></a><span class="lineno">10436</span>&#160;$       assert (teb-&gt;ProcessEnvironmentBlock);</div>
<div class="line"><a name="l10437"></a><span class="lineno">10437</span>&#160; </div>
<div class="line"><a name="l10438"></a><span class="lineno">10438</span>&#160;$       Win32::RTL_USER_PROCESS_PARAMETERS* params = teb-&gt;ProcessEnvironmentBlock-&gt;ProcessParameters;</div>
<div class="line"><a name="l10439"></a><span class="lineno">10439</span>&#160;$       assert (params);</div>
<div class="line"><a name="l10440"></a><span class="lineno">10440</span>&#160; </div>
<div class="line"><a name="l10441"></a><span class="lineno">10441</span>&#160;$       <span class="keywordflow">if</span> (minimizeConsole)  <span class="comment">// The fact that ShowWindow parameter of the program&#39;s console is taken from calling</span></div>
<div class="line"><a name="l10442"></a><span class="lineno">10442</span>&#160;                              <span class="comment">// process&#39; STARTUPINFO, was researched from Windows XP sources. See SetUpConsoleInfo()</span></div>
<div class="line"><a name="l10443"></a><span class="lineno">10443</span>&#160;                              <span class="comment">// in windows\core\ntcon\client\dllinit.c. No one can miss stealing Windows sources. :(</span></div>
<div class="line"><a name="l10444"></a><span class="lineno">10444</span>&#160;                              <span class="comment">// Thank you Matt Pietrek, the author of &quot;Undocumented Windows&quot;. Use the Source, Luke!..</span></div>
<div class="line"><a name="l10445"></a><span class="lineno">10445</span>&#160;            {</div>
<div class="line"><a name="l10446"></a><span class="lineno">10446</span>&#160;$           params-&gt;dwFlags    |= STARTF_USESHOWWINDOW;</div>
<div class="line"><a name="l10447"></a><span class="lineno">10447</span>&#160;$           params-&gt;wShowWindow = SW_MINIMIZE;</div>
<div class="line"><a name="l10448"></a><span class="lineno">10448</span>&#160;            }</div>
<div class="line"><a name="l10449"></a><span class="lineno">10449</span>&#160; </div>
<div class="line"><a name="l10450"></a><span class="lineno">10450</span>&#160;$       AllocConsole();</div>
<div class="line"><a name="l10451"></a><span class="lineno">10451</span>&#160;$       console = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l10452"></a><span class="lineno">10452</span>&#160;        }</div>
<div class="line"><a name="l10453"></a><span class="lineno">10453</span>&#160; </div>
<div class="line"><a name="l10454"></a><span class="lineno">10454</span>&#160;$   <span class="keywordflow">if</span> (!console) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l10455"></a><span class="lineno">10455</span>&#160; </div>
<div class="line"><a name="l10456"></a><span class="lineno">10456</span>&#160;$   txSetLocale();                                <span class="comment">// Устанавливаем русскую кодовую страницу для консоли Windows</span></div>
<div class="line"><a name="l10457"></a><span class="lineno">10457</span>&#160; </div>
<div class="line"><a name="l10458"></a><span class="lineno">10458</span>&#160;$   _txConsole_SetUnicodeFont();                  <span class="comment">// Впечатлительным лучше сюда не смотреть.</span></div>
<div class="line"><a name="l10459"></a><span class="lineno">10459</span>&#160; </div>
<div class="line"><a name="l10460"></a><span class="lineno">10460</span>&#160;$   <span class="keywordflow">if</span> (!_txIsConsoleSubsystem())</div>
<div class="line"><a name="l10461"></a><span class="lineno">10461</span>&#160;        {$ txReopenStdio(); }                     <span class="comment">// Переоткрываем потоки ввода-вывода, если subsystem != console</span></div>
<div class="line"><a name="l10462"></a><span class="lineno">10462</span>&#160; </div>
<div class="line"><a name="l10463"></a><span class="lineno">10463</span>&#160;$   <span class="keywordflow">return</span> console;</div>
<div class="line"><a name="l10464"></a><span class="lineno">10464</span>&#160;    }</div>
<div class="line"><a name="l10465"></a><span class="lineno">10465</span>&#160; </div>
<div class="line"><a name="l10466"></a><span class="lineno">10466</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10467"></a><span class="lineno">10467</span>&#160; </div>
<div class="line"><a name="l10468"></a><span class="lineno">10468</span>&#160;<span class="keywordtype">int</span> txSetLocale (<span class="keywordtype">int</span> codepage <span class="comment">/*= _TX_CODEPAGE*/</span>,</div>
<div class="line"><a name="l10469"></a><span class="lineno">10469</span>&#160;                 <span class="keyword">const</span> <span class="keywordtype">char</span> locale[] <span class="comment">/*= _TX_LOCALE*/</span>, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span> wLocale[] <span class="comment">/*= _TX_WLOCALE*/</span>)</div>
<div class="line"><a name="l10470"></a><span class="lineno">10470</span>&#160;    {</div>
<div class="line"><a name="l10471"></a><span class="lineno">10471</span>&#160;$1  <span class="keywordtype">int</span> oldPage = GetConsoleOutputCP();</div>
<div class="line"><a name="l10472"></a><span class="lineno">10472</span>&#160; </div>
<div class="line"><a name="l10473"></a><span class="lineno">10473</span>&#160;    <span class="comment">// Устанавливаем нужную кодовую страницу для консоли Windows</span></div>
<div class="line"><a name="l10474"></a><span class="lineno">10474</span>&#160; </div>
<div class="line"><a name="l10475"></a><span class="lineno">10475</span>&#160;$   <span class="keywordflow">if</span> (codepage)</div>
<div class="line"><a name="l10476"></a><span class="lineno">10476</span>&#160;        {</div>
<div class="line"><a name="l10477"></a><span class="lineno">10477</span>&#160;$       SetConsoleCP       (codepage);</div>
<div class="line"><a name="l10478"></a><span class="lineno">10478</span>&#160;$       SetConsoleOutputCP (codepage);</div>
<div class="line"><a name="l10479"></a><span class="lineno">10479</span>&#160;        }</div>
<div class="line"><a name="l10480"></a><span class="lineno">10480</span>&#160; </div>
<div class="line"><a name="l10481"></a><span class="lineno">10481</span>&#160;    <span class="comment">// Устанавливаем нужную кодовую страницу для стандартной библиотеки, иначе не будут работать Unicode-версии</span></div>
<div class="line"><a name="l10482"></a><span class="lineno">10482</span>&#160;    <span class="comment">// функций (wprintf, ...). Если компилите с помощью gcc и собираетесь использовать L&quot;unicode-строки&quot; с определенным</span></div>
<div class="line"><a name="l10483"></a><span class="lineno">10483</span>&#160;    <span class="comment">// языком, укажите опции в командной строке компилятора g++: -finput-charset=NNNN -fexec-charset=NNNN, где NNNN -</span></div>
<div class="line"><a name="l10484"></a><span class="lineno">10484</span>&#160;    <span class="comment">// обозначение кодовой страницы (например, для русского языка - CP1251).</span></div>
<div class="line"><a name="l10485"></a><span class="lineno">10485</span>&#160; </div>
<div class="line"><a name="l10486"></a><span class="lineno">10486</span>&#160;$   <span class="keywordflow">if</span> (locale)</div>
<div class="line"><a name="l10487"></a><span class="lineno">10487</span>&#160;        {</div>
<div class="line"><a name="l10488"></a><span class="lineno">10488</span>&#160;$       setlocale (LC_ALL,     locale);</div>
<div class="line"><a name="l10489"></a><span class="lineno">10489</span>&#160;$       setlocale (LC_NUMERIC, <span class="stringliteral">&quot;C&quot;</span>);              <span class="comment">// Return to decimal point (3.14) instead of comma (3,14) in floating numbers</span></div>
<div class="line"><a name="l10490"></a><span class="lineno">10490</span>&#160;        }</div>
<div class="line"><a name="l10491"></a><span class="lineno">10491</span>&#160; </div>
<div class="line"><a name="l10492"></a><span class="lineno">10492</span>&#160;<span class="preprocessor">    #ifndef __CYGWIN__</span></div>
<div class="line"><a name="l10493"></a><span class="lineno">10493</span>&#160; </div>
<div class="line"><a name="l10494"></a><span class="lineno">10494</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">bool</span> wine = !!Win32::wine_get_version;  <span class="comment">// Linux::Wine v1.2.2+ compatibility.</span></div>
<div class="line"><a name="l10495"></a><span class="lineno">10495</span>&#160; </div>
<div class="line"><a name="l10496"></a><span class="lineno">10496</span>&#160;$   <span class="keywordflow">if</span> (wLocale &amp;&amp; !wine)</div>
<div class="line"><a name="l10497"></a><span class="lineno">10497</span>&#160;        {</div>
<div class="line"><a name="l10498"></a><span class="lineno">10498</span>&#160;$       _wsetlocale (LC_ALL,     wLocale);</div>
<div class="line"><a name="l10499"></a><span class="lineno">10499</span>&#160;$       _wsetlocale (LC_NUMERIC, L<span class="stringliteral">&quot;C&quot;</span>);           <span class="comment">// L&quot;C&quot; (see above)</span></div>
<div class="line"><a name="l10500"></a><span class="lineno">10500</span>&#160;        }</div>
<div class="line"><a name="l10501"></a><span class="lineno">10501</span>&#160; </div>
<div class="line"><a name="l10502"></a><span class="lineno">10502</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l10503"></a><span class="lineno">10503</span>&#160; </div>
<div class="line"><a name="l10504"></a><span class="lineno">10504</span>&#160;    (void) wLocale;</div>
<div class="line"><a name="l10505"></a><span class="lineno">10505</span>&#160; </div>
<div class="line"><a name="l10506"></a><span class="lineno">10506</span>&#160;$   <span class="keywordflow">return</span> oldPage;</div>
<div class="line"><a name="l10507"></a><span class="lineno">10507</span>&#160;    }</div>
<div class="line"><a name="l10508"></a><span class="lineno">10508</span>&#160; </div>
<div class="line"><a name="l10509"></a><span class="lineno">10509</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10510"></a><span class="lineno">10510</span>&#160; </div>
<div class="line"><a name="l10511"></a><span class="lineno">10511</span>&#160;<span class="keywordtype">void</span> txReopenStdio()</div>
<div class="line"><a name="l10512"></a><span class="lineno">10512</span>&#160;    {</div>
<div class="line"><a name="l10513"></a><span class="lineno">10513</span>&#160;$1  <span class="comment">// Переоткрываем заново &lt;s&gt;Америку&lt;/s&gt; потоки ввода-вывода</span></div>
<div class="line"><a name="l10514"></a><span class="lineno">10514</span>&#160; </div>
<div class="line"><a name="l10515"></a><span class="lineno">10515</span>&#160;$   fflush (stdout);</div>
<div class="line"><a name="l10516"></a><span class="lineno">10516</span>&#160;$   fflush (stderr);</div>
<div class="line"><a name="l10517"></a><span class="lineno">10517</span>&#160; </div>
<div class="line"><a name="l10518"></a><span class="lineno">10518</span>&#160;$   FILE* f = NULL;</div>
<div class="line"><a name="l10519"></a><span class="lineno">10519</span>&#160; </div>
<div class="line"><a name="l10520"></a><span class="lineno">10520</span>&#160;<span class="preprocessor">    #ifndef __CYGWIN__</span></div>
<div class="line"><a name="l10521"></a><span class="lineno">10521</span>&#160; </div>
<div class="line"><a name="l10522"></a><span class="lineno">10522</span>&#160;$   f = _fdopen (_open_osfhandle ((intptr_t) GetStdHandle (STD_INPUT_HANDLE),  _O_TEXT), <span class="stringliteral">&quot;r&quot;</span>); assert (f); *stdin  = *f;</div>
<div class="line"><a name="l10523"></a><span class="lineno">10523</span>&#160;$   f = _fdopen (_open_osfhandle ((intptr_t) GetStdHandle (STD_OUTPUT_HANDLE), _O_TEXT), <span class="stringliteral">&quot;w&quot;</span>); assert (f); *stdout = *f;</div>
<div class="line"><a name="l10524"></a><span class="lineno">10524</span>&#160;$   f = _fdopen (_open_osfhandle ((intptr_t) GetStdHandle (STD_ERROR_HANDLE),  _O_TEXT), <span class="stringliteral">&quot;w&quot;</span>); assert (f); *stderr = *f;</div>
<div class="line"><a name="l10525"></a><span class="lineno">10525</span>&#160; </div>
<div class="line"><a name="l10526"></a><span class="lineno">10526</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l10527"></a><span class="lineno">10527</span>&#160; </div>
<div class="line"><a name="l10528"></a><span class="lineno">10528</span>&#160;$   f = _fdopen (STDIN_FILENO,  <span class="stringliteral">&quot;r&quot;</span>); assert (f); *stdin  = *f;</div>
<div class="line"><a name="l10529"></a><span class="lineno">10529</span>&#160;$   f = _fdopen (STDOUT_FILENO, <span class="stringliteral">&quot;w&quot;</span>); assert (f); *stdout = *f;</div>
<div class="line"><a name="l10530"></a><span class="lineno">10530</span>&#160;$   f = _fdopen (STDERR_FILENO, <span class="stringliteral">&quot;w&quot;</span>); assert (f); *stderr = *f;</div>
<div class="line"><a name="l10531"></a><span class="lineno">10531</span>&#160; </div>
<div class="line"><a name="l10532"></a><span class="lineno">10532</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l10533"></a><span class="lineno">10533</span>&#160; </div>
<div class="line"><a name="l10534"></a><span class="lineno">10534</span>&#160;$   setvbuf (stdin,  NULL, _IONBF, 0);</div>
<div class="line"><a name="l10535"></a><span class="lineno">10535</span>&#160;$   setvbuf (stdout, NULL, _IONBF, 0);</div>
<div class="line"><a name="l10536"></a><span class="lineno">10536</span>&#160;$   setvbuf (stderr, NULL, _IONBF, 0);</div>
<div class="line"><a name="l10537"></a><span class="lineno">10537</span>&#160; </div>
<div class="line"><a name="l10538"></a><span class="lineno">10538</span>&#160;$   ::std::ios::sync_with_stdio();</div>
<div class="line"><a name="l10539"></a><span class="lineno">10539</span>&#160;    }</div>
<div class="line"><a name="l10540"></a><span class="lineno">10540</span>&#160; </div>
<div class="line"><a name="l10541"></a><span class="lineno">10541</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10542"></a><span class="lineno">10542</span>&#160; </div>
<div class="line"><a name="l10543"></a><span class="lineno">10543</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> _txConsole_OK()</div>
<div class="line"><a name="l10544"></a><span class="lineno">10544</span>&#160;    {</div>
<div class="line"><a name="l10545"></a><span class="lineno">10545</span>&#160;    <span class="keywordflow">return</span> Win32::GetConsoleWindow() != NULL;</div>
<div class="line"><a name="l10546"></a><span class="lineno">10546</span>&#160;    }</div>
<div class="line"><a name="l10547"></a><span class="lineno">10547</span>&#160; </div>
<div class="line"><a name="l10548"></a><span class="lineno">10548</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10549"></a><span class="lineno">10549</span>&#160; </div>
<div class="line"><a name="l10550"></a><span class="lineno">10550</span>&#160;<span class="keywordtype">bool</span> _txConsole_Detach (<span class="keywordtype">bool</span> activate)</div>
<div class="line"><a name="l10551"></a><span class="lineno">10551</span>&#160;    {</div>
<div class="line"><a name="l10552"></a><span class="lineno">10552</span>&#160;$1  HWND console = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l10553"></a><span class="lineno">10553</span>&#160;$   <span class="keywordflow">if</span> (!console) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10554"></a><span class="lineno">10554</span>&#160; </div>
<div class="line"><a name="l10555"></a><span class="lineno">10555</span>&#160;$   EnableWindow (console, <span class="keyword">true</span>);</div>
<div class="line"><a name="l10556"></a><span class="lineno">10556</span>&#160; </div>
<div class="line"><a name="l10557"></a><span class="lineno">10557</span>&#160;$   <span class="keywordflow">if</span> (!IsWindowVisible (console))</div>
<div class="line"><a name="l10558"></a><span class="lineno">10558</span>&#160;        {$ ShowWindow (console, SW_MINIMIZE); }</div>
<div class="line"><a name="l10559"></a><span class="lineno">10559</span>&#160; </div>
<div class="line"><a name="l10560"></a><span class="lineno">10560</span>&#160;$   <span class="keywordflow">if</span> (activate)</div>
<div class="line"><a name="l10561"></a><span class="lineno">10561</span>&#160;        {</div>
<div class="line"><a name="l10562"></a><span class="lineno">10562</span>&#160;$       _txActivateWindow (console, 0xFF);</div>
<div class="line"><a name="l10563"></a><span class="lineno">10563</span>&#160;$       <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10564"></a><span class="lineno">10564</span>&#160;        }</div>
<div class="line"><a name="l10565"></a><span class="lineno">10565</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l10566"></a><span class="lineno">10566</span>&#160;        {</div>
<div class="line"><a name="l10567"></a><span class="lineno">10567</span>&#160;$       <span class="keywordflow">return</span> !!FreeConsole();</div>
<div class="line"><a name="l10568"></a><span class="lineno">10568</span>&#160;        }</div>
<div class="line"><a name="l10569"></a><span class="lineno">10569</span>&#160;    }</div>
<div class="line"><a name="l10570"></a><span class="lineno">10570</span>&#160; </div>
<div class="line"><a name="l10571"></a><span class="lineno">10571</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10572"></a><span class="lineno">10572</span>&#160; </div>
<div class="line"><a name="l10573"></a><span class="lineno">10573</span>&#160;<span class="keywordtype">bool</span> _txConsole_Draw (HDC dc)</div>
<div class="line"><a name="l10574"></a><span class="lineno">10574</span>&#160;    {</div>
<div class="line"><a name="l10575"></a><span class="lineno">10575</span>&#160;$8  <span class="keywordflow">if</span> (_TX_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10576"></a><span class="lineno">10576</span>&#160; </div>
<div class="line"><a name="l10577"></a><span class="lineno">10577</span>&#160;$   HANDLE out = GetStdHandle (STD_OUTPUT_HANDLE);</div>
<div class="line"><a name="l10578"></a><span class="lineno">10578</span>&#160; </div>
<div class="line"><a name="l10579"></a><span class="lineno">10579</span>&#160;$   CONSOLE_SCREEN_BUFFER_INFO con = {};</div>
<div class="line"><a name="l10580"></a><span class="lineno">10580</span>&#160;$   BOOL ok = GetConsoleScreenBufferInfo (out, &amp;con);</div>
<div class="line"><a name="l10581"></a><span class="lineno">10581</span>&#160;$   <span class="keywordflow">if</span> (!ok) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10582"></a><span class="lineno">10582</span>&#160; </div>
<div class="line"><a name="l10583"></a><span class="lineno">10583</span>&#160;$   POINT size = { con.srWindow.Right  - con.srWindow.Left + 1,</div>
<div class="line"><a name="l10584"></a><span class="lineno">10584</span>&#160;                   con.srWindow.Bottom - con.srWindow.Top  + 1 };</div>
<div class="line"><a name="l10585"></a><span class="lineno">10585</span>&#160; </div>
<div class="line"><a name="l10586"></a><span class="lineno">10586</span>&#160;$   SIZE fontSz = { 12, 16 };</div>
<div class="line"><a name="l10587"></a><span class="lineno">10587</span>&#160;$   Win32::GetTextExtentPoint32 (dc, <span class="stringliteral">&quot;W&quot;</span>, 1, &amp;fontSz) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10588"></a><span class="lineno">10588</span>&#160; </div>
<div class="line"><a name="l10589"></a><span class="lineno">10589</span>&#160;$   COLORREF pal [16] = { 0x000000, 0x800000, 0x008000, 0x808000, 0x000080, 0x800080, 0x008080, 0xC0C0C0,</div>
<div class="line"><a name="l10590"></a><span class="lineno">10590</span>&#160;                          0x808080, 0xFF0000, 0x00FF00, 0xFFFF00, 0x0000FF, 0xFF00FF, 0x00FFFF, 0xFFFFFF };</div>
<div class="line"><a name="l10591"></a><span class="lineno">10591</span>&#160; </div>
<div class="line"><a name="l10592"></a><span class="lineno">10592</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">short</span> y = 0; y &lt; size.y; y++)</div>
<div class="line"><a name="l10593"></a><span class="lineno">10593</span>&#160;        {</div>
<div class="line"><a name="l10594"></a><span class="lineno">10594</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">char</span> chr [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a> + 1] = <span class="stringliteral">&quot;&quot;</span>;  <span class="comment">// [con.dwSize.X + 1]; maybe will be truncated</span></div>
<div class="line"><a name="l10595"></a><span class="lineno">10595</span>&#160;        <span class="keyword">static</span> WORD atr [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a> + 1] = {}; <span class="comment">// [con.dwSize.X + 1]; maybe will be truncated</span></div>
<div class="line"><a name="l10596"></a><span class="lineno">10596</span>&#160;        COORD coord = { (short) (con.srWindow.Left), (short) (y + con.srWindow.Top) };</div>
<div class="line"><a name="l10597"></a><span class="lineno">10597</span>&#160;        DWORD read  = 0;</div>
<div class="line"><a name="l10598"></a><span class="lineno">10598</span>&#160; </div>
<div class="line"><a name="l10599"></a><span class="lineno">10599</span>&#160;        <span class="keywordflow">if</span> (!ReadConsoleOutputCharacter (out, chr, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (chr) - 1, coord, &amp;read)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10600"></a><span class="lineno">10600</span>&#160;        <span class="keywordflow">if</span> (!ReadConsoleOutputAttribute (out, atr, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (atr) - 1, coord, &amp;read)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l10601"></a><span class="lineno">10601</span>&#160; </div>
<div class="line"><a name="l10602"></a><span class="lineno">10602</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0, xEnd = size.x; x &lt; size.x; x = xEnd)</div>
<div class="line"><a name="l10603"></a><span class="lineno">10603</span>&#160;            {</div>
<div class="line"><a name="l10604"></a><span class="lineno">10604</span>&#160;            Win32::SetTextColor (dc, pal [ atr[x]       &amp; 0x0F]);</div>
<div class="line"><a name="l10605"></a><span class="lineno">10605</span>&#160;            Win32::SetBkColor   (dc, pal [(atr[x] &gt;&gt; 4) &amp; 0x0F]);</div>
<div class="line"><a name="l10606"></a><span class="lineno">10606</span>&#160;            Win32::SetBkMode    (dc,      (atr[x]       &amp; 0xF0)? OPAQUE : TRANSPARENT);</div>
<div class="line"><a name="l10607"></a><span class="lineno">10607</span>&#160; </div>
<div class="line"><a name="l10608"></a><span class="lineno">10608</span>&#160;            <span class="keywordflow">for</span> (xEnd = x+1; xEnd &lt; size.x &amp;&amp; atr[xEnd] == atr[x]; xEnd++) {;}</div>
<div class="line"><a name="l10609"></a><span class="lineno">10609</span>&#160; </div>
<div class="line"><a name="l10610"></a><span class="lineno">10610</span>&#160;            Win32::TextOut (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (fontSz.cx * (x + con.srWindow.Left)),</div>
<div class="line"><a name="l10611"></a><span class="lineno">10611</span>&#160;                                <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (fontSz.cy *  y), chr + x, xEnd - x) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10612"></a><span class="lineno">10612</span>&#160;            }</div>
<div class="line"><a name="l10613"></a><span class="lineno">10613</span>&#160;        }</div>
<div class="line"><a name="l10614"></a><span class="lineno">10614</span>&#160; </div>
<div class="line"><a name="l10615"></a><span class="lineno">10615</span>&#160;$   Win32::SetTextColor (dc, pal [ con.wAttributes       &amp; 0x0F]);</div>
<div class="line"><a name="l10616"></a><span class="lineno">10616</span>&#160;$   Win32::SetBkColor   (dc, pal [(con.wAttributes &gt;&gt; 4) &amp; 0x0F]);</div>
<div class="line"><a name="l10617"></a><span class="lineno">10617</span>&#160;$   Win32::SetBkMode    (dc, TRANSPARENT);</div>
<div class="line"><a name="l10618"></a><span class="lineno">10618</span>&#160; </div>
<div class="line"><a name="l10619"></a><span class="lineno">10619</span>&#160;$   <span class="keywordflow">if</span> (_txConsole_IsBlinking &amp;&amp;</div>
<div class="line"><a name="l10620"></a><span class="lineno">10620</span>&#160;        <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, con.dwCursorPosition, con.srWindow) &amp;&amp;</div>
<div class="line"><a name="l10621"></a><span class="lineno">10621</span>&#160;        GetTickCount() % <a class="code" href="group___technical.html#gacc95bfbcf7a0f9124e8cd5e80d0b3cd3">_txCursorBlinkInterval</a>*2 &gt; <a class="code" href="group___technical.html#gacc95bfbcf7a0f9124e8cd5e80d0b3cd3">_txCursorBlinkInterval</a> &amp;&amp;</div>
<div class="line"><a name="l10622"></a><span class="lineno">10622</span>&#160;        GetForegroundWindow() == <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>())</div>
<div class="line"><a name="l10623"></a><span class="lineno">10623</span>&#160;        {</div>
<div class="line"><a name="l10624"></a><span class="lineno">10624</span>&#160;$       Win32::TextOut (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (fontSz.cx * (con.dwCursorPosition.X - con.srWindow.Left)),</div>
<div class="line"><a name="l10625"></a><span class="lineno">10625</span>&#160;                            <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (fontSz.cy * (con.dwCursorPosition.Y - con.srWindow.Top)) + 1,</div>
<div class="line"><a name="l10626"></a><span class="lineno">10626</span>&#160;                            <span class="stringliteral">&quot;_&quot;</span>, 1) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10627"></a><span class="lineno">10627</span>&#160;        }</div>
<div class="line"><a name="l10628"></a><span class="lineno">10628</span>&#160; </div>
<div class="line"><a name="l10629"></a><span class="lineno">10629</span>&#160;$   return true;</div>
<div class="line"><a name="l10630"></a><span class="lineno">10630</span>&#160;    }</div>
<div class="line"><a name="l10631"></a><span class="lineno">10631</span>&#160; </div>
<div class="line"><a name="l10632"></a><span class="lineno">10632</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l10633"></a><span class="lineno">10633</span>&#160; </div>
<div class="line"><a name="l10634"></a><span class="lineno">10634</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10635"></a><span class="lineno">10635</span>&#160;<span class="comment">//{          Welcome to the Duck Side! Together we will rule the Bathroom!</span></div>
<div class="line"><a name="l10636"></a><span class="lineno">10636</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10637"></a><span class="lineno">10637</span>&#160; </div>
<div class="line"><a name="l10638"></a><span class="lineno">10638</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l10639"></a><span class="lineno">10639</span>&#160; </div>
<div class="line"><a name="l10640"></a><span class="lineno">10640</span>&#160;<span class="keywordtype">bool</span> _txConsole_SetUnicodeFont()</div>
<div class="line"><a name="l10641"></a><span class="lineno">10641</span>&#160;    {</div>
<div class="line"><a name="l10642"></a><span class="lineno">10642</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">bool</span> wine = !!Win32::wine_get_version;  <span class="comment">// Linux::Wine v1.2.2+ compatibility.</span></div>
<div class="line"><a name="l10643"></a><span class="lineno">10643</span>&#160;                                                  <span class="comment">// Beer compatibility may be added in future versions...</span></div>
<div class="line"><a name="l10644"></a><span class="lineno">10644</span>&#160;$   <span class="keywordflow">if</span> (wine)                                     <span class="comment">// Минздрав РФ предупреждает: чрезмерное употребление wine</span></div>
<div class="line"><a name="l10645"></a><span class="lineno">10645</span>&#160;        {                                         <span class="comment">// вредит Вашему здоровью.</span></div>
<div class="line"><a name="l10646"></a><span class="lineno">10646</span>&#160;$       Win32::GetNumberOfConsoleFonts = NULL;</div>
<div class="line"><a name="l10647"></a><span class="lineno">10647</span>&#160;$       Win32::GetCurrentConsoleFont   = NULL;</div>
<div class="line"><a name="l10648"></a><span class="lineno">10648</span>&#160;$       Win32::SetConsoleFont          = NULL;</div>
<div class="line"><a name="l10649"></a><span class="lineno">10649</span>&#160; </div>
<div class="line"><a name="l10650"></a><span class="lineno">10650</span>&#160;$       <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10651"></a><span class="lineno">10651</span>&#160;        }</div>
<div class="line"><a name="l10652"></a><span class="lineno">10652</span>&#160; </div>
<div class="line"><a name="l10653"></a><span class="lineno">10653</span>&#160;    <span class="comment">// Начиная с Висты все хорошо...</span></div>
<div class="line"><a name="l10654"></a><span class="lineno">10654</span>&#160; </div>
<div class="line"><a name="l10655"></a><span class="lineno">10655</span>&#160;$1  <span class="keywordflow">if</span> (Win32::GetCurrentConsoleFontEx &amp;&amp; Win32::SetCurrentConsoleFontEx)</div>
<div class="line"><a name="l10656"></a><span class="lineno">10656</span>&#160;        {</div>
<div class="line"><a name="l10657"></a><span class="lineno">10657</span>&#160;$       HANDLE out = GetStdHandle (STD_OUTPUT_HANDLE);</div>
<div class="line"><a name="l10658"></a><span class="lineno">10658</span>&#160; </div>
<div class="line"><a name="l10659"></a><span class="lineno">10659</span>&#160;$       Win32::CONSOLE_FONT_INFOEX info = { <span class="keyword">sizeof</span> (info) };</div>
<div class="line"><a name="l10660"></a><span class="lineno">10660</span>&#160;$       <span class="keywordflow">if</span> (!Win32::GetCurrentConsoleFontEx (out, <span class="keyword">false</span>, &amp;info)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10661"></a><span class="lineno">10661</span>&#160; </div>
<div class="line"><a name="l10662"></a><span class="lineno">10662</span>&#160;$       info.FontFamily = 0x36;                                                    <span class="comment">// Unicode fixed-pitch</span></div>
<div class="line"><a name="l10663"></a><span class="lineno">10663</span>&#160;$       <span class="keywordflow">if</span> (!*info.FaceName) info.dwFontSize.Y = (SHORT) (info.dwFontSize.Y + 2);  <span class="comment">// Terminal font is too small</span></div>
<div class="line"><a name="l10664"></a><span class="lineno">10664</span>&#160; </div>
<div class="line"><a name="l10665"></a><span class="lineno">10665</span>&#160;$       <span class="keywordflow">if</span> (wcsncmp (info.FaceName, L<span class="stringliteral">&quot;Consolas&quot;</span>, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (info.FaceName)) != 0)    <span class="comment">// Consolas is allowed too</span></div>
<div class="line"><a name="l10666"></a><span class="lineno">10666</span>&#160;            {$ wcsncpy_s (info.FaceName, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (info.FaceName), L<span class="stringliteral">&quot;Lucida Console&quot;</span>, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (info.FaceName)); }</div>
<div class="line"><a name="l10667"></a><span class="lineno">10667</span>&#160; </div>
<div class="line"><a name="l10668"></a><span class="lineno">10668</span>&#160;$       <span class="keywordflow">return</span> !!Win32::SetCurrentConsoleFontEx (out, <span class="keyword">false</span>, &amp;info);</div>
<div class="line"><a name="l10669"></a><span class="lineno">10669</span>&#160;        }</div>
<div class="line"><a name="l10670"></a><span class="lineno">10670</span>&#160; </div>
<div class="line"><a name="l10671"></a><span class="lineno">10671</span>&#160;    <span class="comment">// ...а до этого все не так сладко</span></div>
<div class="line"><a name="l10672"></a><span class="lineno">10672</span>&#160; </div>
<div class="line"><a name="l10673"></a><span class="lineno">10673</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> uniFont = 10;                  <span class="comment">// The Internet and W2K sources know this magic number</span></div>
<div class="line"><a name="l10674"></a><span class="lineno">10674</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> uniSize = 20;                  <span class="comment">// Size of the font desired, should be &gt; max # of Raster Fonts  //-V2551</span></div>
<div class="line"><a name="l10675"></a><span class="lineno">10675</span>&#160;$   <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l10676"></a><span class="lineno">10676</span>&#160; </div>
<div class="line"><a name="l10677"></a><span class="lineno">10677</span>&#160;    <span class="comment">// Force Windows to use Unicode font by creating and run the console shortcut tuned to use that font.</span></div>
<div class="line"><a name="l10678"></a><span class="lineno">10678</span>&#160; </div>
<div class="line"><a name="l10679"></a><span class="lineno">10679</span>&#160;$   HANDLE out = GetStdHandle (STD_OUTPUT_HANDLE);</div>
<div class="line"><a name="l10680"></a><span class="lineno">10680</span>&#160; </div>
<div class="line"><a name="l10681"></a><span class="lineno">10681</span>&#160;$   <span class="keywordtype">unsigned</span> fonts = _TX_CALL (Win32::GetNumberOfConsoleFonts, ());</div>
<div class="line"><a name="l10682"></a><span class="lineno">10682</span>&#160;$   <span class="keywordflow">if</span> (fonts &amp;&amp; fonts &lt;= uniFont)</div>
<div class="line"><a name="l10683"></a><span class="lineno">10683</span>&#160;        {</div>
<div class="line"><a name="l10684"></a><span class="lineno">10684</span>&#160;$       HRESULT init = Win32::CoInitialize (NULL);</div>
<div class="line"><a name="l10685"></a><span class="lineno">10685</span>&#160;$       <span class="keywordtype">size_t</span> sz = 0;</div>
<div class="line"><a name="l10686"></a><span class="lineno">10686</span>&#160; </div>
<div class="line"><a name="l10687"></a><span class="lineno">10687</span>&#160;$       <span class="keywordtype">char</span> link [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l10688"></a><span class="lineno">10688</span>&#160;$       getenv_s (&amp;sz, link, <span class="keyword">sizeof</span> (link) - 1, <span class="stringliteral">&quot;TEMP&quot;</span>);</div>
<div class="line"><a name="l10689"></a><span class="lineno">10689</span>&#160;$       strncat_s (link, <span class="keyword">sizeof</span> (link), <span class="stringliteral">&quot;\\~txLink.lnk&quot;</span>, <span class="keyword">sizeof</span> (link) - 1);</div>
<div class="line"><a name="l10690"></a><span class="lineno">10690</span>&#160; </div>
<div class="line"><a name="l10691"></a><span class="lineno">10691</span>&#160;$       <span class="keywordtype">char</span> comspec [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l10692"></a><span class="lineno">10692</span>&#160;$       getenv_s (&amp;sz, comspec, <span class="keyword">sizeof</span> (comspec), <span class="stringliteral">&quot;COMSPEC&quot;</span>);</div>
<div class="line"><a name="l10693"></a><span class="lineno">10693</span>&#160; </div>
<div class="line"><a name="l10694"></a><span class="lineno">10694</span>&#160;$       (void) _unlink (link);</div>
<div class="line"><a name="l10695"></a><span class="lineno">10695</span>&#160; </div>
<div class="line"><a name="l10696"></a><span class="lineno">10696</span>&#160;$       _txCreateShortcut (link, comspec, <span class="stringliteral">&quot;/c exit&quot;</span>, NULL, NULL, SW_SHOWMINNOACTIVE, NULL, 0, uniSize) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10697"></a><span class="lineno">10697</span>&#160; </div>
<div class="line"><a name="l10698"></a><span class="lineno">10698</span>&#160;$       ok = (Win32::ShellExecuteA (NULL, NULL, link, NULL, NULL, SW_SHOWMINNOACTIVE) &gt; (<span class="keywordtype">void</span>*)32);  <span class="comment">// Sic!  //-V112 //-V566</span></div>
<div class="line"><a name="l10699"></a><span class="lineno">10699</span>&#160;        <span class="keywordflow">if</span> (ok) {$ _txWaitFor (FindWindow (NULL, <span class="stringliteral">&quot;~txLink&quot;</span>), <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>); }</div>
<div class="line"><a name="l10700"></a><span class="lineno">10700</span>&#160; </div>
<div class="line"><a name="l10701"></a><span class="lineno">10701</span>&#160;$       (void) _unlink (link);</div>
<div class="line"><a name="l10702"></a><span class="lineno">10702</span>&#160; </div>
<div class="line"><a name="l10703"></a><span class="lineno">10703</span>&#160;$       <span class="keywordflow">if</span> (init == S_OK) Win32::CoUninitialize();</div>
<div class="line"><a name="l10704"></a><span class="lineno">10704</span>&#160;        }</div>
<div class="line"><a name="l10705"></a><span class="lineno">10705</span>&#160; </div>
<div class="line"><a name="l10706"></a><span class="lineno">10706</span>&#160;    <span class="comment">// If Unicode font is not already set, do set it.</span></div>
<div class="line"><a name="l10707"></a><span class="lineno">10707</span>&#160; </div>
<div class="line"><a name="l10708"></a><span class="lineno">10708</span>&#160;$   Win32::CONSOLE_FONT_INFO cur = {};</div>
<div class="line"><a name="l10709"></a><span class="lineno">10709</span>&#160;$   _TX_CALL (Win32::GetCurrentConsoleFont, (out, <span class="keyword">false</span>, &amp;cur));</div>
<div class="line"><a name="l10710"></a><span class="lineno">10710</span>&#160; </div>
<div class="line"><a name="l10711"></a><span class="lineno">10711</span>&#160;$   ok &amp;= (cur.nFont &gt;= uniFont);</div>
<div class="line"><a name="l10712"></a><span class="lineno">10712</span>&#160;    <span class="keywordflow">if</span> (!ok) {$ ok &amp;= _TX_CALL (Win32::SetConsoleFont, (out, uniFont)); }</div>
<div class="line"><a name="l10713"></a><span class="lineno">10713</span>&#160; </div>
<div class="line"><a name="l10714"></a><span class="lineno">10714</span>&#160;$   HWND console = Win32::GetConsoleWindow();</div>
<div class="line"><a name="l10715"></a><span class="lineno">10715</span>&#160;$   InvalidateRect (console, NULL, <span class="keyword">false</span>);</div>
<div class="line"><a name="l10716"></a><span class="lineno">10716</span>&#160;$   UpdateWindow   (console);</div>
<div class="line"><a name="l10717"></a><span class="lineno">10717</span>&#160; </div>
<div class="line"><a name="l10718"></a><span class="lineno">10718</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l10719"></a><span class="lineno">10719</span>&#160;    }</div>
<div class="line"><a name="l10720"></a><span class="lineno">10720</span>&#160; </div>
<div class="line"><a name="l10721"></a><span class="lineno">10721</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l10722"></a><span class="lineno">10722</span>&#160; </div>
<div class="line"><a name="l10723"></a><span class="lineno">10723</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10724"></a><span class="lineno">10724</span>&#160;<span class="comment">//{          The assistants to the nightmare. You can use it freely to make your own nightmare sweet.</span></div>
<div class="line"><a name="l10725"></a><span class="lineno">10725</span>&#160; </div>
<div class="line"><a name="l10726"></a><span class="lineno">10726</span>&#160;<span class="preprocessor">#define      _TX_TRY                { goto __tx_try; } __tx_try: { int __tx_error = S_OK; (void)__tx_error;</span></div>
<div class="line"><a name="l10727"></a><span class="lineno">10727</span>&#160;<span class="preprocessor">#define      _TX_CHECKED( cmd )     { if (FAILED (__tx_error = (cmd))) goto __tx_catch; }</span></div>
<div class="line"><a name="l10728"></a><span class="lineno">10728</span>&#160;<span class="preprocessor">#define      _TX_FAIL               { __tx_error = E_FAIL; goto __tx_catch; }</span></div>
<div class="line"><a name="l10729"></a><span class="lineno">10729</span>&#160;<span class="preprocessor">#define      _TX_RETRY              { __tx_error = S_OK;   goto __tx_try;   }</span></div>
<div class="line"><a name="l10730"></a><span class="lineno">10730</span>&#160;<span class="preprocessor">#define      _TX_OK                 ( SUCCEEDED (__tx_error) )</span></div>
<div class="line"><a name="l10731"></a><span class="lineno">10731</span>&#160;<span class="preprocessor">#define      _TX_CATCH              goto __tx_finally; __tx_catch:</span></div>
<div class="line"><a name="l10732"></a><span class="lineno">10732</span>&#160;<span class="preprocessor">#define      _TX_RETURN             goto __tx_finally;</span></div>
<div class="line"><a name="l10733"></a><span class="lineno">10733</span>&#160;<span class="preprocessor">#define      _TX_FINALLY            __tx_finally:</span></div>
<div class="line"><a name="l10734"></a><span class="lineno">10734</span>&#160;<span class="preprocessor">#define      _TX_ENDTRY             }</span></div>
<div class="line"><a name="l10735"></a><span class="lineno">10735</span>&#160; </div>
<div class="line"><a name="l10736"></a><span class="lineno">10736</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l10737"></a><span class="lineno">10737</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10738"></a><span class="lineno">10738</span>&#160; </div>
<div class="line"><a name="l10739"></a><span class="lineno">10739</span>&#160;<span class="comment">// Мало не покажется</span></div>
<div class="line"><a name="l10740"></a><span class="lineno">10740</span>&#160; </div>
<div class="line"><a name="l10741"></a><span class="lineno">10741</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l10742"></a><span class="lineno">10742</span>&#160; </div>
<div class="line"><a name="l10743"></a><span class="lineno">10743</span>&#160;<span class="keywordtype">bool</span> _txCreateShortcut (<span class="keyword">const</span> <span class="keywordtype">char</span> shortcutName[],</div>
<div class="line"><a name="l10744"></a><span class="lineno">10744</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> fileToLink[], <span class="keyword">const</span> <span class="keywordtype">char</span> args[] <span class="comment">/*= NULL*/</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> workDir[] <span class="comment">/*= NULL*/</span>,</div>
<div class="line"><a name="l10745"></a><span class="lineno">10745</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> description[] <span class="comment">/*= NULL*/</span>, <span class="keywordtype">int</span> cmdShow <span class="comment">/*= SW_SHOWNORMAL*/</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> iconFile[] <span class="comment">/*= NULL*/</span>, <span class="keywordtype">int</span> iconIndex <span class="comment">/*= 0*/</span>,</div>
<div class="line"><a name="l10746"></a><span class="lineno">10746</span>&#160;                        <span class="keywordtype">int</span> fontSize <span class="comment">/*= 0*/</span>, COORD bufSize <span class="comment">/*= ZERO (COORD)*/</span>, COORD wndSize <span class="comment">/*= ZERO (COORD)*/</span>, COORD wndOrg <span class="comment">/*=ZERO (COORD)*/</span>)</div>
<div class="line"><a name="l10747"></a><span class="lineno">10747</span>&#160;    {</div>
<div class="line"><a name="l10748"></a><span class="lineno">10748</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (shortcutName &amp;&amp; *shortcutName)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10749"></a><span class="lineno">10749</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (fileToLink   &amp;&amp; *fileToLink))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10750"></a><span class="lineno">10750</span>&#160; </div>
<div class="line"><a name="l10751"></a><span class="lineno">10751</span>&#160;<span class="preprocessor">    #if defined (__IShellLinkDataList_INTERFACE_DEFINED__)</span></div>
<div class="line"><a name="l10752"></a><span class="lineno">10752</span>&#160; </div>
<div class="line"><a name="l10753"></a><span class="lineno">10753</span>&#160;$   IShellLink* shellLink = NULL;</div>
<div class="line"><a name="l10754"></a><span class="lineno">10754</span>&#160;$   IShellLinkDataList* dataList = NULL;</div>
<div class="line"><a name="l10755"></a><span class="lineno">10755</span>&#160;$   IPersistFile* file = NULL;</div>
<div class="line"><a name="l10756"></a><span class="lineno">10756</span>&#160; </div>
<div class="line"><a name="l10757"></a><span class="lineno">10757</span>&#160;$   HRESULT init = Win32::CoInitialize (NULL);</div>
<div class="line"><a name="l10758"></a><span class="lineno">10758</span>&#160; </div>
<div class="line"><a name="l10759"></a><span class="lineno">10759</span>&#160;    _TX_TRY</div>
<div class="line"><a name="l10760"></a><span class="lineno">10760</span>&#160;        {</div>
<div class="line"><a name="l10761"></a><span class="lineno">10761</span>&#160;$       _TX_CHECKED (Win32::CoCreateInstance (CLSID_ShellLink, NULL, CLSCTX_INPROC_SERVER, Win32::IID_IShellLink, (<span class="keywordtype">void</span>**) &amp;shellLink));</div>
<div class="line"><a name="l10762"></a><span class="lineno">10762</span>&#160;$       <span class="keywordflow">if</span> (!shellLink) _TX_FAIL;</div>
<div class="line"><a name="l10763"></a><span class="lineno">10763</span>&#160; </div>
<div class="line"><a name="l10764"></a><span class="lineno">10764</span>&#160;$       shellLink-&gt;SetPath (fileToLink);</div>
<div class="line"><a name="l10765"></a><span class="lineno">10765</span>&#160;$       shellLink-&gt;SetArguments (args);</div>
<div class="line"><a name="l10766"></a><span class="lineno">10766</span>&#160;$       shellLink-&gt;SetWorkingDirectory (workDir);</div>
<div class="line"><a name="l10767"></a><span class="lineno">10767</span>&#160;$       shellLink-&gt;SetDescription (description);</div>
<div class="line"><a name="l10768"></a><span class="lineno">10768</span>&#160;$       shellLink-&gt;SetShowCmd (cmdShow);</div>
<div class="line"><a name="l10769"></a><span class="lineno">10769</span>&#160;$       shellLink-&gt;SetIconLocation (iconFile, iconIndex);</div>
<div class="line"><a name="l10770"></a><span class="lineno">10770</span>&#160; </div>
<div class="line"><a name="l10771"></a><span class="lineno">10771</span>&#160;$       _TX_CHECKED (shellLink-&gt;QueryInterface (Win32::IID_IShellLinkDataList, (<span class="keywordtype">void</span>**) &amp;dataList));</div>
<div class="line"><a name="l10772"></a><span class="lineno">10772</span>&#160;$       <span class="keywordflow">if</span> (!dataList) _TX_FAIL;</div>
<div class="line"><a name="l10773"></a><span class="lineno">10773</span>&#160; </div>
<div class="line"><a name="l10774"></a><span class="lineno">10774</span>&#160;$       Win32::NT_CONSOLE_PROPS props =</div>
<div class="line"><a name="l10775"></a><span class="lineno">10775</span>&#160;          {{<span class="keyword">sizeof</span> (props), NT_CONSOLE_PROPS_SIG},</div>
<div class="line"><a name="l10776"></a><span class="lineno">10776</span>&#160; </div>
<div class="line"><a name="l10777"></a><span class="lineno">10777</span>&#160;            FOREGROUND_LIGHTGRAY,                       <span class="comment">// wFillAttribute</span></div>
<div class="line"><a name="l10778"></a><span class="lineno">10778</span>&#160;            FOREGROUND_MAGENTA | BACKGROUND_WHITE,      <span class="comment">// wPopupFillAttribute</span></div>
<div class="line"><a name="l10779"></a><span class="lineno">10779</span>&#160;           {bufSize.X, bufSize.Y},                      <span class="comment">// dwScreenBufferSize</span></div>
<div class="line"><a name="l10780"></a><span class="lineno">10780</span>&#160;           {wndSize.X, wndSize.Y},                      <span class="comment">// dwWindowSize</span></div>
<div class="line"><a name="l10781"></a><span class="lineno">10781</span>&#160;           {wndOrg.X,  wndOrg.Y},                       <span class="comment">// dwWindowOrigin</span></div>
<div class="line"><a name="l10782"></a><span class="lineno">10782</span>&#160;            0,                                          <span class="comment">// nFont</span></div>
<div class="line"><a name="l10783"></a><span class="lineno">10783</span>&#160;            0,                                          <span class="comment">// nInputBufferSize</span></div>
<div class="line"><a name="l10784"></a><span class="lineno">10784</span>&#160;           {0, (short) fontSize},                       <span class="comment">// dwFontSize</span></div>
<div class="line"><a name="l10785"></a><span class="lineno">10785</span>&#160;            0x36, 400, L<span class="stringliteral">&quot;Lucida Console&quot;</span>,               <span class="comment">// uFontFamily, uFontWeight, FaceName. We&#39;re dancing for this!</span></div>
<div class="line"><a name="l10786"></a><span class="lineno">10786</span>&#160;            15,                                         <span class="comment">// uCursorSize</span></div>
<div class="line"><a name="l10787"></a><span class="lineno">10787</span>&#160;            0,  1, 1, 0,                                <span class="comment">// bFullScreen, bQuickEdit, bInsertMode, bAutoPosition</span></div>
<div class="line"><a name="l10788"></a><span class="lineno">10788</span>&#160;            50, 4, 0,                                   <span class="comment">// uHistoryBufferSize, uNumberOfHistoryBuffers, bHistoryNoDup</span></div>
<div class="line"><a name="l10789"></a><span class="lineno">10789</span>&#160; </div>
<div class="line"><a name="l10790"></a><span class="lineno">10790</span>&#160;           {0x000000, 0x800000, 0x008000, 0x808000, 0x000080, 0x800080, 0x008080, 0xC0C0C0,  <span class="comment">// Palette</span></div>
<div class="line"><a name="l10791"></a><span class="lineno">10791</span>&#160;            0x808080, 0xFF0000, 0x00FF00, 0xFFFF00, 0x0000FF, 0xFF00FF, 0x00FFFF, 0xFFFFFF}</div>
<div class="line"><a name="l10792"></a><span class="lineno">10792</span>&#160;            };</div>
<div class="line"><a name="l10793"></a><span class="lineno">10793</span>&#160; </div>
<div class="line"><a name="l10794"></a><span class="lineno">10794</span>&#160;$       _TX_CHECKED (dataList-&gt;AddDataBlock (&amp;props));</div>
<div class="line"><a name="l10795"></a><span class="lineno">10795</span>&#160; </div>
<div class="line"><a name="l10796"></a><span class="lineno">10796</span>&#160;$       _TX_CHECKED (shellLink-&gt;QueryInterface (Win32::IID_IPersistFile, (<span class="keywordtype">void</span>**) &amp;file));</div>
<div class="line"><a name="l10797"></a><span class="lineno">10797</span>&#160;$       <span class="keywordflow">if</span> (!file) _TX_FAIL;</div>
<div class="line"><a name="l10798"></a><span class="lineno">10798</span>&#160; </div>
<div class="line"><a name="l10799"></a><span class="lineno">10799</span>&#160;$       <span class="keywordtype">wchar_t</span> wName[MAX_PATH] = L<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l10800"></a><span class="lineno">10800</span>&#160;$       MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, shortcutName, -1, wName, MAX_PATH) || ZeroMemory (wName, <span class="keyword">sizeof</span> (wName));</div>
<div class="line"><a name="l10801"></a><span class="lineno">10801</span>&#160; </div>
<div class="line"><a name="l10802"></a><span class="lineno">10802</span>&#160;$       _TX_CHECKED (file-&gt;Save (wName, <span class="keyword">true</span>));</div>
<div class="line"><a name="l10803"></a><span class="lineno">10803</span>&#160;        }</div>
<div class="line"><a name="l10804"></a><span class="lineno">10804</span>&#160; </div>
<div class="line"><a name="l10805"></a><span class="lineno">10805</span>&#160;$   _TX_CATCH</div>
<div class="line"><a name="l10806"></a><span class="lineno">10806</span>&#160;$   _TX_FINALLY</div>
<div class="line"><a name="l10807"></a><span class="lineno">10807</span>&#160; </div>
<div class="line"><a name="l10808"></a><span class="lineno">10808</span>&#160;    <span class="keywordflow">if</span> (file)         {$ file     -&gt;Release(); }</div>
<div class="line"><a name="l10809"></a><span class="lineno">10809</span>&#160;    <span class="keywordflow">if</span> (dataList)     {$ dataList -&gt;Release(); }</div>
<div class="line"><a name="l10810"></a><span class="lineno">10810</span>&#160;    <span class="keywordflow">if</span> (shellLink)    {$ shellLink-&gt;Release(); }</div>
<div class="line"><a name="l10811"></a><span class="lineno">10811</span>&#160; </div>
<div class="line"><a name="l10812"></a><span class="lineno">10812</span>&#160;    <span class="keywordflow">if</span> (init == S_OK) {$ Win32::CoUninitialize(); }</div>
<div class="line"><a name="l10813"></a><span class="lineno">10813</span>&#160; </div>
<div class="line"><a name="l10814"></a><span class="lineno">10814</span>&#160;$   <span class="keywordflow">return</span> _TX_OK;</div>
<div class="line"><a name="l10815"></a><span class="lineno">10815</span>&#160;    _TX_ENDTRY</div>
<div class="line"><a name="l10816"></a><span class="lineno">10816</span>&#160; </div>
<div class="line"><a name="l10817"></a><span class="lineno">10817</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l10818"></a><span class="lineno">10818</span>&#160; </div>
<div class="line"><a name="l10819"></a><span class="lineno">10819</span>&#160;    (void) args; (void) workDir, (<span class="keywordtype">void</span>) description; (void) cmdShow; (void) iconFile; (void) iconIndex;</div>
<div class="line"><a name="l10820"></a><span class="lineno">10820</span>&#160;    (void) fontSize; (void) bufSize; (void) wndSize; (void) wndOrg;</div>
<div class="line"><a name="l10821"></a><span class="lineno">10821</span>&#160; </div>
<div class="line"><a name="l10822"></a><span class="lineno">10822</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10823"></a><span class="lineno">10823</span>&#160; </div>
<div class="line"><a name="l10824"></a><span class="lineno">10824</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l10825"></a><span class="lineno">10825</span>&#160;    }</div>
<div class="line"><a name="l10826"></a><span class="lineno">10826</span>&#160; </div>
<div class="line"><a name="l10827"></a><span class="lineno">10827</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l10828"></a><span class="lineno">10828</span>&#160; </div>
<div class="line"><a name="l10829"></a><span class="lineno">10829</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l10830"></a><span class="lineno">10830</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10831"></a><span class="lineno">10831</span>&#160; </div>
<div class="line"><a name="l10833"></a><span class="lineno">10833</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l10834"></a><span class="lineno">10834</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10835"></a><span class="lineno">10835</span>&#160; </div>
<div class="line"><a name="l10836"></a><span class="lineno">10836</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10837"></a><span class="lineno">10837</span>&#160;<span class="comment">//{          Memory DC functions                 (_txBuffer...)</span></div>
<div class="line"><a name="l10839"></a><span class="lineno">10839</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10841"></a><span class="lineno">10841</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l10842"></a><span class="lineno">10842</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l10843"></a><span class="lineno">10843</span>&#160; </div>
<div class="line"><a name="l10844"></a><span class="lineno">10844</span>&#160;HDC _txBuffer_Create (HWND wnd, <span class="keyword">const</span> POINT* size <span class="comment">/*= NULL*/</span>, HBITMAP bitmap <span class="comment">/*= NULL*/</span>, RGBQUAD** pixels <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l10845"></a><span class="lineno">10845</span>&#160;    {</div>
<div class="line"><a name="l10846"></a><span class="lineno">10846</span>&#160;$1  <a class="code" href="classtx_auto_lock.html">txAutoLock</a> _lock;</div>
<div class="line"><a name="l10847"></a><span class="lineno">10847</span>&#160; </div>
<div class="line"><a name="l10848"></a><span class="lineno">10848</span>&#160;$   HDC wndDC = GetDC (wnd);</div>
<div class="line"><a name="l10849"></a><span class="lineno">10849</span>&#160;$   <span class="keywordflow">if</span> (!wndDC) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l10850"></a><span class="lineno">10850</span>&#160; </div>
<div class="line"><a name="l10851"></a><span class="lineno">10851</span>&#160;$   POINT sz = { 1, 1 };</div>
<div class="line"><a name="l10852"></a><span class="lineno">10852</span>&#160;$   <span class="keywordflow">if</span> (size) sz = *size;</div>
<div class="line"><a name="l10853"></a><span class="lineno">10853</span>&#160; </div>
<div class="line"><a name="l10854"></a><span class="lineno">10854</span>&#160;$   <span class="keywordflow">if</span> (!size &amp;&amp; wnd)</div>
<div class="line"><a name="l10855"></a><span class="lineno">10855</span>&#160;        {</div>
<div class="line"><a name="l10856"></a><span class="lineno">10856</span>&#160;$       RECT r = {};</div>
<div class="line"><a name="l10857"></a><span class="lineno">10857</span>&#160;$       GetClientRect (wnd, &amp;r) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10858"></a><span class="lineno">10858</span>&#160; </div>
<div class="line"><a name="l10859"></a><span class="lineno">10859</span>&#160;$       sz.x = r.right  - r.left;</div>
<div class="line"><a name="l10860"></a><span class="lineno">10860</span>&#160;$       sz.y = r.bottom - r.top;</div>
<div class="line"><a name="l10861"></a><span class="lineno">10861</span>&#160;        }</div>
<div class="line"><a name="l10862"></a><span class="lineno">10862</span>&#160; </div>
<div class="line"><a name="l10863"></a><span class="lineno">10863</span>&#160;$   <span class="keywordflow">if</span> (bitmap)</div>
<div class="line"><a name="l10864"></a><span class="lineno">10864</span>&#160;        {</div>
<div class="line"><a name="l10865"></a><span class="lineno">10865</span>&#160;$       BITMAP bmap = {};</div>
<div class="line"><a name="l10866"></a><span class="lineno">10866</span>&#160;$       Win32::GetObject (bitmap, <span class="keyword">sizeof</span> (bmap), &amp;bmap) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10867"></a><span class="lineno">10867</span>&#160; </div>
<div class="line"><a name="l10868"></a><span class="lineno">10868</span>&#160;$       sz.x = bmap.bmWidth;</div>
<div class="line"><a name="l10869"></a><span class="lineno">10869</span>&#160;$       sz.y = bmap.bmHeight;</div>
<div class="line"><a name="l10870"></a><span class="lineno">10870</span>&#160;        }</div>
<div class="line"><a name="l10871"></a><span class="lineno">10871</span>&#160; </div>
<div class="line"><a name="l10872"></a><span class="lineno">10872</span>&#160;$   RGBQUAD* buf = NULL;</div>
<div class="line"><a name="l10873"></a><span class="lineno">10873</span>&#160;$   <span class="keywordflow">if</span> (!pixels) pixels = &amp;buf;</div>
<div class="line"><a name="l10874"></a><span class="lineno">10874</span>&#160; </div>
<div class="line"><a name="l10875"></a><span class="lineno">10875</span>&#160;$   HDC dc = Win32::CreateCompatibleDC (wndDC);</div>
<div class="line"><a name="l10876"></a><span class="lineno">10876</span>&#160;$   <span class="keywordflow">if</span> (!dc) <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;Cannot create buffer: CreateCompatibleDC() failed&quot;</span>);</div>
<div class="line"><a name="l10877"></a><span class="lineno">10877</span>&#160; </div>
<div class="line"><a name="l10878"></a><span class="lineno">10878</span>&#160;<span class="preprocessor">    #ifndef _TX_DIB_FIX</span></div>
<div class="line"><a name="l10879"></a><span class="lineno">10879</span>&#160;<span class="preprocessor">    #define _TX_DIB_FIX</span></div>
<div class="line"><a name="l10880"></a><span class="lineno">10880</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l10881"></a><span class="lineno">10881</span>&#160; </div>
<div class="line"><a name="l10882"></a><span class="lineno">10882</span>&#160;$   BITMAPINFO info = {{ <span class="keyword">sizeof</span> (info), sz.x, _TX_DIB_FIX sz.y, 1, WORD (<span class="keyword">sizeof</span> (RGBQUAD) * 8), BI_RGB }};</div>
<div class="line"><a name="l10883"></a><span class="lineno">10883</span>&#160; </div>
<div class="line"><a name="l10884"></a><span class="lineno">10884</span>&#160;$   HBITMAP bmap = bitmap? bitmap : Win32::CreateDIBSection (NULL, &amp;info, DIB_RGB_COLORS, (<span class="keywordtype">void</span>**) pixels, NULL, 0);</div>
<div class="line"><a name="l10885"></a><span class="lineno">10885</span>&#160;$   <span class="keywordflow">if</span> (!bmap) <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;Cannot create buffer: CreateCompatibleBitmap() failed&quot;</span>);</div>
<div class="line"><a name="l10886"></a><span class="lineno">10886</span>&#160; </div>
<div class="line"><a name="l10887"></a><span class="lineno">10887</span>&#160;$   Win32::SelectObject (dc, bmap) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10888"></a><span class="lineno">10888</span>&#160; </div>
<div class="line"><a name="l10889"></a><span class="lineno">10889</span>&#160;$   <span class="keywordflow">if</span> (!bitmap) Win32::PatBlt (dc, 0, 0, sz.x, sz.y, BLACKNESS) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10890"></a><span class="lineno">10890</span>&#160; </div>
<div class="line"><a name="l10891"></a><span class="lineno">10891</span>&#160;$   ReleaseDC (wnd, wndDC) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10892"></a><span class="lineno">10892</span>&#160; </div>
<div class="line"><a name="l10893"></a><span class="lineno">10893</span>&#160;$   <span class="keywordflow">return</span> dc;</div>
<div class="line"><a name="l10894"></a><span class="lineno">10894</span>&#160;    }</div>
<div class="line"><a name="l10895"></a><span class="lineno">10895</span>&#160; </div>
<div class="line"><a name="l10896"></a><span class="lineno">10896</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10897"></a><span class="lineno">10897</span>&#160; </div>
<div class="line"><a name="l10898"></a><span class="lineno">10898</span>&#160;<span class="keywordtype">bool</span> _txBuffer_Delete (HDC* dc)</div>
<div class="line"><a name="l10899"></a><span class="lineno">10899</span>&#160;    {</div>
<div class="line"><a name="l10900"></a><span class="lineno">10900</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10901"></a><span class="lineno">10901</span>&#160;$   <span class="keywordflow">if</span> (                   !*dc)  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10902"></a><span class="lineno">10902</span>&#160;$   <span class="keywordflow">if</span> (_TX_HDC_FAILED     (*dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10903"></a><span class="lineno">10903</span>&#160; </div>
<div class="line"><a name="l10904"></a><span class="lineno">10904</span>&#160;$   <span class="keywordflow">if</span> (!Win32::GetObjectType (Win32::GetCurrentObject (*dc, OBJ_BITMAP))) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10905"></a><span class="lineno">10905</span>&#160; </div>
<div class="line"><a name="l10906"></a><span class="lineno">10906</span>&#160;$   <a class="code" href="classtx_auto_lock.html">txAutoLock</a> _lock;</div>
<div class="line"><a name="l10907"></a><span class="lineno">10907</span>&#160; </div>
<div class="line"><a name="l10908"></a><span class="lineno">10908</span>&#160;$   _txBuffer_Select (Win32::GetStockObject (NULL_PEN),    *dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10909"></a><span class="lineno">10909</span>&#160;$   _txBuffer_Select (Win32::GetStockObject (NULL_BRUSH),  *dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10910"></a><span class="lineno">10910</span>&#160;$   _txBuffer_Select (Win32::GetStockObject (SYSTEM_FONT), *dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10911"></a><span class="lineno">10911</span>&#160;$   _txBuffer_Select (_txStockBitmap,                      *dc);</div>
<div class="line"><a name="l10912"></a><span class="lineno">10912</span>&#160; </div>
<div class="line"><a name="l10913"></a><span class="lineno">10913</span>&#160;$   Win32::DeleteObject (Win32::GetCurrentObject (*dc, OBJ_BITMAP)) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10914"></a><span class="lineno">10914</span>&#160; </div>
<div class="line"><a name="l10915"></a><span class="lineno">10915</span>&#160;$   Win32::DeleteDC (*dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10916"></a><span class="lineno">10916</span>&#160; </div>
<div class="line"><a name="l10917"></a><span class="lineno">10917</span>&#160;$   *dc = NULL;</div>
<div class="line"><a name="l10918"></a><span class="lineno">10918</span>&#160; </div>
<div class="line"><a name="l10919"></a><span class="lineno">10919</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l10920"></a><span class="lineno">10920</span>&#160;    }</div>
<div class="line"><a name="l10921"></a><span class="lineno">10921</span>&#160; </div>
<div class="line"><a name="l10922"></a><span class="lineno">10922</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10923"></a><span class="lineno">10923</span>&#160; </div>
<div class="line"><a name="l10924"></a><span class="lineno">10924</span>&#160;<span class="keywordtype">bool</span> _txBuffer_Select (HGDIOBJ obj, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l10925"></a><span class="lineno">10925</span>&#160;    {</div>
<div class="line"><a name="l10926"></a><span class="lineno">10926</span>&#160;$1  <span class="keywordflow">if</span> (!obj)                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10927"></a><span class="lineno">10927</span>&#160;$   <span class="keywordflow">if</span> (_TX_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l10928"></a><span class="lineno">10928</span>&#160; </div>
<div class="line"><a name="l10929"></a><span class="lineno">10929</span>&#160;$   <span class="keywordflow">if</span> (!Win32::GetObjectType (obj)) <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;Invalid GDI object type&quot;</span>);</div>
<div class="line"><a name="l10930"></a><span class="lineno">10930</span>&#160; </div>
<div class="line"><a name="l10931"></a><span class="lineno">10931</span>&#160;$   <a class="code" href="classtx_auto_lock.html">txAutoLock</a> _lock;</div>
<div class="line"><a name="l10932"></a><span class="lineno">10932</span>&#160; </div>
<div class="line"><a name="l10933"></a><span class="lineno">10933</span>&#160;$   obj = Win32::SelectObject (dc, obj);</div>
<div class="line"><a name="l10934"></a><span class="lineno">10934</span>&#160;$   <span class="keywordflow">if</span> (obj) Win32::DeleteObject (obj);</div>
<div class="line"><a name="l10935"></a><span class="lineno">10935</span>&#160; </div>
<div class="line"><a name="l10936"></a><span class="lineno">10936</span>&#160;$   <span class="keywordflow">return</span> obj != NULL;</div>
<div class="line"><a name="l10937"></a><span class="lineno">10937</span>&#160;    }</div>
<div class="line"><a name="l10938"></a><span class="lineno">10938</span>&#160; </div>
<div class="line"><a name="l10939"></a><span class="lineno">10939</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l10940"></a><span class="lineno">10940</span>&#160; </div>
<div class="line"><a name="l10942"></a><span class="lineno">10942</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l10943"></a><span class="lineno">10943</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10944"></a><span class="lineno">10944</span>&#160; </div>
<div class="line"><a name="l10945"></a><span class="lineno">10945</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10946"></a><span class="lineno">10946</span>&#160;<span class="comment">//{          Diagnostics</span></div>
<div class="line"><a name="l10948"></a><span class="lineno">10948</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l10950"></a><span class="lineno">10950</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l10951"></a><span class="lineno">10951</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l10952"></a><span class="lineno">10952</span>&#160; </div>
<div class="line"><a name="l10953"></a><span class="lineno">10953</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* _txError (<span class="keyword">const</span> <span class="keywordtype">char</span>* file <span class="comment">/*= NULL*/</span>, <span class="keywordtype">int</span> line <span class="comment">/*= 0*/</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>* func <span class="comment">/*= NULL*/</span>, <span class="keywordtype">unsigned</span> color <span class="comment">/*= 0*/</span>,</div>
<div class="line"><a name="l10954"></a><span class="lineno">10954</span>&#160;                      <span class="keyword">const</span> <span class="keywordtype">char</span>* msg  <span class="comment">/*= NULL*/</span>, ...)</div>
<div class="line"><a name="l10955"></a><span class="lineno">10955</span>&#160;    {                                                                        <span class="comment">//---/\---/\-------Это ASCII KOT!--//</span></div>
<div class="line"><a name="l10956"></a><span class="lineno">10956</span>&#160;$1  va_list arg; va_start (arg, msg);                                        <span class="comment">//  {  &#39;-&#39;  }                      //</span></div>
<div class="line"><a name="l10957"></a><span class="lineno">10957</span>&#160;$$  <span class="keyword">const</span> <span class="keywordtype">char</span>* what = _txProcessError (file, line, func, color, msg, arg);  <span class="comment">//  {  0 0  }     Добавь его себе  //</span></div>
<div class="line"><a name="l10958"></a><span class="lineno">10958</span>&#160;    va_end (arg);                                                            <span class="comment">//  --&gt; V &lt;--  в исходник, и тебе  //</span></div>
<div class="line"><a name="l10959"></a><span class="lineno">10959</span>&#160;                                                                             <span class="comment">//   \ \|/ /      будет, наверно,  //</span></div>
<div class="line"><a name="l10960"></a><span class="lineno">10960</span>&#160;    <span class="keywordflow">if</span> (!(msg &amp;&amp; msg[0] == <span class="charliteral">&#39;\a&#39;</span>)) <span class="keywordflow">return</span> what;                               <span class="comment">//    \___/  приятно отлаживаться  //</span></div>
<div class="line"><a name="l10961"></a><span class="lineno">10961</span>&#160;                                                                             <span class="comment">//---------------долгими ночами:)--//</span></div>
<div class="line"><a name="l10962"></a><span class="lineno">10962</span>&#160;<span class="comment">//  vvvvvvvvvvvvvvvvvv</span></div>
<div class="line"><a name="l10963"></a><span class="lineno">10963</span>&#160;    DebugBreak();   <span class="comment">// &gt;&gt;&gt; Котики, вы в отладчике. Не пугайтесь. Есть шанс посмотреть переменные и разобраться.</span></div>
<div class="line"><a name="l10964"></a><span class="lineno">10964</span>&#160;<span class="comment">//  ^^^^^^^^^^^^^^^^^^</span></div>
<div class="line"><a name="l10965"></a><span class="lineno">10965</span>&#160; </div>
<div class="line"><a name="l10966"></a><span class="lineno">10966</span>&#160;    <span class="keywordflow">return</span> what;    <span class="comment">// &gt;&gt;&gt; Уходите из функции пошаговой отладкой (F10/F11). Следите за стеком вызовов (Alt+7).</span></div>
<div class="line"><a name="l10967"></a><span class="lineno">10967</span>&#160;    }</div>
<div class="line"><a name="l10968"></a><span class="lineno">10968</span>&#160; </div>
<div class="line"><a name="l10969"></a><span class="lineno">10969</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l10970"></a><span class="lineno">10970</span>&#160; </div>
<div class="line"><a name="l10971"></a><span class="lineno">10971</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10972"></a><span class="lineno">10972</span>&#160;<span class="comment">//{          General runtime check hooks</span></div>
<div class="line"><a name="l10973"></a><span class="lineno">10973</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l10974"></a><span class="lineno">10974</span>&#160; </div>
<div class="line"><a name="l10975"></a><span class="lineno">10975</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l10976"></a><span class="lineno">10976</span>&#160; </div>
<div class="line"><a name="l10977"></a><span class="lineno">10977</span>&#160;<span class="keywordtype">void</span> _txOnSignal (<span class="keywordtype">int</span> sig <span class="comment">/*= 0*/</span>, <span class="keywordtype">int</span> fpe <span class="comment">/*= 0*/</span>)</div>
<div class="line"><a name="l10978"></a><span class="lineno">10978</span>&#160;    {</div>
<div class="line"><a name="l10979"></a><span class="lineno">10979</span>&#160;$1  <span class="keywordflow">if</span> (!sig &amp;&amp; !fpe)</div>
<div class="line"><a name="l10980"></a><span class="lineno">10980</span>&#160;        {</div>
<div class="line"><a name="l10981"></a><span class="lineno">10981</span>&#160;$       signal (SIGSEGV, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">int</span>))(uintptr_t)_txOnSignal) != SIG_ERR <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10982"></a><span class="lineno">10982</span>&#160;$       signal (SIGFPE,  (<span class="keywordtype">void</span>(*)(<span class="keywordtype">int</span>))(uintptr_t)_txOnSignal) != SIG_ERR <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10983"></a><span class="lineno">10983</span>&#160;$       signal (SIGABRT, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">int</span>))(uintptr_t)_txOnSignal) != SIG_ERR <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10984"></a><span class="lineno">10984</span>&#160;$       signal (SIGILL,  (<span class="keywordtype">void</span>(*)(<span class="keywordtype">int</span>))(uintptr_t)_txOnSignal) != SIG_ERR <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10985"></a><span class="lineno">10985</span>&#160;$       signal (SIGTERM, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">int</span>))(uintptr_t)_txOnSignal) != SIG_ERR <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l10986"></a><span class="lineno">10986</span>&#160;$       <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l10987"></a><span class="lineno">10987</span>&#160;        }</div>
<div class="line"><a name="l10988"></a><span class="lineno">10988</span>&#160; </div>
<div class="line"><a name="l10989"></a><span class="lineno">10989</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%d, %d) called\n&quot;</span>, _TX_VERSION, __func__, sig, fpe);</div>
<div class="line"><a name="l10990"></a><span class="lineno">10990</span>&#160; </div>
<div class="line"><a name="l10991"></a><span class="lineno">10991</span>&#160;<span class="preprocessor">    #define GET_DESCR_(str, code, descr)  case (code): {$ (str) = &quot; &quot;</span> #code &quot;: &quot; descr; break; }</div>
<div class="line"><a name="l10992"></a><span class="lineno">10992</span>&#160; </div>
<div class="line"><a name="l10993"></a><span class="lineno">10993</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* sSig = <span class="stringliteral">&quot;Неизвестный тип сигнала&quot;</span>;</div>
<div class="line"><a name="l10994"></a><span class="lineno">10994</span>&#160; </div>
<div class="line"><a name="l10995"></a><span class="lineno">10995</span>&#160;$   <span class="keywordflow">switch</span> (sig)</div>
<div class="line"><a name="l10996"></a><span class="lineno">10996</span>&#160;        {</div>
<div class="line"><a name="l10997"></a><span class="lineno">10997</span>&#160;        GET_DESCR_ (sSig, SIGSEGV, <span class="stringliteral">&quot;Доступ по неверному указателю. Ставьте ассерты!&quot;</span>)</div>
<div class="line"><a name="l10998"></a><span class="lineno">10998</span>&#160;        GET_DESCR_ (sSig, SIGILL,  &quot;Попытка выполнить недопустимую операцию. Проверьте указатели на функции.&quot;)</div>
<div class="line"><a name="l10999"></a><span class="lineno">10999</span>&#160;        GET_DESCR_ (sSig, SIGABRT, &quot;Аварийное завершение программы, вызвана функция abort().&quot;)</div>
<div class="line"><a name="l11000"></a><span class="lineno">11000</span>&#160;        GET_DESCR_ (sSig, SIGTERM, &quot;Получен сигнал принудительного завершения программы.&quot;)</div>
<div class="line"><a name="l11001"></a><span class="lineno">11001</span>&#160;        GET_DESCR_ (sSig, SIGFPE,  &quot;Грубая ошибка в вычислениях.&quot;)</div>
<div class="line"><a name="l11002"></a><span class="lineno">11002</span>&#160;        default:   break;  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l11003"></a><span class="lineno">11003</span>&#160;        }</div>
<div class="line"><a name="l11004"></a><span class="lineno">11004</span>&#160; </div>
<div class="line"><a name="l11005"></a><span class="lineno">11005</span>&#160;$   const <span class="keywordtype">char</span>* sFPE = &quot;&quot;;</div>
<div class="line"><a name="l11006"></a><span class="lineno">11006</span>&#160; </div>
<div class="line"><a name="l11007"></a><span class="lineno">11007</span>&#160;    <span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l11008"></a><span class="lineno">11008</span>&#160; </div>
<div class="line"><a name="l11009"></a><span class="lineno">11009</span>&#160;    <span class="comment">// MSVC provides the FPE code as a MS extension.</span></div>
<div class="line"><a name="l11010"></a><span class="lineno">11010</span>&#160;    <span class="comment">// See: https://msdn.microsoft.com/ru-ru/library/xdkz3x12.aspx</span></div>
<div class="line"><a name="l11011"></a><span class="lineno">11011</span>&#160; </div>
<div class="line"><a name="l11012"></a><span class="lineno">11012</span>&#160;$   <span class="keywordflow">if</span> (sig == SIGFPE) <span class="keywordflow">switch</span> (fpe)</div>
<div class="line"><a name="l11013"></a><span class="lineno">11013</span>&#160;        {</div>
<div class="line"><a name="l11014"></a><span class="lineno">11014</span>&#160;        GET_DESCR_ (sFPE, _FPE_INVALID,        <span class="stringliteral">&quot;Результат неверен.&quot;</span>)</div>
<div class="line"><a name="l11015"></a><span class="lineno">11015</span>&#160;        GET_DESCR_ (sFPE, _FPE_DENORMAL,       &quot;Денормализация.&quot;)</div>
<div class="line"><a name="l11016"></a><span class="lineno">11016</span>&#160;        GET_DESCR_ (sFPE, _FPE_ZERODIVIDE,     &quot;Деление на ноль.&quot;)</div>
<div class="line"><a name="l11017"></a><span class="lineno">11017</span>&#160;        GET_DESCR_ (sFPE, _FPE_OVERFLOW,       &quot;Результат слишком большой.&quot;)</div>
<div class="line"><a name="l11018"></a><span class="lineno">11018</span>&#160;        GET_DESCR_ (sFPE, _FPE_UNDERFLOW,      &quot;Результат слишком маленький.&quot;)</div>
<div class="line"><a name="l11019"></a><span class="lineno">11019</span>&#160;        GET_DESCR_ (sFPE, _FPE_INEXACT,        &quot;Результат неточен.&quot;)</div>
<div class="line"><a name="l11020"></a><span class="lineno">11020</span>&#160;        GET_DESCR_ (sFPE, _FPE_UNEMULATED,     &quot;Операция не поддерживается.&quot;)</div>
<div class="line"><a name="l11021"></a><span class="lineno">11021</span>&#160;        GET_DESCR_ (sFPE, _FPE_SQRTNEG,        &quot;Квадратный корень из отрицательного числа.&quot;)</div>
<div class="line"><a name="l11022"></a><span class="lineno">11022</span>&#160;        GET_DESCR_ (sFPE, _FPE_STACKOVERFLOW,  &quot;Переполнение стека сопроцессора.&quot;)</div>
<div class="line"><a name="l11023"></a><span class="lineno">11023</span>&#160;        GET_DESCR_ (sFPE, _FPE_STACKUNDERFLOW, &quot;В стеке сопроцессора не хватает данных.&quot;)</div>
<div class="line"><a name="l11024"></a><span class="lineno">11024</span>&#160;        GET_DESCR_ (sFPE, _FPE_EXPLICITGEN,    &quot;Явный вызов исключения.&quot;)</div>
<div class="line"><a name="l11025"></a><span class="lineno">11025</span>&#160;        default:   break;  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l11026"></a><span class="lineno">11026</span>&#160;        }</div>
<div class="line"><a name="l11027"></a><span class="lineno">11027</span>&#160; </div>
<div class="line"><a name="l11028"></a><span class="lineno">11028</span>&#160;    <span class="preprocessor">#else</span></div>
<div class="line"><a name="l11029"></a><span class="lineno">11029</span>&#160;$   fpe = 0;</div>
<div class="line"><a name="l11030"></a><span class="lineno">11030</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11031"></a><span class="lineno">11031</span>&#160; </div>
<div class="line"><a name="l11032"></a><span class="lineno">11032</span>&#160;<span class="preprocessor">    #undef GET_DESCR_</span></div>
<div class="line"><a name="l11033"></a><span class="lineno">11033</span>&#160; </div>
<div class="line"><a name="l11034"></a><span class="lineno">11034</span>&#160;$   signal (sig, (<span class="keywordtype">void</span>(*)(<span class="keywordtype">int</span>))(uintptr_t)_txOnSignal);</div>
<div class="line"><a name="l11035"></a><span class="lineno">11035</span>&#160; </div>
<div class="line"><a name="l11036"></a><span class="lineno">11036</span>&#160;$   Win32::_fpreset();</div>
<div class="line"><a name="l11037"></a><span class="lineno">11037</span>&#160; </div>
<div class="line"><a name="l11038"></a><span class="lineno">11038</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;\a\t&quot;</span></div>
<div class="line"><a name="l11039"></a><span class="lineno">11039</span>&#160;                    <span class="stringliteral">&quot;signal (%d, 0x%02X):%s%s &quot;</span></div>
<div class="line"><a name="l11040"></a><span class="lineno">11040</span>&#160;                    <span class="stringliteral">&quot;%s%s&quot;</span></div>
<div class="line"><a name="l11041"></a><span class="lineno">11041</span>&#160;                    <span class="stringliteral">&quot;С помощью функции signal() вы можете сами обработать эту ошибку.&quot;</span>,</div>
<div class="line"><a name="l11042"></a><span class="lineno">11042</span>&#160;                    sig, (<span class="keywordtype">unsigned</span>) fpe, sSig, sFPE,</div>
<div class="line"><a name="l11043"></a><span class="lineno">11043</span>&#160;                    ((_txDumpSE[1] == <span class="charliteral">&#39;\n&#39;</span>)? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;\n\n&quot;</span>), _txDumpSE + 1);</div>
<div class="line"><a name="l11044"></a><span class="lineno">11044</span>&#160;    }</div>
<div class="line"><a name="l11045"></a><span class="lineno">11045</span>&#160; </div>
<div class="line"><a name="l11046"></a><span class="lineno">11046</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11047"></a><span class="lineno">11047</span>&#160; </div>
<div class="line"><a name="l11048"></a><span class="lineno">11048</span>&#160;<span class="keywordtype">void</span> _txOnTerminate()</div>
<div class="line"><a name="l11049"></a><span class="lineno">11049</span>&#160;    {</div>
<div class="line"><a name="l11050"></a><span class="lineno">11050</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s() called\n&quot;</span>, _TX_VERSION, __func__);</div>
<div class="line"><a name="l11051"></a><span class="lineno">11051</span>&#160; </div>
<div class="line"><a name="l11052"></a><span class="lineno">11052</span>&#160;    <span class="comment">// From: http://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/libsupc%2B%2B/vterminate.cc</span></div>
<div class="line"><a name="l11053"></a><span class="lineno">11053</span>&#160; </div>
<div class="line"><a name="l11054"></a><span class="lineno">11054</span>&#160;$1  <span class="keyword">static</span> <span class="keywordtype">int</span> terminating = 0;</div>
<div class="line"><a name="l11055"></a><span class="lineno">11055</span>&#160;    <span class="keywordflow">if</span> (terminating++) {$ _TX_UNEXPECTED (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;std::terminate() вызвана рекурсивно.&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l11056"></a><span class="lineno">11056</span>&#160; </div>
<div class="line"><a name="l11057"></a><span class="lineno">11057</span>&#160;$   <span class="keywordflow">if</span> (!*_txDumpSE)</div>
<div class="line"><a name="l11058"></a><span class="lineno">11058</span>&#160;        {$ _txDumpExceptionCPP (_txDumpSE + 1, <span class="keyword">sizeof</span> (_txDumpSE) - 2); }</div>
<div class="line"><a name="l11059"></a><span class="lineno">11059</span>&#160; </div>
<div class="line"><a name="l11060"></a><span class="lineno">11060</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;\t\a&quot;</span></div>
<div class="line"><a name="l11061"></a><span class="lineno">11061</span>&#160;                    <span class="stringliteral">&quot;std::terminate(): Неперехваченное исключение в функции main() или в деструкторе, &quot;</span></div>
<div class="line"><a name="l11062"></a><span class="lineno">11062</span>&#160;                    <span class="stringliteral">&quot;или другая фатальная ошибка C++. &quot;</span></div>
<div class="line"><a name="l11063"></a><span class="lineno">11063</span>&#160;                    <span class="stringliteral">&quot;%s&quot;</span></div>
<div class="line"><a name="l11064"></a><span class="lineno">11064</span>&#160;                    <span class="stringliteral">&quot;Используйте try/catch блоки, перехватывайте catch (...), проверяйте вызовы виртуальных функций, &quot;</span></div>
<div class="line"><a name="l11065"></a><span class="lineno">11065</span>&#160;                    <span class="stringliteral">&quot;разбирайтесь, в чем дело.\n\n&quot;</span></div>
<div class="line"><a name="l11066"></a><span class="lineno">11066</span>&#160;                    <span class="stringliteral">&quot;С помощью std::set_terminate() вы можете сами обработать эту ошибку.&quot;</span> + !*_txDumpSE,</div>
<div class="line"><a name="l11067"></a><span class="lineno">11067</span>&#160;                    _txDumpSE + 1);</div>
<div class="line"><a name="l11068"></a><span class="lineno">11068</span>&#160;    }</div>
<div class="line"><a name="l11069"></a><span class="lineno">11069</span>&#160; </div>
<div class="line"><a name="l11070"></a><span class="lineno">11070</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11071"></a><span class="lineno">11071</span>&#160; </div>
<div class="line"><a name="l11072"></a><span class="lineno">11072</span>&#160;<span class="keywordtype">void</span> _txOnUnexpected()</div>
<div class="line"><a name="l11073"></a><span class="lineno">11073</span>&#160;    {</div>
<div class="line"><a name="l11074"></a><span class="lineno">11074</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s() called\n&quot;</span>, _TX_VERSION, __func__);</div>
<div class="line"><a name="l11075"></a><span class="lineno">11075</span>&#160; </div>
<div class="line"><a name="l11076"></a><span class="lineno">11076</span>&#160;$1  <span class="keywordflow">if</span> (!*_txDumpSE)</div>
<div class="line"><a name="l11077"></a><span class="lineno">11077</span>&#160;        {$ _txDumpExceptionCPP (_txDumpSE + 1, <span class="keyword">sizeof</span> (_txDumpSE) - 2); }</div>
<div class="line"><a name="l11078"></a><span class="lineno">11078</span>&#160; </div>
<div class="line"><a name="l11079"></a><span class="lineno">11079</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;std::unexpected(): Необработанное исключение.\n\n&quot;</span></div>
<div class="line"><a name="l11080"></a><span class="lineno">11080</span>&#160;                    <span class="stringliteral">&quot;Проверьте свои catch-блоки. Перехватите catch (...). Если вы (зря) используете &quot;</span></div>
<div class="line"><a name="l11081"></a><span class="lineno">11081</span>&#160;                    <span class="stringliteral">&quot;спецификацию исключений для функций, проверьте, не нарушена ли она.&quot;</span></div>
<div class="line"><a name="l11082"></a><span class="lineno">11082</span>&#160;                    <span class="stringliteral">&quot;%s&quot;</span></div>
<div class="line"><a name="l11083"></a><span class="lineno">11083</span>&#160;                    <span class="stringliteral">&quot;С помощью catch (...) в main() вы можете сами обработать эту ошибку.&quot;</span>,</div>
<div class="line"><a name="l11084"></a><span class="lineno">11084</span>&#160;                    _txDumpSE + 1);</div>
<div class="line"><a name="l11085"></a><span class="lineno">11085</span>&#160;    }</div>
<div class="line"><a name="l11086"></a><span class="lineno">11086</span>&#160; </div>
<div class="line"><a name="l11087"></a><span class="lineno">11087</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11088"></a><span class="lineno">11088</span>&#160; </div>
<div class="line"><a name="l11089"></a><span class="lineno">11089</span>&#160;<span class="keywordtype">int</span> _txOnMatherr (_exception* exc)</div>
<div class="line"><a name="l11090"></a><span class="lineno">11090</span>&#160;    {</div>
<div class="line"><a name="l11091"></a><span class="lineno">11091</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (0x%p) called\n&quot;</span>, _TX_VERSION, __func__, (<span class="keywordtype">void</span>*) exc);</div>
<div class="line"><a name="l11092"></a><span class="lineno">11092</span>&#160; </div>
<div class="line"><a name="l11093"></a><span class="lineno">11093</span>&#160;$1  assert (exc);</div>
<div class="line"><a name="l11094"></a><span class="lineno">11094</span>&#160; </div>
<div class="line"><a name="l11095"></a><span class="lineno">11095</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* sType = <span class="stringliteral">&quot;Неизвестный тип исключения&quot;</span>;</div>
<div class="line"><a name="l11096"></a><span class="lineno">11096</span>&#160; </div>
<div class="line"><a name="l11097"></a><span class="lineno">11097</span>&#160;<span class="preprocessor">    #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l11098"></a><span class="lineno">11098</span>&#160; </div>
<div class="line"><a name="l11099"></a><span class="lineno">11099</span>&#160;<span class="preprocessor">    #define GET_DESCR_(code, descr)  case (code): {$ sType = &quot;(&quot;</span> #code &quot;): &quot; descr; break; }</div>
<div class="line"><a name="l11100"></a><span class="lineno">11100</span>&#160; </div>
<div class="line"><a name="l11101"></a><span class="lineno">11101</span>&#160;$   <span class="keywordflow">switch</span> (exc-&gt;type)</div>
<div class="line"><a name="l11102"></a><span class="lineno">11102</span>&#160;        {</div>
<div class="line"><a name="l11103"></a><span class="lineno">11103</span>&#160;        GET_DESCR_ (_DOMAIN,    <span class="stringliteral">&quot;Нарушение области определения&quot;</span>);</div>
<div class="line"><a name="l11104"></a><span class="lineno">11104</span>&#160;        GET_DESCR_ (_SING,      <span class="stringliteral">&quot;Сингулярность аргумента&quot;</span>);</div>
<div class="line"><a name="l11105"></a><span class="lineno">11105</span>&#160;        GET_DESCR_ (_PLOSS,     <span class="stringliteral">&quot;Частичная потеря значимости&quot;</span>);</div>
<div class="line"><a name="l11106"></a><span class="lineno">11106</span>&#160;        GET_DESCR_ (_TLOSS,     <span class="stringliteral">&quot;Полная потеря значимости&quot;</span>);</div>
<div class="line"><a name="l11107"></a><span class="lineno">11107</span>&#160;        GET_DESCR_ (_OVERFLOW,  <span class="stringliteral">&quot;Результат слишком большой&quot;</span>);</div>
<div class="line"><a name="l11108"></a><span class="lineno">11108</span>&#160;        GET_DESCR_ (_UNDERFLOW, <span class="stringliteral">&quot;Результат слишком маленький&quot;</span>);</div>
<div class="line"><a name="l11109"></a><span class="lineno">11109</span>&#160;        <span class="keywordflow">default</span>:   <span class="keywordflow">break</span>;  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l11110"></a><span class="lineno">11110</span>&#160;        }</div>
<div class="line"><a name="l11111"></a><span class="lineno">11111</span>&#160; </div>
<div class="line"><a name="l11112"></a><span class="lineno">11112</span>&#160;<span class="preprocessor">    #undef GET_DESCR_</span></div>
<div class="line"><a name="l11113"></a><span class="lineno">11113</span>&#160; </div>
<div class="line"><a name="l11114"></a><span class="lineno">11114</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;_matherr(): Математическая ошибка %d %s в функции %s (%g, [%g]). Она вернет значение %g.\n\n&quot;</span></div>
<div class="line"><a name="l11115"></a><span class="lineno">11115</span>&#160;                    <span class="stringliteral">&quot;С помощью __setusermatherr() вы можете сами обработать эту ошибку.&quot;</span>,</div>
<div class="line"><a name="l11116"></a><span class="lineno">11116</span>&#160;                    exc-&gt;type, sType, exc-&gt;name, exc-&gt;arg1, exc-&gt;arg2, exc-&gt;retval);</div>
<div class="line"><a name="l11117"></a><span class="lineno">11117</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l11118"></a><span class="lineno">11118</span>&#160; </div>
<div class="line"><a name="l11119"></a><span class="lineno">11119</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;_matherr(): Математическая ошибка: %s.&quot;</span>, sType);</div>
<div class="line"><a name="l11120"></a><span class="lineno">11120</span>&#160; </div>
<div class="line"><a name="l11121"></a><span class="lineno">11121</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11122"></a><span class="lineno">11122</span>&#160; </div>
<div class="line"><a name="l11123"></a><span class="lineno">11123</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l11124"></a><span class="lineno">11124</span>&#160;    }</div>
<div class="line"><a name="l11125"></a><span class="lineno">11125</span>&#160; </div>
<div class="line"><a name="l11126"></a><span class="lineno">11126</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11127"></a><span class="lineno">11127</span>&#160; </div>
<div class="line"><a name="l11128"></a><span class="lineno">11128</span>&#160;tx_noreturn <span class="keywordtype">void</span> _txOnNewHandlerAnsi()</div>
<div class="line"><a name="l11129"></a><span class="lineno">11129</span>&#160;    {</div>
<div class="line"><a name="l11130"></a><span class="lineno">11130</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s() called\n&quot;</span>, _TX_VERSION, __func__);</div>
<div class="line"><a name="l11131"></a><span class="lineno">11131</span>&#160;$1</div>
<div class="line"><a name="l11132"></a><span class="lineno">11132</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;operator new: Ошибка выделения памяти.\n\n&quot;</span></div>
<div class="line"><a name="l11133"></a><span class="lineno">11133</span>&#160;                    <span class="stringliteral">&quot;С помощью std::set_new_handler() вы можете сами обработать эту ошибку &quot;</span></div>
<div class="line"><a name="l11134"></a><span class="lineno">11134</span>&#160;                    <span class="stringliteral">&quot;и где-нибудь найти недостающую память.&quot;</span>);</div>
<div class="line"><a name="l11135"></a><span class="lineno">11135</span>&#160; </div>
<div class="line"><a name="l11136"></a><span class="lineno">11136</span>&#160;$   <span class="keywordflow">throw</span> std::bad_alloc();</div>
<div class="line"><a name="l11137"></a><span class="lineno">11137</span>&#160;    }</div>
<div class="line"><a name="l11138"></a><span class="lineno">11138</span>&#160; </div>
<div class="line"><a name="l11139"></a><span class="lineno">11139</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11140"></a><span class="lineno">11140</span>&#160; </div>
<div class="line"><a name="l11141"></a><span class="lineno">11141</span>&#160;<span class="keywordtype">void</span> _txOnSecurityErrorAnsi (<span class="keyword">const</span> <span class="keywordtype">char</span>* msg, <span class="keywordtype">void</span>* ptr, <span class="keywordtype">int</span> code)</div>
<div class="line"><a name="l11142"></a><span class="lineno">11142</span>&#160;    {</div>
<div class="line"><a name="l11143"></a><span class="lineno">11143</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%s, 0x%p, %d) called\n&quot;</span>, _TX_VERSION, __func__, msg, ptr, code);</div>
<div class="line"><a name="l11144"></a><span class="lineno">11144</span>&#160; </div>
<div class="line"><a name="l11145"></a><span class="lineno">11145</span>&#160;$1  <span class="keywordflow">if</span> (code)</div>
<div class="line"><a name="l11146"></a><span class="lineno">11146</span>&#160;        {$ errno = code; }</div>
<div class="line"><a name="l11147"></a><span class="lineno">11147</span>&#160; </div>
<div class="line"><a name="l11148"></a><span class="lineno">11148</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;\a&quot;</span></div>
<div class="line"><a name="l11149"></a><span class="lineno">11149</span>&#160;                    <span class="stringliteral">&quot;Ошибка переполнения буфера %d: %s в %.20s (0x%p). Ставьте ассерты!\n\n&quot;</span></div>
<div class="line"><a name="l11150"></a><span class="lineno">11150</span>&#160;                    <span class="stringliteral">&quot;С помощью std::set_constraint_handler_s() вы можете сами обработать эту ошибку &quot;</span></div>
<div class="line"><a name="l11151"></a><span class="lineno">11151</span>&#160;                    <span class="stringliteral">&quot;и постараться не выходить за границы массивов.&quot;</span>,</div>
<div class="line"><a name="l11152"></a><span class="lineno">11152</span>&#160;                    code, msg, (<span class="keywordtype">char</span>*) ptr, ptr);</div>
<div class="line"><a name="l11153"></a><span class="lineno">11153</span>&#160;    }</div>
<div class="line"><a name="l11154"></a><span class="lineno">11154</span>&#160; </div>
<div class="line"><a name="l11155"></a><span class="lineno">11155</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11156"></a><span class="lineno">11156</span>&#160; </div>
<div class="line"><a name="l11157"></a><span class="lineno">11157</span>&#160;<span class="keywordtype">int</span> tx_glGetError (<span class="keywordtype">int</span> setError <span class="comment">/*= INT_MIN*/</span>)</div>
<div class="line"><a name="l11158"></a><span class="lineno">11158</span>&#160;    {</div>
<div class="line"><a name="l11159"></a><span class="lineno">11159</span>&#160;$1  _txOGLError = (setError == INT_MIN)? _TX_CALL (Win32::glGetError, ()) : setError;</div>
<div class="line"><a name="l11160"></a><span class="lineno">11160</span>&#160;$   <span class="keywordflow">return</span> _txOGLError;</div>
<div class="line"><a name="l11161"></a><span class="lineno">11161</span>&#160;    }</div>
<div class="line"><a name="l11162"></a><span class="lineno">11162</span>&#160; </div>
<div class="line"><a name="l11163"></a><span class="lineno">11163</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l11164"></a><span class="lineno">11164</span>&#160; </div>
<div class="line"><a name="l11165"></a><span class="lineno">11165</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l11166"></a><span class="lineno">11166</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11167"></a><span class="lineno">11167</span>&#160; </div>
<div class="line"><a name="l11168"></a><span class="lineno">11168</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11169"></a><span class="lineno">11169</span>&#160;<span class="comment">//{          MSC Runtime check hooks</span></div>
<div class="line"><a name="l11170"></a><span class="lineno">11170</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11171"></a><span class="lineno">11171</span>&#160; </div>
<div class="line"><a name="l11172"></a><span class="lineno">11172</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l11173"></a><span class="lineno">11173</span>&#160; </div>
<div class="line"><a name="l11174"></a><span class="lineno">11174</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l11175"></a><span class="lineno">11175</span>&#160; </div>
<div class="line"><a name="l11176"></a><span class="lineno">11176</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11177"></a><span class="lineno">11177</span>&#160; </div>
<div class="line"><a name="l11178"></a><span class="lineno">11178</span>&#160;<span class="keywordtype">int</span> _txOnNewHandler (<span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l11179"></a><span class="lineno">11179</span>&#160;    {</div>
<div class="line"><a name="l11180"></a><span class="lineno">11180</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (0x%p) called\n&quot;</span>, _TX_VERSION, __func__, (<span class="keywordtype">void</span>*)(uintptr_t) size);</div>
<div class="line"><a name="l11181"></a><span class="lineno">11181</span>&#160;$5</div>
<div class="line"><a name="l11182"></a><span class="lineno">11182</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;operator new: Ошибка выделения %llu байт памяти.\n\n&quot;</span></div>
<div class="line"><a name="l11183"></a><span class="lineno">11183</span>&#160;                    <span class="stringliteral">&quot;С помощью _set_new_handler() вы можете сами обработать эту ошибку &quot;</span></div>
<div class="line"><a name="l11184"></a><span class="lineno">11184</span>&#160;                    <span class="stringliteral">&quot;и где-нибудь найти недостающую память.&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) size);</div>
<div class="line"><a name="l11185"></a><span class="lineno">11185</span>&#160; </div>
<div class="line"><a name="l11186"></a><span class="lineno">11186</span>&#160;$   <span class="keywordflow">throw</span> std::bad_alloc();</div>
<div class="line"><a name="l11187"></a><span class="lineno">11187</span>&#160;    }</div>
<div class="line"><a name="l11188"></a><span class="lineno">11188</span>&#160; </div>
<div class="line"><a name="l11189"></a><span class="lineno">11189</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11190"></a><span class="lineno">11190</span>&#160; </div>
<div class="line"><a name="l11191"></a><span class="lineno">11191</span>&#160;<span class="keywordtype">void</span> _txOnSecurityError (<span class="keywordtype">int</span> code, <span class="keywordtype">void</span>* addr)</div>
<div class="line"><a name="l11192"></a><span class="lineno">11192</span>&#160;    {</div>
<div class="line"><a name="l11193"></a><span class="lineno">11193</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%d, 0x%p) called\n&quot;</span>, _TX_VERSION, __func__, code, addr);</div>
<div class="line"><a name="l11194"></a><span class="lineno">11194</span>&#160;$5</div>
<div class="line"><a name="l11195"></a><span class="lineno">11195</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;\a&quot;</span></div>
<div class="line"><a name="l11196"></a><span class="lineno">11196</span>&#160;                    <span class="stringliteral">&quot;Ошибка переполнения буфера %d (_SECERR_BUFFER_OVERRUN). Ставьте ассерты!\n\n&quot;</span></div>
<div class="line"><a name="l11197"></a><span class="lineno">11197</span>&#160;                    <span class="stringliteral">&quot;С помощью _set_security_error_handler() вы можете сами обработать эту ошибку &quot;</span></div>
<div class="line"><a name="l11198"></a><span class="lineno">11198</span>&#160;                    <span class="stringliteral">&quot;и более торжественно завершить программу. Ставьте же ассерты.&quot;</span>, code);</div>
<div class="line"><a name="l11199"></a><span class="lineno">11199</span>&#160;    }</div>
<div class="line"><a name="l11200"></a><span class="lineno">11200</span>&#160; </div>
<div class="line"><a name="l11201"></a><span class="lineno">11201</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11202"></a><span class="lineno">11202</span>&#160; </div>
<div class="line"><a name="l11203"></a><span class="lineno">11203</span>&#160;<span class="keywordtype">void</span> _txOnPureCall()</div>
<div class="line"><a name="l11204"></a><span class="lineno">11204</span>&#160;    {</div>
<div class="line"><a name="l11205"></a><span class="lineno">11205</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s() called\n&quot;</span>, _TX_VERSION, __func__);</div>
<div class="line"><a name="l11206"></a><span class="lineno">11206</span>&#160;$5</div>
<div class="line"><a name="l11207"></a><span class="lineno">11207</span>&#160;$   _TX_UNEXPECTED (<span class="stringliteral">&quot;\a&quot;</span></div>
<div class="line"><a name="l11208"></a><span class="lineno">11208</span>&#160;                    <span class="stringliteral">&quot;Вызвана чисто виртуальная функция. Такое бывает, например, в конструкторах &quot;</span></div>
<div class="line"><a name="l11209"></a><span class="lineno">11209</span>&#160;                    <span class="stringliteral">&quot;или деструкторах базовых классов - не вызывайте там таких функций.\n\n&quot;</span></div>
<div class="line"><a name="l11210"></a><span class="lineno">11210</span>&#160;                    <span class="stringliteral">&quot;С помощью _set_purecall_handler() вы можете сами обработать эту ошибку &quot;</span></div>
<div class="line"><a name="l11211"></a><span class="lineno">11211</span>&#160;                    <span class="stringliteral">&quot;и проверить свое знание С++ :)&quot;</span>);</div>
<div class="line"><a name="l11212"></a><span class="lineno">11212</span>&#160;    }</div>
<div class="line"><a name="l11213"></a><span class="lineno">11213</span>&#160; </div>
<div class="line"><a name="l11214"></a><span class="lineno">11214</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11215"></a><span class="lineno">11215</span>&#160; </div>
<div class="line"><a name="l11216"></a><span class="lineno">11216</span>&#160;<span class="keywordtype">void</span> _txOnInvalidParam (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* wExpr, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* wFunc, <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* wFile, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> line, uintptr_t addr)</div>
<div class="line"><a name="l11217"></a><span class="lineno">11217</span>&#160;    {</div>
<div class="line"><a name="l11218"></a><span class="lineno">11218</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%S, %S, %S, %d, 0x%p) called\n&quot;</span>, _TX_VERSION, __func__, wExpr, wFunc, wFile, line, addr);</div>
<div class="line"><a name="l11219"></a><span class="lineno">11219</span>&#160; </div>
<div class="line"><a name="l11220"></a><span class="lineno">11220</span>&#160;$5  assert (wExpr);</div>
<div class="line"><a name="l11221"></a><span class="lineno">11221</span>&#160;    assert (wFunc);</div>
<div class="line"><a name="l11222"></a><span class="lineno">11222</span>&#160;    assert (wFile);</div>
<div class="line"><a name="l11223"></a><span class="lineno">11223</span>&#160; </div>
<div class="line"><a name="l11224"></a><span class="lineno">11224</span>&#160;    <span class="keywordtype">char</span> expr [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>/2] = <span class="stringliteral">&quot;[Unknowm expr]&quot;</span>,</div>
<div class="line"><a name="l11225"></a><span class="lineno">11225</span>&#160;         func [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>/2] = <span class="stringliteral">&quot;[Unknowm func]&quot;</span>,</div>
<div class="line"><a name="l11226"></a><span class="lineno">11226</span>&#160;         file [MAX_PATH]      = <span class="stringliteral">&quot;[Unknowm file]&quot;</span>;</div>
<div class="line"><a name="l11227"></a><span class="lineno">11227</span>&#160; </div>
<div class="line"><a name="l11228"></a><span class="lineno">11228</span>&#160;$   WideCharToMultiByte (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, wExpr, -1, expr, <span class="keyword">sizeof</span> (expr) - 1, NULL, NULL);</div>
<div class="line"><a name="l11229"></a><span class="lineno">11229</span>&#160;$   WideCharToMultiByte (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, wFunc, -1, func, <span class="keyword">sizeof</span> (func) - 1, NULL, NULL);</div>
<div class="line"><a name="l11230"></a><span class="lineno">11230</span>&#160;$   WideCharToMultiByte (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, wFile, -1, file, <span class="keyword">sizeof</span> (file) - 1, NULL, NULL);</div>
<div class="line"><a name="l11231"></a><span class="lineno">11231</span>&#160; </div>
<div class="line"><a name="l11232"></a><span class="lineno">11232</span>&#160;$$  _txError (file, (<span class="keywordtype">int</span>) line, func, 0, <span class="stringliteral">&quot;\a&quot;</span></div>
<div class="line"><a name="l11233"></a><span class="lineno">11233</span>&#160;              <span class="stringliteral">&quot;В функцию %s передан неверный параметр: неверно, что %s. Не надо так.\n\n&quot;</span></div>
<div class="line"><a name="l11234"></a><span class="lineno">11234</span>&#160;              <span class="stringliteral">&quot;С помощью _set_invalid_parameter_handler() вы можете сами обработать эту ошибку.&quot;</span>, func, expr);</div>
<div class="line"><a name="l11235"></a><span class="lineno">11235</span>&#160;    }</div>
<div class="line"><a name="l11236"></a><span class="lineno">11236</span>&#160; </div>
<div class="line"><a name="l11237"></a><span class="lineno">11237</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11238"></a><span class="lineno">11238</span>&#160; </div>
<div class="line"><a name="l11239"></a><span class="lineno">11239</span>&#160;<span class="preprocessor">#if defined (_CLANG_VER) &amp;&amp; !defined (_MSC_VER)</span></div>
<div class="line"><a name="l11240"></a><span class="lineno">11240</span>&#160; </div>
<div class="line"><a name="l11241"></a><span class="lineno">11241</span>&#160;<span class="keywordtype">void</span> _txLibCppDebugFunction (std::__libcpp_debug_info <span class="keyword">const</span>&amp; info)</div>
<div class="line"><a name="l11242"></a><span class="lineno">11242</span>&#160;    {</div>
<div class="line"><a name="l11243"></a><span class="lineno">11243</span>&#160;$5  assert (&amp;info);</div>
<div class="line"><a name="l11244"></a><span class="lineno">11244</span>&#160; </div>
<div class="line"><a name="l11245"></a><span class="lineno">11245</span>&#160;$$  _txError (info.__file_, info.__line_, NULL, 0, <span class="stringliteral">&quot;\a&quot;</span></div>
<div class="line"><a name="l11246"></a><span class="lineno">11246</span>&#160;              <span class="stringliteral">&quot;Оказалось неверно, что %s (%s). Не надо так.\n\n&quot;</span></div>
<div class="line"><a name="l11247"></a><span class="lineno">11247</span>&#160;              <span class="stringliteral">&quot;С помощью std::__libcpp_debug_function вы можете сами обработать эту ошибку.&quot;</span>, info.__pred_, info.__msg_);</div>
<div class="line"><a name="l11248"></a><span class="lineno">11248</span>&#160;    }</div>
<div class="line"><a name="l11249"></a><span class="lineno">11249</span>&#160; </div>
<div class="line"><a name="l11250"></a><span class="lineno">11250</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l11251"></a><span class="lineno">11251</span>&#160; </div>
<div class="line"><a name="l11252"></a><span class="lineno">11252</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11253"></a><span class="lineno">11253</span>&#160; </div>
<div class="line"><a name="l11254"></a><span class="lineno">11254</span>&#160;<span class="preprocessor">#pragma runtime_checks (&quot;&quot;</span>, off)</div>
<div class="line"><a name="l11255"></a><span class="lineno">11255</span>&#160; </div>
<div class="line"><a name="l11256"></a><span class="lineno">11256</span>&#160;<span class="keywordtype">int</span> _txOnRTCFailure (<span class="keywordtype">int</span> type, <span class="keyword">const</span> <span class="keywordtype">char</span>* file, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span>* module, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...)</div>
<div class="line"><a name="l11257"></a><span class="lineno">11257</span>&#160;    {</div>
<div class="line"><a name="l11258"></a><span class="lineno">11258</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (%d, %s, %d, %s, %s) called\n&quot;</span>, _TX_VERSION, __func__, type, file, line, module, format);</div>
<div class="line"><a name="l11259"></a><span class="lineno">11259</span>&#160; </div>
<div class="line"><a name="l11260"></a><span class="lineno">11260</span>&#160;$5  <span class="keyword">static</span> <span class="keywordtype">long</span> running = 0;</div>
<div class="line"><a name="l11261"></a><span class="lineno">11261</span>&#160;$   <span class="keywordflow">while</span> (InterlockedExchange (&amp;running, 1)) Sleep (0);</div>
<div class="line"><a name="l11262"></a><span class="lineno">11262</span>&#160; </div>
<div class="line"><a name="l11263"></a><span class="lineno">11263</span>&#160;$   assert (format);</div>
<div class="line"><a name="l11264"></a><span class="lineno">11264</span>&#160; </div>
<div class="line"><a name="l11265"></a><span class="lineno">11265</span>&#160;    <span class="comment">// Disable all RTC failures</span></div>
<div class="line"><a name="l11266"></a><span class="lineno">11266</span>&#160; </div>
<div class="line"><a name="l11267"></a><span class="lineno">11267</span>&#160;$   <span class="keywordtype">int</span> nErrors = _RTC_NumErrors();</div>
<div class="line"><a name="l11268"></a><span class="lineno">11268</span>&#160;$   <span class="keywordtype">int</span>* errors = NULL;</div>
<div class="line"><a name="l11269"></a><span class="lineno">11269</span>&#160;$   <span class="keywordflow">try</span> { errors = (<span class="keywordtype">int</span>*) _alloca (nErrors * <span class="keyword">sizeof</span> (*errors)); } <span class="keywordflow">catch</span> (...) {;}  <span class="comment">//-V104</span></div>
<div class="line"><a name="l11270"></a><span class="lineno">11270</span>&#160; </div>
<div class="line"><a name="l11271"></a><span class="lineno">11271</span>&#160;$   <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l11272"></a><span class="lineno">11272</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nErrors; i++) *(errors? &amp;errors[i] : &amp;err) = _RTC_SetErrorType ((_RTC_ErrorNumber) i, _RTC_ERRTYPE_IGNORE);  <span class="comment">//-V108</span></div>
<div class="line"><a name="l11273"></a><span class="lineno">11273</span>&#160; </div>
<div class="line"><a name="l11274"></a><span class="lineno">11274</span>&#160;$   <span class="keywordtype">char</span> text [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l11275"></a><span class="lineno">11275</span>&#160; </div>
<div class="line"><a name="l11276"></a><span class="lineno">11276</span>&#160;$   va_list arg; va_start (arg, format);</div>
<div class="line"><a name="l11277"></a><span class="lineno">11277</span>&#160;$   _tx_vsnprintf_s (text, <span class="keyword">sizeof</span> (text) - 1, format, arg);                  <span class="comment">// Get message from the vararg list</span></div>
<div class="line"><a name="l11278"></a><span class="lineno">11278</span>&#160;$   <span class="keyword">auto</span> error = (_RTC_ErrorNumber) va_arg (arg, <span class="keywordtype">int</span> <span class="comment">/*_RTC_ErrorNumber*/</span>);  <span class="comment">// Get the RTC error number</span></div>
<div class="line"><a name="l11279"></a><span class="lineno">11279</span>&#160;$   va_end (arg);</div>
<div class="line"><a name="l11280"></a><span class="lineno">11280</span>&#160; </div>
<div class="line"><a name="l11281"></a><span class="lineno">11281</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* sType = <span class="stringliteral">&quot;type&quot;</span>;</div>
<div class="line"><a name="l11282"></a><span class="lineno">11282</span>&#160; </div>
<div class="line"><a name="l11283"></a><span class="lineno">11283</span>&#160;$   <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a name="l11284"></a><span class="lineno">11284</span>&#160;       {</div>
<div class="line"><a name="l11285"></a><span class="lineno">11285</span>&#160;       <span class="keywordflow">case</span> _CRT_ERROR:  $ sType = <span class="stringliteral">&quot;ошибка&quot;</span>;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11286"></a><span class="lineno">11286</span>&#160;       <span class="keywordflow">case</span> _CRT_ASSERT: $ sType = <span class="stringliteral">&quot;логическая ошибка&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11287"></a><span class="lineno">11287</span>&#160;       <span class="keywordflow">case</span> _CRT_WARN:   $ sType = <span class="stringliteral">&quot;возможная ошибка&quot;</span>;  <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11288"></a><span class="lineno">11288</span>&#160;       <span class="keywordflow">default</span>:          $                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11289"></a><span class="lineno">11289</span>&#160;       }</div>
<div class="line"><a name="l11290"></a><span class="lineno">11290</span>&#160; </div>
<div class="line"><a name="l11291"></a><span class="lineno">11291</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* sError = _RTC_GetErrDesc (error);</div>
<div class="line"><a name="l11292"></a><span class="lineno">11292</span>&#160; </div>
<div class="line"><a name="l11293"></a><span class="lineno">11293</span>&#160;$$  _txError (file, line, NULL, 0, <span class="stringliteral">&quot;\a&quot;</span></div>
<div class="line"><a name="l11294"></a><span class="lineno">11294</span>&#160;              <span class="stringliteral">&quot;Сбой проверки выполнения машинного кода: %s %d (%s): %s в модуле %s.&quot;</span>, sType, error, sError, text, module);</div>
<div class="line"><a name="l11295"></a><span class="lineno">11295</span>&#160; </div>
<div class="line"><a name="l11296"></a><span class="lineno">11296</span>&#160;    <span class="comment">// The code below will be never executed until the error above will stay fatal:</span></div>
<div class="line"><a name="l11297"></a><span class="lineno">11297</span>&#160; </div>
<div class="line"><a name="l11298"></a><span class="lineno">11298</span>&#160;    <span class="comment">// Restore the RTC error types</span></div>
<div class="line"><a name="l11299"></a><span class="lineno">11299</span>&#160; </div>
<div class="line"><a name="l11300"></a><span class="lineno">11300</span>&#160;<span class="preprocessor">    #if defined (_MSC_VER)</span></div>
<div class="line"><a name="l11301"></a><span class="lineno">11301</span>&#160;<span class="preprocessor">    #pragma warning (push)</span></div>
<div class="line"><a name="l11302"></a><span class="lineno">11302</span>&#160;<span class="preprocessor">    #pragma warning (disable: 6385)  </span><span class="comment">// Reading invalid data from &#39;errors&#39;: the readable size is &#39;n&#39; bytes, but &#39;m&#39; bytes may be read.</span></div>
<div class="line"><a name="l11303"></a><span class="lineno">11303</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11304"></a><span class="lineno">11304</span>&#160; </div>
<div class="line"><a name="l11305"></a><span class="lineno">11305</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nErrors; i++) _RTC_SetErrorType ((_RTC_ErrorNumber) i, (errors? errors[i] : _CRT_ERROR));  <span class="comment">//-V108</span></div>
<div class="line"><a name="l11306"></a><span class="lineno">11306</span>&#160; </div>
<div class="line"><a name="l11307"></a><span class="lineno">11307</span>&#160;<span class="preprocessor">    #if defined (_MSC_VER)</span></div>
<div class="line"><a name="l11308"></a><span class="lineno">11308</span>&#160;<span class="preprocessor">    #pragma warning (pop)            </span><span class="comment">// Reading invalid data from &#39;errors&#39;: the readable size is &#39;n&#39; bytes, but &#39;m&#39; bytes may be read.</span></div>
<div class="line"><a name="l11309"></a><span class="lineno">11309</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11310"></a><span class="lineno">11310</span>&#160; </div>
<div class="line"><a name="l11311"></a><span class="lineno">11311</span>&#160;$   InterlockedExchange (&amp;running, 0);</div>
<div class="line"><a name="l11312"></a><span class="lineno">11312</span>&#160;$   <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l11313"></a><span class="lineno">11313</span>&#160;    }</div>
<div class="line"><a name="l11314"></a><span class="lineno">11314</span>&#160; </div>
<div class="line"><a name="l11315"></a><span class="lineno">11315</span>&#160;<span class="preprocessor">#pragma runtime_checks (&quot;&quot;</span>, restore)</div>
<div class="line"><a name="l11316"></a><span class="lineno">11316</span>&#160; </div>
<div class="line"><a name="l11317"></a><span class="lineno">11317</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11318"></a><span class="lineno">11318</span>&#160; </div>
<div class="line"><a name="l11319"></a><span class="lineno">11319</span>&#160;<span class="keywordtype">int</span> _txOnAllocHook (<span class="keywordtype">int</span> type, <span class="keywordtype">void</span>* data, <span class="keywordtype">size_t</span> size, <span class="keywordtype">int</span> use, <span class="keywordtype">long</span> request, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* file, <span class="keywordtype">int</span> line)</div>
<div class="line"><a name="l11320"></a><span class="lineno">11320</span>&#160;    {</div>
<div class="line"><a name="l11321"></a><span class="lineno">11321</span>&#160;<span class="preprocessor">    #if (_TX_ALLOW_TRACE +0 &gt;= 4)</span></div>
<div class="line"><a name="l11322"></a><span class="lineno">11322</span>&#160; </div>
<div class="line"><a name="l11323"></a><span class="lineno">11323</span>&#160;    <span class="keyword">static</span> _tx_thread <span class="keywordtype">int</span> recursive = 0;</div>
<div class="line"><a name="l11324"></a><span class="lineno">11324</span>&#160;    <span class="keywordflow">if</span> (recursive) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l11325"></a><span class="lineno">11325</span>&#160;    recursive++;</div>
<div class="line"><a name="l11326"></a><span class="lineno">11326</span>&#160; </div>
<div class="line"><a name="l11327"></a><span class="lineno">11327</span>&#160;<span class="preprocessor">    #if (_TX_ALLOW_TRACE +0 &lt;= 10)</span></div>
<div class="line"><a name="l11328"></a><span class="lineno">11328</span>&#160;    <span class="keywordflow">if</span> (!size) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l11329"></a><span class="lineno">11329</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11330"></a><span class="lineno">11330</span>&#160; </div>
<div class="line"><a name="l11331"></a><span class="lineno">11331</span>&#160;<span class="preprocessor">    #define GET_DESCR_(str, type)  case (type): { str = #type; break; }</span></div>
<div class="line"><a name="l11332"></a><span class="lineno">11332</span>&#160; </div>
<div class="line"><a name="l11333"></a><span class="lineno">11333</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* sType = <span class="stringliteral">&quot;Unknown type&quot;</span>;</div>
<div class="line"><a name="l11334"></a><span class="lineno">11334</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* sUse  = <span class="stringliteral">&quot;Unknown use&quot;</span>;</div>
<div class="line"><a name="l11335"></a><span class="lineno">11335</span>&#160; </div>
<div class="line"><a name="l11336"></a><span class="lineno">11336</span>&#160;    <span class="keywordflow">switch</span> (_BLOCK_TYPE (type))</div>
<div class="line"><a name="l11337"></a><span class="lineno">11337</span>&#160;        {</div>
<div class="line"><a name="l11338"></a><span class="lineno">11338</span>&#160;        GET_DESCR_ (sType, _HOOK_ALLOC);</div>
<div class="line"><a name="l11339"></a><span class="lineno">11339</span>&#160;        GET_DESCR_ (sType, _HOOK_REALLOC);</div>
<div class="line"><a name="l11340"></a><span class="lineno">11340</span>&#160;        GET_DESCR_ (sType, _HOOK_FREE);</div>
<div class="line"><a name="l11341"></a><span class="lineno">11341</span>&#160;        <span class="keywordflow">default</span>:   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11342"></a><span class="lineno">11342</span>&#160;        }</div>
<div class="line"><a name="l11343"></a><span class="lineno">11343</span>&#160; </div>
<div class="line"><a name="l11344"></a><span class="lineno">11344</span>&#160;    <span class="keywordflow">switch</span> (use)</div>
<div class="line"><a name="l11345"></a><span class="lineno">11345</span>&#160;        {</div>
<div class="line"><a name="l11346"></a><span class="lineno">11346</span>&#160;        GET_DESCR_ (sUse,  _NORMAL_BLOCK);</div>
<div class="line"><a name="l11347"></a><span class="lineno">11347</span>&#160;        GET_DESCR_ (sUse,  _CRT_BLOCK);</div>
<div class="line"><a name="l11348"></a><span class="lineno">11348</span>&#160;        GET_DESCR_ (sUse,  _CLIENT_BLOCK);</div>
<div class="line"><a name="l11349"></a><span class="lineno">11349</span>&#160;        GET_DESCR_ (sUse,  _FREE_BLOCK);</div>
<div class="line"><a name="l11350"></a><span class="lineno">11350</span>&#160;        GET_DESCR_ (sUse,  _IGNORE_BLOCK);</div>
<div class="line"><a name="l11351"></a><span class="lineno">11351</span>&#160;        <span class="keywordflow">default</span>:   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11352"></a><span class="lineno">11352</span>&#160;        }</div>
<div class="line"><a name="l11353"></a><span class="lineno">11353</span>&#160; </div>
<div class="line"><a name="l11354"></a><span class="lineno">11354</span>&#160;<span class="preprocessor">    #undef  GET_DESCR_</span></div>
<div class="line"><a name="l11355"></a><span class="lineno">11355</span>&#160; </div>
<div class="line"><a name="l11356"></a><span class="lineno">11356</span>&#160;    _txTrace ((<span class="keyword">const</span> <span class="keywordtype">char</span>*) file, line, NULL, <span class="stringliteral">&quot;%*s&quot;</span></div>
<div class="line"><a name="l11357"></a><span class="lineno">11357</span>&#160;              <span class="stringliteral">&quot;_txOnAllocHook (type = 0x%02X (%-*s), subtype =0x%X, data = 0x%p, size = 0x%p, use = 0x%02X (%-*s), request = %ld)&quot;</span>,</div>
<div class="line"><a name="l11358"></a><span class="lineno">11358</span>&#160;              2 * _txLoc::Cur.inTX, <span class="stringliteral">&quot;&quot;</span>,</div>
<div class="line"><a name="l11359"></a><span class="lineno">11359</span>&#160;              type, 13, sType, _BLOCK_SUBTYPE (type), data, (<span class="keywordtype">void</span>*) size, use, 13, sUse, request);</div>
<div class="line"><a name="l11360"></a><span class="lineno">11360</span>&#160; </div>
<div class="line"><a name="l11361"></a><span class="lineno">11361</span>&#160;    recursive--;</div>
<div class="line"><a name="l11362"></a><span class="lineno">11362</span>&#160; </div>
<div class="line"><a name="l11363"></a><span class="lineno">11363</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l11364"></a><span class="lineno">11364</span>&#160; </div>
<div class="line"><a name="l11365"></a><span class="lineno">11365</span>&#160;    UNREFERENCED_PARAMETER (type);</div>
<div class="line"><a name="l11366"></a><span class="lineno">11366</span>&#160;    UNREFERENCED_PARAMETER (data);</div>
<div class="line"><a name="l11367"></a><span class="lineno">11367</span>&#160;    UNREFERENCED_PARAMETER (size);</div>
<div class="line"><a name="l11368"></a><span class="lineno">11368</span>&#160;    UNREFERENCED_PARAMETER (use);</div>
<div class="line"><a name="l11369"></a><span class="lineno">11369</span>&#160;    UNREFERENCED_PARAMETER (request);</div>
<div class="line"><a name="l11370"></a><span class="lineno">11370</span>&#160;    UNREFERENCED_PARAMETER (file);</div>
<div class="line"><a name="l11371"></a><span class="lineno">11371</span>&#160;    UNREFERENCED_PARAMETER (line);</div>
<div class="line"><a name="l11372"></a><span class="lineno">11372</span>&#160; </div>
<div class="line"><a name="l11373"></a><span class="lineno">11373</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11374"></a><span class="lineno">11374</span>&#160; </div>
<div class="line"><a name="l11375"></a><span class="lineno">11375</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">//-V601</span></div>
<div class="line"><a name="l11376"></a><span class="lineno">11376</span>&#160;    }</div>
<div class="line"><a name="l11377"></a><span class="lineno">11377</span>&#160; </div>
<div class="line"><a name="l11378"></a><span class="lineno">11378</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11379"></a><span class="lineno">11379</span>&#160; </div>
<div class="line"><a name="l11380"></a><span class="lineno">11380</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l11381"></a><span class="lineno">11381</span>&#160; </div>
<div class="line"><a name="l11382"></a><span class="lineno">11382</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l11383"></a><span class="lineno">11383</span>&#160; </div>
<div class="line"><a name="l11384"></a><span class="lineno">11384</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l11385"></a><span class="lineno">11385</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11386"></a><span class="lineno">11386</span>&#160; </div>
<div class="line"><a name="l11387"></a><span class="lineno">11387</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11388"></a><span class="lineno">11388</span>&#160;<span class="comment">//{          SEH staff</span></div>
<div class="line"><a name="l11389"></a><span class="lineno">11389</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11390"></a><span class="lineno">11390</span>&#160; </div>
<div class="line"><a name="l11391"></a><span class="lineno">11391</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l11392"></a><span class="lineno">11392</span>&#160; </div>
<div class="line"><a name="l11393"></a><span class="lineno">11393</span>&#160;<span class="keywordtype">long</span> WINAPI _txVectoredExceptionHandler (EXCEPTION_POINTERS* exc)</div>
<div class="line"><a name="l11394"></a><span class="lineno">11394</span>&#160;    {</div>
<div class="line"><a name="l11395"></a><span class="lineno">11395</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="group___technical.html#ga90ceca3b49e5f889f5f07a996b28b0b3">_txProcessSystemWarnings</a>)</div>
<div class="line"><a name="l11396"></a><span class="lineno">11396</span>&#160;        {</div>
<div class="line"><a name="l11397"></a><span class="lineno">11397</span>&#160;        DWORD code = (exc &amp;&amp; exc-&gt;ExceptionRecord)? exc-&gt;ExceptionRecord-&gt;ExceptionCode    : 0;     <span class="comment">//-V560</span></div>
<div class="line"><a name="l11398"></a><span class="lineno">11398</span>&#160;        <span class="keywordtype">void</span>* addr = (exc &amp;&amp; exc-&gt;ExceptionRecord)? exc-&gt;ExceptionRecord-&gt;ExceptionAddress : NULL;  <span class="comment">//-V560</span></div>
<div class="line"><a name="l11399"></a><span class="lineno">11399</span>&#160; </div>
<div class="line"><a name="l11400"></a><span class="lineno">11400</span>&#160;        <span class="keywordflow">if</span> (code != DBG_PRINTEXCEPTION_C &amp;&amp;</div>
<div class="line"><a name="l11401"></a><span class="lineno">11401</span>&#160;            code != DBG_PRINTEXCEPTION_WIDE_C)</div>
<div class="line"><a name="l11402"></a><span class="lineno">11402</span>&#160;            {</div>
<div class="line"><a name="l11403"></a><span class="lineno">11403</span>&#160;            <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: %s (code 0x%08lX, addr 0x%p) called and SKIPPED! (_txProcessSystemWarnings == %d)\n&quot;</span>,</div>
<div class="line"><a name="l11404"></a><span class="lineno">11404</span>&#160;                                 _TX_VERSION, <span class="stringliteral">&quot;_txVectoredExceptionHandler&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) code, addr, <a class="code" href="group___technical.html#ga90ceca3b49e5f889f5f07a996b28b0b3">_txProcessSystemWarnings</a>);</div>
<div class="line"><a name="l11405"></a><span class="lineno">11405</span>&#160;            }</div>
<div class="line"><a name="l11406"></a><span class="lineno">11406</span>&#160; </div>
<div class="line"><a name="l11407"></a><span class="lineno">11407</span>&#160;        <span class="keywordflow">return</span> EXCEPTION_CONTINUE_SEARCH;</div>
<div class="line"><a name="l11408"></a><span class="lineno">11408</span>&#160;        }</div>
<div class="line"><a name="l11409"></a><span class="lineno">11409</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l11410"></a><span class="lineno">11410</span>&#160;        {</div>
<div class="line"><a name="l11411"></a><span class="lineno">11411</span>&#160;        <span class="keywordtype">int</span> inTX = _txLoc::Cur.inTX++;</div>
<div class="line"><a name="l11412"></a><span class="lineno">11412</span>&#160; </div>
<div class="line"><a name="l11413"></a><span class="lineno">11413</span>&#160;        <span class="keywordtype">long</span> ret = _txOnExceptionSEH (exc, <span class="stringliteral">&quot;_txVectoredExceptionHandler&quot;</span>);</div>
<div class="line"><a name="l11414"></a><span class="lineno">11414</span>&#160; </div>
<div class="line"><a name="l11415"></a><span class="lineno">11415</span>&#160;        _txLoc::Cur.inTX = inTX;</div>
<div class="line"><a name="l11416"></a><span class="lineno">11416</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l11417"></a><span class="lineno">11417</span>&#160;        }</div>
<div class="line"><a name="l11418"></a><span class="lineno">11418</span>&#160;    }</div>
<div class="line"><a name="l11419"></a><span class="lineno">11419</span>&#160; </div>
<div class="line"><a name="l11420"></a><span class="lineno">11420</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11421"></a><span class="lineno">11421</span>&#160; </div>
<div class="line"><a name="l11422"></a><span class="lineno">11422</span>&#160;<span class="keywordtype">long</span> WINAPI _txUnhandledExceptionFilter (EXCEPTION_POINTERS* exc)</div>
<div class="line"><a name="l11423"></a><span class="lineno">11423</span>&#160;    {</div>
<div class="line"><a name="l11424"></a><span class="lineno">11424</span>&#160;    <span class="keywordtype">int</span> inTX = _txLoc::Cur.inTX++;</div>
<div class="line"><a name="l11425"></a><span class="lineno">11425</span>&#160; </div>
<div class="line"><a name="l11426"></a><span class="lineno">11426</span>&#160;    <span class="keywordtype">long</span> ret = _txOnExceptionSEH (exc, <span class="stringliteral">&quot;_txUnhandledExceptionFilter&quot;</span>);</div>
<div class="line"><a name="l11427"></a><span class="lineno">11427</span>&#160; </div>
<div class="line"><a name="l11428"></a><span class="lineno">11428</span>&#160;    <span class="keywordflow">if</span> (_txPrevUEFilter)</div>
<div class="line"><a name="l11429"></a><span class="lineno">11429</span>&#160;        {</div>
<div class="line"><a name="l11430"></a><span class="lineno">11430</span>&#160;        <span class="keywordflow">if</span> (_txSetJmp())</div>
<div class="line"><a name="l11431"></a><span class="lineno">11431</span>&#160;            {</div>
<div class="line"><a name="l11432"></a><span class="lineno">11432</span>&#160;            <span class="keywordtype">int</span> inTX2 = _txLoc::Cur.inTX++;</div>
<div class="line"><a name="l11433"></a><span class="lineno">11433</span>&#160; </div>
<div class="line"><a name="l11434"></a><span class="lineno">11434</span>&#160;            ret = _txPrevUEFilter (exc);</div>
<div class="line"><a name="l11435"></a><span class="lineno">11435</span>&#160; </div>
<div class="line"><a name="l11436"></a><span class="lineno">11436</span>&#160;            _txLoc::Cur.inTX = inTX2;</div>
<div class="line"><a name="l11437"></a><span class="lineno">11437</span>&#160;            }</div>
<div class="line"><a name="l11438"></a><span class="lineno">11438</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l11439"></a><span class="lineno">11439</span>&#160;            {</div>
<div class="line"><a name="l11440"></a><span class="lineno">11440</span>&#160;$6          _txClearJmp();</div>
<div class="line"><a name="l11441"></a><span class="lineno">11441</span>&#160; </div>
<div class="line"><a name="l11442"></a><span class="lineno">11442</span>&#160;            _TX_UNEXPECTED (<span class="stringliteral">&quot;\t\a&quot;</span> <span class="stringliteral">&quot;%s&quot;</span></div>
<div class="line"><a name="l11443"></a><span class="lineno">11443</span>&#160;                            <span class="stringliteral">&quot;С помощью функции _set_se_translator() вы можете сами обработать эту ошибку.\n\n&quot;</span></div>
<div class="line"><a name="l11444"></a><span class="lineno">11444</span>&#160;                            <span class="stringliteral">&quot;Дополнительно: Сбой вызова стандартного обработчика неперехваченнных исключений SEH.&quot;</span> + !*_txDumpSE,</div>
<div class="line"><a name="l11445"></a><span class="lineno">11445</span>&#160;                            _txDumpSE + 1);</div>
<div class="line"><a name="l11446"></a><span class="lineno">11446</span>&#160;            }</div>
<div class="line"><a name="l11447"></a><span class="lineno">11447</span>&#160;        }</div>
<div class="line"><a name="l11448"></a><span class="lineno">11448</span>&#160; </div>
<div class="line"><a name="l11449"></a><span class="lineno">11449</span>&#160;    _txLoc::Cur.inTX = inTX;</div>
<div class="line"><a name="l11450"></a><span class="lineno">11450</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l11451"></a><span class="lineno">11451</span>&#160;    }</div>
<div class="line"><a name="l11452"></a><span class="lineno">11452</span>&#160; </div>
<div class="line"><a name="l11453"></a><span class="lineno">11453</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11454"></a><span class="lineno">11454</span>&#160; </div>
<div class="line"><a name="l11455"></a><span class="lineno">11455</span>&#160;LPTOP_LEVEL_EXCEPTION_FILTER WINAPI _txOnSetUnhandledExceptionFilter (LPTOP_LEVEL_EXCEPTION_FILTER filter)</div>
<div class="line"><a name="l11456"></a><span class="lineno">11456</span>&#160;    {</div>
<div class="line"><a name="l11457"></a><span class="lineno">11457</span>&#160;$6  _txPrevUEFilter = filter;</div>
<div class="line"><a name="l11458"></a><span class="lineno">11458</span>&#160; </div>
<div class="line"><a name="l11459"></a><span class="lineno">11459</span>&#160;    <span class="keywordflow">return</span> (LPTOP_LEVEL_EXCEPTION_FILTER) _txUnhandledExceptionFilter;</div>
<div class="line"><a name="l11460"></a><span class="lineno">11460</span>&#160;    }</div>
<div class="line"><a name="l11461"></a><span class="lineno">11461</span>&#160; </div>
<div class="line"><a name="l11462"></a><span class="lineno">11462</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11463"></a><span class="lineno">11463</span>&#160; </div>
<div class="line"><a name="l11464"></a><span class="lineno">11464</span>&#160;<span class="keywordtype">long</span> _txOnExceptionSEH (EXCEPTION_POINTERS* exc, <span class="keyword">const</span> <span class="keywordtype">char</span> func[])</div>
<div class="line"><a name="l11465"></a><span class="lineno">11465</span>&#160;    {</div>
<div class="line"><a name="l11466"></a><span class="lineno">11466</span>&#160;    assert (exc); <span class="keywordflow">if</span> (!exc) {$ <span class="keywordflow">return</span> EXCEPTION_CONTINUE_SEARCH; }  <span class="comment">//-V547</span></div>
<div class="line"><a name="l11467"></a><span class="lineno">11467</span>&#160; </div>
<div class="line"><a name="l11468"></a><span class="lineno">11468</span>&#160;    assert (exc-&gt;ExceptionRecord);</div>
<div class="line"><a name="l11469"></a><span class="lineno">11469</span>&#160; </div>
<div class="line"><a name="l11470"></a><span class="lineno">11470</span>&#160;    assert (func);</div>
<div class="line"><a name="l11471"></a><span class="lineno">11471</span>&#160;    assert (func[3] == <span class="charliteral">&#39;V&#39;</span> || func[3] == <span class="charliteral">&#39;U&#39;</span>);</div>
<div class="line"><a name="l11472"></a><span class="lineno">11472</span>&#160; </div>
<div class="line"><a name="l11473"></a><span class="lineno">11473</span>&#160;    <span class="keywordtype">bool</span>  unhExc = (func[3] == <span class="charliteral">&#39;U&#39;</span>);</div>
<div class="line"><a name="l11474"></a><span class="lineno">11474</span>&#160;    DWORD code   = (exc &amp;&amp; exc-&gt;ExceptionRecord)? exc-&gt;ExceptionRecord-&gt;ExceptionCode    : 0;     <span class="comment">//-V560</span></div>
<div class="line"><a name="l11475"></a><span class="lineno">11475</span>&#160;    <span class="keywordtype">void</span>* addr   = (exc &amp;&amp; exc-&gt;ExceptionRecord)? exc-&gt;ExceptionRecord-&gt;ExceptionAddress : NULL;  <span class="comment">//-V560</span></div>
<div class="line"><a name="l11476"></a><span class="lineno">11476</span>&#160; </div>
<div class="line"><a name="l11477"></a><span class="lineno">11477</span>&#160;    <span class="keywordflow">if</span> (code == DBG_PRINTEXCEPTION_C                  ||</div>
<div class="line"><a name="l11478"></a><span class="lineno">11478</span>&#160;        code == DBG_PRINTEXCEPTION_WIDE_C             ||</div>
<div class="line"><a name="l11479"></a><span class="lineno">11479</span>&#160;        code == DBG_THREAD_NAME                       ||</div>
<div class="line"><a name="l11480"></a><span class="lineno">11480</span>&#160;       (code == RPC_S_SERVER_UNAVAILABLE  &amp;&amp; !unhExc) ||</div>
<div class="line"><a name="l11481"></a><span class="lineno">11481</span>&#160;       (code == RPC_S_CALL_CANCELLED      &amp;&amp; !unhExc) ||</div>
<div class="line"><a name="l11482"></a><span class="lineno">11482</span>&#160;       (code == EXCEPTION_BREAKPOINT &amp;&amp; IsDebuggerPresent()))</div>
<div class="line"><a name="l11483"></a><span class="lineno">11483</span>&#160;        <span class="keywordflow">return</span> EXCEPTION_CONTINUE_SEARCH;</div>
<div class="line"><a name="l11484"></a><span class="lineno">11484</span>&#160; </div>
<div class="line"><a name="l11485"></a><span class="lineno">11485</span>&#160;    _txSENumber = _txSENumber + 1;</div>
<div class="line"><a name="l11486"></a><span class="lineno">11486</span>&#160;    <span class="keywordflow">if</span> (HIBYTE (HIWORD (code)) == 0xC0) _txSEFatalNumber = _txSEFatalNumber + 1;</div>
<div class="line"><a name="l11487"></a><span class="lineno">11487</span>&#160; </div>
<div class="line"><a name="l11488"></a><span class="lineno">11488</span>&#160;    OutputDebugString (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l11489"></a><span class="lineno">11489</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - WARNING: #%ld: %s (code 0x%08lX, addr 0x%p) called\n&quot;</span>,</div>
<div class="line"><a name="l11490"></a><span class="lineno">11490</span>&#160;                         _TX_VERSION, _txSENumber, func, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) code, addr);</div>
<div class="line"><a name="l11491"></a><span class="lineno">11491</span>&#160; </div>
<div class="line"><a name="l11492"></a><span class="lineno">11492</span>&#160;$6  <span class="keywordflow">if</span> (*(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>*) _txDumpExceptionObjJmp)</div>
<div class="line"><a name="l11493"></a><span class="lineno">11493</span>&#160;        {</div>
<div class="line"><a name="l11494"></a><span class="lineno">11494</span>&#160;$       longjmp (_txDumpExceptionObjJmp, 1);  <span class="comment">//-V2512</span></div>
<div class="line"><a name="l11495"></a><span class="lineno">11495</span>&#160;        }</div>
<div class="line"><a name="l11496"></a><span class="lineno">11496</span>&#160; </div>
<div class="line"><a name="l11497"></a><span class="lineno">11497</span>&#160;    <a class="code" href="group___misc.html#ga5de732de72c46b992ac2feeac2de7e42">tx_fpreset</a>();</div>
<div class="line"><a name="l11498"></a><span class="lineno">11498</span>&#160; </div>
<div class="line"><a name="l11499"></a><span class="lineno">11499</span>&#160;<span class="preprocessor">    #if defined (_MSC_VER)</span></div>
<div class="line"><a name="l11500"></a><span class="lineno">11500</span>&#160;    <span class="keywordflow">if</span> (code == EXCEPTION_STACK_OVERFLOW) {$ _resetstkoflw(); }</div>
<div class="line"><a name="l11501"></a><span class="lineno">11501</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11502"></a><span class="lineno">11502</span>&#160; </div>
<div class="line"><a name="l11503"></a><span class="lineno">11503</span>&#160;$   <span class="keywordtype">bool</span> primaryException = !(func &amp;&amp; exc) || !((unhExc &amp;&amp; *_txDumpSE) || _TX_MSC__CXX_DETECT_RETHROW (exc-&gt;ExceptionRecord));  <span class="comment">//-V560</span></div>
<div class="line"><a name="l11504"></a><span class="lineno">11504</span>&#160; </div>
<div class="line"><a name="l11505"></a><span class="lineno">11505</span>&#160;$   <span class="keywordflow">if</span> (primaryException &amp;&amp; exc)  <span class="comment">//-V560</span></div>
<div class="line"><a name="l11506"></a><span class="lineno">11506</span>&#160;        {</div>
<div class="line"><a name="l11507"></a><span class="lineno">11507</span>&#160;$       <span class="keywordtype">unsigned</span> err = GetLastError();</div>
<div class="line"><a name="l11508"></a><span class="lineno">11508</span>&#160; </div>
<div class="line"><a name="l11509"></a><span class="lineno">11509</span>&#160;$       <span class="keyword">const</span> <span class="keywordtype">char</span>* stackTrace = _txCaptureStackBackTrace (0, <span class="keyword">true</span>, exc-&gt;ContextRecord, exc);</div>
<div class="line"><a name="l11510"></a><span class="lineno">11510</span>&#160; </div>
<div class="line"><a name="l11511"></a><span class="lineno">11511</span>&#160;$       _txDumpExceptionSEH (_txDumpSE,  (intptr_t) <span class="keyword">sizeof</span> (_txDumpSE)  - 1, exc-&gt;ExceptionRecord, func);</div>
<div class="line"><a name="l11512"></a><span class="lineno">11512</span>&#160;$       _tx_snprintf_s      (_txTraceSE, (intptr_t) <span class="keyword">sizeof</span> (_txTraceSE) - 1, <span class="stringliteral">&quot;%s&quot;</span>, stackTrace);</div>
<div class="line"><a name="l11513"></a><span class="lineno">11513</span>&#160; </div>
<div class="line"><a name="l11514"></a><span class="lineno">11514</span>&#160;$       <span class="keyword">static</span> _tx_thread DWORD prevCode = 0;</div>
<div class="line"><a name="l11515"></a><span class="lineno">11515</span>&#160;$       <span class="keyword">static</span> _tx_thread <span class="keywordtype">void</span>* prevAddr = NULL;</div>
<div class="line"><a name="l11516"></a><span class="lineno">11516</span>&#160; </div>
<div class="line"><a name="l11517"></a><span class="lineno">11517</span>&#160;$       <span class="keywordflow">if</span> (code != prevCode &amp;&amp; addr != prevAddr &amp;&amp;</div>
<div class="line"><a name="l11518"></a><span class="lineno">11518</span>&#160;            !strstr (_txDumpSE, <span class="stringliteral">&quot;Объект исключения C++:&quot;</span>))</div>
<div class="line"><a name="l11519"></a><span class="lineno">11519</span>&#160;            {</div>
<div class="line"><a name="l11520"></a><span class="lineno">11520</span>&#160;$           SetLastError (err);</div>
<div class="line"><a name="l11521"></a><span class="lineno">11521</span>&#160;$           _TX_UNEXPECTED (<span class="stringliteral">&quot;\v\b\t&quot;</span> <span class="stringliteral">&quot;%s&quot;</span>, _txDumpSE + 1);</div>
<div class="line"><a name="l11522"></a><span class="lineno">11522</span>&#160; </div>
<div class="line"><a name="l11523"></a><span class="lineno">11523</span>&#160;$           prevCode = code;</div>
<div class="line"><a name="l11524"></a><span class="lineno">11524</span>&#160;$           prevAddr = addr;</div>
<div class="line"><a name="l11525"></a><span class="lineno">11525</span>&#160;            }</div>
<div class="line"><a name="l11526"></a><span class="lineno">11526</span>&#160; </div>
<div class="line"><a name="l11527"></a><span class="lineno">11527</span>&#160;$       SetLastError (err);</div>
<div class="line"><a name="l11528"></a><span class="lineno">11528</span>&#160;        }</div>
<div class="line"><a name="l11529"></a><span class="lineno">11529</span>&#160; </div>
<div class="line"><a name="l11530"></a><span class="lineno">11530</span>&#160;$   <span class="keywordflow">if</span> (_txDumpSE[0]     == <span class="charliteral">&#39;\a&#39;</span>                   ||</div>
<div class="line"><a name="l11531"></a><span class="lineno">11531</span>&#160;        _txSENumber      &gt;= <a class="code" href="group___technical.html#ga15dc1a04b8701e2db400b005b7a17ced">_TX_EXCEPTIONS_LIMIT</a>+0 ||</div>
<div class="line"><a name="l11532"></a><span class="lineno">11532</span>&#160;        _txSEFatalNumber &gt;= <a class="code" href="group___technical.html#gaf274c058737ec7e680437d2a1cdcd7b6">_TX_FATAL_EXCEPTIONS_LIMIT</a>+0)</div>
<div class="line"><a name="l11533"></a><span class="lineno">11533</span>&#160;        {</div>
<div class="line"><a name="l11534"></a><span class="lineno">11534</span>&#160;$       _TX_UNEXPECTED (<span class="stringliteral">&quot;\a\t&quot;</span> <span class="stringliteral">&quot;%s&quot;</span></div>
<div class="line"><a name="l11535"></a><span class="lineno">11535</span>&#160;                        <span class="stringliteral">&quot;С помощью функции _set_se_translator() вы можете сами обработать эту ошибку.&quot;</span>,</div>
<div class="line"><a name="l11536"></a><span class="lineno">11536</span>&#160;                        _txDumpSE + 1);</div>
<div class="line"><a name="l11537"></a><span class="lineno">11537</span>&#160;        }</div>
<div class="line"><a name="l11538"></a><span class="lineno">11538</span>&#160; </div>
<div class="line"><a name="l11539"></a><span class="lineno">11539</span>&#160;$   <span class="keywordflow">return</span> EXCEPTION_CONTINUE_SEARCH;</div>
<div class="line"><a name="l11540"></a><span class="lineno">11540</span>&#160;    }</div>
<div class="line"><a name="l11541"></a><span class="lineno">11541</span>&#160; </div>
<div class="line"><a name="l11542"></a><span class="lineno">11542</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11543"></a><span class="lineno">11543</span>&#160; </div>
<div class="line"><a name="l11544"></a><span class="lineno">11544</span>&#160;intptr_t _txDumpExceptionSEH (<span class="keywordtype">char</span> what[], intptr_t size, <span class="keyword">const</span> EXCEPTION_RECORD* exc, <span class="keyword">const</span> <span class="keywordtype">char</span> func[])  <span class="comment">//-V2008</span></div>
<div class="line"><a name="l11545"></a><span class="lineno">11545</span>&#160;    {</div>
<div class="line"><a name="l11546"></a><span class="lineno">11546</span>&#160;$6  assert (what);</div>
<div class="line"><a name="l11547"></a><span class="lineno">11547</span>&#160;$   assert (size &gt;= 0);                     <span class="comment">//-V547</span></div>
<div class="line"><a name="l11548"></a><span class="lineno">11548</span>&#160;    assert (exc); <span class="keywordflow">if</span> (!exc) {$ <span class="keywordflow">return</span> 0; }  <span class="comment">//-V547</span></div>
<div class="line"><a name="l11549"></a><span class="lineno">11549</span>&#160;$   assert (func);</div>
<div class="line"><a name="l11550"></a><span class="lineno">11550</span>&#160; </div>
<div class="line"><a name="l11551"></a><span class="lineno">11551</span>&#160;$   <span class="keywordtype">unsigned</span>         code   = exc-&gt;ExceptionCode;</div>
<div class="line"><a name="l11552"></a><span class="lineno">11552</span>&#160;$   <span class="keywordtype">void</span>*            addr   = exc-&gt;ExceptionAddress;</div>
<div class="line"><a name="l11553"></a><span class="lineno">11553</span>&#160;$   <span class="keywordtype">unsigned</span>         params = exc-&gt;NumberParameters;</div>
<div class="line"><a name="l11554"></a><span class="lineno">11554</span>&#160;$   <span class="keyword">const</span> ULONG_PTR* info   = exc-&gt;ExceptionInformation;</div>
<div class="line"><a name="l11555"></a><span class="lineno">11555</span>&#160;$   <span class="keywordtype">void</span>*            <span class="keywordtype">object</span> = (params &gt;= 2)? (<span class="keywordtype">void</span>*) info[1] : NULL;</div>
<div class="line"><a name="l11556"></a><span class="lineno">11556</span>&#160; </div>
<div class="line"><a name="l11557"></a><span class="lineno">11557</span>&#160;$   <span class="keywordtype">char</span>* s = what;</div>
<div class="line"><a name="l11558"></a><span class="lineno">11558</span>&#160; </div>
<div class="line"><a name="l11559"></a><span class="lineno">11559</span>&#160;<span class="preprocessor">    #define PRINT_(...)  s += _tx_snprintf_s (s, size-2 - (s-what), ##__VA_ARGS__)</span></div>
<div class="line"><a name="l11560"></a><span class="lineno">11560</span>&#160; </div>
<div class="line"><a name="l11561"></a><span class="lineno">11561</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* sCode  = NULL;</div>
<div class="line"><a name="l11562"></a><span class="lineno">11562</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* sDescr = NULL;</div>
<div class="line"><a name="l11563"></a><span class="lineno">11563</span>&#160; </div>
<div class="line"><a name="l11564"></a><span class="lineno">11564</span>&#160;<span class="preprocessor">    #define GET_DESCR_(code, descr)  case ((unsigned long) (code)): {$ sCode = #code; sDescr = descr; break; }</span></div>
<div class="line"><a name="l11565"></a><span class="lineno">11565</span>&#160; </div>
<div class="line"><a name="l11566"></a><span class="lineno">11566</span>&#160;$   <span class="keywordflow">switch</span> (code)</div>
<div class="line"><a name="l11567"></a><span class="lineno">11567</span>&#160;        {</div>
<div class="line"><a name="l11568"></a><span class="lineno">11568</span>&#160;        GET_DESCR_ (EXCEPTION_ACCESS_VIOLATION,         <span class="stringliteral">&quot; &quot;</span>  <span class="stringliteral">&quot;Нарушение доступа к памяти.&quot;</span>)</div>
<div class="line"><a name="l11569"></a><span class="lineno">11569</span>&#160;        GET_DESCR_ (EXCEPTION_ILLEGAL_INSTRUCTION,      &quot; &quot;  &quot;Недопустимая операция.&quot;)</div>
<div class="line"><a name="l11570"></a><span class="lineno">11570</span>&#160;        GET_DESCR_ (EXCEPTION_PRIV_INSTRUCTION,         &quot; &quot;  &quot;Привилегированная операция.&quot;)</div>
<div class="line"><a name="l11571"></a><span class="lineno">11571</span>&#160;        GET_DESCR_ (EXCEPTION_ARRAY_BOUNDS_EXCEEDED,    &quot;\a&quot; &quot;Выход за границы массива. Ставьте ассерты!&quot;)</div>
<div class="line"><a name="l11572"></a><span class="lineno">11572</span>&#160;        GET_DESCR_ (EXCEPTION_BREAKPOINT,               &quot;\a&quot; &quot;Достигнута точка останова. Удачи в отладке!&quot;)</div>
<div class="line"><a name="l11573"></a><span class="lineno">11573</span>&#160;        GET_DESCR_ (EXCEPTION_DATATYPE_MISALIGNMENT,    &quot;\a&quot; &quot;Нарушение выравнивания данных.&quot;)</div>
<div class="line"><a name="l11574"></a><span class="lineno">11574</span>&#160;        GET_DESCR_ (EXCEPTION_INVALID_DISPOSITION,      &quot;\a&quot; &quot;Обработчик исключения возвратил неверное значение.&quot;)</div>
<div class="line"><a name="l11575"></a><span class="lineno">11575</span>&#160;        GET_DESCR_ (EXCEPTION_IN_PAGE_ERROR,            &quot;\a&quot; &quot;Невозможно загрузить нужную страницу памяти.&quot;)</div>
<div class="line"><a name="l11576"></a><span class="lineno">11576</span>&#160;        GET_DESCR_ (EXCEPTION_NONCONTINUABLE_EXCEPTION, &quot;\a&quot; &quot;Продолжение выполнения невозможно.&quot;)</div>
<div class="line"><a name="l11577"></a><span class="lineno">11577</span>&#160;        GET_DESCR_ (EXCEPTION_SINGLE_STEP,              &quot;\a&quot; &quot;Выполнена инструкция машинного кода. Одна штука.&quot;)</div>
<div class="line"><a name="l11578"></a><span class="lineno">11578</span>&#160;        GET_DESCR_ (EXCEPTION_STACK_OVERFLOW,           &quot;\a&quot; &quot;Ю-ху! Переполнение стека!&quot;)</div>
<div class="line"><a name="l11579"></a><span class="lineno">11579</span>&#160;        GET_DESCR_ (EXCEPTION_GUARD_PAGE,               &quot;\a&quot; &quot;Попытка доступа к защищенной странице памяти.&quot;)</div>
<div class="line"><a name="l11580"></a><span class="lineno">11580</span>&#160;        GET_DESCR_ (EXCEPTION_INVALID_HANDLE,           &quot;\a&quot; &quot;Неверный или уже закрытый дескриптор.&quot;)</div>
<div class="line"><a name="l11581"></a><span class="lineno">11581</span>&#160;        GET_DESCR_ (STATUS_POSSIBLE_DEADLOCK,           &quot;\a&quot; &quot;Возможно, взаимная блокировка ресурсов.&quot;)</div>
<div class="line"><a name="l11582"></a><span class="lineno">11582</span>&#160; </div>
<div class="line"><a name="l11583"></a><span class="lineno">11583</span>&#160;        GET_DESCR_ (EXCEPTION_FLT_STACK_CHECK,          &quot;\a&quot; &quot;Ошибка стека при операции с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11584"></a><span class="lineno">11584</span>&#160;        GET_DESCR_ (EXCEPTION_FLT_DENORMAL_OPERAND,     &quot; &quot;  &quot;Денормализация числа с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11585"></a><span class="lineno">11585</span>&#160;        GET_DESCR_ (EXCEPTION_FLT_DIVIDE_BY_ZERO,       &quot; &quot;  &quot;Деление на ноль при операции с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11586"></a><span class="lineno">11586</span>&#160;        GET_DESCR_ (EXCEPTION_FLT_INEXACT_RESULT,       &quot; &quot;  &quot;Неточный результат при операции с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11587"></a><span class="lineno">11587</span>&#160;        GET_DESCR_ (EXCEPTION_FLT_INVALID_OPERATION,    &quot; &quot;  &quot;Недопустимая операция с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11588"></a><span class="lineno">11588</span>&#160;        GET_DESCR_ (EXCEPTION_FLT_OVERFLOW,             &quot; &quot;  &quot;Переполнение при операции с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11589"></a><span class="lineno">11589</span>&#160;        GET_DESCR_ (EXCEPTION_FLT_UNDERFLOW,            &quot; &quot;  &quot;Потеря значимости при операции с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11590"></a><span class="lineno">11590</span>&#160;        GET_DESCR_ (STATUS_FLOAT_MULTIPLE_FAULTS,       &quot; &quot;  &quot;Множественные ошибки с плавающей точкой.&quot;)</div>
<div class="line"><a name="l11591"></a><span class="lineno">11591</span>&#160; </div>
<div class="line"><a name="l11592"></a><span class="lineno">11592</span>&#160;        GET_DESCR_ (EXCEPTION_INT_DIVIDE_BY_ZERO,       &quot;\a&quot; &quot;Целочисленное деление на ноль.&quot;)</div>
<div class="line"><a name="l11593"></a><span class="lineno">11593</span>&#160;        GET_DESCR_ (EXCEPTION_INT_OVERFLOW,             &quot;\a&quot; &quot;Переполнение при целочисленной операции.&quot;)</div>
<div class="line"><a name="l11594"></a><span class="lineno">11594</span>&#160; </div>
<div class="line"><a name="l11595"></a><span class="lineno">11595</span>&#160;        GET_DESCR_ (EXCEPTION_CLR_FAILURE,              &quot;\a&quot; &quot;Сбой среды исполнения (CLR).&quot;)</div>
<div class="line"><a name="l11596"></a><span class="lineno">11596</span>&#160;        GET_DESCR_ (STATUS_STACK_BUFFER_OVERRUN,        &quot;\a&quot; &quot;Переполнение стекового буфера!&quot;)</div>
<div class="line"><a name="l11597"></a><span class="lineno">11597</span>&#160;        GET_DESCR_ (STATUS_ASSERTION_FAILURE,           &quot;\a&quot; &quot;Сработал assert. На этот раз из ядра.&quot;)</div>
<div class="line"><a name="l11598"></a><span class="lineno">11598</span>&#160;        GET_DESCR_ (STATUS_WX86_BREAKPOINT,             &quot;\a&quot; &quot;Точка останова подсистемы эмуляции x86.&quot;)</div>
<div class="line"><a name="l11599"></a><span class="lineno">11599</span>&#160;        GET_DESCR_ (RPC_S_UNKNOWN_IF,                   &quot;\a&quot; &quot;Неизвестный интерфейс удаленного вызова процедур (RPC).&quot;)</div>
<div class="line"><a name="l11600"></a><span class="lineno">11600</span>&#160;        GET_DESCR_ (RPC_S_SERVER_UNAVAILABLE,           &quot;\a&quot; &quot;Сервер удаленного вызова процедур (RPC) недоступен.&quot;)</div>
<div class="line"><a name="l11601"></a><span class="lineno">11601</span>&#160;        GET_DESCR_ (DBG_TERMINATE_THREAD,               &quot;\a&quot; &quot;Отладчик завершил поток сознания.&quot;)</div>
<div class="line"><a name="l11602"></a><span class="lineno">11602</span>&#160;        GET_DESCR_ (DBG_TERMINATE_PROCESS,              &quot;\a&quot; &quot;Отладчик завершил процесс.&quot;)</div>
<div class="line"><a name="l11603"></a><span class="lineno">11603</span>&#160;        GET_DESCR_ (DBG_CONTROL_C,                      &quot;\a&quot; &quot;Отладчик получил сигнал прерывания Control+C.&quot;)</div>
<div class="line"><a name="l11604"></a><span class="lineno">11604</span>&#160;        GET_DESCR_ (DBG_CONTROL_BREAK,                  &quot;\a&quot; &quot;Отладчик получил сигнал прерывания Control+Break.&quot;)</div>
<div class="line"><a name="l11605"></a><span class="lineno">11605</span>&#160;        GET_DESCR_ (DBG_THREAD_NAME,                    &quot; &quot;  &quot;Отладчик получил указание дать потоку имя.&quot;)</div>
<div class="line"><a name="l11606"></a><span class="lineno">11606</span>&#160;        GET_DESCR_ (DBG_PRINTEXCEPTION_C,               &quot; &quot;  &quot;Отладчик вывел исключение по CTRL+C (OutputDebugStringA).&quot;)</div>
<div class="line"><a name="l11607"></a><span class="lineno">11607</span>&#160;        GET_DESCR_ (DBG_PRINTEXCEPTION_WIDE_C,          &quot; &quot;  &quot;Отладчик вывел исключение по CTRL+C (OutputDebugStringW).&quot;)</div>
<div class="line"><a name="l11608"></a><span class="lineno">11608</span>&#160; </div>
<div class="line"><a name="l11609"></a><span class="lineno">11609</span>&#160;        GET_DESCR_ (EXCEPTION_CPP_MSC,                  &quot; &quot;  &quot;Исключение С++, вызванное оператором throw.&quot;)</div>
<div class="line"><a name="l11610"></a><span class="lineno">11610</span>&#160;        GET_DESCR_ (EXCEPTION_CPP_GCC,                  &quot; &quot;  &quot;Исключение С++, вызванное оператором throw.&quot;)</div>
<div class="line"><a name="l11611"></a><span class="lineno">11611</span>&#160;        GET_DESCR_ (EXCEPTION_CPP_GCC_UNWIND,           &quot; &quot;  &quot;Исключение С++, вызванное во время раскрутки стека (rethrow?).&quot;)</div>
<div class="line"><a name="l11612"></a><span class="lineno">11612</span>&#160;        GET_DESCR_ (EXCEPTION_CPP_GCC_FORCED,           &quot; &quot;  &quot;Исключение С++, вызванное нарушением магии.&quot;)</div>
<div class="line"><a name="l11613"></a><span class="lineno">11613</span>&#160;        GET_DESCR_ (EXCEPTION_CPP_BORLAND_BUILDER,      &quot;\a&quot; &quot;Это скомпилилось под Билдер? O_O&quot;)</div>
<div class="line"><a name="l11614"></a><span class="lineno">11614</span>&#160;        GET_DESCR_ (EXCEPTION_CPP_BORLAND_DELPHI,       &quot;\a&quot; &quot;Это же С++. Как это вышло?&quot;)</div>
<div class="line"><a name="l11615"></a><span class="lineno">11615</span>&#160; </div>
<div class="line"><a name="l11616"></a><span class="lineno">11616</span>&#160;        default: $ break;</div>
<div class="line"><a name="l11617"></a><span class="lineno">11617</span>&#160;        }</div>
<div class="line"><a name="l11618"></a><span class="lineno">11618</span>&#160; </div>
<div class="line"><a name="l11619"></a><span class="lineno">11619</span>&#160;    <span class="preprocessor">#undef GET_DESCR_</span></div>
<div class="line"><a name="l11620"></a><span class="lineno">11620</span>&#160; </div>
<div class="line"><a name="l11621"></a><span class="lineno">11621</span>&#160;$   <span class="keywordflow">if</span> (sDescr)</div>
<div class="line"><a name="l11622"></a><span class="lineno">11622</span>&#160;        {</div>
<div class="line"><a name="l11623"></a><span class="lineno">11623</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;%s\n\n&quot;</span> <span class="stringliteral">&quot;#%ld: Исключение %s&quot;</span>, sDescr, _txSENumber, sCode);</div>
<div class="line"><a name="l11624"></a><span class="lineno">11624</span>&#160;        }</div>
<div class="line"><a name="l11625"></a><span class="lineno">11625</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l11626"></a><span class="lineno">11626</span>&#160;        {</div>
<div class="line"><a name="l11627"></a><span class="lineno">11627</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;\a#%ld: &quot;</span>, _txSENumber);</div>
<div class="line"><a name="l11628"></a><span class="lineno">11628</span>&#160;$       s += FormatMessage (FORMAT_MESSAGE_FROM_HMODULE | FORMAT_MESSAGE_IGNORE_INSERTS,  <span class="comment">//-V102</span></div>
<div class="line"><a name="l11629"></a><span class="lineno">11629</span>&#160;                            GetModuleHandle (<span class="stringliteral">&quot;NTDLL.DLL&quot;</span>), code, MAKELANGID (LANG_NEUTRAL, SUBLANG_DEFAULT),</div>
<div class="line"><a name="l11630"></a><span class="lineno">11630</span>&#160;                            s, (DWORD) (size - (s-what)), NULL) - 2;  <span class="comment">//-V202</span></div>
<div class="line"><a name="l11631"></a><span class="lineno">11631</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;\r\r&quot;</span>);</div>
<div class="line"><a name="l11632"></a><span class="lineno">11632</span>&#160;        }</div>
<div class="line"><a name="l11633"></a><span class="lineno">11633</span>&#160; </div>
<div class="line"><a name="l11634"></a><span class="lineno">11634</span>&#160;$   PRINT_ (<span class="stringliteral">&quot; (0x%X) при выполнении кода по адресу&quot;</span>, code);</div>
<div class="line"><a name="l11635"></a><span class="lineno">11635</span>&#160;$   PRINT_ ((addr? <span class="stringliteral">&quot; 0x%p&quot;</span> : <span class="stringliteral">&quot; NULL&quot;</span>), addr);</div>
<div class="line"><a name="l11636"></a><span class="lineno">11636</span>&#160; </div>
<div class="line"><a name="l11637"></a><span class="lineno">11637</span>&#160;$   Win32::SYMBOL_INFO*     sym  = NULL;</div>
<div class="line"><a name="l11638"></a><span class="lineno">11638</span>&#160;$   Win32::IMAGEHLP_LINE64* line = NULL;</div>
<div class="line"><a name="l11639"></a><span class="lineno">11639</span>&#160; </div>
<div class="line"><a name="l11640"></a><span class="lineno">11640</span>&#160;    <span class="keywordflow">if</span> (addr) {$ _txSymGetFromAddr (addr, &amp;sym, &amp;line); }</div>
<div class="line"><a name="l11641"></a><span class="lineno">11641</span>&#160; </div>
<div class="line"><a name="l11642"></a><span class="lineno">11642</span>&#160;$   <span class="keywordflow">if</span> (sym  &amp;&amp;                   *sym-&gt;Name)      PRINT_ (<span class="stringliteral">&quot; в функции %s()&quot;</span>, sym-&gt;Name);</div>
<div class="line"><a name="l11643"></a><span class="lineno">11643</span>&#160;$   <span class="keywordflow">if</span> (line &amp;&amp; line-&gt;FileName &amp;&amp; *line-&gt;FileName) PRINT_ (<span class="stringliteral">&quot; в файле %s на строке %u&quot;</span>, line-&gt;FileName, (<span class="keywordtype">unsigned</span>) line-&gt;LineNumber);</div>
<div class="line"><a name="l11644"></a><span class="lineno">11644</span>&#160; </div>
<div class="line"><a name="l11645"></a><span class="lineno">11645</span>&#160;$   <span class="keywordflow">if</span> (code == EXCEPTION_ACCESS_VIOLATION ||</div>
<div class="line"><a name="l11646"></a><span class="lineno">11646</span>&#160;        code == EXCEPTION_IN_PAGE_ERROR)</div>
<div class="line"><a name="l11647"></a><span class="lineno">11647</span>&#160;        {</div>
<div class="line"><a name="l11648"></a><span class="lineno">11648</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;. Попытка &quot;</span>);</div>
<div class="line"><a name="l11649"></a><span class="lineno">11649</span>&#160; </div>
<div class="line"><a name="l11650"></a><span class="lineno">11650</span>&#160;$       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> op = 0xBADC0DE;</div>
<div class="line"><a name="l11651"></a><span class="lineno">11651</span>&#160;$       <span class="keyword">const</span> <span class="keywordtype">char</span>*  sOp = <span class="stringliteral">&quot;(действие не указано)&quot;</span>;</div>
<div class="line"><a name="l11652"></a><span class="lineno">11652</span>&#160; </div>
<div class="line"><a name="l11653"></a><span class="lineno">11653</span>&#160;$       <span class="keywordflow">if</span> (params &gt;= 1)</div>
<div class="line"><a name="l11654"></a><span class="lineno">11654</span>&#160;            {</div>
<div class="line"><a name="l11655"></a><span class="lineno">11655</span>&#160;$           <span class="keywordflow">switch</span> (op = (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) info[0])  <span class="comment">//-V202</span></div>
<div class="line"><a name="l11656"></a><span class="lineno">11656</span>&#160;                {</div>
<div class="line"><a name="l11657"></a><span class="lineno">11657</span>&#160;                <span class="keywordflow">case</span> 0:  $ sOp = <span class="stringliteral">&quot;прочесть данные&quot;</span>;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11658"></a><span class="lineno">11658</span>&#160;                <span class="keywordflow">case</span> 1:  $ sOp = <span class="stringliteral">&quot;записать данные&quot;</span>;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11659"></a><span class="lineno">11659</span>&#160;                <span class="keywordflow">case</span> 8:  $ sOp = <span class="stringliteral">&quot;исполнить код&quot;</span>;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11660"></a><span class="lineno">11660</span>&#160;                <span class="keywordflow">default</span>: $ sOp = <span class="stringliteral">&quot;совершить операцию 0x%lX&quot;</span>; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11661"></a><span class="lineno">11661</span>&#160;                }</div>
<div class="line"><a name="l11662"></a><span class="lineno">11662</span>&#160;            }</div>
<div class="line"><a name="l11663"></a><span class="lineno">11663</span>&#160; </div>
<div class="line"><a name="l11664"></a><span class="lineno">11664</span>&#160;$       PRINT_ (sOp, op);</div>
<div class="line"><a name="l11665"></a><span class="lineno">11665</span>&#160; </div>
<div class="line"><a name="l11666"></a><span class="lineno">11666</span>&#160;$       <span class="keywordflow">if</span> (params &gt;= 2) {$ PRINT_ ((<span class="keywordtype">object</span>? <span class="stringliteral">&quot; по адресу 0x%p&quot;</span> : <span class="stringliteral">&quot; по адресу NULL&quot;</span>), <span class="keywordtype">object</span>); }   <span class="comment">//-V1048</span></div>
<div class="line"><a name="l11667"></a><span class="lineno">11667</span>&#160;        <span class="keywordflow">else</span>             {$ PRINT_ (<span class="stringliteral">&quot; (адрес не указан)&quot;</span>); }</div>
<div class="line"><a name="l11668"></a><span class="lineno">11668</span>&#160; </div>
<div class="line"><a name="l11669"></a><span class="lineno">11669</span>&#160;$       <span class="keywordflow">if</span> (code == EXCEPTION_IN_PAGE_ERROR)</div>
<div class="line"><a name="l11670"></a><span class="lineno">11670</span>&#160;            {</div>
<div class="line"><a name="l11671"></a><span class="lineno">11671</span>&#160;$           PRINT_ (<span class="stringliteral">&quot;, ошибка ввода-вывода:&quot;</span>);</div>
<div class="line"><a name="l11672"></a><span class="lineno">11672</span>&#160; </div>
<div class="line"><a name="l11673"></a><span class="lineno">11673</span>&#160;$           <span class="keywordflow">if</span> (params &gt;= 3)</div>
<div class="line"><a name="l11674"></a><span class="lineno">11674</span>&#160;                {</div>
<div class="line"><a name="l11675"></a><span class="lineno">11675</span>&#160;$               <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> ntstatus = (<span class="keywordtype">unsigned</span> long) info[2];                                 <span class="comment">//-V202</span></div>
<div class="line"><a name="l11676"></a><span class="lineno">11676</span>&#160; </div>
<div class="line"><a name="l11677"></a><span class="lineno">11677</span>&#160;$               PRINT_ (<span class="stringliteral">&quot; 0x%lX (&quot;</span>, ntstatus);</div>
<div class="line"><a name="l11678"></a><span class="lineno">11678</span>&#160; </div>
<div class="line"><a name="l11679"></a><span class="lineno">11679</span>&#160;$               s += FormatMessage (FORMAT_MESSAGE_FROM_HMODULE | FORMAT_MESSAGE_IGNORE_INSERTS,  <span class="comment">//-V102</span></div>
<div class="line"><a name="l11680"></a><span class="lineno">11680</span>&#160;                                    GetModuleHandle (<span class="stringliteral">&quot;NTDLL.DLL&quot;</span>), ntstatus, MAKELANGID (LANG_NEUTRAL, SUBLANG_DEFAULT),</div>
<div class="line"><a name="l11681"></a><span class="lineno">11681</span>&#160;                                    s, (DWORD) (size - (s-what)), NULL) - 2;                      <span class="comment">//-V202</span></div>
<div class="line"><a name="l11682"></a><span class="lineno">11682</span>&#160;$               PRINT_ (<span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l11683"></a><span class="lineno">11683</span>&#160;                }</div>
<div class="line"><a name="l11684"></a><span class="lineno">11684</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l11685"></a><span class="lineno">11685</span>&#160;                {$ PRINT_ (<span class="stringliteral">&quot; (не указана)&quot;</span>); }</div>
<div class="line"><a name="l11686"></a><span class="lineno">11686</span>&#160;            }</div>
<div class="line"><a name="l11687"></a><span class="lineno">11687</span>&#160;        }</div>
<div class="line"><a name="l11688"></a><span class="lineno">11688</span>&#160; </div>
<div class="line"><a name="l11689"></a><span class="lineno">11689</span>&#160;$   HMODULE module = NULL;</div>
<div class="line"><a name="l11690"></a><span class="lineno">11690</span>&#160;$   _TX_CALL (Win32::GetModuleHandleEx, (GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS, (<span class="keyword">const</span> <span class="keywordtype">char</span>*) addr, &amp;module));</div>
<div class="line"><a name="l11691"></a><span class="lineno">11691</span>&#160; </div>
<div class="line"><a name="l11692"></a><span class="lineno">11692</span>&#160;$   <span class="keywordflow">if</span> (module)</div>
<div class="line"><a name="l11693"></a><span class="lineno">11693</span>&#160;        {</div>
<div class="line"><a name="l11694"></a><span class="lineno">11694</span>&#160;$       <span class="keyword">static</span> <span class="keywordtype">char</span> sModule [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l11695"></a><span class="lineno">11695</span>&#160;$       <span class="keywordtype">int</span> ok = GetModuleFileName (module, sModule, <span class="keyword">sizeof</span> (sModule));</div>
<div class="line"><a name="l11696"></a><span class="lineno">11696</span>&#160; </div>
<div class="line"><a name="l11697"></a><span class="lineno">11697</span>&#160;$       <span class="keywordtype">char</span>* ext = (ok? strrchr (sModule, <span class="charliteral">&#39;.&#39;</span>) : NULL);</div>
<div class="line"><a name="l11698"></a><span class="lineno">11698</span>&#160;$       <span class="keywordflow">if</span> (ext) _strlwr_s (ext, <span class="keyword">sizeof</span> (sModule) - 1 - (ext - sModule));</div>
<div class="line"><a name="l11699"></a><span class="lineno">11699</span>&#160; </div>
<div class="line"><a name="l11700"></a><span class="lineno">11700</span>&#160;        <span class="keywordflow">if</span> (ok) {$ PRINT_ (<span class="stringliteral">&quot; в модуле %s&quot;</span>,  sModule); }</div>
<div class="line"><a name="l11701"></a><span class="lineno">11701</span>&#160;        <span class="keywordflow">else</span>    {$ PRINT_ (<span class="stringliteral">&quot; в модуле 0x%p&quot;</span>, (<span class="keywordtype">void</span>*) module); }</div>
<div class="line"><a name="l11702"></a><span class="lineno">11702</span>&#160;        }</div>
<div class="line"><a name="l11703"></a><span class="lineno">11703</span>&#160; </div>
<div class="line"><a name="l11704"></a><span class="lineno">11704</span>&#160;$   PRINT_ (<span class="stringliteral">&quot;.&quot;</span>);</div>
<div class="line"><a name="l11705"></a><span class="lineno">11705</span>&#160; </div>
<div class="line"><a name="l11706"></a><span class="lineno">11706</span>&#160;$   <span class="keywordflow">if</span> (_txSENumber &gt;= <a class="code" href="group___technical.html#ga15dc1a04b8701e2db400b005b7a17ced">_TX_EXCEPTIONS_LIMIT</a>+0)</div>
<div class="line"><a name="l11707"></a><span class="lineno">11707</span>&#160;        {$ PRINT_ (<span class="stringliteral">&quot; Дополнительно, превышен лимит исключений _TX_EXCEPTIONS_LIMIT (%d).&quot;</span>,        <a class="code" href="group___technical.html#ga15dc1a04b8701e2db400b005b7a17ced">_TX_EXCEPTIONS_LIMIT</a>+0); }</div>
<div class="line"><a name="l11708"></a><span class="lineno">11708</span>&#160; </div>
<div class="line"><a name="l11709"></a><span class="lineno">11709</span>&#160;$   <span class="keywordflow">if</span> (_txSEFatalNumber &gt;= <a class="code" href="group___technical.html#gaf274c058737ec7e680437d2a1cdcd7b6">_TX_FATAL_EXCEPTIONS_LIMIT</a>+0)</div>
<div class="line"><a name="l11710"></a><span class="lineno">11710</span>&#160;        {$ PRINT_ (<span class="stringliteral">&quot; Также превышен лимит фатальных исключений _TX_FATAL_EXCEPTIONS_LIMIT (%d).&quot;</span>, <a class="code" href="group___technical.html#gaf274c058737ec7e680437d2a1cdcd7b6">_TX_FATAL_EXCEPTIONS_LIMIT</a>+0); }</div>
<div class="line"><a name="l11711"></a><span class="lineno">11711</span>&#160; </div>
<div class="line"><a name="l11712"></a><span class="lineno">11712</span>&#160;$   PRINT_ (<span class="stringliteral">&quot; Спасибо %s(), что сообщил. Люблю его &lt;3&quot;</span>, func);</div>
<div class="line"><a name="l11713"></a><span class="lineno">11713</span>&#160; </div>
<div class="line"><a name="l11714"></a><span class="lineno">11714</span>&#160;$   <span class="keywordflow">if</span> (exc-&gt;ExceptionFlags &amp; EXCEPTION_NONCONTINUABLE)</div>
<div class="line"><a name="l11715"></a><span class="lineno">11715</span>&#160;        {$ PRINT_ (<span class="stringliteral">&quot;\n\n&quot;</span> <span class="stringliteral">&quot;Ой, всё (EXCEPTION_NONCONTINUABLE).&quot;</span>); }</div>
<div class="line"><a name="l11716"></a><span class="lineno">11716</span>&#160; </div>
<div class="line"><a name="l11717"></a><span class="lineno">11717</span>&#160;$   <span class="keywordflow">if</span> (exc-&gt;ExceptionRecord)</div>
<div class="line"><a name="l11718"></a><span class="lineno">11718</span>&#160;        {</div>
<div class="line"><a name="l11719"></a><span class="lineno">11719</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;\n\n&quot;</span> <span class="stringliteral">&quot;Причина:&quot;</span> <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l11720"></a><span class="lineno">11720</span>&#160;$       s += _txDumpExceptionSEH (s, size - (s-what), exc-&gt;ExceptionRecord, func);</div>
<div class="line"><a name="l11721"></a><span class="lineno">11721</span>&#160;        }</div>
<div class="line"><a name="l11722"></a><span class="lineno">11722</span>&#160; </div>
<div class="line"><a name="l11723"></a><span class="lineno">11723</span>&#160;$   <span class="keywordflow">if</span> (code == EXCEPTION_CPP_GCC        ||</div>
<div class="line"><a name="l11724"></a><span class="lineno">11724</span>&#160;        code == EXCEPTION_CPP_GCC_UNWIND ||</div>
<div class="line"><a name="l11725"></a><span class="lineno">11725</span>&#160;        code == EXCEPTION_CPP_GCC_FORCED ||</div>
<div class="line"><a name="l11726"></a><span class="lineno">11726</span>&#160;        code == EXCEPTION_CPP_MSC)</div>
<div class="line"><a name="l11727"></a><span class="lineno">11727</span>&#160;        {</div>
<div class="line"><a name="l11728"></a><span class="lineno">11728</span>&#160;$       s += _txDumpExceptionCPP (s,    size - (s-what), code, params, info);</div>
<div class="line"><a name="l11729"></a><span class="lineno">11729</span>&#160;        }</div>
<div class="line"><a name="l11730"></a><span class="lineno">11730</span>&#160; </div>
<div class="line"><a name="l11731"></a><span class="lineno">11731</span>&#160;<span class="preprocessor">    #undef PRINT_</span></div>
<div class="line"><a name="l11732"></a><span class="lineno">11732</span>&#160; </div>
<div class="line"><a name="l11733"></a><span class="lineno">11733</span>&#160;$   <span class="keywordflow">while</span> (s &gt; what &amp;&amp; s[-1] == <span class="charliteral">&#39;\n&#39;</span>) s--;</div>
<div class="line"><a name="l11734"></a><span class="lineno">11734</span>&#160;$   <span class="keywordflow">if</span> (s &gt; what) s += _tx_snprintf_s (s, size - (s-what), <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l11735"></a><span class="lineno">11735</span>&#160; </div>
<div class="line"><a name="l11736"></a><span class="lineno">11736</span>&#160;$   <span class="keywordflow">return</span> s - what;</div>
<div class="line"><a name="l11737"></a><span class="lineno">11737</span>&#160;    }</div>
<div class="line"><a name="l11738"></a><span class="lineno">11738</span>&#160; </div>
<div class="line"><a name="l11739"></a><span class="lineno">11739</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11740"></a><span class="lineno">11740</span>&#160; </div>
<div class="line"><a name="l11741"></a><span class="lineno">11741</span>&#160;intptr_t _txDumpExceptionCPP (<span class="keywordtype">char</span> what[], intptr_t size,</div>
<div class="line"><a name="l11742"></a><span class="lineno">11742</span>&#160;                              <span class="keywordtype">unsigned</span> code <span class="comment">/*= 0*/</span>, <span class="keywordtype">unsigned</span> params <span class="comment">/*= 0*/</span>, <span class="keyword">const</span> ULONG_PTR info[] <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l11743"></a><span class="lineno">11743</span>&#160;    {</div>
<div class="line"><a name="l11744"></a><span class="lineno">11744</span>&#160;$6  assert (what);</div>
<div class="line"><a name="l11745"></a><span class="lineno">11745</span>&#160;$   assert (size &gt;= 0);  <span class="comment">//-V547</span></div>
<div class="line"><a name="l11746"></a><span class="lineno">11746</span>&#160; </div>
<div class="line"><a name="l11747"></a><span class="lineno">11747</span>&#160;$   <span class="keywordtype">char</span>* s = what;</div>
<div class="line"><a name="l11748"></a><span class="lineno">11748</span>&#160; </div>
<div class="line"><a name="l11749"></a><span class="lineno">11749</span>&#160;$   <span class="keywordflow">switch</span> (code)</div>
<div class="line"><a name="l11750"></a><span class="lineno">11750</span>&#160;        {</div>
<div class="line"><a name="l11751"></a><span class="lineno">11751</span>&#160;<span class="preprocessor">        #if defined (_GCC_VER)</span></div>
<div class="line"><a name="l11752"></a><span class="lineno">11752</span>&#160; </div>
<div class="line"><a name="l11753"></a><span class="lineno">11753</span>&#160;        <span class="keywordflow">case</span> EXCEPTION_CPP_GCC:</div>
<div class="line"><a name="l11754"></a><span class="lineno">11754</span>&#160;        <span class="keywordflow">case</span> EXCEPTION_CPP_GCC_UNWIND:</div>
<div class="line"><a name="l11755"></a><span class="lineno">11755</span>&#160;        <span class="keywordflow">case</span> EXCEPTION_CPP_GCC_FORCED:</div>
<div class="line"><a name="l11756"></a><span class="lineno">11756</span>&#160;            {</div>
<div class="line"><a name="l11757"></a><span class="lineno">11757</span>&#160;            <span class="comment">// See: [1] http://llvm.org/svn/llvm-project/libcxxabi/trunk/src/cxa_exception.cpp</span></div>
<div class="line"><a name="l11758"></a><span class="lineno">11758</span>&#160;            <span class="comment">//      [2] http://github.com/gcc-mirror/gcc/blob/master/libgcc/unwind-seh.c, lines 51-55 and below</span></div>
<div class="line"><a name="l11759"></a><span class="lineno">11759</span>&#160;            <span class="comment">//      [3] http://github.com/gcc-mirror/gcc/blob/master/libstdc++-v3/libsupc++/eh_throw.cc, __cxa_throw, line 59 and below</span></div>
<div class="line"><a name="l11760"></a><span class="lineno">11760</span>&#160;            <span class="comment">//      [4] http://github.com/gcc-mirror/gcc/blob/master/libstdc++-v3/libsupc++/unwind-cxx.h, __cxa_exception, line 58 and below</span></div>
<div class="line"><a name="l11761"></a><span class="lineno">11761</span>&#160;            <span class="comment">//      and figure above near ABI::__cxa_exception definition in this file</span></div>
<div class="line"><a name="l11762"></a><span class="lineno">11762</span>&#160; </div>
<div class="line"><a name="l11763"></a><span class="lineno">11763</span>&#160;$           <span class="keyword">const</span> std::type_info* type   = NULL;</div>
<div class="line"><a name="l11764"></a><span class="lineno">11764</span>&#160;$           <span class="keywordtype">void</span>*                 <span class="keywordtype">object</span> = NULL;</div>
<div class="line"><a name="l11765"></a><span class="lineno">11765</span>&#160; </div>
<div class="line"><a name="l11766"></a><span class="lineno">11766</span>&#160;$           <span class="keywordflow">if</span> (params &gt;= 1)</div>
<div class="line"><a name="l11767"></a><span class="lineno">11767</span>&#160;                {</div>
<div class="line"><a name="l11768"></a><span class="lineno">11768</span>&#160;$               _Unwind_Exception*    unwind_exception = (_Unwind_Exception*) info[0];</div>
<div class="line"><a name="l11769"></a><span class="lineno">11769</span>&#160;$               ABI::__cxa_exception* cxa_exception    = (ABI::__cxa_exception*) (unwind_exception + 1) - 1;</div>
<div class="line"><a name="l11770"></a><span class="lineno">11770</span>&#160; </div>
<div class="line"><a name="l11771"></a><span class="lineno">11771</span>&#160;$               type   = cxa_exception-&gt;exceptionType;</div>
<div class="line"><a name="l11772"></a><span class="lineno">11772</span>&#160;$               <span class="keywordtype">object</span> = cxa_exception + 1;</div>
<div class="line"><a name="l11773"></a><span class="lineno">11773</span>&#160;                }</div>
<div class="line"><a name="l11774"></a><span class="lineno">11774</span>&#160; </div>
<div class="line"><a name="l11775"></a><span class="lineno">11775</span>&#160;$           s += _txDumpExceptionObj (s, size - (s-what), <span class="keywordtype">object</span>, 0, type);</div>
<div class="line"><a name="l11776"></a><span class="lineno">11776</span>&#160;            }</div>
<div class="line"><a name="l11777"></a><span class="lineno">11777</span>&#160;$           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11778"></a><span class="lineno">11778</span>&#160; </div>
<div class="line"><a name="l11779"></a><span class="lineno">11779</span>&#160;        <span class="keywordflow">case</span> 0:  <span class="comment">// Not called within SEH chain</span></div>
<div class="line"><a name="l11780"></a><span class="lineno">11780</span>&#160;            {</div>
<div class="line"><a name="l11781"></a><span class="lineno">11781</span>&#160;            <span class="comment">// From: [1] http://github.com/gcc-mirror/gcc/blob/master/libstdc++-v3/libsupc++/eh_type.cc</span></div>
<div class="line"><a name="l11782"></a><span class="lineno">11782</span>&#160;            <span class="comment">//       [2] http://github.com/gcc-mirror/gcc/blob/master/libstdc++-v3/libsupc++/vterminate.cc</span></div>
<div class="line"><a name="l11783"></a><span class="lineno">11783</span>&#160; </div>
<div class="line"><a name="l11784"></a><span class="lineno">11784</span>&#160;            <span class="keyword">using namespace </span>abi;</div>
<div class="line"><a name="l11785"></a><span class="lineno">11785</span>&#160; </div>
<div class="line"><a name="l11786"></a><span class="lineno">11786</span>&#160;$           ABI::__cxa_exception* cxa_exception = __cxa_get_globals() -&gt; caughtExceptions;</div>
<div class="line"><a name="l11787"></a><span class="lineno">11787</span>&#160; </div>
<div class="line"><a name="l11788"></a><span class="lineno">11788</span>&#160;$           <span class="keywordflow">if</span> (cxa_exception &amp;&amp; (cxa_exception-&gt;unwindHeader.exception_class &amp; 1))  <span class="comment">// Dependent exception, case B, see pic above</span></div>
<div class="line"><a name="l11789"></a><span class="lineno">11789</span>&#160;                {</div>
<div class="line"><a name="l11790"></a><span class="lineno">11790</span>&#160;$               cxa_exception = (((ABI::__cxa_exception*) (&amp;cxa_exception-&gt;unwindHeader + 1) - 1) -&gt; primaryException) - 1;</div>
<div class="line"><a name="l11791"></a><span class="lineno">11791</span>&#160;                }</div>
<div class="line"><a name="l11792"></a><span class="lineno">11792</span>&#160; </div>
<div class="line"><a name="l11793"></a><span class="lineno">11793</span>&#160;$           <span class="keywordflow">if</span> (cxa_exception)</div>
<div class="line"><a name="l11794"></a><span class="lineno">11794</span>&#160;                {</div>
<div class="line"><a name="l11795"></a><span class="lineno">11795</span>&#160;$               <a class="code" href="group___misc.html#ga14fecb1c008314444a74c1fe7d9a113b">verify</a> (cxa_exception-&gt;exceptionType == abi::__cxa_current_exception_type());</div>
<div class="line"><a name="l11796"></a><span class="lineno">11796</span>&#160; </div>
<div class="line"><a name="l11797"></a><span class="lineno">11797</span>&#160;$               s += _txDumpExceptionObj (s, size, cxa_exception + 1, 0, cxa_exception-&gt;exceptionType);</div>
<div class="line"><a name="l11798"></a><span class="lineno">11798</span>&#160;                }</div>
<div class="line"><a name="l11799"></a><span class="lineno">11799</span>&#160;            }</div>
<div class="line"><a name="l11800"></a><span class="lineno">11800</span>&#160;$           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11801"></a><span class="lineno">11801</span>&#160; </div>
<div class="line"><a name="l11802"></a><span class="lineno">11802</span>&#160;<span class="preprocessor">        #elif defined (_MSC_VER)</span></div>
<div class="line"><a name="l11803"></a><span class="lineno">11803</span>&#160; </div>
<div class="line"><a name="l11804"></a><span class="lineno">11804</span>&#160;        <span class="keywordflow">case</span> EXCEPTION_CPP_MSC:</div>
<div class="line"><a name="l11805"></a><span class="lineno">11805</span>&#160;            {</div>
<div class="line"><a name="l11806"></a><span class="lineno">11806</span>&#160;            <span class="comment">// See [1] http://blogs.msdn.microsoft.com/oldnewthing/20100730-00/?p=13273</span></div>
<div class="line"><a name="l11807"></a><span class="lineno">11807</span>&#160;            <span class="comment">//     [2] http://www.openrce.org/articles/full_view/21</span></div>
<div class="line"><a name="l11808"></a><span class="lineno">11808</span>&#160;            <span class="comment">//     [3] http://www.openrce.org/articles/full_view/23</span></div>
<div class="line"><a name="l11809"></a><span class="lineno">11809</span>&#160;            <span class="comment">//     [4] http://yurichev.com/mirrors/RE/Recon-2012-Skochinsky-Compiler-Internals.pdf</span></div>
<div class="line"><a name="l11810"></a><span class="lineno">11810</span>&#160; </div>
<div class="line"><a name="l11811"></a><span class="lineno">11811</span>&#160;$           <span class="keyword">const</span> std::type_info* type   = NULL;</div>
<div class="line"><a name="l11812"></a><span class="lineno">11812</span>&#160;$           <span class="keywordtype">void</span>*                 <span class="keywordtype">object</span> = (params &gt;= 2)? (<span class="keywordtype">void</span>*) info[1] : NULL;</div>
<div class="line"><a name="l11813"></a><span class="lineno">11813</span>&#160;$           <span class="keywordtype">size_t</span>                szObj  = 0;</div>
<div class="line"><a name="l11814"></a><span class="lineno">11814</span>&#160; </div>
<div class="line"><a name="l11815"></a><span class="lineno">11815</span>&#160;$           <span class="keywordflow">if</span> (params &gt;= 3 &amp;&amp;</div>
<div class="line"><a name="l11816"></a><span class="lineno">11816</span>&#160;               (info[0] == EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER1 ||</div>
<div class="line"><a name="l11817"></a><span class="lineno">11817</span>&#160;                info[0] == EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER2 ||</div>
<div class="line"><a name="l11818"></a><span class="lineno">11818</span>&#160;                info[0] == EXCEPTION_CPP_MSC_EH_MAGIC_NUMBER3 ||</div>
<div class="line"><a name="l11819"></a><span class="lineno">11819</span>&#160;                info[0] == EXCEPTION_CPP_MSC_EH_PURE_MAGIC_NUMBER1))</div>
<div class="line"><a name="l11820"></a><span class="lineno">11820</span>&#160;                {</div>
<div class="line"><a name="l11821"></a><span class="lineno">11821</span>&#160;$               <span class="keyword">auto</span> throwInfo = (<span class="keyword">const</span> Win32::ThrowInfo*) info[2];</div>
<div class="line"><a name="l11822"></a><span class="lineno">11822</span>&#160; </div>
<div class="line"><a name="l11823"></a><span class="lineno">11823</span>&#160;$               <span class="keywordflow">if</span> (throwInfo &amp;&amp; throwInfo-&gt;pCatchableTypeArray)</div>
<div class="line"><a name="l11824"></a><span class="lineno">11824</span>&#160;                    {</div>
<div class="line"><a name="l11825"></a><span class="lineno">11825</span>&#160;$                   HMODULE module = (params &gt;= 4)? (HMODULE) info[3] : NULL;  <span class="comment">//-V112</span></div>
<div class="line"><a name="l11826"></a><span class="lineno">11826</span>&#160; </div>
<div class="line"><a name="l11827"></a><span class="lineno">11827</span>&#160;<span class="preprocessor">                    #define RVA_(type, addr)  ( (type) ((uintptr_t) module + (uintptr_t) (addr)) )</span></div>
<div class="line"><a name="l11828"></a><span class="lineno">11828</span>&#160; </div>
<div class="line"><a name="l11829"></a><span class="lineno">11829</span>&#160;$                   <span class="keyword">const</span> Win32::CatchableTypeArray* cArray = RVA_(<span class="keyword">const</span> Win32::CatchableTypeArray*, throwInfo-&gt;pCatchableTypeArray);</div>
<div class="line"><a name="l11830"></a><span class="lineno">11830</span>&#160;$                   <span class="keyword">const</span> Win32::CatchableType*      cType  = RVA_(<span class="keyword">const</span> Win32::CatchableType*,      cArray-&gt;arrayOfCatchableTypes[0]);</div>
<div class="line"><a name="l11831"></a><span class="lineno">11831</span>&#160; </div>
<div class="line"><a name="l11832"></a><span class="lineno">11832</span>&#160;$                   type  = RVA_(<span class="keyword">const</span> std::type_info*, cType-&gt;pType);</div>
<div class="line"><a name="l11833"></a><span class="lineno">11833</span>&#160;$                   szObj = cType-&gt;sizeOrOffset;  <span class="comment">//-V101</span></div>
<div class="line"><a name="l11834"></a><span class="lineno">11834</span>&#160; </div>
<div class="line"><a name="l11835"></a><span class="lineno">11835</span>&#160;<span class="preprocessor">                    #undef  RVA_</span></div>
<div class="line"><a name="l11836"></a><span class="lineno">11836</span>&#160;                    }</div>
<div class="line"><a name="l11837"></a><span class="lineno">11837</span>&#160;                }</div>
<div class="line"><a name="l11838"></a><span class="lineno">11838</span>&#160; </div>
<div class="line"><a name="l11839"></a><span class="lineno">11839</span>&#160;$           s += _txDumpExceptionObj (s, size - (s-what), <span class="keywordtype">object</span>, szObj, type);</div>
<div class="line"><a name="l11840"></a><span class="lineno">11840</span>&#160;            }</div>
<div class="line"><a name="l11841"></a><span class="lineno">11841</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11842"></a><span class="lineno">11842</span>&#160; </div>
<div class="line"><a name="l11843"></a><span class="lineno">11843</span>&#160;        <span class="keywordflow">case</span> 0:  <span class="comment">// Not called within SEH chain</span></div>
<div class="line"><a name="l11844"></a><span class="lineno">11844</span>&#160; </div>
<div class="line"><a name="l11845"></a><span class="lineno">11845</span>&#160;            <span class="comment">// signal() handlers or unexpected()/terminate() are called after Vectored Exception in MSC:</span></div>
<div class="line"><a name="l11846"></a><span class="lineno">11846</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l11847"></a><span class="lineno">11847</span>&#160;            <span class="comment">// terminate() is called by __scrt_unhandled_exception_filter() in case of MSC exception.</span></div>
<div class="line"><a name="l11848"></a><span class="lineno">11848</span>&#160;            <span class="comment">// See C:\Bin\Microsoft Visual Studio 14.0\VC\crt\src\vcruntime\utility_desktop.cpp</span></div>
<div class="line"><a name="l11849"></a><span class="lineno">11849</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l11850"></a><span class="lineno">11850</span>&#160;            <span class="comment">// signal() handlers are called by _seh_filter_exe(), which is called by _mainCRTStartup() in case of exception.</span></div>
<div class="line"><a name="l11851"></a><span class="lineno">11851</span>&#160;            <span class="comment">// See C:\Bin\Microsoft Visual Studio 14.0\VC\crt\src\vcruntime\mcrtexe.cpp</span></div>
<div class="line"><a name="l11852"></a><span class="lineno">11852</span>&#160;            <span class="comment">// and C:\Bin\Windows Kits\10\Source\10.0.10240.0\ucrt\misc\exception_filter.cpp</span></div>
<div class="line"><a name="l11853"></a><span class="lineno">11853</span>&#160;            <span class="comment">// and http://msdn.microsoft.com/en-us/library/ff730818.aspx.</span></div>
<div class="line"><a name="l11854"></a><span class="lineno">11854</span>&#160;            <span class="comment">//</span></div>
<div class="line"><a name="l11855"></a><span class="lineno">11855</span>&#160;            <span class="comment">// So _txDumpSE information should have been recorded during previous call. Now do nothing.</span></div>
<div class="line"><a name="l11856"></a><span class="lineno">11856</span>&#160; </div>
<div class="line"><a name="l11857"></a><span class="lineno">11857</span>&#160;$           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11858"></a><span class="lineno">11858</span>&#160; </div>
<div class="line"><a name="l11859"></a><span class="lineno">11859</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l11860"></a><span class="lineno">11860</span>&#160; </div>
<div class="line"><a name="l11861"></a><span class="lineno">11861</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l11862"></a><span class="lineno">11862</span>&#160;$           <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;ERROR: Wrong call to %s: Unknown exception code 0x%08X\n&quot;</span>, <a class="code" href="group___misc.html#gab170f39ac0e379c324c73495f14a1309">__TX_FUNCTION__</a>, code);</div>
<div class="line"><a name="l11863"></a><span class="lineno">11863</span>&#160;$           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l11864"></a><span class="lineno">11864</span>&#160;        }</div>
<div class="line"><a name="l11865"></a><span class="lineno">11865</span>&#160; </div>
<div class="line"><a name="l11866"></a><span class="lineno">11866</span>&#160;$   <span class="keywordflow">while</span> (s &gt; what &amp;&amp; s[-1] == <span class="charliteral">&#39;\n&#39;</span>) s--;</div>
<div class="line"><a name="l11867"></a><span class="lineno">11867</span>&#160;$   <span class="keywordflow">if</span> (s &gt; what) s += _tx_snprintf_s (s, size - (s - what), <span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"><a name="l11868"></a><span class="lineno">11868</span>&#160; </div>
<div class="line"><a name="l11869"></a><span class="lineno">11869</span>&#160;$   <span class="keywordflow">return</span> (s - what);</div>
<div class="line"><a name="l11870"></a><span class="lineno">11870</span>&#160;    }</div>
<div class="line"><a name="l11871"></a><span class="lineno">11871</span>&#160; </div>
<div class="line"><a name="l11872"></a><span class="lineno">11872</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11873"></a><span class="lineno">11873</span>&#160; </div>
<div class="line"><a name="l11874"></a><span class="lineno">11874</span>&#160;intptr_t _txDumpExceptionObj (<span class="keywordtype">char</span> what[], intptr_t size, <span class="keywordtype">void</span>* <span class="keywordtype">object</span>, <span class="keywordtype">size_t</span> sizeObj, <span class="keyword">const</span> std::type_info* type)  <span class="comment">//-V2008</span></div>
<div class="line"><a name="l11875"></a><span class="lineno">11875</span>&#160;    {</div>
<div class="line"><a name="l11876"></a><span class="lineno">11876</span>&#160;$6  assert (what);</div>
<div class="line"><a name="l11877"></a><span class="lineno">11877</span>&#160;$   assert (size &gt; 0);  <span class="comment">//-V547</span></div>
<div class="line"><a name="l11878"></a><span class="lineno">11878</span>&#160; </div>
<div class="line"><a name="l11879"></a><span class="lineno">11879</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span>*  s     = NULL; s     = what;</div>
<div class="line"><a name="l11880"></a><span class="lineno">11880</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">size_t</span> szObj = 0;    szObj = sizeObj;</div>
<div class="line"><a name="l11881"></a><span class="lineno">11881</span>&#160; </div>
<div class="line"><a name="l11882"></a><span class="lineno">11882</span>&#160;<span class="preprocessor">    #define PRINT_(...)  s += _tx_snprintf_s (s, size - (s - what), ##__VA_ARGS__)</span></div>
<div class="line"><a name="l11883"></a><span class="lineno">11883</span>&#160; </div>
<div class="line"><a name="l11884"></a><span class="lineno">11884</span>&#160;$   PRINT_ (<span class="stringliteral">&quot;\n\n&quot;</span> <span class="stringliteral">&quot;Объект исключения C++:&quot;</span>);</div>
<div class="line"><a name="l11885"></a><span class="lineno">11885</span>&#160; </div>
<div class="line"><a name="l11886"></a><span class="lineno">11886</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* mangledName = (type)? type-&gt;name() : NULL;</div>
<div class="line"><a name="l11887"></a><span class="lineno">11887</span>&#160; </div>
<div class="line"><a name="l11888"></a><span class="lineno">11888</span>&#160;$   <span class="keywordtype">char</span>* typeName = NULL;</div>
<div class="line"><a name="l11889"></a><span class="lineno">11889</span>&#160;$   <span class="keywordtype">int</span> err = 1;</div>
<div class="line"><a name="l11890"></a><span class="lineno">11890</span>&#160; </div>
<div class="line"><a name="l11891"></a><span class="lineno">11891</span>&#160;<span class="preprocessor">    #if defined (_GCC_VER)</span></div>
<div class="line"><a name="l11892"></a><span class="lineno">11892</span>&#160;$   typeName = ::abi::__cxa_demangle (mangledName, 0, 0, &amp;err);</div>
<div class="line"><a name="l11893"></a><span class="lineno">11893</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11894"></a><span class="lineno">11894</span>&#160; </div>
<div class="line"><a name="l11895"></a><span class="lineno">11895</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* name = (!err &amp;&amp; typeName)? typeName : mangledName;  <span class="comment">//-V560</span></div>
<div class="line"><a name="l11896"></a><span class="lineno">11896</span>&#160; </div>
<div class="line"><a name="l11897"></a><span class="lineno">11897</span>&#160;$   <span class="keywordflow">if</span> (name &amp;&amp;</div>
<div class="line"><a name="l11898"></a><span class="lineno">11898</span>&#160;       (strcmp (name, <span class="stringliteral">&quot;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;&quot;</span>)           == 0 ||</div>
<div class="line"><a name="l11899"></a><span class="lineno">11899</span>&#160;        strcmp (name, <span class="stringliteral">&quot;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;&quot;</span>)                   == 0))</div>
<div class="line"><a name="l11900"></a><span class="lineno">11900</span>&#160;        {$ name = <span class="stringliteral">&quot;std::string&quot;</span>; }</div>
<div class="line"><a name="l11901"></a><span class="lineno">11901</span>&#160; </div>
<div class="line"><a name="l11902"></a><span class="lineno">11902</span>&#160;$   <span class="keywordflow">if</span> (name &amp;&amp;</div>
<div class="line"><a name="l11903"></a><span class="lineno">11903</span>&#160;       (strcmp (name, <span class="stringliteral">&quot;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; *&quot;</span>)         == 0 ||</div>
<div class="line"><a name="l11904"></a><span class="lineno">11904</span>&#160;        strcmp (name, <span class="stringliteral">&quot;class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; * __ptr64&quot;</span>) == 0 ||</div>
<div class="line"><a name="l11905"></a><span class="lineno">11905</span>&#160;        strcmp (name, <span class="stringliteral">&quot;std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;*&quot;</span>)                  == 0))</div>
<div class="line"><a name="l11906"></a><span class="lineno">11906</span>&#160;        {$ name = <span class="stringliteral">&quot;std::string*&quot;</span>; }</div>
<div class="line"><a name="l11907"></a><span class="lineno">11907</span>&#160; </div>
<div class="line"><a name="l11908"></a><span class="lineno">11908</span>&#160;    <span class="keywordflow">if</span> (name) {$ PRINT_ (<span class="stringliteral">&quot; %s&quot;</span>, name); }</div>
<div class="line"><a name="l11909"></a><span class="lineno">11909</span>&#160; </div>
<div class="line"><a name="l11910"></a><span class="lineno">11910</span>&#160;<span class="preprocessor">    #if defined (_GCC_VER)</span></div>
<div class="line"><a name="l11911"></a><span class="lineno">11911</span>&#160;$   free (typeName);</div>
<div class="line"><a name="l11912"></a><span class="lineno">11912</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l11913"></a><span class="lineno">11913</span>&#160; </div>
<div class="line"><a name="l11914"></a><span class="lineno">11914</span>&#160;$   err = 0;</div>
<div class="line"><a name="l11915"></a><span class="lineno">11915</span>&#160;$   <span class="keywordflow">if</span> (mangledName)</div>
<div class="line"><a name="l11916"></a><span class="lineno">11916</span>&#160;        {</div>
<div class="line"><a name="l11917"></a><span class="lineno">11917</span>&#160;        <span class="keywordflow">if</span> (_txSetJmp())</div>
<div class="line"><a name="l11918"></a><span class="lineno">11918</span>&#160;            {</div>
<div class="line"><a name="l11919"></a><span class="lineno">11919</span>&#160;<span class="preprocessor">            #define PRINT_VAL_(fmt, typ, ...)                                                                          \</span></div>
<div class="line"><a name="l11920"></a><span class="lineno">11920</span>&#160;<span class="preprocessor">                else if (*type == typeid (      typ       )) {$ PRINT_ (&quot; = &quot;</span> #fmt, (* (typ* ) object) __VA_ARGS__); } \</div>
<div class="line"><a name="l11921"></a><span class="lineno">11921</span>&#160;                else if (*type == typeid (const typ       )) {$ PRINT_ (&quot; = &quot; #fmt, (* (typ* ) object) __VA_ARGS__); } \</div>
<div class="line"><a name="l11922"></a><span class="lineno">11922</span>&#160;                else if (*type == typeid (      typ*      )) {$ PRINT_ (&quot; = &quot; #fmt, (**(typ**) object) __VA_ARGS__); } \</div>
<div class="line"><a name="l11923"></a><span class="lineno">11923</span>&#160;                else if (*type == typeid (const typ*      )) {$ PRINT_ (&quot; = &quot; #fmt, (**(typ**) object) __VA_ARGS__); } \</div>
<div class="line"><a name="l11924"></a><span class="lineno">11924</span>&#160;                else if (*type == typeid (      typ* const)) {$ PRINT_ (&quot; = &quot; #fmt, (**(typ**) object) __VA_ARGS__); } \</div>
<div class="line"><a name="l11925"></a><span class="lineno">11925</span>&#160;                else if (*type == typeid (const typ* const)) {$ PRINT_ (&quot; = &quot; #fmt, (**(typ**) object) __VA_ARGS__); }</div>
<div class="line"><a name="l11926"></a><span class="lineno">11926</span>&#160;<span class="preprocessor">            #define NO_</span></div>
<div class="line"><a name="l11927"></a><span class="lineno">11927</span>&#160; </div>
<div class="line"><a name="l11928"></a><span class="lineno">11928</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">false</span>) ;</div>
<div class="line"><a name="l11929"></a><span class="lineno">11929</span>&#160;            PRINT_VAL_ (<span class="stringliteral">&quot;%s&quot;</span>, <span class="keywordtype">char</span>*, NO_)   PRINT_VAL_ (<span class="stringliteral">&#39;%c&#39;</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>,  NO_)   PRINT_VAL_ (%s,   <span class="keywordtype">bool</span>, ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>)  <span class="comment">//-V206 //-V517</span></div>
<div class="line"><a name="l11930"></a><span class="lineno">11930</span>&#160;            PRINT_VAL_ ( %d,  <span class="keywordtype">int</span>,   NO_)   PRINT_VAL_ ( %u,  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>,   NO_)   PRINT_VAL_ (%g,   <span class="keywordtype">float</span>,  NO_)               <span class="comment">//-V206</span></div>
<div class="line"><a name="l11931"></a><span class="lineno">11931</span>&#160;            PRINT_VAL_ ( %hd, <span class="keywordtype">short</span>, NO_)   PRINT_VAL_ ( %hu, <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>, NO_)   PRINT_VAL_ (%g,   <span class="keywordtype">double</span>, NO_)               <span class="comment">//-V206</span></div>
<div class="line"><a name="l11932"></a><span class="lineno">11932</span>&#160;            PRINT_VAL_ ( %ld, <span class="keywordtype">long</span>,  NO_)   PRINT_VAL_ ( %lu, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>,  NO_)   PRINT_VAL_ (&#39;%c&#39;, <span class="keywordtype">char</span>,   NO_)               <span class="comment">//-V206</span></div>
<div class="line"><a name="l11933"></a><span class="lineno">11933</span>&#160;            PRINT_VAL_ (&quot;%s&quot;, std::<span class="keywordtype">string</span>, .c_str())                                                                              <span class="comment">//-V206</span></div>
<div class="line"><a name="l11934"></a><span class="lineno">11934</span>&#160; </div>
<div class="line"><a name="l11935"></a><span class="lineno">11935</span>&#160;            else if (std::exception* e = dynamic_cast &lt;std::exception*&gt; ( (std::exception* ) <span class="keywordtype">object</span>))</div>
<div class="line"><a name="l11936"></a><span class="lineno">11936</span>&#160;                {</div>
<div class="line"><a name="l11937"></a><span class="lineno">11937</span>&#160;$               PRINT_ (<span class="stringliteral">&quot;, what(): \&quot;%s\&quot;&quot;</span>, e-&gt;what());</div>
<div class="line"><a name="l11938"></a><span class="lineno">11938</span>&#160;                }</div>
<div class="line"><a name="l11939"></a><span class="lineno">11939</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l11940"></a><span class="lineno">11940</span>&#160;                {$ err = 1; }</div>
<div class="line"><a name="l11941"></a><span class="lineno">11941</span>&#160;            }</div>
<div class="line"><a name="l11942"></a><span class="lineno">11942</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l11943"></a><span class="lineno">11943</span>&#160;            {$ err = 2; }</div>
<div class="line"><a name="l11944"></a><span class="lineno">11944</span>&#160;        }</div>
<div class="line"><a name="l11945"></a><span class="lineno">11945</span>&#160; </div>
<div class="line"><a name="l11946"></a><span class="lineno">11946</span>&#160;$   _txClearJmp();</div>
<div class="line"><a name="l11947"></a><span class="lineno">11947</span>&#160; </div>
<div class="line"><a name="l11948"></a><span class="lineno">11948</span>&#160;$   <span class="keywordflow">if</span> (err &amp;&amp; <span class="keywordtype">object</span> &amp;&amp; szObj)</div>
<div class="line"><a name="l11949"></a><span class="lineno">11949</span>&#160;        {</div>
<div class="line"><a name="l11950"></a><span class="lineno">11950</span>&#160;$       <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf = (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) <span class="keywordtype">object</span>;</div>
<div class="line"><a name="l11951"></a><span class="lineno">11951</span>&#160; </div>
<div class="line"><a name="l11952"></a><span class="lineno">11952</span>&#160;$       <span class="keywordflow">if</span> (szObj &gt;= 64) szObj = 64;</div>
<div class="line"><a name="l11953"></a><span class="lineno">11953</span>&#160; </div>
<div class="line"><a name="l11954"></a><span class="lineno">11954</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;, дамп: [&quot;</span>);</div>
<div class="line"><a name="l11955"></a><span class="lineno">11955</span>&#160;$       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; szObj; i++) PRINT_ (<span class="stringliteral">&quot;%c&quot;</span>, (isprint (buf[i]) &amp;&amp; !iscntrl (buf[i]))? buf[i] : <span class="charliteral">&#39;.&#39;</span> );</div>
<div class="line"><a name="l11956"></a><span class="lineno">11956</span>&#160; </div>
<div class="line"><a name="l11957"></a><span class="lineno">11957</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;]&quot;</span>);</div>
<div class="line"><a name="l11958"></a><span class="lineno">11958</span>&#160;$       <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; szObj; i++) PRINT_ (<span class="stringliteral">&quot; %02X&quot;</span>, buf[i]);</div>
<div class="line"><a name="l11959"></a><span class="lineno">11959</span>&#160; </div>
<div class="line"><a name="l11960"></a><span class="lineno">11960</span>&#160;$       err = 0;</div>
<div class="line"><a name="l11961"></a><span class="lineno">11961</span>&#160;        }</div>
<div class="line"><a name="l11962"></a><span class="lineno">11962</span>&#160; </div>
<div class="line"><a name="l11963"></a><span class="lineno">11963</span>&#160;$   <span class="keywordflow">if</span> (err)</div>
<div class="line"><a name="l11964"></a><span class="lineno">11964</span>&#160;        {$ PRINT_ (<span class="stringliteral">&quot; = ??&quot;</span>); }</div>
<div class="line"><a name="l11965"></a><span class="lineno">11965</span>&#160; </div>
<div class="line"><a name="l11966"></a><span class="lineno">11966</span>&#160;$   PRINT_ ((<span class="keywordtype">object</span>? <span class="stringliteral">&quot;%sего адрес 0x%p.&quot;</span> : <span class="stringliteral">&quot;%sего адрес NULL.&quot;</span>), ((typeName || mangledName)? <span class="stringliteral">&quot;, &quot;</span> : <span class="stringliteral">&quot;&quot;</span>), <span class="keywordtype">object</span>);  <span class="comment">//-V560</span></div>
<div class="line"><a name="l11967"></a><span class="lineno">11967</span>&#160; </div>
<div class="line"><a name="l11968"></a><span class="lineno">11968</span>&#160;<span class="preprocessor">    #undef PRINT_VAL_</span></div>
<div class="line"><a name="l11969"></a><span class="lineno">11969</span>&#160;<span class="preprocessor">    #undef PRINT_</span></div>
<div class="line"><a name="l11970"></a><span class="lineno">11970</span>&#160;<span class="preprocessor">    #undef NO_</span></div>
<div class="line"><a name="l11971"></a><span class="lineno">11971</span>&#160; </div>
<div class="line"><a name="l11972"></a><span class="lineno">11972</span>&#160;$   <span class="keywordflow">return</span> s - what;</div>
<div class="line"><a name="l11973"></a><span class="lineno">11973</span>&#160;    }</div>
<div class="line"><a name="l11974"></a><span class="lineno">11974</span>&#160; </div>
<div class="line"><a name="l11975"></a><span class="lineno">11975</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l11976"></a><span class="lineno">11976</span>&#160; </div>
<div class="line"><a name="l11977"></a><span class="lineno">11977</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l11978"></a><span class="lineno">11978</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11979"></a><span class="lineno">11979</span>&#160; </div>
<div class="line"><a name="l11980"></a><span class="lineno">11980</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11981"></a><span class="lineno">11981</span>&#160;<span class="comment">//{          Stack trace and debug info access</span></div>
<div class="line"><a name="l11982"></a><span class="lineno">11982</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l11983"></a><span class="lineno">11983</span>&#160; </div>
<div class="line"><a name="l11984"></a><span class="lineno">11984</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l11985"></a><span class="lineno">11985</span>&#160; </div>
<div class="line"><a name="l11986"></a><span class="lineno">11986</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* _txCaptureStackBackTrace (<span class="keywordtype">int</span> framesToSkip <span class="comment">/*= 0*/</span>, <span class="keywordtype">bool</span> readSource <span class="comment">/*= true*/</span>,</div>
<div class="line"><a name="l11987"></a><span class="lineno">11987</span>&#160;                                      CONTEXT* context <span class="comment">/*= NULL*/</span>, EXCEPTION_POINTERS* exc <span class="comment">/*= NULL*/</span>,</div>
<div class="line"><a name="l11988"></a><span class="lineno">11988</span>&#160;                                      HANDLE thread <span class="comment">/*= GetCurrentThread()*/</span>)</div>
<div class="line"><a name="l11989"></a><span class="lineno">11989</span>&#160;    {</div>
<div class="line"><a name="l11990"></a><span class="lineno">11990</span>&#160;$6  <span class="keyword">const</span> <span class="keywordtype">int</span> maxFrames = 62;  <span class="comment">// MS says: &lt; 63</span></div>
<div class="line"><a name="l11991"></a><span class="lineno">11991</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span> trace [(MAX_PATH + 1024+1) * maxFrames] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l11992"></a><span class="lineno">11992</span>&#160; </div>
<div class="line"><a name="l11993"></a><span class="lineno">11993</span>&#160;    <span class="keywordflow">if</span> (framesToSkip == -1) {$ <span class="keywordflow">return</span> trace; }</div>
<div class="line"><a name="l11994"></a><span class="lineno">11994</span>&#160; </div>
<div class="line"><a name="l11995"></a><span class="lineno">11995</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">void</span>* capture [maxFrames] = {};</div>
<div class="line"><a name="l11996"></a><span class="lineno">11996</span>&#160;$   <span class="keywordtype">int</span> frames = _txStackWalk (framesToSkip + !context, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (capture), capture, context, thread);</div>
<div class="line"><a name="l11997"></a><span class="lineno">11997</span>&#160; </div>
<div class="line"><a name="l11998"></a><span class="lineno">11998</span>&#160;$   memset (trace, 0, <span class="keyword">sizeof</span> (trace));</div>
<div class="line"><a name="l11999"></a><span class="lineno">11999</span>&#160;$   <span class="keywordtype">char</span>* s = trace;</div>
<div class="line"><a name="l12000"></a><span class="lineno">12000</span>&#160; </div>
<div class="line"><a name="l12001"></a><span class="lineno">12001</span>&#160;<span class="preprocessor">    #define PRINT_(...)  s += _tx_snprintf_s (s, sizeof (trace) - 1 - 3 - (s-trace), ##__VA_ARGS__)</span></div>
<div class="line"><a name="l12002"></a><span class="lineno">12002</span>&#160; </div>
<div class="line"><a name="l12003"></a><span class="lineno">12003</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0, n = 0; i &lt; frames; i++)  <span class="comment">//-V2530</span></div>
<div class="line"><a name="l12004"></a><span class="lineno">12004</span>&#160;        {</div>
<div class="line"><a name="l12005"></a><span class="lineno">12005</span>&#160;$       <span class="keywordtype">void</span>* addr = capture[i];</div>
<div class="line"><a name="l12006"></a><span class="lineno">12006</span>&#160; </div>
<div class="line"><a name="l12007"></a><span class="lineno">12007</span>&#160;$       Win32::SYMBOL_INFO*     sym    = NULL;</div>
<div class="line"><a name="l12008"></a><span class="lineno">12008</span>&#160;$       Win32::IMAGEHLP_LINE64* line   = NULL;</div>
<div class="line"><a name="l12009"></a><span class="lineno">12009</span>&#160;$       <span class="keyword">const</span> <span class="keywordtype">char</span>*             module = NULL;</div>
<div class="line"><a name="l12010"></a><span class="lineno">12010</span>&#160;$       <span class="keyword">const</span> <span class="keywordtype">char</span>*             source = NULL;</div>
<div class="line"><a name="l12011"></a><span class="lineno">12011</span>&#160;$       <span class="keywordtype">bool</span>                    inTX   = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12012"></a><span class="lineno">12012</span>&#160; </div>
<div class="line"><a name="l12013"></a><span class="lineno">12013</span>&#160;        <span class="keywordflow">if</span> (addr)                {$ inTX = _txSymGetFromAddr ((<span class="keywordtype">char</span>*) addr - 1, &amp;sym, &amp;line, &amp;module);          }</div>
<div class="line"><a name="l12014"></a><span class="lineno">12014</span>&#160;        <span class="keywordflow">if</span> (readSource &amp;&amp; !inTX) {$        _txSymGetFromAddr ((<span class="keywordtype">void</span>*) 1,        NULL, NULL,  NULL, &amp;source, 2); }  <span class="comment">//-V566</span></div>
<div class="line"><a name="l12015"></a><span class="lineno">12015</span>&#160; </div>
<div class="line"><a name="l12016"></a><span class="lineno">12016</span>&#160;$       <span class="keywordtype">int</span> nl = 0;</div>
<div class="line"><a name="l12017"></a><span class="lineno">12017</span>&#160;$       <span class="keywordflow">while</span> (s &gt; trace &amp;&amp; s[-1] == <span class="charliteral">&#39;\n&#39;</span>) { s--; nl++; }</div>
<div class="line"><a name="l12018"></a><span class="lineno">12018</span>&#160; </div>
<div class="line"><a name="l12019"></a><span class="lineno">12019</span>&#160;<span class="preprocessor">        #if !defined (_TX_FULL_STACKTRACE)</span></div>
<div class="line"><a name="l12020"></a><span class="lineno">12020</span>&#160; </div>
<div class="line"><a name="l12021"></a><span class="lineno">12021</span>&#160;$       <span class="keywordflow">if</span> (! ((sym &amp;&amp; *sym-&gt;Name) || (line &amp;&amp; ((line-&gt;FileName &amp;&amp; *line-&gt;FileName) || line-&gt;LineNumber))))</div>
<div class="line"><a name="l12022"></a><span class="lineno">12022</span>&#160;            {$ <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l12023"></a><span class="lineno">12023</span>&#160; </div>
<div class="line"><a name="l12024"></a><span class="lineno">12024</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l12025"></a><span class="lineno">12025</span>&#160; </div>
<div class="line"><a name="l12026"></a><span class="lineno">12026</span>&#160;$       PRINT_ (<span class="stringliteral">&quot;%s#%2d 0x%p&quot;</span>, ((n)? ((source || nl)? <span class="stringliteral">&quot;\n\n&quot;</span> : <span class="stringliteral">&quot;\n&quot;</span>) : <span class="stringliteral">&quot;&quot;</span>), i, addr);</div>
<div class="line"><a name="l12027"></a><span class="lineno">12027</span>&#160;$       n++;</div>
<div class="line"><a name="l12028"></a><span class="lineno">12028</span>&#160; </div>
<div class="line"><a name="l12029"></a><span class="lineno">12029</span>&#160;        <span class="keywordflow">if</span> (addr ==                    0)          {$ PRINT_ (<span class="stringliteral">&quot; [Неверный фрейм]&quot;</span>);        <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12030"></a><span class="lineno">12030</span>&#160;        <span class="keywordflow">if</span> (addr == (<span class="keywordtype">void</span>*)           -1)          {$ PRINT_ (<span class="stringliteral">&quot; [Странный фрейм]&quot;</span>);        <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12031"></a><span class="lineno">12031</span>&#160;        <span class="keywordflow">if</span> (addr == (<span class="keywordtype">void</span>*)(uintptr_t) 0xBAADF00D) {$ PRINT_ (<span class="stringliteral">&quot; [Мусор от LocalAlloc()]&quot;</span>); <span class="keywordflow">break</span>; }  <span class="comment">//-V566</span></div>
<div class="line"><a name="l12032"></a><span class="lineno">12032</span>&#160; </div>
<div class="line"><a name="l12033"></a><span class="lineno">12033</span>&#160;        <span class="keywordflow">if</span> (module)                                {$ PRINT_ (<span class="stringliteral">&quot; in %s%s&quot;</span>,     module, ((sym &amp;&amp; *sym-&gt;Name)? <span class="stringliteral">&quot;: &quot;</span> : <span class="stringliteral">&quot;&quot;</span>)); }</div>
<div class="line"><a name="l12034"></a><span class="lineno">12034</span>&#160;        <span class="keywordflow">if</span> (sym  &amp;&amp; *sym-&gt;Name)                    {$ PRINT_ (<span class="stringliteral">&quot;%s()&quot;</span>,         sym-&gt;Name);                                }</div>
<div class="line"><a name="l12035"></a><span class="lineno">12035</span>&#160;        <span class="keywordflow">if</span> (line &amp;&amp; line-&gt;FileName)                {$ PRINT_ (<span class="stringliteral">&quot; at %s&quot;</span>,       line-&gt;FileName);                           }</div>
<div class="line"><a name="l12036"></a><span class="lineno">12036</span>&#160;        <span class="keywordflow">if</span> (line &amp;&amp; line-&gt;LineNumber)              {$ PRINT_ (<span class="stringliteral">&quot; (%d)&quot;</span>,  (<span class="keywordtype">int</span>) line-&gt;LineNumber);                         }</div>
<div class="line"><a name="l12037"></a><span class="lineno">12037</span>&#160;        <span class="keywordflow">if</span> (source)                                {$ PRINT_ (<span class="stringliteral">&quot;:\n\n&quot;</span> <span class="stringliteral">&quot;%s\n&quot;</span>, source);                                   }</div>
<div class="line"><a name="l12038"></a><span class="lineno">12038</span>&#160; </div>
<div class="line"><a name="l12039"></a><span class="lineno">12039</span>&#160;        <span class="keywordflow">if</span> (sym &amp;&amp; strcmp (sym-&gt;Name , <span class="stringliteral">&quot;main&quot;</span>) == 0) {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12040"></a><span class="lineno">12040</span>&#160;        }</div>
<div class="line"><a name="l12041"></a><span class="lineno">12041</span>&#160; </div>
<div class="line"><a name="l12042"></a><span class="lineno">12042</span>&#160;<span class="preprocessor">    #if defined (_MSC_VER)</span></div>
<div class="line"><a name="l12043"></a><span class="lineno">12043</span>&#160;<span class="preprocessor">    #pragma warning (push)</span></div>
<div class="line"><a name="l12044"></a><span class="lineno">12044</span>&#160;<span class="preprocessor">    #pragma warning (disable: 28199)  </span><span class="comment">// Using possibly uninitialized memory &#39;*s&#39;</span></div>
<div class="line"><a name="l12045"></a><span class="lineno">12045</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12046"></a><span class="lineno">12046</span>&#160; </div>
<div class="line"><a name="l12047"></a><span class="lineno">12047</span>&#160;$   <span class="keywordflow">while</span> (s &gt; trace &amp;&amp; s[-1] == <span class="charliteral">&#39;\n&#39;</span>) s--;</div>
<div class="line"><a name="l12048"></a><span class="lineno">12048</span>&#160;$   *s = 0;</div>
<div class="line"><a name="l12049"></a><span class="lineno">12049</span>&#160; </div>
<div class="line"><a name="l12050"></a><span class="lineno">12050</span>&#160;<span class="preprocessor">    #if defined (_MSC_VER)</span></div>
<div class="line"><a name="l12051"></a><span class="lineno">12051</span>&#160;<span class="preprocessor">    #pragma warning (pop)             </span><span class="comment">// Using possibly uninitialized memory &#39;*s&#39;</span></div>
<div class="line"><a name="l12052"></a><span class="lineno">12052</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12053"></a><span class="lineno">12053</span>&#160; </div>
<div class="line"><a name="l12054"></a><span class="lineno">12054</span>&#160;<span class="preprocessor">    #undef PRINT_</span></div>
<div class="line"><a name="l12055"></a><span class="lineno">12055</span>&#160; </div>
<div class="line"><a name="l12056"></a><span class="lineno">12056</span>&#160;$   s += _tx_snprintf_s (s, <span class="keyword">sizeof</span> (trace) - 1 - (s-trace), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l12057"></a><span class="lineno">12057</span>&#160; </div>
<div class="line"><a name="l12058"></a><span class="lineno">12058</span>&#160;<span class="preprocessor">    #if !defined (_TX_NO_MINIDUMP)</span></div>
<div class="line"><a name="l12059"></a><span class="lineno">12059</span>&#160;$   _txCreateMiniDump (exc);</div>
<div class="line"><a name="l12060"></a><span class="lineno">12060</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12061"></a><span class="lineno">12061</span>&#160; </div>
<div class="line"><a name="l12062"></a><span class="lineno">12062</span>&#160;$   <span class="keywordflow">return</span> trace;</div>
<div class="line"><a name="l12063"></a><span class="lineno">12063</span>&#160;    }</div>
<div class="line"><a name="l12064"></a><span class="lineno">12064</span>&#160; </div>
<div class="line"><a name="l12065"></a><span class="lineno">12065</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12066"></a><span class="lineno">12066</span>&#160; </div>
<div class="line"><a name="l12067"></a><span class="lineno">12067</span>&#160;<span class="comment">// Stack WALKING if the program is DEAD. Dead, Carl!</span></div>
<div class="line"><a name="l12068"></a><span class="lineno">12068</span>&#160; </div>
<div class="line"><a name="l12069"></a><span class="lineno">12069</span>&#160;<span class="keywordtype">int</span> _txStackWalk (<span class="keywordtype">int</span> framesToSkip, <span class="keywordtype">size_t</span> szCapture, <span class="keywordtype">void</span>* capture[], CONTEXT* context <span class="comment">/*= NULL*/</span>,</div>
<div class="line"><a name="l12070"></a><span class="lineno">12070</span>&#160;                  HANDLE thread <span class="comment">/* = GetCurrentThread()*/</span>)</div>
<div class="line"><a name="l12071"></a><span class="lineno">12071</span>&#160;    {</div>
<div class="line"><a name="l12072"></a><span class="lineno">12072</span>&#160;$6  <span class="keyword">namespace </span>MinGW = Win32::MinGW;</div>
<div class="line"><a name="l12073"></a><span class="lineno">12073</span>&#160; </div>
<div class="line"><a name="l12074"></a><span class="lineno">12074</span>&#160;$   assert (capture);</div>
<div class="line"><a name="l12075"></a><span class="lineno">12075</span>&#160; </div>
<div class="line"><a name="l12076"></a><span class="lineno">12076</span>&#160;$   HANDLE process  = GetCurrentProcess();</div>
<div class="line"><a name="l12077"></a><span class="lineno">12077</span>&#160;$   <span class="keywordtype">bool</span> thisThread = !Win32::GetThreadId || (Win32::GetThreadId (thread) == GetCurrentThreadId());</div>
<div class="line"><a name="l12078"></a><span class="lineno">12078</span>&#160; </div>
<div class="line"><a name="l12079"></a><span class="lineno">12079</span>&#160;$   CONTEXT ctx = {};</div>
<div class="line"><a name="l12080"></a><span class="lineno">12080</span>&#160;$   ctx.ContextFlags |= CONTEXT_FULL;</div>
<div class="line"><a name="l12081"></a><span class="lineno">12081</span>&#160; </div>
<div class="line"><a name="l12082"></a><span class="lineno">12082</span>&#160;$   <span class="keywordtype">int</span> isWow64 = 0;</div>
<div class="line"><a name="l12083"></a><span class="lineno">12083</span>&#160;$   <span class="keywordflow">if</span> (Win32::IsWow64Process) Win32::IsWow64Process (process, &amp;isWow64);</div>
<div class="line"><a name="l12084"></a><span class="lineno">12084</span>&#160;    <span class="keywordflow">else</span> {$ <span class="keywordflow">return</span> -1; }</div>
<div class="line"><a name="l12085"></a><span class="lineno">12085</span>&#160; </div>
<div class="line"><a name="l12086"></a><span class="lineno">12086</span>&#160;$   <span class="keywordflow">if</span> (context)</div>
<div class="line"><a name="l12087"></a><span class="lineno">12087</span>&#160;        {</div>
<div class="line"><a name="l12088"></a><span class="lineno">12088</span>&#160;$       ctx = *context;</div>
<div class="line"><a name="l12089"></a><span class="lineno">12089</span>&#160;        }</div>
<div class="line"><a name="l12090"></a><span class="lineno">12090</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l12091"></a><span class="lineno">12091</span>&#160;        {</div>
<div class="line"><a name="l12092"></a><span class="lineno">12092</span>&#160;$       <span class="keywordflow">if</span> (thisThread)</div>
<div class="line"><a name="l12093"></a><span class="lineno">12093</span>&#160;            {</div>
<div class="line"><a name="l12094"></a><span class="lineno">12094</span>&#160;$           _TX_CALLv (Win32::RtlCaptureContext, (&amp;ctx));</div>
<div class="line"><a name="l12095"></a><span class="lineno">12095</span>&#160;            }</div>
<div class="line"><a name="l12096"></a><span class="lineno">12096</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l12097"></a><span class="lineno">12097</span>&#160;            {</div>
<div class="line"><a name="l12098"></a><span class="lineno">12098</span>&#160;$           SuspendThread (thread);  <span class="comment">//-V720</span></div>
<div class="line"><a name="l12099"></a><span class="lineno">12099</span>&#160; </div>
<div class="line"><a name="l12100"></a><span class="lineno">12100</span>&#160;$           ctx.ContextFlags = CONTEXT_ALL;</div>
<div class="line"><a name="l12101"></a><span class="lineno">12101</span>&#160;$           <span class="keywordtype">bool</span> ok = !!GetThreadContext (thread, &amp;ctx);</div>
<div class="line"><a name="l12102"></a><span class="lineno">12102</span>&#160; </div>
<div class="line"><a name="l12103"></a><span class="lineno">12103</span>&#160;$           <span class="keywordflow">if</span> (!ok)</div>
<div class="line"><a name="l12104"></a><span class="lineno">12104</span>&#160;                {</div>
<div class="line"><a name="l12105"></a><span class="lineno">12105</span>&#160;$               ResumeThread (thread);</div>
<div class="line"><a name="l12106"></a><span class="lineno">12106</span>&#160;$               <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l12107"></a><span class="lineno">12107</span>&#160;                }</div>
<div class="line"><a name="l12108"></a><span class="lineno">12108</span>&#160;            }</div>
<div class="line"><a name="l12109"></a><span class="lineno">12109</span>&#160;        }</div>
<div class="line"><a name="l12110"></a><span class="lineno">12110</span>&#160; </div>
<div class="line"><a name="l12111"></a><span class="lineno">12111</span>&#160;$   Win32::STACKFRAME64 frame = {};</div>
<div class="line"><a name="l12112"></a><span class="lineno">12112</span>&#160;$   frame.AddrPC.Mode = frame.AddrStack.Mode = frame.AddrFrame.Mode = Win32::AddrModeFlat;</div>
<div class="line"><a name="l12113"></a><span class="lineno">12113</span>&#160; </div>
<div class="line"><a name="l12114"></a><span class="lineno">12114</span>&#160;$   <span class="keywordtype">int</span> cpu = 0;</div>
<div class="line"><a name="l12115"></a><span class="lineno">12115</span>&#160; </div>
<div class="line"><a name="l12116"></a><span class="lineno">12116</span>&#160;<span class="preprocessor">    #if defined (_WIN64)</span></div>
<div class="line"><a name="l12117"></a><span class="lineno">12117</span>&#160; </div>
<div class="line"><a name="l12118"></a><span class="lineno">12118</span>&#160;$   <span class="keywordflow">if</span> (isWow64)</div>
<div class="line"><a name="l12119"></a><span class="lineno">12119</span>&#160;        {</div>
<div class="line"><a name="l12120"></a><span class="lineno">12120</span>&#160;$       Win32::WOW64_CONTEXT wow64ctx = {};</div>
<div class="line"><a name="l12121"></a><span class="lineno">12121</span>&#160;$       wow64ctx.ContextFlags |= WOW64_CONTEXT_FULL;</div>
<div class="line"><a name="l12122"></a><span class="lineno">12122</span>&#160; </div>
<div class="line"><a name="l12123"></a><span class="lineno">12123</span>&#160;$       <span class="keywordflow">if</span> (!_TX_CALL (Win32::Wow64GetThreadContext, (thread, &amp;wow64ctx)))  <span class="comment">// This call fails in WINE,</span></div>
<div class="line"><a name="l12124"></a><span class="lineno">12124</span>&#160;            {                                                               <span class="comment">// while EXIT_PROCESS_DEBUG_EVENT</span></div>
<div class="line"><a name="l12125"></a><span class="lineno">12125</span>&#160;            <span class="keywordflow">if</span> (!thisThread) {$ ResumeThread (thread); }</div>
<div class="line"><a name="l12126"></a><span class="lineno">12126</span>&#160;$           <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l12127"></a><span class="lineno">12127</span>&#160;            }</div>
<div class="line"><a name="l12128"></a><span class="lineno">12128</span>&#160; </div>
<div class="line"><a name="l12129"></a><span class="lineno">12129</span>&#160;$       cpu = IMAGE_FILE_MACHINE_I386;</div>
<div class="line"><a name="l12130"></a><span class="lineno">12130</span>&#160; </div>
<div class="line"><a name="l12131"></a><span class="lineno">12131</span>&#160;$       frame.AddrPC   .Offset = wow64ctx.Eip;</div>
<div class="line"><a name="l12132"></a><span class="lineno">12132</span>&#160;$       frame.AddrStack.Offset = wow64ctx.Esp;</div>
<div class="line"><a name="l12133"></a><span class="lineno">12133</span>&#160;$       frame.AddrFrame.Offset = wow64ctx.Ebp;</div>
<div class="line"><a name="l12134"></a><span class="lineno">12134</span>&#160;        }</div>
<div class="line"><a name="l12135"></a><span class="lineno">12135</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l12136"></a><span class="lineno">12136</span>&#160;        {</div>
<div class="line"><a name="l12137"></a><span class="lineno">12137</span>&#160;$       cpu = IMAGE_FILE_MACHINE_AMD64;</div>
<div class="line"><a name="l12138"></a><span class="lineno">12138</span>&#160; </div>
<div class="line"><a name="l12139"></a><span class="lineno">12139</span>&#160;$       frame.AddrPC   .Offset = ctx.Rip;</div>
<div class="line"><a name="l12140"></a><span class="lineno">12140</span>&#160;$       frame.AddrStack.Offset = ctx.Rbp;</div>
<div class="line"><a name="l12141"></a><span class="lineno">12141</span>&#160;$       frame.AddrFrame.Offset = ctx.Rsp;</div>
<div class="line"><a name="l12142"></a><span class="lineno">12142</span>&#160;        }</div>
<div class="line"><a name="l12143"></a><span class="lineno">12143</span>&#160; </div>
<div class="line"><a name="l12144"></a><span class="lineno">12144</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l12145"></a><span class="lineno">12145</span>&#160; </div>
<div class="line"><a name="l12146"></a><span class="lineno">12146</span>&#160;        {</div>
<div class="line"><a name="l12147"></a><span class="lineno">12147</span>&#160;$       cpu = IMAGE_FILE_MACHINE_I386;</div>
<div class="line"><a name="l12148"></a><span class="lineno">12148</span>&#160; </div>
<div class="line"><a name="l12149"></a><span class="lineno">12149</span>&#160;$       frame.AddrPC   .Offset = ctx.Eip;</div>
<div class="line"><a name="l12150"></a><span class="lineno">12150</span>&#160;$       frame.AddrStack.Offset = ctx.Ebp;</div>
<div class="line"><a name="l12151"></a><span class="lineno">12151</span>&#160;$       frame.AddrFrame.Offset = ctx.Esp;</div>
<div class="line"><a name="l12152"></a><span class="lineno">12152</span>&#160;        }</div>
<div class="line"><a name="l12153"></a><span class="lineno">12153</span>&#160; </div>
<div class="line"><a name="l12154"></a><span class="lineno">12154</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12155"></a><span class="lineno">12155</span>&#160; </div>
<div class="line"><a name="l12156"></a><span class="lineno">12156</span>&#160;$   assert (cpu);</div>
<div class="line"><a name="l12157"></a><span class="lineno">12157</span>&#160; </div>
<div class="line"><a name="l12158"></a><span class="lineno">12158</span>&#160;    <span class="keywordflow">if</span> (_txSetJmp())</div>
<div class="line"><a name="l12159"></a><span class="lineno">12159</span>&#160;        {</div>
<div class="line"><a name="l12160"></a><span class="lineno">12160</span>&#160;$       _txSymGetFromAddr ((<span class="keywordtype">void</span>*) 1);  <span class="comment">//-V566</span></div>
<div class="line"><a name="l12161"></a><span class="lineno">12161</span>&#160;        }</div>
<div class="line"><a name="l12162"></a><span class="lineno">12162</span>&#160;$   _txClearJmp();</div>
<div class="line"><a name="l12163"></a><span class="lineno">12163</span>&#160; </div>
<div class="line"><a name="l12164"></a><span class="lineno">12164</span>&#160;$   <span class="keywordtype">int</span>  frames = -1;</div>
<div class="line"><a name="l12165"></a><span class="lineno">12165</span>&#160; </div>
<div class="line"><a name="l12166"></a><span class="lineno">12166</span>&#160;$   <span class="keywordflow">for</span> (frames = -framesToSkip; frames &lt; (int) szCapture; frames++)  <span class="comment">//-V202 //-V2530</span></div>
<div class="line"><a name="l12167"></a><span class="lineno">12167</span>&#160;        {</div>
<div class="line"><a name="l12168"></a><span class="lineno">12168</span>&#160;$       DWORD64 prev = frame.AddrStack.Offset;</div>
<div class="line"><a name="l12169"></a><span class="lineno">12169</span>&#160; </div>
<div class="line"><a name="l12170"></a><span class="lineno">12170</span>&#160;        <span class="comment">// Я злой и страшный серый walk. Я в поросятах знаю talk.</span></div>
<div class="line"><a name="l12171"></a><span class="lineno">12171</span>&#160; </div>
<div class="line"><a name="l12172"></a><span class="lineno">12172</span>&#160;        <span class="keywordflow">if</span> (!_txSetJmp()) {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12173"></a><span class="lineno">12173</span>&#160; </div>
<div class="line"><a name="l12174"></a><span class="lineno">12174</span>&#160;<span class="preprocessor">#if   defined (_GCC_VER)</span></div>
<div class="line"><a name="l12175"></a><span class="lineno">12175</span>&#160; </div>
<div class="line"><a name="l12176"></a><span class="lineno">12176</span>&#160;        <span class="keywordflow">if</span> (!_TX_CALL (MinGW::StackWalk64, (cpu, process, thread, &amp;frame, &amp;ctx, NULL,</div>
<div class="line"><a name="l12177"></a><span class="lineno">12177</span>&#160;                                            MinGW::SymFunctionTableAccess64, MinGW::SymGetModuleBase64, NULL))) {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12178"></a><span class="lineno">12178</span>&#160;<span class="preprocessor">#elif defined (_MSC_VER)</span></div>
<div class="line"><a name="l12179"></a><span class="lineno">12179</span>&#160; </div>
<div class="line"><a name="l12180"></a><span class="lineno">12180</span>&#160;$       <span class="keywordflow">if</span> (!_TX_CALL (Win32::StackWalk64, (cpu, process, thread, &amp;frame, &amp;ctx, NULL,</div>
<div class="line"><a name="l12181"></a><span class="lineno">12181</span>&#160;                                            Win32::SymFunctionTableAccess64, Win32::SymGetModuleBase64, NULL))) {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12182"></a><span class="lineno">12182</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l12183"></a><span class="lineno">12183</span>&#160;<span class="preprocessor">        #error _GCC_VER / _MSC_VER not defined</span></div>
<div class="line"><a name="l12184"></a><span class="lineno">12184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l12185"></a><span class="lineno">12185</span>&#160;        <span class="keywordflow">if</span> (frames &lt; 0) {$ <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l12186"></a><span class="lineno">12186</span>&#160; </div>
<div class="line"><a name="l12187"></a><span class="lineno">12187</span>&#160;$       <span class="keywordtype">void</span>* addr = (<span class="keywordtype">void</span>*) frame.AddrPC.Offset;</div>
<div class="line"><a name="l12188"></a><span class="lineno">12188</span>&#160; </div>
<div class="line"><a name="l12189"></a><span class="lineno">12189</span>&#160;        if (frame.AddrFrame.Offset == 0)   {$ addr =          0; }  <span class="comment">// Bad frame</span></div>
<div class="line"><a name="l12190"></a><span class="lineno">12190</span>&#160;        <span class="keywordflow">if</span> (frame.AddrStack.Offset &lt; prev) {$ addr = (<span class="keywordtype">void</span>*) -1; }  <span class="comment">// Strange frame</span></div>
<div class="line"><a name="l12191"></a><span class="lineno">12191</span>&#160; </div>
<div class="line"><a name="l12192"></a><span class="lineno">12192</span>&#160;$       assert (0 &lt;= frames &amp;&amp; frames &lt; (<span class="keywordtype">int</span>) szCapture);  <span class="comment">//-V202</span></div>
<div class="line"><a name="l12193"></a><span class="lineno">12193</span>&#160; </div>
<div class="line"><a name="l12194"></a><span class="lineno">12194</span>&#160;$       capture[frames] = addr;                            <span class="comment">//-V108</span></div>
<div class="line"><a name="l12195"></a><span class="lineno">12195</span>&#160;        }</div>
<div class="line"><a name="l12196"></a><span class="lineno">12196</span>&#160; </div>
<div class="line"><a name="l12197"></a><span class="lineno">12197</span>&#160;$   _txClearJmp();</div>
<div class="line"><a name="l12198"></a><span class="lineno">12198</span>&#160; </div>
<div class="line"><a name="l12199"></a><span class="lineno">12199</span>&#160;    <span class="keywordflow">if</span> (!thisThread) {$ ResumeThread (thread); }</div>
<div class="line"><a name="l12200"></a><span class="lineno">12200</span>&#160; </div>
<div class="line"><a name="l12201"></a><span class="lineno">12201</span>&#160;$   <span class="keywordflow">return</span> frames;</div>
<div class="line"><a name="l12202"></a><span class="lineno">12202</span>&#160;    }</div>
<div class="line"><a name="l12203"></a><span class="lineno">12203</span>&#160; </div>
<div class="line"><a name="l12204"></a><span class="lineno">12204</span>&#160;<span class="comment">// Note that Rick and Carl are speaking near the C language block. &quot;C block&quot;, Carl. See: http://knowyourmeme.com/memes/carl</span></div>
<div class="line"><a name="l12205"></a><span class="lineno">12205</span>&#160; </div>
<div class="line"><a name="l12206"></a><span class="lineno">12206</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12207"></a><span class="lineno">12207</span>&#160; </div>
<div class="line"><a name="l12208"></a><span class="lineno">12208</span>&#160;<span class="keywordtype">bool</span> _txSymGetFromAddr (<span class="keywordtype">void</span>* addr, Win32::SYMBOL_INFO** symbol <span class="comment">/*= NULL*/</span>,</div>
<div class="line"><a name="l12209"></a><span class="lineno">12209</span>&#160;                        Win32::IMAGEHLP_LINE64** line <span class="comment">/*= NULL*/</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>** module <span class="comment">/*= NULL*/</span>,</div>
<div class="line"><a name="l12210"></a><span class="lineno">12210</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span>** source <span class="comment">/*= NULL*/</span>, <span class="keywordtype">int</span> context <span class="comment">/*= 2*/</span>)</div>
<div class="line"><a name="l12211"></a><span class="lineno">12211</span>&#160;    {</div>
<div class="line"><a name="l12212"></a><span class="lineno">12212</span>&#160;$7  <span class="keyword">static</span> HANDLE process = NULL;</div>
<div class="line"><a name="l12213"></a><span class="lineno">12213</span>&#160; </div>
<div class="line"><a name="l12214"></a><span class="lineno">12214</span>&#160;<span class="preprocessor">#if   defined (_GCC_VER)</span></div>
<div class="line"><a name="l12215"></a><span class="lineno">12215</span>&#160;<span class="preprocessor">    #define LIB_  Win32::MinGW</span></div>
<div class="line"><a name="l12216"></a><span class="lineno">12216</span>&#160; </div>
<div class="line"><a name="l12217"></a><span class="lineno">12217</span>&#160;<span class="preprocessor">#elif defined (_MSC_VER)</span></div>
<div class="line"><a name="l12218"></a><span class="lineno">12218</span>&#160;<span class="preprocessor">    #define LIB_  Win32</span></div>
<div class="line"><a name="l12219"></a><span class="lineno">12219</span>&#160; </div>
<div class="line"><a name="l12220"></a><span class="lineno">12220</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l12221"></a><span class="lineno">12221</span>&#160;<span class="preprocessor">    #error _GCC_VER / _MSC_VER not defined</span></div>
<div class="line"><a name="l12222"></a><span class="lineno">12222</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l12223"></a><span class="lineno">12223</span>&#160; </div>
<div class="line"><a name="l12224"></a><span class="lineno">12224</span>&#160;$   <span class="keywordflow">if</span> (!process &amp;&amp; addr)</div>
<div class="line"><a name="l12225"></a><span class="lineno">12225</span>&#160;        {</div>
<div class="line"><a name="l12226"></a><span class="lineno">12226</span>&#160;$       process = GetCurrentProcess();</div>
<div class="line"><a name="l12227"></a><span class="lineno">12227</span>&#160; </div>
<div class="line"><a name="l12228"></a><span class="lineno">12228</span>&#160;$       DWORD options = SYMOPT_UNDNAME | SYMOPT_LOAD_LINES | SYMOPT_LOAD_ANYTHING | SYMOPT_INCLUDE_32BIT_MODULES |</div>
<div class="line"><a name="l12229"></a><span class="lineno">12229</span>&#160;                        SYMOPT_DEFERRED_LOADS | SYMOPT_FAVOR_COMPRESSED | SYMOPT_FAIL_CRITICAL_ERRORS | SYMOPT_NO_PROMPTS;</div>
<div class="line"><a name="l12230"></a><span class="lineno">12230</span>&#160; </div>
<div class="line"><a name="l12231"></a><span class="lineno">12231</span>&#160;$        _TX_CALL (LIB_::SymSetOptions, (options));</div>
<div class="line"><a name="l12232"></a><span class="lineno">12232</span>&#160;$        _TX_CALL (LIB_::SymInitialize, (process, NULL, <span class="keyword">true</span>));</div>
<div class="line"><a name="l12233"></a><span class="lineno">12233</span>&#160;        }</div>
<div class="line"><a name="l12234"></a><span class="lineno">12234</span>&#160; </div>
<div class="line"><a name="l12235"></a><span class="lineno">12235</span>&#160;$   <span class="keyword">static</span> DWORD64 mod = 0;</div>
<div class="line"><a name="l12236"></a><span class="lineno">12236</span>&#160; </div>
<div class="line"><a name="l12237"></a><span class="lineno">12237</span>&#160;$   <span class="keywordflow">if</span> (module)</div>
<div class="line"><a name="l12238"></a><span class="lineno">12238</span>&#160;        {</div>
<div class="line"><a name="l12239"></a><span class="lineno">12239</span>&#160;$       <span class="keyword">static</span> <span class="keywordtype">char</span> sMod [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12240"></a><span class="lineno">12240</span>&#160;$       memset (sMod, 0, <span class="keyword">sizeof</span> (sMod));</div>
<div class="line"><a name="l12241"></a><span class="lineno">12241</span>&#160; </div>
<div class="line"><a name="l12242"></a><span class="lineno">12242</span>&#160;$       mod = _TX_CALL (LIB_::SymGetModuleBase64, (process, (uintptr_t) addr));</div>
<div class="line"><a name="l12243"></a><span class="lineno">12243</span>&#160; </div>
<div class="line"><a name="l12244"></a><span class="lineno">12244</span>&#160;$       GetModuleFileName ((HMODULE)(intptr_t) mod, sMod, MAX_PATH);</div>
<div class="line"><a name="l12245"></a><span class="lineno">12245</span>&#160; </div>
<div class="line"><a name="l12246"></a><span class="lineno">12246</span>&#160;$       <span class="keywordtype">char</span>* ext = strrchr (sMod, <span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l12247"></a><span class="lineno">12247</span>&#160;        <span class="keywordflow">if</span> (ext) {$ _strlwr_s (ext, <span class="keyword">sizeof</span> (sMod) - (ext-sMod)); }</div>
<div class="line"><a name="l12248"></a><span class="lineno">12248</span>&#160; </div>
<div class="line"><a name="l12249"></a><span class="lineno">12249</span>&#160;$       *module = sMod;</div>
<div class="line"><a name="l12250"></a><span class="lineno">12250</span>&#160;        }</div>
<div class="line"><a name="l12251"></a><span class="lineno">12251</span>&#160; </div>
<div class="line"><a name="l12252"></a><span class="lineno">12252</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span> buffer [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12253"></a><span class="lineno">12253</span>&#160;$   <span class="keyword">static</span> Win32::SYMBOL_INFO* sym = (Win32::SYMBOL_INFO*) buffer;  <span class="comment">//-V1032</span></div>
<div class="line"><a name="l12254"></a><span class="lineno">12254</span>&#160; </div>
<div class="line"><a name="l12255"></a><span class="lineno">12255</span>&#160;$   <span class="keywordflow">if</span> (symbol)</div>
<div class="line"><a name="l12256"></a><span class="lineno">12256</span>&#160;        {</div>
<div class="line"><a name="l12257"></a><span class="lineno">12257</span>&#160;$       memset (buffer, 0, <span class="keyword">sizeof</span> (buffer));</div>
<div class="line"><a name="l12258"></a><span class="lineno">12258</span>&#160; </div>
<div class="line"><a name="l12259"></a><span class="lineno">12259</span>&#160;$       sym-&gt;MaxNameLen   = <span class="keyword">sizeof</span> (buffer) - <span class="keyword">sizeof</span> (Win32::SYMBOL_INFO) - 1;</div>
<div class="line"><a name="l12260"></a><span class="lineno">12260</span>&#160;$       sym-&gt;SizeOfStruct = <span class="keyword">sizeof</span> (Win32::SYMBOL_INFO);</div>
<div class="line"><a name="l12261"></a><span class="lineno">12261</span>&#160;$       <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> ofs = 0;</div>
<div class="line"><a name="l12262"></a><span class="lineno">12262</span>&#160; </div>
<div class="line"><a name="l12263"></a><span class="lineno">12263</span>&#160;$       _TX_CALL (LIB_::SymFromAddr, (process, (uintptr_t) addr, &amp;ofs, sym));</div>
<div class="line"><a name="l12264"></a><span class="lineno">12264</span>&#160; </div>
<div class="line"><a name="l12265"></a><span class="lineno">12265</span>&#160;        <span class="keywordflow">if</span> (strcmp (sym-&gt;Name, <span class="stringliteral">&quot;??&quot;</span>) == 0) {$ *sym-&gt;Name = 0; }</div>
<div class="line"><a name="l12266"></a><span class="lineno">12266</span>&#160; </div>
<div class="line"><a name="l12267"></a><span class="lineno">12267</span>&#160;$       *symbol = sym;</div>
<div class="line"><a name="l12268"></a><span class="lineno">12268</span>&#160;        }</div>
<div class="line"><a name="l12269"></a><span class="lineno">12269</span>&#160; </div>
<div class="line"><a name="l12270"></a><span class="lineno">12270</span>&#160;$   <span class="keyword">static</span> Win32::IMAGEHLP_LINE64 line64 = { <span class="keyword">sizeof</span> (line) };</div>
<div class="line"><a name="l12271"></a><span class="lineno">12271</span>&#160; </div>
<div class="line"><a name="l12272"></a><span class="lineno">12272</span>&#160;$   <span class="keywordflow">if</span> (line)</div>
<div class="line"><a name="l12273"></a><span class="lineno">12273</span>&#160;        {</div>
<div class="line"><a name="l12274"></a><span class="lineno">12274</span>&#160;$       memset (&amp;line64, 0, <span class="keyword">sizeof</span> (line64));</div>
<div class="line"><a name="l12275"></a><span class="lineno">12275</span>&#160; </div>
<div class="line"><a name="l12276"></a><span class="lineno">12276</span>&#160;$       DWORD ofs = 0;</div>
<div class="line"><a name="l12277"></a><span class="lineno">12277</span>&#160;$       _TX_CALL (LIB_::SymGetLineFromAddr64, (process, (uintptr_t) addr, &amp;ofs, &amp;line64));</div>
<div class="line"><a name="l12278"></a><span class="lineno">12278</span>&#160; </div>
<div class="line"><a name="l12279"></a><span class="lineno">12279</span>&#160;$       *line = &amp;line64;</div>
<div class="line"><a name="l12280"></a><span class="lineno">12280</span>&#160;        }</div>
<div class="line"><a name="l12281"></a><span class="lineno">12281</span>&#160; </div>
<div class="line"><a name="l12282"></a><span class="lineno">12282</span>&#160;$   <span class="keywordflow">if</span> (source)</div>
<div class="line"><a name="l12283"></a><span class="lineno">12283</span>&#160;        {</div>
<div class="line"><a name="l12284"></a><span class="lineno">12284</span>&#160;$       <span class="keyword">static</span> <span class="keywordtype">char</span> buf [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12285"></a><span class="lineno">12285</span>&#160;$       memset (buf, 0, <span class="keyword">sizeof</span> (buf));</div>
<div class="line"><a name="l12286"></a><span class="lineno">12286</span>&#160; </div>
<div class="line"><a name="l12287"></a><span class="lineno">12287</span>&#160;$       <span class="keywordflow">if</span> (line64.FileName &amp;&amp; line64.LineNumber)</div>
<div class="line"><a name="l12288"></a><span class="lineno">12288</span>&#160;            {</div>
<div class="line"><a name="l12289"></a><span class="lineno">12289</span>&#160;$           _txReadSource (buf, <span class="keyword">sizeof</span> (buf) - 1, line64.FileName,</div>
<div class="line"><a name="l12290"></a><span class="lineno">12290</span>&#160;                          (<span class="keywordtype">int</span>) line64.LineNumber - context, (<span class="keywordtype">int</span>) line64.LineNumber + context, (<span class="keywordtype">int</span>) line64.LineNumber);</div>
<div class="line"><a name="l12291"></a><span class="lineno">12291</span>&#160; </div>
<div class="line"><a name="l12292"></a><span class="lineno">12292</span>&#160;$           *source = buf;</div>
<div class="line"><a name="l12293"></a><span class="lineno">12293</span>&#160;            }</div>
<div class="line"><a name="l12294"></a><span class="lineno">12294</span>&#160; </div>
<div class="line"><a name="l12295"></a><span class="lineno">12295</span>&#160;        <span class="keywordflow">if</span> (!*source || !**source) {$ *source = NULL; }</div>
<div class="line"><a name="l12296"></a><span class="lineno">12296</span>&#160;        }</div>
<div class="line"><a name="l12297"></a><span class="lineno">12297</span>&#160; </div>
<div class="line"><a name="l12298"></a><span class="lineno">12298</span>&#160;$   <span class="keywordflow">if</span> (!addr &amp;&amp; process)</div>
<div class="line"><a name="l12299"></a><span class="lineno">12299</span>&#160;        {</div>
<div class="line"><a name="l12300"></a><span class="lineno">12300</span>&#160;$       _TX_CALL (LIB_::SymCleanup, (process));</div>
<div class="line"><a name="l12301"></a><span class="lineno">12301</span>&#160; </div>
<div class="line"><a name="l12302"></a><span class="lineno">12302</span>&#160;$       process = NULL;</div>
<div class="line"><a name="l12303"></a><span class="lineno">12303</span>&#160;        }</div>
<div class="line"><a name="l12304"></a><span class="lineno">12304</span>&#160; </div>
<div class="line"><a name="l12305"></a><span class="lineno">12305</span>&#160;<span class="preprocessor">    #if (_GCC_VER == 481)</span></div>
<div class="line"><a name="l12306"></a><span class="lineno">12306</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic push</span></div>
<div class="line"><a name="l12307"></a><span class="lineno">12307</span>&#160;<span class="preprocessor">    #pragma GCC system_header</span></div>
<div class="line"><a name="l12308"></a><span class="lineno">12308</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12309"></a><span class="lineno">12309</span>&#160; </div>
<div class="line"><a name="l12310"></a><span class="lineno">12310</span>&#160;$   <span class="keywordflow">if</span> (symbol)</div>
<div class="line"><a name="l12311"></a><span class="lineno">12311</span>&#160;        {</div>
<div class="line"><a name="l12312"></a><span class="lineno">12312</span>&#160;$       <span class="keywordflow">if</span> (strstr  (sym-&gt;Name, <span class="stringliteral">&quot;::TX::&quot;</span>)                                                  ||</div>
<div class="line"><a name="l12313"></a><span class="lineno">12313</span>&#160;           (strncmp (sym-&gt;Name, <span class="stringliteral">&quot;_tx&quot;</span>,  3) == 0 &amp;&amp; isupper ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) sym-&gt;Name[3])) ||</div>
<div class="line"><a name="l12314"></a><span class="lineno">12314</span>&#160;           (strncmp (sym-&gt;Name,  <span class="stringliteral">&quot;tx&quot;</span>,  2) == 0 &amp;&amp; isupper ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) sym-&gt;Name[2])) ||</div>
<div class="line"><a name="l12315"></a><span class="lineno">12315</span>&#160;            strncmp (sym-&gt;Name, <span class="stringliteral">&quot;_tx_&quot;</span>, 4) == 0                                            ||  <span class="comment">//-V112</span></div>
<div class="line"><a name="l12316"></a><span class="lineno">12316</span>&#160;            strncmp (sym-&gt;Name,  <span class="stringliteral">&quot;tx_&quot;</span>, 3) == 0)</div>
<div class="line"><a name="l12317"></a><span class="lineno">12317</span>&#160;            {</div>
<div class="line"><a name="l12318"></a><span class="lineno">12318</span>&#160;$           <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l12319"></a><span class="lineno">12319</span>&#160;            }</div>
<div class="line"><a name="l12320"></a><span class="lineno">12320</span>&#160; </div>
<div class="line"><a name="l12321"></a><span class="lineno">12321</span>&#160;<span class="preprocessor">    #if (_GCC_VER == 481)</span></div>
<div class="line"><a name="l12322"></a><span class="lineno">12322</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic pop</span></div>
<div class="line"><a name="l12323"></a><span class="lineno">12323</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12324"></a><span class="lineno">12324</span>&#160; </div>
<div class="line"><a name="l12325"></a><span class="lineno">12325</span>&#160;$       <span class="keywordflow">if</span> (!line || !line64.FileName) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12326"></a><span class="lineno">12326</span>&#160; </div>
<div class="line"><a name="l12327"></a><span class="lineno">12327</span>&#160;$       intptr_t len = strlen (line64.FileName) - (<span class="keyword">sizeof</span> (__FILE__) - 1);</div>
<div class="line"><a name="l12328"></a><span class="lineno">12328</span>&#160; </div>
<div class="line"><a name="l12329"></a><span class="lineno">12329</span>&#160;$       <span class="keywordflow">return</span> (len &gt;= 0 &amp;&amp; _stricmp (line64.FileName + len, __FILE__) == 0) &amp;&amp;</div>
<div class="line"><a name="l12330"></a><span class="lineno">12330</span>&#160;               (len == 0 || line64.FileName[len-1] == <span class="charliteral">&#39;/&#39;</span> || line64.FileName[len-1] == <span class="charliteral">&#39;\\&#39;</span>);</div>
<div class="line"><a name="l12331"></a><span class="lineno">12331</span>&#160;        }</div>
<div class="line"><a name="l12332"></a><span class="lineno">12332</span>&#160; </div>
<div class="line"><a name="l12333"></a><span class="lineno">12333</span>&#160;<span class="preprocessor">    #undef LIB_</span></div>
<div class="line"><a name="l12334"></a><span class="lineno">12334</span>&#160; </div>
<div class="line"><a name="l12335"></a><span class="lineno">12335</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12336"></a><span class="lineno">12336</span>&#160;    }</div>
<div class="line"><a name="l12337"></a><span class="lineno">12337</span>&#160; </div>
<div class="line"><a name="l12338"></a><span class="lineno">12338</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12339"></a><span class="lineno">12339</span>&#160; </div>
<div class="line"><a name="l12340"></a><span class="lineno">12340</span>&#160;intptr_t _txReadSource (<span class="keywordtype">char</span> buf[], intptr_t size, <span class="keyword">const</span> <span class="keywordtype">char</span> file[],</div>
<div class="line"><a name="l12341"></a><span class="lineno">12341</span>&#160;                        <span class="keywordtype">int</span> linStart <span class="comment">/*= 0*/</span>, <span class="keywordtype">int</span> linEnd <span class="comment">/*= INT_MIN*/</span>, <span class="keywordtype">int</span> linMark <span class="comment">/*= INT_MIN*/</span>)</div>
<div class="line"><a name="l12342"></a><span class="lineno">12342</span>&#160;    {</div>
<div class="line"><a name="l12343"></a><span class="lineno">12343</span>&#160;$7  assert (buf);</div>
<div class="line"><a name="l12344"></a><span class="lineno">12344</span>&#160; </div>
<div class="line"><a name="l12345"></a><span class="lineno">12345</span>&#160;    <span class="keywordflow">if</span> (!file || !*file) {$ <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l12346"></a><span class="lineno">12346</span>&#160; </div>
<div class="line"><a name="l12347"></a><span class="lineno">12347</span>&#160;    <span class="keywordflow">if</span> (linStart &lt; 1) {$ linStart = 1;       }</div>
<div class="line"><a name="l12348"></a><span class="lineno">12348</span>&#160;    <span class="keywordflow">if</span> (linEnd == -1) {$ linEnd   = INT_MAX; }</div>
<div class="line"><a name="l12349"></a><span class="lineno">12349</span>&#160; </div>
<div class="line"><a name="l12350"></a><span class="lineno">12350</span>&#160;$   FILE* f = NULL;</div>
<div class="line"><a name="l12351"></a><span class="lineno">12351</span>&#160;$   fopen_s (&amp;f, file, <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"><a name="l12352"></a><span class="lineno">12352</span>&#160;    <span class="keywordflow">if</span> (!f) {$ <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l12353"></a><span class="lineno">12353</span>&#160; </div>
<div class="line"><a name="l12354"></a><span class="lineno">12354</span>&#160;$   <span class="keywordtype">int</span> n = 1;</div>
<div class="line"><a name="l12355"></a><span class="lineno">12355</span>&#160;    <span class="keywordflow">while</span> (!feof (f))</div>
<div class="line"><a name="l12356"></a><span class="lineno">12356</span>&#160;        {</div>
<div class="line"><a name="l12357"></a><span class="lineno">12357</span>&#160;        <span class="keywordflow">if</span> (n &gt;= linStart) {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12358"></a><span class="lineno">12358</span>&#160;        <span class="keywordflow">while</span> (!feof (f) &amp;&amp; fgetc (f) != <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><a name="l12359"></a><span class="lineno">12359</span>&#160;            ;</div>
<div class="line"><a name="l12360"></a><span class="lineno">12360</span>&#160;        n++;</div>
<div class="line"><a name="l12361"></a><span class="lineno">12361</span>&#160;        }</div>
<div class="line"><a name="l12362"></a><span class="lineno">12362</span>&#160; </div>
<div class="line"><a name="l12363"></a><span class="lineno">12363</span>&#160;$   <span class="keywordtype">char</span>* s = buf;</div>
<div class="line"><a name="l12364"></a><span class="lineno">12364</span>&#160; </div>
<div class="line"><a name="l12365"></a><span class="lineno">12365</span>&#160;<span class="preprocessor">    #define SZ_  ( size - 3 - (s - buf) )</span></div>
<div class="line"><a name="l12366"></a><span class="lineno">12366</span>&#160; </div>
<div class="line"><a name="l12367"></a><span class="lineno">12367</span>&#160;$   <span class="keywordflow">while</span> (!feof (f) &amp;&amp; SZ_ &gt; 0)</div>
<div class="line"><a name="l12368"></a><span class="lineno">12368</span>&#160;        {</div>
<div class="line"><a name="l12369"></a><span class="lineno">12369</span>&#160;        <span class="keywordflow">if</span> (n &gt; linEnd || _txNOP (SZ_) &lt; 0) {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12370"></a><span class="lineno">12370</span>&#160; </div>
<div class="line"><a name="l12371"></a><span class="lineno">12371</span>&#160;        <span class="keywordflow">if</span> (linMark != INT_MIN)</div>
<div class="line"><a name="l12372"></a><span class="lineno">12372</span>&#160;            {$ s += _tx_snprintf_s (s, SZ_, <span class="stringliteral">&quot;%s%5d: &quot;</span>, ((n == linMark)? <span class="stringliteral">&quot;=&gt;&quot;</span> : <span class="stringliteral">&quot;  &quot;</span>), n); }</div>
<div class="line"><a name="l12373"></a><span class="lineno">12373</span>&#160; </div>
<div class="line"><a name="l12374"></a><span class="lineno">12374</span>&#160;$       <span class="keywordtype">int</span> c = 0;</div>
<div class="line"><a name="l12375"></a><span class="lineno">12375</span>&#160;$       <span class="keywordflow">while</span> (!feof (f) &amp;&amp; SZ_ &gt; 0 &amp;&amp; (c = fgetc (f)) != <span class="charliteral">&#39;\n&#39;</span>) *s++ = (char) c;</div>
<div class="line"><a name="l12376"></a><span class="lineno">12376</span>&#160;        <span class="keywordflow">if</span> (c == EOF) {$ s--; }</div>
<div class="line"><a name="l12377"></a><span class="lineno">12377</span>&#160; </div>
<div class="line"><a name="l12378"></a><span class="lineno">12378</span>&#160;        <span class="keywordflow">if</span> (SZ_ &gt; 0) {$ *s++ = <span class="charliteral">&#39;\n&#39;</span>; }</div>
<div class="line"><a name="l12379"></a><span class="lineno">12379</span>&#160;$       n++;</div>
<div class="line"><a name="l12380"></a><span class="lineno">12380</span>&#160;        }</div>
<div class="line"><a name="l12381"></a><span class="lineno">12381</span>&#160; </div>
<div class="line"><a name="l12382"></a><span class="lineno">12382</span>&#160;    <span class="keywordflow">if</span> (n &lt;= linEnd &amp;&amp; SZ_ &lt;= 0)</div>
<div class="line"><a name="l12383"></a><span class="lineno">12383</span>&#160;        {$ s += _tx_snprintf_s (s, size - (s - buf), <span class="stringliteral">&quot;...&quot;</span>); }</div>
<div class="line"><a name="l12384"></a><span class="lineno">12384</span>&#160; </div>
<div class="line"><a name="l12385"></a><span class="lineno">12385</span>&#160;<span class="preprocessor">    #undef SZ_</span></div>
<div class="line"><a name="l12386"></a><span class="lineno">12386</span>&#160; </div>
<div class="line"><a name="l12387"></a><span class="lineno">12387</span>&#160;$   fclose (f);</div>
<div class="line"><a name="l12388"></a><span class="lineno">12388</span>&#160; </div>
<div class="line"><a name="l12389"></a><span class="lineno">12389</span>&#160;    <span class="keywordflow">if</span> (s &gt; buf &amp;&amp; s[-1] == <span class="charliteral">&#39;\n&#39;</span>) {$ s--; }</div>
<div class="line"><a name="l12390"></a><span class="lineno">12390</span>&#160;$   *s = 0;</div>
<div class="line"><a name="l12391"></a><span class="lineno">12391</span>&#160; </div>
<div class="line"><a name="l12392"></a><span class="lineno">12392</span>&#160;$   <span class="keywordflow">return</span> (s - buf);</div>
<div class="line"><a name="l12393"></a><span class="lineno">12393</span>&#160;    }</div>
<div class="line"><a name="l12394"></a><span class="lineno">12394</span>&#160; </div>
<div class="line"><a name="l12395"></a><span class="lineno">12395</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12396"></a><span class="lineno">12396</span>&#160; </div>
<div class="line"><a name="l12397"></a><span class="lineno">12397</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* _txCaptureStackBackTraceTX (<span class="keywordtype">int</span> framesToSkip <span class="comment">/*= 0*/</span>, <span class="keywordtype">bool</span> readSource <span class="comment">/*= false*/</span>)</div>
<div class="line"><a name="l12398"></a><span class="lineno">12398</span>&#160;    {</div>
<div class="line"><a name="l12399"></a><span class="lineno">12399</span>&#160;$6  <span class="keyword">const</span> <span class="keywordtype">int</span> maxFrames = 62;  <span class="comment">// TX says too: &lt; 63</span></div>
<div class="line"><a name="l12400"></a><span class="lineno">12400</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span> trace [(MAX_PATH + 1024+1) * maxFrames] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12401"></a><span class="lineno">12401</span>&#160; </div>
<div class="line"><a name="l12402"></a><span class="lineno">12402</span>&#160;    <span class="keywordflow">if</span> (framesToSkip == -1) {$ <span class="keywordflow">return</span> trace; }</div>
<div class="line"><a name="l12403"></a><span class="lineno">12403</span>&#160; </div>
<div class="line"><a name="l12404"></a><span class="lineno">12404</span>&#160;$   memset (trace, 0, <span class="keyword">sizeof</span> (trace));</div>
<div class="line"><a name="l12405"></a><span class="lineno">12405</span>&#160;$   <span class="keywordtype">char</span>* s = trace;</div>
<div class="line"><a name="l12406"></a><span class="lineno">12406</span>&#160; </div>
<div class="line"><a name="l12407"></a><span class="lineno">12407</span>&#160;<span class="preprocessor">    #define SZ_  ( sizeof (trace) - 1 - 3 - (s-trace) )</span></div>
<div class="line"><a name="l12408"></a><span class="lineno">12408</span>&#160; </div>
<div class="line"><a name="l12409"></a><span class="lineno">12409</span>&#160;$   <span class="keyword">const</span> _txLoc* loc = &amp;_txLoc::Cur;</div>
<div class="line"><a name="l12410"></a><span class="lineno">12410</span>&#160; </div>
<div class="line"><a name="l12411"></a><span class="lineno">12411</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; loc &amp;&amp; i &lt; framesToSkip + 1; i++, loc = loc-&gt;prev) { $; }</div>
<div class="line"><a name="l12412"></a><span class="lineno">12412</span>&#160; </div>
<div class="line"><a name="l12413"></a><span class="lineno">12413</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = -framesToSkip; loc &amp;&amp; i &lt; maxFrames; i++, loc = loc-&gt;prev)</div>
<div class="line"><a name="l12414"></a><span class="lineno">12414</span>&#160;        {</div>
<div class="line"><a name="l12415"></a><span class="lineno">12415</span>&#160;        <span class="keywordflow">if</span> (i &lt; 0) {$ <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l12416"></a><span class="lineno">12416</span>&#160; </div>
<div class="line"><a name="l12417"></a><span class="lineno">12417</span>&#160;        <span class="keywordflow">if</span> (loc-&gt;func || loc-&gt;file || loc-&gt;line)</div>
<div class="line"><a name="l12418"></a><span class="lineno">12418</span>&#160;            {</div>
<div class="line"><a name="l12419"></a><span class="lineno">12419</span>&#160;$           s += _tx_snprintf_s     (s, SZ_, <span class="stringliteral">&quot;%s#%2d in %s at %s (%d)&quot;</span>, (i? readSource? <span class="stringliteral">&quot;\n\n&quot;</span> : <span class="stringliteral">&quot;\n&quot;</span> : <span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l12420"></a><span class="lineno">12420</span>&#160;                                     i, loc-&gt;func, loc-&gt;file, loc-&gt;line);</div>
<div class="line"><a name="l12421"></a><span class="lineno">12421</span>&#160; </div>
<div class="line"><a name="l12422"></a><span class="lineno">12422</span>&#160;$           <span class="keywordflow">if</span> (readSource)</div>
<div class="line"><a name="l12423"></a><span class="lineno">12423</span>&#160;                {</div>
<div class="line"><a name="l12424"></a><span class="lineno">12424</span>&#160;$               s += _tx_snprintf_s (s, SZ_, <span class="stringliteral">&quot;:\n\n&quot;</span>);</div>
<div class="line"><a name="l12425"></a><span class="lineno">12425</span>&#160;$               s += _txReadSource  (s, SZ_, loc-&gt;file, loc-&gt;line - 2, loc-&gt;line + 2, loc-&gt;line);</div>
<div class="line"><a name="l12426"></a><span class="lineno">12426</span>&#160;                }</div>
<div class="line"><a name="l12427"></a><span class="lineno">12427</span>&#160;            }</div>
<div class="line"><a name="l12428"></a><span class="lineno">12428</span>&#160;        }</div>
<div class="line"><a name="l12429"></a><span class="lineno">12429</span>&#160; </div>
<div class="line"><a name="l12430"></a><span class="lineno">12430</span>&#160;<span class="preprocessor">    #undef SZ_</span></div>
<div class="line"><a name="l12431"></a><span class="lineno">12431</span>&#160; </div>
<div class="line"><a name="l12432"></a><span class="lineno">12432</span>&#160;$   s += _tx_snprintf_s (s, <span class="keyword">sizeof</span> (trace) - 1 - (s-trace), <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l12433"></a><span class="lineno">12433</span>&#160; </div>
<div class="line"><a name="l12434"></a><span class="lineno">12434</span>&#160;$   <span class="keywordflow">return</span> trace;</div>
<div class="line"><a name="l12435"></a><span class="lineno">12435</span>&#160;    }</div>
<div class="line"><a name="l12436"></a><span class="lineno">12436</span>&#160; </div>
<div class="line"><a name="l12437"></a><span class="lineno">12437</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12438"></a><span class="lineno">12438</span>&#160; </div>
<div class="line"><a name="l12439"></a><span class="lineno">12439</span>&#160;<span class="keywordtype">bool</span> _txCreateMiniDump (EXCEPTION_POINTERS* exc <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l12440"></a><span class="lineno">12440</span>&#160;    {</div>
<div class="line"><a name="l12441"></a><span class="lineno">12441</span>&#160;$6  <span class="keyword">static</span> <span class="keywordtype">char</span> dumpName[MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12442"></a><span class="lineno">12442</span>&#160;    <span class="keywordflow">if</span> (!*dumpName) {$ _tx_snprintf_s (dumpName, <span class="keyword">sizeof</span> (dumpName) - 1, <span class="stringliteral">&quot;%s.dmp&quot;</span>, <a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>); }</div>
<div class="line"><a name="l12443"></a><span class="lineno">12443</span>&#160; </div>
<div class="line"><a name="l12444"></a><span class="lineno">12444</span>&#160;$   HANDLE file = CreateFile (dumpName, GENERIC_WRITE, 0, NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);</div>
<div class="line"><a name="l12445"></a><span class="lineno">12445</span>&#160; </div>
<div class="line"><a name="l12446"></a><span class="lineno">12446</span>&#160;    <span class="keywordflow">if</span> (!file || file == INVALID_HANDLE_VALUE) {$ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l12447"></a><span class="lineno">12447</span>&#160; </div>
<div class="line"><a name="l12448"></a><span class="lineno">12448</span>&#160;$   Win32::MINIDUMP_EXCEPTION_INFORMATION excInfo = { GetCurrentThreadId(), exc, <span class="keyword">false</span> };</div>
<div class="line"><a name="l12449"></a><span class="lineno">12449</span>&#160;$   Win32::MINIDUMP_TYPE type = (Win32::MINIDUMP_TYPE) (Win32::MiniDumpWithIndirectlyReferencedMemory | Win32::MiniDumpScanMemory);</div>
<div class="line"><a name="l12450"></a><span class="lineno">12450</span>&#160; </div>
<div class="line"><a name="l12451"></a><span class="lineno">12451</span>&#160;$   <span class="keywordtype">bool</span> ok = _TX_CALL (Win32::MiniDumpWriteDump, (GetCurrentProcess(), GetCurrentProcessId(), file, type,</div>
<div class="line"><a name="l12452"></a><span class="lineno">12452</span>&#160;                                                   ((exc)? &amp;excInfo : NULL), NULL, NULL));</div>
<div class="line"><a name="l12453"></a><span class="lineno">12453</span>&#160;$   CloseHandle (file);</div>
<div class="line"><a name="l12454"></a><span class="lineno">12454</span>&#160; </div>
<div class="line"><a name="l12455"></a><span class="lineno">12455</span>&#160;    <span class="keywordflow">if</span> (ok) {$ <span class="keywordflow">return</span> <span class="keyword">true</span>;  }</div>
<div class="line"><a name="l12456"></a><span class="lineno">12456</span>&#160;    <span class="keywordflow">else</span>    {$ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l12457"></a><span class="lineno">12457</span>&#160;    }</div>
<div class="line"><a name="l12458"></a><span class="lineno">12458</span>&#160; </div>
<div class="line"><a name="l12459"></a><span class="lineno">12459</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l12460"></a><span class="lineno">12460</span>&#160; </div>
<div class="line"><a name="l12461"></a><span class="lineno">12461</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l12462"></a><span class="lineno">12462</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12463"></a><span class="lineno">12463</span>&#160; </div>
<div class="line"><a name="l12464"></a><span class="lineno">12464</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12465"></a><span class="lineno">12465</span>&#160;<span class="comment">//{          Errors reporting</span></div>
<div class="line"><a name="l12466"></a><span class="lineno">12466</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12467"></a><span class="lineno">12467</span>&#160; </div>
<div class="line"><a name="l12468"></a><span class="lineno">12468</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l12469"></a><span class="lineno">12469</span>&#160; </div>
<div class="line"><a name="l12470"></a><span class="lineno">12470</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* _txProcessError (<span class="keyword">const</span> <span class="keywordtype">char</span> file[], <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span> func[], <span class="keywordtype">unsigned</span> color, <span class="keyword">const</span> <span class="keywordtype">char</span> msg[], va_list args)  <span class="comment">//-V2008</span></div>
<div class="line"><a name="l12471"></a><span class="lineno">12471</span>&#160;    {</div>
<div class="line"><a name="l12472"></a><span class="lineno">12472</span>&#160;    _txErrors = _txErrors + 1;</div>
<div class="line"><a name="l12473"></a><span class="lineno">12473</span>&#160; </div>
<div class="line"><a name="l12474"></a><span class="lineno">12474</span>&#160;    DWORD           winErr   = GetLastError();</div>
<div class="line"><a name="l12475"></a><span class="lineno">12475</span>&#160; </div>
<div class="line"><a name="l12476"></a><span class="lineno">12476</span>&#160;    <span class="keywordtype">int</span>             crtErr   = errno;</div>
<div class="line"><a name="l12477"></a><span class="lineno">12477</span>&#160; </div>
<div class="line"><a name="l12478"></a><span class="lineno">12478</span>&#160;<span class="preprocessor">    #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l12479"></a><span class="lineno">12479</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   dosErr   = _doserrno;</div>
<div class="line"><a name="l12480"></a><span class="lineno">12480</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l12481"></a><span class="lineno">12481</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   dosErr   = 0;</div>
<div class="line"><a name="l12482"></a><span class="lineno">12482</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12483"></a><span class="lineno">12483</span>&#160; </div>
<div class="line"><a name="l12484"></a><span class="lineno">12484</span>&#160;    <span class="keywordtype">unsigned</span>        dlgErr   = _TX_CALL (Win32::CommDlgExtendedError, ());</div>
<div class="line"><a name="l12485"></a><span class="lineno">12485</span>&#160; </div>
<div class="line"><a name="l12486"></a><span class="lineno">12486</span>&#160;    <span class="keywordtype">unsigned</span>        oglErr   = _TX_CALL (Win32::wglGetCurrentDC, ())? _TX_CALL (Win32::glGetError, ()) : _txOGLError;</div>
<div class="line"><a name="l12487"></a><span class="lineno">12487</span>&#160; </div>
<div class="line"><a name="l12488"></a><span class="lineno">12488</span>&#160;    <span class="keywordtype">unsigned</span>        threadId = GetCurrentThreadId();</div>
<div class="line"><a name="l12489"></a><span class="lineno">12489</span>&#160; </div>
<div class="line"><a name="l12490"></a><span class="lineno">12490</span>&#160;    <span class="keyword">enum</span> { isFatal = 0x01, isWarning = 0x02, noMsgBox = 0x04, fmtOnly = 0x08, traceSE = 0x10 };</div>
<div class="line"><a name="l12491"></a><span class="lineno">12491</span>&#160;    <span class="keywordtype">unsigned</span> options = 0;</div>
<div class="line"><a name="l12492"></a><span class="lineno">12492</span>&#160; </div>
<div class="line"><a name="l12493"></a><span class="lineno">12493</span>&#160;    <span class="keywordflow">for</span> (; msg &amp;&amp; *msg; msg++)</div>
<div class="line"><a name="l12494"></a><span class="lineno">12494</span>&#160;        {</div>
<div class="line"><a name="l12495"></a><span class="lineno">12495</span>&#160;        <span class="keywordflow">if</span>      (*msg == <span class="charliteral">&#39;\a&#39;</span>) options |= isFatal;</div>
<div class="line"><a name="l12496"></a><span class="lineno">12496</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*msg == <span class="charliteral">&#39;\v&#39;</span>) options |= isWarning;</div>
<div class="line"><a name="l12497"></a><span class="lineno">12497</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*msg == <span class="charliteral">&#39;\b&#39;</span>) options |= noMsgBox;</div>
<div class="line"><a name="l12498"></a><span class="lineno">12498</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*msg == <span class="charliteral">&#39;\f&#39;</span>) options |= fmtOnly;</div>
<div class="line"><a name="l12499"></a><span class="lineno">12499</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*msg == <span class="charliteral">&#39;\t&#39;</span>) options |= traceSE;</div>
<div class="line"><a name="l12500"></a><span class="lineno">12500</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12501"></a><span class="lineno">12501</span>&#160;        }</div>
<div class="line"><a name="l12502"></a><span class="lineno">12502</span>&#160; </div>
<div class="line"><a name="l12503"></a><span class="lineno">12503</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* stkTrace = NULL;</div>
<div class="line"><a name="l12504"></a><span class="lineno">12504</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>*  txTrace = NULL; (void) txTrace;</div>
<div class="line"><a name="l12505"></a><span class="lineno">12505</span>&#160; </div>
<div class="line"><a name="l12506"></a><span class="lineno">12506</span>&#160;    <span class="keywordflow">if</span> (!(options &amp; fmtOnly))</div>
<div class="line"><a name="l12507"></a><span class="lineno">12507</span>&#160;        {</div>
<div class="line"><a name="l12508"></a><span class="lineno">12508</span>&#160;        stkTrace = ((options &amp; traceSE) &amp;&amp; *_txTraceSE)? _txTraceSE : _txCaptureStackBackTrace   (2, <span class="keyword">true</span>);</div>
<div class="line"><a name="l12509"></a><span class="lineno">12509</span>&#160;        txTrace  =                                                    _txCaptureStackBackTraceTX (0, <span class="keyword">true</span>);</div>
<div class="line"><a name="l12510"></a><span class="lineno">12510</span>&#160;        }</div>
<div class="line"><a name="l12511"></a><span class="lineno">12511</span>&#160; </div>
<div class="line"><a name="l12512"></a><span class="lineno">12512</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> what[<a class="code" href="group___technical.html#gaa7273b2f613970c283053c5d9136addd">_TX_BIGBUFSIZE</a>*10] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12513"></a><span class="lineno">12513</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> str [<a class="code" href="group___technical.html#gaa7273b2f613970c283053c5d9136addd">_TX_BIGBUFSIZE</a>]    = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12514"></a><span class="lineno">12514</span>&#160;    <span class="keywordtype">char</span> *s = what;</div>
<div class="line"><a name="l12515"></a><span class="lineno">12515</span>&#160; </div>
<div class="line"><a name="l12516"></a><span class="lineno">12516</span>&#160;<span class="preprocessor">    #define     PRINT_(...)  s += _tx_snprintf_s  (s, sizeof (what) - 1 - (s - what), ##__VA_ARGS__)</span></div>
<div class="line"><a name="l12517"></a><span class="lineno">12517</span>&#160;<span class="preprocessor">    #define    VPRINT_(...)  s += _tx_vsnprintf_s (s, sizeof (what) - 1 - (s - what), ##__VA_ARGS__)</span></div>
<div class="line"><a name="l12518"></a><span class="lineno">12518</span>&#160; </div>
<div class="line"><a name="l12519"></a><span class="lineno">12519</span>&#160;                PRINT_ (<span class="stringliteral">&quot;TXLib %s\n\n&quot;</span>, ((options &amp; isWarning)? <span class="stringliteral">&quot;предупреждает:&quot;</span> :</div>
<div class="line"><a name="l12520"></a><span class="lineno">12520</span>&#160;                                         (options &amp; isFatal)?   <span class="stringliteral">&quot;соболезнует...&quot;</span> :</div>
<div class="line"><a name="l12521"></a><span class="lineno">12521</span>&#160;                                                                <span class="stringliteral">&quot;сообщает:&quot;</span>));</div>
<div class="line"><a name="l12522"></a><span class="lineno">12522</span>&#160;                PRINT_ (<span class="stringliteral">&quot;Программа: %s&quot;</span>, <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a>());</div>
<div class="line"><a name="l12523"></a><span class="lineno">12523</span>&#160;    <span class="keywordflow">if</span> (file)   PRINT_ (<span class="stringliteral">&quot;, файл: %s&quot;</span>,    file);</div>
<div class="line"><a name="l12524"></a><span class="lineno">12524</span>&#160;    <span class="keywordflow">if</span> (line)   PRINT_ (<span class="stringliteral">&quot;, строка: %d&quot;</span>,  line);</div>
<div class="line"><a name="l12525"></a><span class="lineno">12525</span>&#160;    <span class="keywordflow">if</span> (func)   PRINT_ (<span class="stringliteral">&quot;, функция: %s&quot;</span>, func);</div>
<div class="line"><a name="l12526"></a><span class="lineno">12526</span>&#160;                PRINT_ (<span class="stringliteral">&quot;,\n\n&quot;</span>);</div>
<div class="line"><a name="l12527"></a><span class="lineno">12527</span>&#160; </div>
<div class="line"><a name="l12528"></a><span class="lineno">12528</span>&#160;    <span class="keywordflow">if</span> (msg)    PRINT_ (<span class="stringliteral">&quot;%s: &quot;</span>, (file || line || func)? <span class="stringliteral">&quot;Сообщение&quot;</span> : <span class="stringliteral">&quot;ВНЕЗАПНО&quot;</span>),</div>
<div class="line"><a name="l12529"></a><span class="lineno">12529</span>&#160;               VPRINT_ (msg, args);</div>
<div class="line"><a name="l12530"></a><span class="lineno">12530</span>&#160; </div>
<div class="line"><a name="l12531"></a><span class="lineno">12531</span>&#160;    <span class="keywordflow">while</span> (s &gt; what &amp;&amp; s[-1] == <span class="charliteral">&#39;\n&#39;</span>) s--;</div>
<div class="line"><a name="l12532"></a><span class="lineno">12532</span>&#160; </div>
<div class="line"><a name="l12533"></a><span class="lineno">12533</span>&#160;                PRINT_ (<span class="stringliteral">&quot;\n\n&quot;</span> <span class="stringliteral">&quot;#%d: %s, Instance: 0x%p (%d-bit), Flags: %c%c%c%c%c%d, Thread: 0x%X%s&quot;</span>,</div>
<div class="line"><a name="l12534"></a><span class="lineno">12534</span>&#160; </div>
<div class="line"><a name="l12535"></a><span class="lineno">12535</span>&#160;                        _txErrors, _TX_VERSION, (<span class="keywordtype">void</span>*) &amp;_txInitialized, (<span class="keyword">sizeof</span> (<span class="keywordtype">void</span>*) == 4)? 32 : 64,</div>
<div class="line"><a name="l12536"></a><span class="lineno">12536</span>&#160; </div>
<div class="line"><a name="l12537"></a><span class="lineno">12537</span>&#160;                        <span class="stringliteral">&quot;cC&quot;</span>[!!_txConsole], <span class="stringliteral">&quot;mM&quot;</span>[_txMain], <span class="stringliteral">&quot;dD&quot;</span>[_txIsDll], <span class="stringliteral">&quot;rR&quot;</span>[_txRunning], <span class="stringliteral">&quot;eE&quot;</span>[_txExit], _txLoc::Cur.trace,</div>
<div class="line"><a name="l12538"></a><span class="lineno">12538</span>&#160; </div>
<div class="line"><a name="l12539"></a><span class="lineno">12539</span>&#160;                        threadId, (threadId == _txMainThreadId)?    <span class="stringliteral">&quot; (Main)&quot;</span>   :</div>
<div class="line"><a name="l12540"></a><span class="lineno">12540</span>&#160;                                  (threadId == _txCanvas_ThreadId)? <span class="stringliteral">&quot; (Canvas)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l12541"></a><span class="lineno">12541</span>&#160; </div>
<div class="line"><a name="l12542"></a><span class="lineno">12542</span>&#160;    <span class="keywordflow">if</span> (winErr) PRINT_ (<span class="stringliteral">&quot;, GetLastError(): %lu (&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) winErr),</div>
<div class="line"><a name="l12543"></a><span class="lineno">12543</span>&#160;                s += FormatMessage (FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,  <span class="comment">//-V102</span></div>
<div class="line"><a name="l12544"></a><span class="lineno">12544</span>&#160;                                    NULL, winErr, MAKELANGID (LANG_NEUTRAL, SUBLANG_DEFAULT),</div>
<div class="line"><a name="l12545"></a><span class="lineno">12545</span>&#160;                                    s, (DWORD) (<span class="keyword">sizeof</span> (what) - (s-what)), NULL) - 2,            <span class="comment">//-V202</span></div>
<div class="line"><a name="l12546"></a><span class="lineno">12546</span>&#160;                s -=  (s[-1] == <span class="charliteral">&#39;.&#39;</span>)? 1 : 0,</div>
<div class="line"><a name="l12547"></a><span class="lineno">12547</span>&#160;                PRINT_ (<span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l12548"></a><span class="lineno">12548</span>&#160; </div>
<div class="line"><a name="l12549"></a><span class="lineno">12549</span>&#160;    <span class="keywordflow">if</span> (crtErr) PRINT_ (<span class="stringliteral">&quot;, errno: %d (%s)&quot;</span>,                      crtErr, (strerror_s (str, <span class="keyword">sizeof</span> (str), crtErr), str));</div>
<div class="line"><a name="l12550"></a><span class="lineno">12550</span>&#160;    <span class="keywordflow">if</span> (dosErr) PRINT_ (<span class="stringliteral">&quot;, _doserrno: %lu (%s)&quot;</span>,                 dosErr, (strerror_s (str, <span class="keyword">sizeof</span> (str), dosErr), str));</div>
<div class="line"><a name="l12551"></a><span class="lineno">12551</span>&#160;    <span class="keywordflow">if</span> (oglErr) PRINT_ (<span class="stringliteral">&quot;, glGetError(): %u (0x%04X, %s)&quot;</span>,       oglErr, oglErr, _TX_CALL (Win32::gluErrorString, (oglErr)));</div>
<div class="line"><a name="l12552"></a><span class="lineno">12552</span>&#160;    <span class="keywordflow">if</span> (dlgErr) PRINT_ (<span class="stringliteral">&quot;, CommDlgExtendedError(): %u (0x%04X)&quot;</span>, dlgErr, dlgErr);</div>
<div class="line"><a name="l12553"></a><span class="lineno">12553</span>&#160; </div>
<div class="line"><a name="l12554"></a><span class="lineno">12554</span>&#160;<span class="preprocessor">    #if (__cplusplus &gt;= 201703L) || (defined (_MSVC_LANG) &amp;&amp; _MSVC_LANG &gt;= 201703L)</span></div>
<div class="line"><a name="l12555"></a><span class="lineno">12555</span>&#160;                PRINT_ (<span class="stringliteral">&quot;. %s\n&quot;</span>, ::std::uncaught_exceptions()? <span class="stringliteral">&quot;std::uncaught_exceptions(): true.&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l12556"></a><span class="lineno">12556</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l12557"></a><span class="lineno">12557</span>&#160;                PRINT_ (<span class="stringliteral">&quot;. %s\n&quot;</span>, ::std::uncaught_exception ()? <span class="stringliteral">&quot;std::uncaught_exception(): true.&quot;</span>  : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l12558"></a><span class="lineno">12558</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12559"></a><span class="lineno">12559</span>&#160; </div>
<div class="line"><a name="l12560"></a><span class="lineno">12560</span>&#160;    <span class="keywordflow">if</span> (_txLoc::Cur.inTX &gt; 0 &amp;&amp; file &amp;&amp; !(_txLoc::Cur.line == line &amp;&amp; _stricmp (_txLoc::Cur.file, file) == 0) &amp;&amp;</div>
<div class="line"><a name="l12561"></a><span class="lineno">12561</span>&#160;       (_txLoc::Cur.file || _txLoc::Cur.line || _txLoc::Cur.func))</div>
<div class="line"><a name="l12562"></a><span class="lineno">12562</span>&#160;                PRINT_ (<span class="stringliteral">&quot;From: %s (%d) %s.\n&quot;</span>, _txLoc::Cur.file, _txLoc::Cur.line, _txLoc::Cur.func);</div>
<div class="line"><a name="l12563"></a><span class="lineno">12563</span>&#160; </div>
<div class="line"><a name="l12564"></a><span class="lineno">12564</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;\r&quot;</span> <span class="stringliteral">&quot;%s - ERROR: %s\n&quot;</span>, _TX_VERSION, what);</div>
<div class="line"><a name="l12565"></a><span class="lineno">12565</span>&#160; </div>
<div class="line"><a name="l12566"></a><span class="lineno">12566</span>&#160;    <span class="keywordflow">if</span> (options &amp; fmtOnly)</div>
<div class="line"><a name="l12567"></a><span class="lineno">12567</span>&#160;        {</div>
<div class="line"><a name="l12568"></a><span class="lineno">12568</span>&#160;        SetLastError (winErr);</div>
<div class="line"><a name="l12569"></a><span class="lineno">12569</span>&#160; </div>
<div class="line"><a name="l12570"></a><span class="lineno">12570</span>&#160;        errno = crtErr;</div>
<div class="line"><a name="l12571"></a><span class="lineno">12571</span>&#160; </div>
<div class="line"><a name="l12572"></a><span class="lineno">12572</span>&#160;<span class="preprocessor">        #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l12573"></a><span class="lineno">12573</span>&#160;        _doserrno = dosErr;</div>
<div class="line"><a name="l12574"></a><span class="lineno">12574</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l12575"></a><span class="lineno">12575</span>&#160; </div>
<div class="line"><a name="l12576"></a><span class="lineno">12576</span>&#160;        <span class="keywordflow">return</span> what;</div>
<div class="line"><a name="l12577"></a><span class="lineno">12577</span>&#160;        }</div>
<div class="line"><a name="l12578"></a><span class="lineno">12578</span>&#160; </div>
<div class="line"><a name="l12579"></a><span class="lineno">12579</span>&#160;    <a class="code" href="group___misc.html#ga3f81b81baf3d43ec066bac4493149708">txSetProgress</a> (-1, Win32::TBPF_ERROR);</div>
<div class="line"><a name="l12580"></a><span class="lineno">12580</span>&#160; </div>
<div class="line"><a name="l12581"></a><span class="lineno">12581</span>&#160;    <span class="keywordtype">unsigned</span> restore = <a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a>();</div>
<div class="line"><a name="l12582"></a><span class="lineno">12582</span>&#160;    <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> ((options &amp; isFatal)? FOREGROUND_LIGHTMAGENTA : FOREGROUND_LIGHTRED);</div>
<div class="line"><a name="l12583"></a><span class="lineno">12583</span>&#160;    <span class="keywordflow">if</span> (color) {$ <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (color); }</div>
<div class="line"><a name="l12584"></a><span class="lineno">12584</span>&#160; </div>
<div class="line"><a name="l12585"></a><span class="lineno">12585</span>&#160;    <span class="keywordtype">int</span> oldCodePage = txSetLocale();</div>
<div class="line"><a name="l12586"></a><span class="lineno">12586</span>&#160; </div>
<div class="line"><a name="l12587"></a><span class="lineno">12587</span>&#160;    fprintf (stderr,      <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span></div>
<div class="line"><a name="l12588"></a><span class="lineno">12588</span>&#160;                               <span class="stringliteral">&quot;%s\n&quot;</span></div>
<div class="line"><a name="l12589"></a><span class="lineno">12589</span>&#160;                               <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>,</div>
<div class="line"><a name="l12590"></a><span class="lineno">12590</span>&#160;                               what);</div>
<div class="line"><a name="l12591"></a><span class="lineno">12591</span>&#160; </div>
<div class="line"><a name="l12592"></a><span class="lineno">12592</span>&#160;    <span class="keywordflow">if</span> (stkTrace &amp;&amp; strstr (stkTrace, <span class="stringliteral">&quot;.exe: &quot;</span>))</div>
<div class="line"><a name="l12593"></a><span class="lineno">12593</span>&#160;        {$ fprintf (stderr,    <span class="stringliteral">&quot;Стек вызовов:\n\n&quot;</span></div>
<div class="line"><a name="l12594"></a><span class="lineno">12594</span>&#160;                               <span class="stringliteral">&quot;%s\n\n&quot;</span></div>
<div class="line"><a name="l12595"></a><span class="lineno">12595</span>&#160;                               <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>,</div>
<div class="line"><a name="l12596"></a><span class="lineno">12596</span>&#160;                               stkTrace); }</div>
<div class="line"><a name="l12597"></a><span class="lineno">12597</span>&#160; </div>
<div class="line"><a name="l12598"></a><span class="lineno">12598</span>&#160;    SetConsoleOutputCP (oldCodePage);</div>
<div class="line"><a name="l12599"></a><span class="lineno">12599</span>&#160;    <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (restore);</div>
<div class="line"><a name="l12600"></a><span class="lineno">12600</span>&#160; </div>
<div class="line"><a name="l12601"></a><span class="lineno">12601</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>) <span class="keywordflow">do</span>  <span class="comment">//-V2530</span></div>
<div class="line"><a name="l12602"></a><span class="lineno">12602</span>&#160;        {</div>
<div class="line"><a name="l12603"></a><span class="lineno">12603</span>&#160;        FILE* log = NULL; fopen_s (&amp;log, <a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>, <span class="stringliteral">&quot;a&quot;</span>);</div>
<div class="line"><a name="l12604"></a><span class="lineno">12604</span>&#160;        <span class="keywordflow">if</span> (!log) {$ <span class="keywordflow">break</span>; }</div>
<div class="line"><a name="l12605"></a><span class="lineno">12605</span>&#160; </div>
<div class="line"><a name="l12606"></a><span class="lineno">12606</span>&#160;        fprintf (log,     <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span></div>
<div class="line"><a name="l12607"></a><span class="lineno">12607</span>&#160;                               <span class="stringliteral">&quot;%s\n&quot;</span></div>
<div class="line"><a name="l12608"></a><span class="lineno">12608</span>&#160;                               <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>,</div>
<div class="line"><a name="l12609"></a><span class="lineno">12609</span>&#160;                               what);</div>
<div class="line"><a name="l12610"></a><span class="lineno">12610</span>&#160; </div>
<div class="line"><a name="l12611"></a><span class="lineno">12611</span>&#160;        fprintf (log,          <span class="stringliteral">&quot;Стек вызовов:\n\n&quot;</span>  <span class="comment">//-V576</span></div>
<div class="line"><a name="l12612"></a><span class="lineno">12612</span>&#160;                               <span class="stringliteral">&quot;%s\n&quot;</span>,</div>
<div class="line"><a name="l12613"></a><span class="lineno">12613</span>&#160;                               (*_txTraceSE)? _txTraceSE : stkTrace);</div>
<div class="line"><a name="l12614"></a><span class="lineno">12614</span>&#160; </div>
<div class="line"><a name="l12615"></a><span class="lineno">12615</span>&#160;<span class="preprocessor">        #if defined (_TX_ALLOW_TRACE) || defined (_DEBUG)</span></div>
<div class="line"><a name="l12616"></a><span class="lineno">12616</span>&#160; </div>
<div class="line"><a name="l12617"></a><span class="lineno">12617</span>&#160;        <span class="keywordflow">if</span> (_txLoc::Cur.inTX &gt; 0 &amp;&amp; txTrace &amp;&amp; *txTrace)</div>
<div class="line"><a name="l12618"></a><span class="lineno">12618</span>&#160;            {</div>
<div class="line"><a name="l12619"></a><span class="lineno">12619</span>&#160;            fprintf (log, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span></div>
<div class="line"><a name="l12620"></a><span class="lineno">12620</span>&#160;                               <span class="stringliteral">&quot;Стек вызовов TX:\n\n&quot;</span></div>
<div class="line"><a name="l12621"></a><span class="lineno">12621</span>&#160;                               <span class="stringliteral">&quot;%s\n&quot;</span>,</div>
<div class="line"><a name="l12622"></a><span class="lineno">12622</span>&#160;                               txTrace);</div>
<div class="line"><a name="l12623"></a><span class="lineno">12623</span>&#160;            }</div>
<div class="line"><a name="l12624"></a><span class="lineno">12624</span>&#160; </div>
<div class="line"><a name="l12625"></a><span class="lineno">12625</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l12626"></a><span class="lineno">12626</span>&#160; </div>
<div class="line"><a name="l12627"></a><span class="lineno">12627</span>&#160;        fprintf (log,     <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span></div>
<div class="line"><a name="l12628"></a><span class="lineno">12628</span>&#160;                               <span class="stringliteral">&quot;%s\n\n&quot;</span></div>
<div class="line"><a name="l12629"></a><span class="lineno">12629</span>&#160;                               <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span>,</div>
<div class="line"><a name="l12630"></a><span class="lineno">12630</span>&#160;                               _txAppInfo());</div>
<div class="line"><a name="l12631"></a><span class="lineno">12631</span>&#160;        fclose (log);</div>
<div class="line"><a name="l12632"></a><span class="lineno">12632</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12633"></a><span class="lineno">12633</span>&#160;        }</div>
<div class="line"><a name="l12634"></a><span class="lineno">12634</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">false</span>);</div>
<div class="line"><a name="l12635"></a><span class="lineno">12635</span>&#160; </div>
<div class="line"><a name="l12636"></a><span class="lineno">12636</span>&#160;    <a class="code" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a>();</div>
<div class="line"><a name="l12637"></a><span class="lineno">12637</span>&#160; </div>
<div class="line"><a name="l12638"></a><span class="lineno">12638</span>&#160;    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"><a name="l12639"></a><span class="lineno">12639</span>&#160; </div>
<div class="line"><a name="l12640"></a><span class="lineno">12640</span>&#160;    <span class="keywordflow">if</span> (!(options &amp; noMsgBox))</div>
<div class="line"><a name="l12641"></a><span class="lineno">12641</span>&#160;        {</div>
<div class="line"><a name="l12642"></a><span class="lineno">12642</span>&#160;        <a class="code" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a> (<a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a>);</div>
<div class="line"><a name="l12643"></a><span class="lineno">12643</span>&#160; </div>
<div class="line"><a name="l12644"></a><span class="lineno">12644</span>&#160;        PRINT_ (<span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;Прервать программу?&quot;</span>);</div>
<div class="line"><a name="l12645"></a><span class="lineno">12645</span>&#160; </div>
<div class="line"><a name="l12646"></a><span class="lineno">12646</span>&#160;        ret = <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (what, ((options &amp; isWarning)? <span class="stringliteral">&quot;Предупреждение&quot;</span>   :</div>
<div class="line"><a name="l12647"></a><span class="lineno">12647</span>&#160;                                   (options &amp; isFatal)?   <span class="stringliteral">&quot;Фатальная ошибка&quot;</span> :</div>
<div class="line"><a name="l12648"></a><span class="lineno">12648</span>&#160;                                                          <span class="stringliteral">&quot;Ошибка в программе&quot;</span>), MB_ICONSTOP | MB_SYSTEMMODAL | MB_YESNOCANCEL);</div>
<div class="line"><a name="l12649"></a><span class="lineno">12649</span>&#160;        }</div>
<div class="line"><a name="l12650"></a><span class="lineno">12650</span>&#160; </div>
<div class="line"><a name="l12651"></a><span class="lineno">12651</span>&#160;    SetLastError (winErr);</div>
<div class="line"><a name="l12652"></a><span class="lineno">12652</span>&#160; </div>
<div class="line"><a name="l12653"></a><span class="lineno">12653</span>&#160;    errno = crtErr;</div>
<div class="line"><a name="l12654"></a><span class="lineno">12654</span>&#160; </div>
<div class="line"><a name="l12655"></a><span class="lineno">12655</span>&#160;<span class="preprocessor">    #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l12656"></a><span class="lineno">12656</span>&#160;    _doserrno = dosErr;</div>
<div class="line"><a name="l12657"></a><span class="lineno">12657</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12658"></a><span class="lineno">12658</span>&#160; </div>
<div class="line"><a name="l12659"></a><span class="lineno">12659</span>&#160;    <span class="keywordflow">if</span> (((options &amp; isFatal) &amp;&amp; !IsDebuggerPresent()) || ret == IDYES)</div>
<div class="line"><a name="l12660"></a><span class="lineno">12660</span>&#160;        {</div>
<div class="line"><a name="l12661"></a><span class="lineno">12661</span>&#160;        <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a>();</div>
<div class="line"><a name="l12662"></a><span class="lineno">12662</span>&#160;        _txCleanup();</div>
<div class="line"><a name="l12663"></a><span class="lineno">12663</span>&#160;        Win32::TerminateProcess (GetCurrentProcess(), EXIT_FAILURE);</div>
<div class="line"><a name="l12664"></a><span class="lineno">12664</span>&#160;        }</div>
<div class="line"><a name="l12665"></a><span class="lineno">12665</span>&#160; </div>
<div class="line"><a name="l12666"></a><span class="lineno">12666</span>&#160;<span class="preprocessor">    #undef  PRINT_</span></div>
<div class="line"><a name="l12667"></a><span class="lineno">12667</span>&#160;<span class="preprocessor">    #undef VPRINT_</span></div>
<div class="line"><a name="l12668"></a><span class="lineno">12668</span>&#160; </div>
<div class="line"><a name="l12669"></a><span class="lineno">12669</span>&#160;    <span class="keywordflow">return</span> what;</div>
<div class="line"><a name="l12670"></a><span class="lineno">12670</span>&#160;    }</div>
<div class="line"><a name="l12671"></a><span class="lineno">12671</span>&#160; </div>
<div class="line"><a name="l12672"></a><span class="lineno">12672</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12673"></a><span class="lineno">12673</span>&#160; </div>
<div class="line"><a name="l12674"></a><span class="lineno">12674</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l12675"></a><span class="lineno">12675</span>&#160; </div>
<div class="line"><a name="l12676"></a><span class="lineno">12676</span>&#160;<span class="keywordtype">int</span> _txOnErrorReport (<span class="keywordtype">int</span> type, <span class="keyword">const</span> <span class="keywordtype">char</span>* text, <span class="keywordtype">int</span>* ret)</div>
<div class="line"><a name="l12677"></a><span class="lineno">12677</span>&#160;    {</div>
<div class="line"><a name="l12678"></a><span class="lineno">12678</span>&#160;    assert (text);</div>
<div class="line"><a name="l12679"></a><span class="lineno">12679</span>&#160;    assert (ret);</div>
<div class="line"><a name="l12680"></a><span class="lineno">12680</span>&#160; </div>
<div class="line"><a name="l12681"></a><span class="lineno">12681</span>&#160;    _txErrors = _txErrors + 1;</div>
<div class="line"><a name="l12682"></a><span class="lineno">12682</span>&#160; </div>
<div class="line"><a name="l12683"></a><span class="lineno">12683</span>&#160;    <span class="keywordtype">unsigned</span> restore = <a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a>();</div>
<div class="line"><a name="l12684"></a><span class="lineno">12684</span>&#160; </div>
<div class="line"><a name="l12685"></a><span class="lineno">12685</span>&#160;    <span class="keywordflow">switch</span> (type)</div>
<div class="line"><a name="l12686"></a><span class="lineno">12686</span>&#160;       {</div>
<div class="line"><a name="l12687"></a><span class="lineno">12687</span>&#160;       <span class="keywordflow">case</span> _CRT_WARN:   <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_LIGHTRED);     <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12688"></a><span class="lineno">12688</span>&#160;       <span class="keywordflow">case</span> _CRT_ERROR:  <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_LIGHTMAGENTA); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12689"></a><span class="lineno">12689</span>&#160;       <span class="keywordflow">case</span> _CRT_ASSERT: <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_YELLOW);       <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12690"></a><span class="lineno">12690</span>&#160;       <span class="keywordflow">default</span>:                                                      <span class="keywordflow">break</span>;  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l12691"></a><span class="lineno">12691</span>&#160;       }</div>
<div class="line"><a name="l12692"></a><span class="lineno">12692</span>&#160; </div>
<div class="line"><a name="l12693"></a><span class="lineno">12693</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> startReport[] = <span class="stringliteral">&quot;Detected memory leaks!\n&quot;</span>,</div>
<div class="line"><a name="l12694"></a><span class="lineno">12694</span>&#160;                 endReport[] = <span class="stringliteral">&quot;Object dump complete.\n&quot;</span>;</div>
<div class="line"><a name="l12695"></a><span class="lineno">12695</span>&#160; </div>
<div class="line"><a name="l12696"></a><span class="lineno">12696</span>&#160;    <span class="keywordflow">if</span> (strcmp (text, startReport) == 0)  <span class="comment">// Dirty, dirty hack. А что делать?</span></div>
<div class="line"><a name="l12697"></a><span class="lineno">12697</span>&#160;        {</div>
<div class="line"><a name="l12698"></a><span class="lineno">12698</span>&#160;        _txOnErrorReport (type, <span class="stringliteral">&quot;\n&quot;</span>,                                                                              NULL);</div>
<div class="line"><a name="l12699"></a><span class="lineno">12699</span>&#160;        _txOnErrorReport (type, _TX_VERSION <span class="stringliteral">&quot; - ERROR: &quot;</span>,                                                          NULL);</div>
<div class="line"><a name="l12700"></a><span class="lineno">12700</span>&#160;        _txOnErrorReport (type, <span class="stringliteral">&quot;Внимание: Обнаружены утечки памяти! (Для поиска используйте _TX_ALLOC_BREAK.)\n&quot;</span>, NULL);</div>
<div class="line"><a name="l12701"></a><span class="lineno">12701</span>&#160;        _txOnErrorReport (type, <span class="stringliteral">&quot;\n&quot;</span>,                                                                              NULL);</div>
<div class="line"><a name="l12702"></a><span class="lineno">12702</span>&#160;        }</div>
<div class="line"><a name="l12703"></a><span class="lineno">12703</span>&#160; </div>
<div class="line"><a name="l12704"></a><span class="lineno">12704</span>&#160;    <span class="keywordtype">size_t</span> len = strlen (text);</div>
<div class="line"><a name="l12705"></a><span class="lineno">12705</span>&#160;    <span class="keywordflow">if</span> (text [len-1] != <span class="charliteral">&#39;\n&#39;</span>)               <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s&quot;</span>,                text);</div>
<div class="line"><a name="l12706"></a><span class="lineno">12706</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp (text, endReport) != 0) <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s&quot;</span> <span class="stringliteral">&quot;%s - ERROR: &quot;</span>, text, _TX_VERSION);</div>
<div class="line"><a name="l12707"></a><span class="lineno">12707</span>&#160;    <span class="keywordflow">else</span>                                    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s\n&quot;</span>,              text);</div>
<div class="line"><a name="l12708"></a><span class="lineno">12708</span>&#160; </div>
<div class="line"><a name="l12709"></a><span class="lineno">12709</span>&#160;    DWORD n = 0;</div>
<div class="line"><a name="l12710"></a><span class="lineno">12710</span>&#160;    HANDLE err = GetStdHandle (STD_ERROR_HANDLE);</div>
<div class="line"><a name="l12711"></a><span class="lineno">12711</span>&#160;    WriteFile (err, text, (DWORD) strlen (text), &amp;n, NULL);      <span class="comment">//-V202</span></div>
<div class="line"><a name="l12712"></a><span class="lineno">12712</span>&#160; </div>
<div class="line"><a name="l12713"></a><span class="lineno">12713</span>&#160;    <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (restore);</div>
<div class="line"><a name="l12714"></a><span class="lineno">12714</span>&#160; </div>
<div class="line"><a name="l12715"></a><span class="lineno">12715</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>) <span class="keywordflow">do</span>                                          <span class="comment">//-V2530</span></div>
<div class="line"><a name="l12716"></a><span class="lineno">12716</span>&#160;        {</div>
<div class="line"><a name="l12717"></a><span class="lineno">12717</span>&#160;        HANDLE log = CreateFile (<a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>, GENERIC_WRITE, FILE_SHARE_READ, NULL, OPEN_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL);</div>
<div class="line"><a name="l12718"></a><span class="lineno">12718</span>&#160;        <span class="keywordflow">if</span> (log == INVALID_HANDLE_VALUE) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12719"></a><span class="lineno">12719</span>&#160; </div>
<div class="line"><a name="l12720"></a><span class="lineno">12720</span>&#160;        SetFilePointer (log, 0, NULL, FILE_END);</div>
<div class="line"><a name="l12721"></a><span class="lineno">12721</span>&#160;        WriteFile (log, text, (DWORD) strlen (text), &amp;n, NULL);  <span class="comment">//-V202</span></div>
<div class="line"><a name="l12722"></a><span class="lineno">12722</span>&#160; </div>
<div class="line"><a name="l12723"></a><span class="lineno">12723</span>&#160;        CloseHandle (log);</div>
<div class="line"><a name="l12724"></a><span class="lineno">12724</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12725"></a><span class="lineno">12725</span>&#160;        }</div>
<div class="line"><a name="l12726"></a><span class="lineno">12726</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">false</span>);</div>
<div class="line"><a name="l12727"></a><span class="lineno">12727</span>&#160; </div>
<div class="line"><a name="l12728"></a><span class="lineno">12728</span>&#160;    <span class="keywordflow">if</span> (ret) *ret = 0;</div>
<div class="line"><a name="l12729"></a><span class="lineno">12729</span>&#160; </div>
<div class="line"><a name="l12730"></a><span class="lineno">12730</span>&#160;    <span class="keywordflow">return</span> (type == _CRT_WARN);</div>
<div class="line"><a name="l12731"></a><span class="lineno">12731</span>&#160;    }</div>
<div class="line"><a name="l12732"></a><span class="lineno">12732</span>&#160; </div>
<div class="line"><a name="l12733"></a><span class="lineno">12733</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l12734"></a><span class="lineno">12734</span>&#160; </div>
<div class="line"><a name="l12735"></a><span class="lineno">12735</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12736"></a><span class="lineno">12736</span>&#160; </div>
<div class="line"><a name="l12737"></a><span class="lineno">12737</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> text[], <span class="keyword">const</span> <span class="keywordtype">char</span> header[], <span class="keywordtype">unsigned</span> flags <span class="comment">/*= MB_ICONINFORMATION | MB_OKCANCEL*/</span>)</div>
<div class="line"><a name="l12738"></a><span class="lineno">12738</span>&#160;    {</div>
<div class="line"><a name="l12739"></a><span class="lineno">12739</span>&#160;$5  <span class="keyword">static</span> <span class="keywordtype">wchar_t</span> textW   [<a class="code" href="group___technical.html#gaa7273b2f613970c283053c5d9136addd">_TX_BIGBUFSIZE</a> * <span class="keyword">sizeof</span> (wchar_t)] = L<span class="stringliteral">&quot;[NULL text]&quot;</span>;</div>
<div class="line"><a name="l12740"></a><span class="lineno">12740</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">wchar_t</span> headerW [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>    * <span class="keyword">sizeof</span> (wchar_t)] = L<span class="stringliteral">&quot;[NULL header]&quot;</span>;</div>
<div class="line"><a name="l12741"></a><span class="lineno">12741</span>&#160; </div>
<div class="line"><a name="l12742"></a><span class="lineno">12742</span>&#160;    <span class="keywordflow">if</span> (text)   {$ MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, text,   -1, textW,   <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (textW))   || memset (textW,   0, <span class="keyword">sizeof</span> (textW));   }</div>
<div class="line"><a name="l12743"></a><span class="lineno">12743</span>&#160;    <span class="keywordflow">if</span> (header) {$ MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, header, -1, headerW, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (headerW)) || memset (headerW, 0, <span class="keyword">sizeof</span> (headerW)); }</div>
<div class="line"><a name="l12744"></a><span class="lineno">12744</span>&#160; </div>
<div class="line"><a name="l12745"></a><span class="lineno">12745</span>&#160;$   HWND wnd = _txCanvas_Window;</div>
<div class="line"><a name="l12746"></a><span class="lineno">12746</span>&#160;$   <span class="keywordtype">int</span>  ret = MessageBoxW ((wnd &amp;&amp; IsWindowVisible (wnd))? wnd : _TX_CALL (Win32::GetConsoleWindow,()),</div>
<div class="line"><a name="l12747"></a><span class="lineno">12747</span>&#160;                            textW, headerW, flags | MB_SETFOREGROUND | MB_TOPMOST);</div>
<div class="line"><a name="l12748"></a><span class="lineno">12748</span>&#160; </div>
<div class="line"><a name="l12749"></a><span class="lineno">12749</span>&#160;$   GetAsyncKeyState (VK_SHIFT); GetAsyncKeyState (VK_CONTROL); GetAsyncKeyState (VK_MENU);</div>
<div class="line"><a name="l12750"></a><span class="lineno">12750</span>&#160; </div>
<div class="line"><a name="l12751"></a><span class="lineno">12751</span>&#160;$   <span class="keywordflow">if</span> (ret == IDCANCEL &amp;&amp; GetAsyncKeyState (VK_SHIFT) &amp;&amp; GetAsyncKeyState (VK_CONTROL) &amp;&amp; GetAsyncKeyState (VK_MENU))</div>
<div class="line"><a name="l12752"></a><span class="lineno">12752</span>&#160;        {</div>
<div class="line"><a name="l12753"></a><span class="lineno">12753</span>&#160;$       SendNotifyMessage (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), (_txMain? WM_CLOSE : WM_DESTROY), 0, 0);</div>
<div class="line"><a name="l12754"></a><span class="lineno">12754</span>&#160;$       _txWaitFor (!_txCanvas_Window, <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l12755"></a><span class="lineno">12755</span>&#160;        }</div>
<div class="line"><a name="l12756"></a><span class="lineno">12756</span>&#160; </div>
<div class="line"><a name="l12757"></a><span class="lineno">12757</span>&#160;$   <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l12758"></a><span class="lineno">12758</span>&#160;    }</div>
<div class="line"><a name="l12759"></a><span class="lineno">12759</span>&#160; </div>
<div class="line"><a name="l12760"></a><span class="lineno">12760</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12761"></a><span class="lineno">12761</span>&#160; </div>
<div class="line"><a name="l12762"></a><span class="lineno">12762</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga782025393f08a0efb645b9d2e30f2586">txGetAsyncKeyState</a> (<span class="keywordtype">int</span> key)</div>
<div class="line"><a name="l12763"></a><span class="lineno">12763</span>&#160;    {</div>
<div class="line"><a name="l12764"></a><span class="lineno">12764</span>&#160;$1  HWND wnd = GetForegroundWindow();</div>
<div class="line"><a name="l12765"></a><span class="lineno">12765</span>&#160; </div>
<div class="line"><a name="l12766"></a><span class="lineno">12766</span>&#160;    <span class="keywordflow">return</span> (GetAsyncKeyState (key) &amp; 0x8000) &amp;&amp;</div>
<div class="line"><a name="l12767"></a><span class="lineno">12767</span>&#160;           (wnd == <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>() || wnd == Win32::GetConsoleWindow());</div>
<div class="line"><a name="l12768"></a><span class="lineno">12768</span>&#160;    }</div>
<div class="line"><a name="l12769"></a><span class="lineno">12769</span>&#160; </div>
<div class="line"><a name="l12770"></a><span class="lineno">12770</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12771"></a><span class="lineno">12771</span>&#160; </div>
<div class="line"><a name="l12772"></a><span class="lineno">12772</span>&#160;<span class="keywordtype">bool</span> txNotifyIcon (<span class="keywordtype">unsigned</span> flags, <span class="keyword">const</span> <span class="keywordtype">char</span>* title, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...)</div>
<div class="line"><a name="l12773"></a><span class="lineno">12773</span>&#160;    {</div>
<div class="line"><a name="l12774"></a><span class="lineno">12774</span>&#160;$5  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (format)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l12775"></a><span class="lineno">12775</span>&#160; </div>
<div class="line"><a name="l12776"></a><span class="lineno">12776</span>&#160;$   va_list arg; va_start (arg, format);</div>
<div class="line"><a name="l12777"></a><span class="lineno">12777</span>&#160;$   <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l12778"></a><span class="lineno">12778</span>&#160; </div>
<div class="line"><a name="l12779"></a><span class="lineno">12779</span>&#160;<span class="preprocessor">    #if defined (_WIN32_IE) &amp;&amp; (_WIN32_IE &gt;= 0x0500)</span></div>
<div class="line"><a name="l12780"></a><span class="lineno">12780</span>&#160; </div>
<div class="line"><a name="l12781"></a><span class="lineno">12781</span>&#160;$   NOTIFYICONDATA nid = { <span class="keyword">sizeof</span> (nid) };</div>
<div class="line"><a name="l12782"></a><span class="lineno">12782</span>&#160; </div>
<div class="line"><a name="l12783"></a><span class="lineno">12783</span>&#160;$   nid.uFlags      = NIF_ICON | NIF_TIP | NIF_INFO;</div>
<div class="line"><a name="l12784"></a><span class="lineno">12784</span>&#160;$   nid.hWnd        = NULL;</div>
<div class="line"><a name="l12785"></a><span class="lineno">12785</span>&#160;$   nid.uID         = 1;</div>
<div class="line"><a name="l12786"></a><span class="lineno">12786</span>&#160;$   nid.hIcon       = _txCreateTXIcon (16); assert (nid.hIcon);</div>
<div class="line"><a name="l12787"></a><span class="lineno">12787</span>&#160;$   strncpy_s       (nid.szTip,       sizeof (nid.szTip),       <span class="stringliteral">&quot;TXLib Information&quot;</span>, sizeof (nid.szTip));</div>
<div class="line"><a name="l12788"></a><span class="lineno">12788</span>&#160;$   strncpy_s       (nid.szInfoTitle, sizeof (nid.szInfoTitle), (title? title : <span class="stringliteral">&quot;TXLib сообщает&quot;</span>), sizeof (nid.szInfoTitle) - 1);</div>
<div class="line"><a name="l12789"></a><span class="lineno">12789</span>&#160;$   _tx_vsnprintf_s (nid.szInfo, sizeof (nid.szInfo), format, arg);</div>
<div class="line"><a name="l12790"></a><span class="lineno">12790</span>&#160;$   nid.dwInfoFlags = flags;</div>
<div class="line"><a name="l12791"></a><span class="lineno">12791</span>&#160; </div>
<div class="line"><a name="l12792"></a><span class="lineno">12792</span>&#160;$   <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;\r&quot;</span> _TX_VERSION <span class="stringliteral">&quot; - %s: %s (Icon notification)\n&quot;</span>, nid.szInfoTitle, nid.szInfo);</div>
<div class="line"><a name="l12793"></a><span class="lineno">12793</span>&#160; </div>
<div class="line"><a name="l12794"></a><span class="lineno">12794</span>&#160;$   ok &amp;= !!Shell_NotifyIcon (NIM_ADD,    (::NOTIFYICONDATA*) &amp;nid);</div>
<div class="line"><a name="l12795"></a><span class="lineno">12795</span>&#160;$   ok &amp;= !!Shell_NotifyIcon (NIM_MODIFY, (::NOTIFYICONDATA*) &amp;nid);</div>
<div class="line"><a name="l12796"></a><span class="lineno">12796</span>&#160; </div>
<div class="line"><a name="l12797"></a><span class="lineno">12797</span>&#160;$   <span class="keywordflow">if</span> (nid.hIcon) DestroyIcon (nid.hIcon) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l12798"></a><span class="lineno">12798</span>&#160; </div>
<div class="line"><a name="l12799"></a><span class="lineno">12799</span>&#160;    <span class="preprocessor">#else</span></div>
<div class="line"><a name="l12800"></a><span class="lineno">12800</span>&#160; </div>
<div class="line"><a name="l12801"></a><span class="lineno">12801</span>&#160;$   <span class="keywordtype">char</span> nid_szInfo[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12802"></a><span class="lineno">12802</span>&#160;$   _tx_vsnprintf_s (nid_szInfo, <span class="keyword">sizeof</span> (nid_szInfo), format, arg);</div>
<div class="line"><a name="l12803"></a><span class="lineno">12803</span>&#160;$   <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;\r&quot;</span> _TX_VERSION <span class="stringliteral">&quot; - %s: %s (Icon notification - NOT displayed)\n&quot;</span>, title, nid_szInfo);</div>
<div class="line"><a name="l12804"></a><span class="lineno">12804</span>&#160;$   ok = <span class="keyword">false</span>;</div>
<div class="line"><a name="l12805"></a><span class="lineno">12805</span>&#160; </div>
<div class="line"><a name="l12806"></a><span class="lineno">12806</span>&#160;$   (void)flags; (void)title;</div>
<div class="line"><a name="l12807"></a><span class="lineno">12807</span>&#160; </div>
<div class="line"><a name="l12808"></a><span class="lineno">12808</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12809"></a><span class="lineno">12809</span>&#160; </div>
<div class="line"><a name="l12810"></a><span class="lineno">12810</span>&#160;$   va_end (arg);</div>
<div class="line"><a name="l12811"></a><span class="lineno">12811</span>&#160;    <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l12812"></a><span class="lineno">12812</span>&#160;    }</div>
<div class="line"><a name="l12813"></a><span class="lineno">12813</span>&#160; </div>
<div class="line"><a name="l12814"></a><span class="lineno">12814</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12815"></a><span class="lineno">12815</span>&#160; </div>
<div class="line"><a name="l12816"></a><span class="lineno">12816</span>&#160;<span class="keywordtype">void</span> _txTrace (<span class="keyword">const</span> <span class="keywordtype">char</span>* file, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span>* func, <span class="keyword">const</span> <span class="keywordtype">char</span>* msg <span class="comment">/*= NULL*/</span>, ...)</div>
<div class="line"><a name="l12817"></a><span class="lineno">12817</span>&#160;    {</div>
<div class="line"><a name="l12818"></a><span class="lineno">12818</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">id</span> = GetCurrentThreadId();</div>
<div class="line"><a name="l12819"></a><span class="lineno">12819</span>&#160; </div>
<div class="line"><a name="l12820"></a><span class="lineno">12820</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> marks[2][2][3] = {{<span class="stringliteral">&quot;uU&quot;</span>, <span class="stringliteral">&quot;cC&quot;</span>}, {<span class="stringliteral">&quot;mM&quot;</span>, <span class="stringliteral">&quot;??&quot;</span>}};</div>
<div class="line"><a name="l12821"></a><span class="lineno">12821</span>&#160; </div>
<div class="line"><a name="l12822"></a><span class="lineno">12822</span>&#160;    <span class="keywordtype">char</span> mark = marks [<span class="keywordtype">id</span> == _txMainThreadId] [<span class="keywordtype">id</span> == _txCanvas_ThreadId] [(_txLoc::Cur.inTX &gt; 0)];</div>
<div class="line"><a name="l12823"></a><span class="lineno">12823</span>&#160; </div>
<div class="line"><a name="l12824"></a><span class="lineno">12824</span>&#160;    <span class="keywordtype">char</span> msgStr[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12825"></a><span class="lineno">12825</span>&#160;    <span class="keywordflow">if</span> (msg)</div>
<div class="line"><a name="l12826"></a><span class="lineno">12826</span>&#160;        {</div>
<div class="line"><a name="l12827"></a><span class="lineno">12827</span>&#160;        va_list arg; va_start (arg, msg);</div>
<div class="line"><a name="l12828"></a><span class="lineno">12828</span>&#160;        _tx_vsnprintf_s (msgStr, <span class="keyword">sizeof</span> (msgStr) - 1, msg, arg);</div>
<div class="line"><a name="l12829"></a><span class="lineno">12829</span>&#160;        va_end (arg);</div>
<div class="line"><a name="l12830"></a><span class="lineno">12830</span>&#160;        }</div>
<div class="line"><a name="l12831"></a><span class="lineno">12831</span>&#160; </div>
<div class="line"><a name="l12832"></a><span class="lineno">12832</span>&#160;    <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;%s - 0x%p %c%c%c%c%c%d [%c] - %-*s (%5d)  &quot;</span> <span class="stringliteral">&quot;|%*s%s&quot;</span> <span class="stringliteral">&quot;%s%s\n&quot;</span>,</div>
<div class="line"><a name="l12833"></a><span class="lineno">12833</span>&#160; </div>
<div class="line"><a name="l12834"></a><span class="lineno">12834</span>&#160;                         _TX_VERSION, (<span class="keywordtype">void</span>*) &amp;_txInitialized,</div>
<div class="line"><a name="l12835"></a><span class="lineno">12835</span>&#160; </div>
<div class="line"><a name="l12836"></a><span class="lineno">12836</span>&#160;                         <span class="stringliteral">&quot;cC&quot;</span>[!!_txConsole], <span class="stringliteral">&quot;mM&quot;</span>[_txMain], <span class="stringliteral">&quot;dD&quot;</span>[_txIsDll], <span class="stringliteral">&quot;rR&quot;</span>[_txRunning], <span class="stringliteral">&quot;eE&quot;</span>[_txExit],</div>
<div class="line"><a name="l12837"></a><span class="lineno">12837</span>&#160;                         _txLoc::Cur.trace, mark,</div>
<div class="line"><a name="l12838"></a><span class="lineno">12838</span>&#160; </div>
<div class="line"><a name="l12839"></a><span class="lineno">12839</span>&#160;                         (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span> (__FILE__) - 1, (file? file : <span class="stringliteral">&quot;(NULL file)&quot;</span>), line,</div>
<div class="line"><a name="l12840"></a><span class="lineno">12840</span>&#160;                         2 * (_txLoc::Cur.inTX - 1) * !!func, <span class="stringliteral">&quot;&quot;</span>, (func? func : <span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><a name="l12841"></a><span class="lineno">12841</span>&#160; </div>
<div class="line"><a name="l12842"></a><span class="lineno">12842</span>&#160;                         ((*msgStr &amp;&amp; func)? <span class="stringliteral">&quot;: &quot;</span> : <span class="stringliteral">&quot;&quot;</span>), msgStr);</div>
<div class="line"><a name="l12843"></a><span class="lineno">12843</span>&#160;    }</div>
<div class="line"><a name="l12844"></a><span class="lineno">12844</span>&#160; </div>
<div class="line"><a name="l12845"></a><span class="lineno">12845</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12846"></a><span class="lineno">12846</span>&#160; </div>
<div class="line"><a name="l12847"></a><span class="lineno">12847</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...)</div>
<div class="line"><a name="l12848"></a><span class="lineno">12848</span>&#160;    {</div>
<div class="line"><a name="l12849"></a><span class="lineno">12849</span>&#160;    <span class="keywordflow">if</span> (!format) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l12850"></a><span class="lineno">12850</span>&#160; </div>
<div class="line"><a name="l12851"></a><span class="lineno">12851</span>&#160;    <span class="keyword">enum</span> { msgbox = 1, print = 2, compr = 4 };</div>
<div class="line"><a name="l12852"></a><span class="lineno">12852</span>&#160;    <span class="keywordtype">int</span> options = 0;</div>
<div class="line"><a name="l12853"></a><span class="lineno">12853</span>&#160; </div>
<div class="line"><a name="l12854"></a><span class="lineno">12854</span>&#160;    <span class="keywordflow">for</span> (; format &amp;&amp; *format; format++)</div>
<div class="line"><a name="l12855"></a><span class="lineno">12855</span>&#160;        {</div>
<div class="line"><a name="l12856"></a><span class="lineno">12856</span>&#160;        <span class="keywordflow">if</span>      (*format == <span class="charliteral">&#39;\a&#39;</span>) options |= msgbox;</div>
<div class="line"><a name="l12857"></a><span class="lineno">12857</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*format == <span class="charliteral">&#39;\f&#39;</span>) options |= print;</div>
<div class="line"><a name="l12858"></a><span class="lineno">12858</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*format == <span class="charliteral">&#39;\r&#39;</span>) options |= compr;</div>
<div class="line"><a name="l12859"></a><span class="lineno">12859</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l12860"></a><span class="lineno">12860</span>&#160;        }</div>
<div class="line"><a name="l12861"></a><span class="lineno">12861</span>&#160; </div>
<div class="line"><a name="l12862"></a><span class="lineno">12862</span>&#160;    <span class="keywordtype">char</span> text[<a class="code" href="group___technical.html#gaa7273b2f613970c283053c5d9136addd">_TX_BIGBUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l12863"></a><span class="lineno">12863</span>&#160; </div>
<div class="line"><a name="l12864"></a><span class="lineno">12864</span>&#160;    va_list arg; va_start (arg, format);</div>
<div class="line"><a name="l12865"></a><span class="lineno">12865</span>&#160;    <span class="keywordtype">int</span> n = (int) _tx_vsnprintf_s (text, <span class="keyword">sizeof</span> (text) - 1-1, format, arg);  <span class="comment">//-V202</span></div>
<div class="line"><a name="l12866"></a><span class="lineno">12866</span>&#160;    va_end (arg);</div>
<div class="line"><a name="l12867"></a><span class="lineno">12867</span>&#160; </div>
<div class="line"><a name="l12868"></a><span class="lineno">12868</span>&#160;    <span class="keyword">struct </span>__ { <span class="keyword">static</span> <span class="keywordtype">int</span> trimSpaces (<span class="keywordtype">char</span> str[])</div>
<div class="line"><a name="l12869"></a><span class="lineno">12869</span>&#160;        {</div>
<div class="line"><a name="l12870"></a><span class="lineno">12870</span>&#160;        <span class="keywordtype">char</span> *dst = str, *src = str;</div>
<div class="line"><a name="l12871"></a><span class="lineno">12871</span>&#160; </div>
<div class="line"><a name="l12872"></a><span class="lineno">12872</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">char</span> d = <span class="charliteral">&#39; &#39;</span>; d; src++)</div>
<div class="line"><a name="l12873"></a><span class="lineno">12873</span>&#160;            <span class="keywordflow">if</span> (isspace ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(*src))) { <span class="keywordflow">if</span> (d != <span class="charliteral">&#39; &#39;</span>) *dst++ = d = <span class="charliteral">&#39; &#39;</span>; }</div>
<div class="line"><a name="l12874"></a><span class="lineno">12874</span>&#160;            <span class="keywordflow">else</span>                                                 *dst++ = d = *src;</div>
<div class="line"><a name="l12875"></a><span class="lineno">12875</span>&#160; </div>
<div class="line"><a name="l12876"></a><span class="lineno">12876</span>&#160;        <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) (dst - str - 1);  <span class="comment">//-V202</span></div>
<div class="line"><a name="l12877"></a><span class="lineno">12877</span>&#160;        }};</div>
<div class="line"><a name="l12878"></a><span class="lineno">12878</span>&#160; </div>
<div class="line"><a name="l12879"></a><span class="lineno">12879</span>&#160;    <span class="keywordflow">if</span> (options &amp; compr)  n = __::trimSpaces (text);</div>
<div class="line"><a name="l12880"></a><span class="lineno">12880</span>&#160; </div>
<div class="line"><a name="l12881"></a><span class="lineno">12881</span>&#160;    OutputDebugString (text);</div>
<div class="line"><a name="l12882"></a><span class="lineno">12882</span>&#160; </div>
<div class="line"><a name="l12883"></a><span class="lineno">12883</span>&#160;    <span class="keywordflow">if</span> (options &amp; print)  fprintf (stderr, <span class="stringliteral">&quot;%s&quot;</span>, text);</div>
<div class="line"><a name="l12884"></a><span class="lineno">12884</span>&#160; </div>
<div class="line"><a name="l12885"></a><span class="lineno">12885</span>&#160;    <span class="keywordflow">if</span> (options &amp; msgbox) <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (text, <span class="stringliteral">&quot;Оказывается, что&quot;</span>, MB_ICONEXCLAMATION);</div>
<div class="line"><a name="l12886"></a><span class="lineno">12886</span>&#160; </div>
<div class="line"><a name="l12887"></a><span class="lineno">12887</span>&#160;    <span class="keywordflow">return</span> n;</div>
<div class="line"><a name="l12888"></a><span class="lineno">12888</span>&#160;    }</div>
<div class="line"><a name="l12889"></a><span class="lineno">12889</span>&#160; </div>
<div class="line"><a name="l12890"></a><span class="lineno">12890</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12891"></a><span class="lineno">12891</span>&#160; </div>
<div class="line"><a name="l12892"></a><span class="lineno">12892</span>&#160;intptr_t _tx_snprintf_s (<span class="keywordtype">char</span>* stream, intptr_t size, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...)</div>
<div class="line"><a name="l12893"></a><span class="lineno">12893</span>&#160;    {</div>
<div class="line"><a name="l12894"></a><span class="lineno">12894</span>&#160;    <span class="keywordflow">if</span> (!format) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l12895"></a><span class="lineno">12895</span>&#160; </div>
<div class="line"><a name="l12896"></a><span class="lineno">12896</span>&#160;    va_list arg; va_start (arg, format);</div>
<div class="line"><a name="l12897"></a><span class="lineno">12897</span>&#160;    intptr_t ret = _tx_vsnprintf_s (stream, size, format, arg);</div>
<div class="line"><a name="l12898"></a><span class="lineno">12898</span>&#160;    va_end (arg);</div>
<div class="line"><a name="l12899"></a><span class="lineno">12899</span>&#160; </div>
<div class="line"><a name="l12900"></a><span class="lineno">12900</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l12901"></a><span class="lineno">12901</span>&#160;    }</div>
<div class="line"><a name="l12902"></a><span class="lineno">12902</span>&#160; </div>
<div class="line"><a name="l12903"></a><span class="lineno">12903</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12904"></a><span class="lineno">12904</span>&#160; </div>
<div class="line"><a name="l12905"></a><span class="lineno">12905</span>&#160;intptr_t _tx_vsnprintf_s (<span class="keywordtype">char</span> stream[], intptr_t size, <span class="keyword">const</span> <span class="keywordtype">char</span> format[], va_list arg)</div>
<div class="line"><a name="l12906"></a><span class="lineno">12906</span>&#160;    {</div>
<div class="line"><a name="l12907"></a><span class="lineno">12907</span>&#160;    <span class="keywordflow">if</span> (!stream || !format) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l12908"></a><span class="lineno">12908</span>&#160; </div>
<div class="line"><a name="l12909"></a><span class="lineno">12909</span>&#160;<span class="preprocessor">    #if defined (_TRUNCATE)</span></div>
<div class="line"><a name="l12910"></a><span class="lineno">12910</span>&#160;    intptr_t ret = _vsnprintf_s (stream, size, _TRUNCATE, format, arg);</div>
<div class="line"><a name="l12911"></a><span class="lineno">12911</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l12912"></a><span class="lineno">12912</span>&#160;    intptr_t ret = _vsnprintf   (stream, size,            format, arg);</div>
<div class="line"><a name="l12913"></a><span class="lineno">12913</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l12914"></a><span class="lineno">12914</span>&#160; </div>
<div class="line"><a name="l12915"></a><span class="lineno">12915</span>&#160;    <span class="keywordflow">if</span> (ret &lt; 0 &amp;&amp; size &gt;= 4)  <span class="comment">//-V112</span></div>
<div class="line"><a name="l12916"></a><span class="lineno">12916</span>&#160;        {</div>
<div class="line"><a name="l12917"></a><span class="lineno">12917</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> ellipsis[] = <span class="stringliteral">&quot;...&quot;</span>;</div>
<div class="line"><a name="l12918"></a><span class="lineno">12918</span>&#160;        <span class="keywordtype">size_t</span>     szEllipsis = <span class="keyword">sizeof</span> (ellipsis) - 1;</div>
<div class="line"><a name="l12919"></a><span class="lineno">12919</span>&#160; </div>
<div class="line"><a name="l12920"></a><span class="lineno">12920</span>&#160;        strncpy_s (stream + size - szEllipsis, szEllipsis+1, ellipsis, szEllipsis);</div>
<div class="line"><a name="l12921"></a><span class="lineno">12921</span>&#160;        }</div>
<div class="line"><a name="l12922"></a><span class="lineno">12922</span>&#160; </div>
<div class="line"><a name="l12923"></a><span class="lineno">12923</span>&#160;    <span class="keywordflow">return</span> (ret &gt;= 0)? ret : size;</div>
<div class="line"><a name="l12924"></a><span class="lineno">12924</span>&#160;    }</div>
<div class="line"><a name="l12925"></a><span class="lineno">12925</span>&#160; </div>
<div class="line"><a name="l12926"></a><span class="lineno">12926</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12927"></a><span class="lineno">12927</span>&#160; </div>
<div class="line"><a name="l12928"></a><span class="lineno">12928</span>&#160;<span class="preprocessor">#if defined (__CYGWIN__)</span></div>
<div class="line"><a name="l12929"></a><span class="lineno">12929</span>&#160; </div>
<div class="line"><a name="l12930"></a><span class="lineno">12930</span>&#160;<span class="keywordtype">int</span> _getch()</div>
<div class="line"><a name="l12931"></a><span class="lineno">12931</span>&#160;    {</div>
<div class="line"><a name="l12932"></a><span class="lineno">12932</span>&#160;    termios oldattr = {}; tcgetattr (STDIN_FILENO, &amp;oldattr);</div>
<div class="line"><a name="l12933"></a><span class="lineno">12933</span>&#160; </div>
<div class="line"><a name="l12934"></a><span class="lineno">12934</span>&#160;    termios newattr = oldattr;</div>
<div class="line"><a name="l12935"></a><span class="lineno">12935</span>&#160;    newattr.c_lflag &amp;= ~(ICANON | ECHO);</div>
<div class="line"><a name="l12936"></a><span class="lineno">12936</span>&#160;    tcsetattr (STDIN_FILENO, TCSANOW, &amp;newattr);</div>
<div class="line"><a name="l12937"></a><span class="lineno">12937</span>&#160; </div>
<div class="line"><a name="l12938"></a><span class="lineno">12938</span>&#160;    <span class="keywordtype">int</span> ch = getchar();</div>
<div class="line"><a name="l12939"></a><span class="lineno">12939</span>&#160; </div>
<div class="line"><a name="l12940"></a><span class="lineno">12940</span>&#160;    tcsetattr (STDIN_FILENO, TCSANOW, &amp;oldattr);</div>
<div class="line"><a name="l12941"></a><span class="lineno">12941</span>&#160; </div>
<div class="line"><a name="l12942"></a><span class="lineno">12942</span>&#160;    <span class="keywordflow">return</span> ch;</div>
<div class="line"><a name="l12943"></a><span class="lineno">12943</span>&#160;    }</div>
<div class="line"><a name="l12944"></a><span class="lineno">12944</span>&#160; </div>
<div class="line"><a name="l12945"></a><span class="lineno">12945</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12946"></a><span class="lineno">12946</span>&#160; </div>
<div class="line"><a name="l12947"></a><span class="lineno">12947</span>&#160;<span class="keywordtype">int</span> _putch (<span class="keywordtype">int</span> ch)</div>
<div class="line"><a name="l12948"></a><span class="lineno">12948</span>&#160;    {</div>
<div class="line"><a name="l12949"></a><span class="lineno">12949</span>&#160;    termios old = {}; tcgetattr (STDOUT_FILENO, &amp;old);</div>
<div class="line"><a name="l12950"></a><span class="lineno">12950</span>&#160; </div>
<div class="line"><a name="l12951"></a><span class="lineno">12951</span>&#160;    termios cur = old;</div>
<div class="line"><a name="l12952"></a><span class="lineno">12952</span>&#160;    cur.c_lflag &amp;= ~ICANON;</div>
<div class="line"><a name="l12953"></a><span class="lineno">12953</span>&#160;    cur.c_lflag |=  ECHO;</div>
<div class="line"><a name="l12954"></a><span class="lineno">12954</span>&#160;    tcsetattr (STDOUT_FILENO, TCSANOW, &amp;cur);</div>
<div class="line"><a name="l12955"></a><span class="lineno">12955</span>&#160; </div>
<div class="line"><a name="l12956"></a><span class="lineno">12956</span>&#160;    putchar (ch);</div>
<div class="line"><a name="l12957"></a><span class="lineno">12957</span>&#160; </div>
<div class="line"><a name="l12958"></a><span class="lineno">12958</span>&#160;    tcsetattr (STDOUT_FILENO, TCSANOW, &amp;old);</div>
<div class="line"><a name="l12959"></a><span class="lineno">12959</span>&#160; </div>
<div class="line"><a name="l12960"></a><span class="lineno">12960</span>&#160;    <span class="keywordflow">return</span> ch;</div>
<div class="line"><a name="l12961"></a><span class="lineno">12961</span>&#160;    }</div>
<div class="line"><a name="l12962"></a><span class="lineno">12962</span>&#160; </div>
<div class="line"><a name="l12963"></a><span class="lineno">12963</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12964"></a><span class="lineno">12964</span>&#160; </div>
<div class="line"><a name="l12965"></a><span class="lineno">12965</span>&#160;<span class="keywordtype">int</span> _kbhit()</div>
<div class="line"><a name="l12966"></a><span class="lineno">12966</span>&#160;    {</div>
<div class="line"><a name="l12967"></a><span class="lineno">12967</span>&#160;    termios old = {}; tcgetattr (STDIN_FILENO, &amp;old);</div>
<div class="line"><a name="l12968"></a><span class="lineno">12968</span>&#160; </div>
<div class="line"><a name="l12969"></a><span class="lineno">12969</span>&#160;    termios cur = old;</div>
<div class="line"><a name="l12970"></a><span class="lineno">12970</span>&#160;    cur.c_lflag &amp;= ~(ICANON | ECHO);</div>
<div class="line"><a name="l12971"></a><span class="lineno">12971</span>&#160;    cur.c_cc[VMIN]  = 1;</div>
<div class="line"><a name="l12972"></a><span class="lineno">12972</span>&#160;    cur.c_cc[VTIME] = 0;</div>
<div class="line"><a name="l12973"></a><span class="lineno">12973</span>&#160; </div>
<div class="line"><a name="l12974"></a><span class="lineno">12974</span>&#160;    tcsetattr (STDIN_FILENO, TCSAFLUSH, &amp;cur);</div>
<div class="line"><a name="l12975"></a><span class="lineno">12975</span>&#160; </div>
<div class="line"><a name="l12976"></a><span class="lineno">12976</span>&#160;    fd_set  fd = {}; FD_SET (STDIN_FILENO, &amp;fd);</div>
<div class="line"><a name="l12977"></a><span class="lineno">12977</span>&#160;    timeval tv = {};</div>
<div class="line"><a name="l12978"></a><span class="lineno">12978</span>&#160; </div>
<div class="line"><a name="l12979"></a><span class="lineno">12979</span>&#160;    <span class="keywordtype">int</span> res = select (STDIN_FILENO + 1, &amp;fd, NULL, NULL, &amp;tv) &amp;&amp; FD_ISSET (STDIN_FILENO, &amp;fd);</div>
<div class="line"><a name="l12980"></a><span class="lineno">12980</span>&#160; </div>
<div class="line"><a name="l12981"></a><span class="lineno">12981</span>&#160;    tcsetattr (STDIN_FILENO, TCSAFLUSH, &amp;old);</div>
<div class="line"><a name="l12982"></a><span class="lineno">12982</span>&#160; </div>
<div class="line"><a name="l12983"></a><span class="lineno">12983</span>&#160;    <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l12984"></a><span class="lineno">12984</span>&#160;    }</div>
<div class="line"><a name="l12985"></a><span class="lineno">12985</span>&#160; </div>
<div class="line"><a name="l12986"></a><span class="lineno">12986</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l12987"></a><span class="lineno">12987</span>&#160; </div>
<div class="line"><a name="l12988"></a><span class="lineno">12988</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l12989"></a><span class="lineno">12989</span>&#160; </div>
<div class="line"><a name="l12990"></a><span class="lineno">12990</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l12991"></a><span class="lineno">12991</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12992"></a><span class="lineno">12992</span>&#160; </div>
<div class="line"><a name="l12993"></a><span class="lineno">12993</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12994"></a><span class="lineno">12994</span>&#160;<span class="comment">//{          Information</span></div>
<div class="line"><a name="l12995"></a><span class="lineno">12995</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l12996"></a><span class="lineno">12996</span>&#160; </div>
<div class="line"><a name="l12997"></a><span class="lineno">12997</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l12998"></a><span class="lineno">12998</span>&#160; </div>
<div class="line"><a name="l12999"></a><span class="lineno">12999</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a> (<span class="keywordtype">bool</span> fileNameOnly <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l13000"></a><span class="lineno">13000</span>&#160;    {</div>
<div class="line"><a name="l13001"></a><span class="lineno">13001</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> name[MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l13002"></a><span class="lineno">13002</span>&#160; </div>
<div class="line"><a name="l13003"></a><span class="lineno">13003</span>&#160;    <span class="keywordflow">if</span> (!*name)</div>
<div class="line"><a name="l13004"></a><span class="lineno">13004</span>&#160;        {</div>
<div class="line"><a name="l13005"></a><span class="lineno">13005</span>&#160;        <span class="keywordflow">if</span> (!GetModuleFileName (NULL, name, <span class="keyword">sizeof</span> (name) - 1)) *name = 0;</div>
<div class="line"><a name="l13006"></a><span class="lineno">13006</span>&#160; </div>
<div class="line"><a name="l13007"></a><span class="lineno">13007</span>&#160;        <span class="keywordtype">char</span>* ext = strrchr (name, <span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l13008"></a><span class="lineno">13008</span>&#160;        <span class="keywordflow">if</span> (ext) _strlwr_s (ext, <span class="keyword">sizeof</span> (name) - 1 - (ext - name));</div>
<div class="line"><a name="l13009"></a><span class="lineno">13009</span>&#160;        }</div>
<div class="line"><a name="l13010"></a><span class="lineno">13010</span>&#160; </div>
<div class="line"><a name="l13011"></a><span class="lineno">13011</span>&#160;    assert (*name);</div>
<div class="line"><a name="l13012"></a><span class="lineno">13012</span>&#160; </div>
<div class="line"><a name="l13013"></a><span class="lineno">13013</span>&#160;    <span class="keywordflow">if</span> (fileNameOnly) <span class="keywordflow">return</span> name;</div>
<div class="line"><a name="l13014"></a><span class="lineno">13014</span>&#160; </div>
<div class="line"><a name="l13015"></a><span class="lineno">13015</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> fullName[MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l13016"></a><span class="lineno">13016</span>&#160;    strncpy_s (fullName, <span class="keyword">sizeof</span> (fullName), name, <span class="keyword">sizeof</span> (fullName) - 1);</div>
<div class="line"><a name="l13017"></a><span class="lineno">13017</span>&#160; </div>
<div class="line"><a name="l13018"></a><span class="lineno">13018</span>&#160;    <span class="keywordtype">char</span>* title = strrchr (fullName, <span class="charliteral">&#39;\\&#39;</span>); <span class="keywordflow">if</span> (!title) title = fullName;</div>
<div class="line"><a name="l13019"></a><span class="lineno">13019</span>&#160;    <span class="keywordtype">char</span>* ext   = strrchr (fullName,  <span class="charliteral">&#39;.&#39;</span>); <span class="keywordflow">if</span> (!ext)   ext   = fullName + strlen (fullName);</div>
<div class="line"><a name="l13020"></a><span class="lineno">13020</span>&#160; </div>
<div class="line"><a name="l13021"></a><span class="lineno">13021</span>&#160;    <span class="keywordtype">size_t</span> sz = <span class="keyword">sizeof</span> (fullName) - (ext - fullName);</div>
<div class="line"><a name="l13022"></a><span class="lineno">13022</span>&#160;    strncpy_s (ext, sz-1, <span class="stringliteral">&quot; - TXLib&quot;</span>, sz);</div>
<div class="line"><a name="l13023"></a><span class="lineno">13023</span>&#160; </div>
<div class="line"><a name="l13024"></a><span class="lineno">13024</span>&#160;    <span class="keywordflow">return</span> title + 1;</div>
<div class="line"><a name="l13025"></a><span class="lineno">13025</span>&#160;    }</div>
<div class="line"><a name="l13026"></a><span class="lineno">13026</span>&#160; </div>
<div class="line"><a name="l13027"></a><span class="lineno">13027</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l13028"></a><span class="lineno">13028</span>&#160; </div>
<div class="line"><a name="l13029"></a><span class="lineno">13029</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13030"></a><span class="lineno">13030</span>&#160; </div>
<div class="line"><a name="l13031"></a><span class="lineno">13031</span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* _txAppInfo()</div>
<div class="line"><a name="l13032"></a><span class="lineno">13032</span>&#160;    {</div>
<div class="line"><a name="l13033"></a><span class="lineno">13033</span>&#160;$1  time_t timeT     = time (NULL) - clock()/CLOCKS_PER_SEC;  <span class="comment">//-V104</span></div>
<div class="line"><a name="l13034"></a><span class="lineno">13034</span>&#160;    <span class="keywordtype">char</span>   timeS[32] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l13035"></a><span class="lineno">13035</span>&#160;    ctime_s (timeS, <span class="keyword">sizeof</span> (timeS), &amp;timeT);</div>
<div class="line"><a name="l13036"></a><span class="lineno">13036</span>&#160; </div>
<div class="line"><a name="l13037"></a><span class="lineno">13037</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> text[<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l13038"></a><span class="lineno">13038</span>&#160;    <span class="keywordtype">char</span> cwd [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l13039"></a><span class="lineno">13039</span>&#160; </div>
<div class="line"><a name="l13040"></a><span class="lineno">13040</span>&#160;    _tx_snprintf_s (text, <span class="keyword">sizeof</span> (text) - 1,</div>
<div class="line"><a name="l13041"></a><span class="lineno">13041</span>&#160; </div>
<div class="line"><a name="l13042"></a><span class="lineno">13042</span>&#160;                    <span class="stringliteral">&quot;Developed with:\n\n&quot;</span></div>
<div class="line"><a name="l13043"></a><span class="lineno">13043</span>&#160;                    <span class="stringliteral">&quot;The Dumb Artist Library (TX Library)\n&quot;</span></div>
<div class="line"><a name="l13044"></a><span class="lineno">13044</span>&#160;                    _TX_VERSION <span class="stringliteral">&quot;\n&quot;</span> _TX_AUTHOR <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l13045"></a><span class="lineno">13045</span>&#160;                    <span class="stringliteral">&quot;See license on: http://txlib.ru\n\n&quot;</span></div>
<div class="line"><a name="l13046"></a><span class="lineno">13046</span>&#160; </div>
<div class="line"><a name="l13047"></a><span class="lineno">13047</span>&#160;                    <span class="stringliteral">&quot;TXLib file:&quot;</span> <span class="stringliteral">&quot;\t&quot;</span> __FILE__ <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l13048"></a><span class="lineno">13048</span>&#160;                    <span class="stringliteral">&quot;Compiled:&quot;</span>   <span class="stringliteral">&quot;\t&quot;</span> __DATE__ <span class="stringliteral">&quot; &quot;</span> __TIME__ <span class="stringliteral">&quot;, &quot;</span> <a class="code" href="group___technical.html#gadd1c9ccd036228402b807abaea14f7ee">__TX_COMPILER__</a> <span class="stringliteral">&quot;, %s, %d-bit, &quot;</span> <a class="code" href="group___technical.html#ga3e287c38947fea870d01588fbd2a5fc9">_TX_BUILDMODE</a> <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line"><a name="l13049"></a><span class="lineno">13049</span>&#160;                    <span class="stringliteral">&quot;Started:&quot;</span>    <span class="stringliteral">&quot;\t&quot;</span> <span class="stringliteral">&quot;%.6s %.4s %.8s\n\n&quot;</span></div>
<div class="line"><a name="l13050"></a><span class="lineno">13050</span>&#160; </div>
<div class="line"><a name="l13051"></a><span class="lineno">13051</span>&#160;                    <span class="stringliteral">&quot;Run file:&quot;</span>   <span class="stringliteral">&quot;\t&quot;</span> <span class="stringliteral">&quot;%s\n&quot;</span></div>
<div class="line"><a name="l13052"></a><span class="lineno">13052</span>&#160;                    <span class="stringliteral">&quot;Directory:&quot;</span>  <span class="stringliteral">&quot;\t&quot;</span> <span class="stringliteral">&quot;%s&quot;</span>,</div>
<div class="line"><a name="l13053"></a><span class="lineno">13053</span>&#160; </div>
<div class="line"><a name="l13054"></a><span class="lineno">13054</span>&#160;    #<span class="keywordflow">if</span>   defined (_MSC_VER)</div>
<div class="line"><a name="l13055"></a><span class="lineno">13055</span>&#160;                    <span class="stringliteral">&quot;MSVC Runtime&quot;</span>,</div>
<div class="line"><a name="l13056"></a><span class="lineno">13056</span>&#160;    #elif defined (__CYGWIN__)</div>
<div class="line"><a name="l13057"></a><span class="lineno">13057</span>&#160;                    <span class="stringliteral">&quot;Cygwin Runtime&quot;</span>,</div>
<div class="line"><a name="l13058"></a><span class="lineno">13058</span>&#160;    #elif defined (_GCC_VER) &amp;&amp; defined (_WIN64)</div>
<div class="line"><a name="l13059"></a><span class="lineno">13059</span>&#160;                    __mingw_get_crt_info(),</div>
<div class="line"><a name="l13060"></a><span class="lineno">13060</span>&#160;    #<span class="keywordflow">else</span></div>
<div class="line"><a name="l13061"></a><span class="lineno">13061</span>&#160;                    <span class="stringliteral">&quot;MinGW Runtime &quot;</span> TX_QUOTE (__MINGW32_MAJOR_VERSION) <span class="stringliteral">&quot;.&quot;</span> TX_QUOTE (__MINGW32_MINOR_VERSION),</div>
<div class="line"><a name="l13062"></a><span class="lineno">13062</span>&#160;    #endif</div>
<div class="line"><a name="l13063"></a><span class="lineno">13063</span>&#160;                    (<span class="keyword">sizeof</span> (<span class="keywordtype">void</span>*) == <span class="keyword">sizeof</span> (DWORD))? 32 : 64,    <span class="comment">//-V112</span></div>
<div class="line"><a name="l13064"></a><span class="lineno">13064</span>&#160; </div>
<div class="line"><a name="l13065"></a><span class="lineno">13065</span>&#160;                    timeS + 4, timeS + 20, timeS + 11,              <span class="comment">//-V112 These offsets are ANSI standardized</span></div>
<div class="line"><a name="l13066"></a><span class="lineno">13066</span>&#160;                    <a class="code" href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a>(),</div>
<div class="line"><a name="l13067"></a><span class="lineno">13067</span>&#160;                    _getcwd (cwd, <span class="keyword">sizeof</span> (cwd) - 1));</div>
<div class="line"><a name="l13068"></a><span class="lineno">13068</span>&#160; </div>
<div class="line"><a name="l13069"></a><span class="lineno">13069</span>&#160;    <span class="keywordflow">return</span> text;</div>
<div class="line"><a name="l13070"></a><span class="lineno">13070</span>&#160;    }</div>
<div class="line"><a name="l13071"></a><span class="lineno">13071</span>&#160; </div>
<div class="line"><a name="l13072"></a><span class="lineno">13072</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l13073"></a><span class="lineno">13073</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13074"></a><span class="lineno">13074</span>&#160; </div>
<div class="line"><a name="l13076"></a><span class="lineno">13076</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l13077"></a><span class="lineno">13077</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l13078"></a><span class="lineno">13078</span>&#160; </div>
<div class="line"><a name="l13079"></a><span class="lineno">13079</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l13080"></a><span class="lineno">13080</span>&#160;<span class="comment">//{          TXLib API implementation</span></div>
<div class="line"><a name="l13081"></a><span class="lineno">13081</span>&#160;<span class="comment">//           Реализация TXLib API</span></div>
<div class="line"><a name="l13082"></a><span class="lineno">13082</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l13083"></a><span class="lineno">13083</span>&#160; </div>
<div class="line"><a name="l13084"></a><span class="lineno">13084</span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="group___drawing.html#gaf382eed71ecf8229882fe544035d66dc">txVersion</a>()</div>
<div class="line"><a name="l13085"></a><span class="lineno">13085</span>&#160;    {</div>
<div class="line"><a name="l13086"></a><span class="lineno">13086</span>&#160;    <span class="keywordflow">return</span> _TX_VERSION;</div>
<div class="line"><a name="l13087"></a><span class="lineno">13087</span>&#160;    }</div>
<div class="line"><a name="l13088"></a><span class="lineno">13088</span>&#160; </div>
<div class="line"><a name="l13089"></a><span class="lineno">13089</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13090"></a><span class="lineno">13090</span>&#160; </div>
<div class="line"><a name="l13091"></a><span class="lineno">13091</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#gab2c5f0eff263a7297997281c3d451b91">txVersionNumber</a>()</div>
<div class="line"><a name="l13092"></a><span class="lineno">13092</span>&#160;    {</div>
<div class="line"><a name="l13093"></a><span class="lineno">13093</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___technical.html#ga6b76c63cd895c2be63ac8e690028623b">_TX_VER</a>;  <span class="comment">//-V2517</span></div>
<div class="line"><a name="l13094"></a><span class="lineno">13094</span>&#160;    }</div>
<div class="line"><a name="l13095"></a><span class="lineno">13095</span>&#160; </div>
<div class="line"><a name="l13096"></a><span class="lineno">13096</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13097"></a><span class="lineno">13097</span>&#160; </div>
<div class="line"><a name="l13098"></a><span class="lineno">13098</span>&#160;<span class="keyword">inline</span> HWND <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>()</div>
<div class="line"><a name="l13099"></a><span class="lineno">13099</span>&#160;    {</div>
<div class="line"><a name="l13100"></a><span class="lineno">13100</span>&#160;$9  <span class="keywordflow">return</span> _txCanvas_Window;</div>
<div class="line"><a name="l13101"></a><span class="lineno">13101</span>&#160;    }</div>
<div class="line"><a name="l13102"></a><span class="lineno">13102</span>&#160; </div>
<div class="line"><a name="l13103"></a><span class="lineno">13103</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13104"></a><span class="lineno">13104</span>&#160; </div>
<div class="line"><a name="l13105"></a><span class="lineno">13105</span>&#160;<span class="keyword">inline</span> HDC&amp; <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>()</div>
<div class="line"><a name="l13106"></a><span class="lineno">13106</span>&#160;    {</div>
<div class="line"><a name="l13107"></a><span class="lineno">13107</span>&#160;    <span class="keywordflow">return</span> _txCanvas_BackBuf[0];</div>
<div class="line"><a name="l13108"></a><span class="lineno">13108</span>&#160;    }</div>
<div class="line"><a name="l13109"></a><span class="lineno">13109</span>&#160; </div>
<div class="line"><a name="l13110"></a><span class="lineno">13110</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13111"></a><span class="lineno">13111</span>&#160; </div>
<div class="line"><a name="l13112"></a><span class="lineno">13112</span>&#160;<span class="keyword">inline</span> RGBQUAD* <a class="code" href="group___drawing.html#ga3a8ec79acc0dcbcc04bff3aecc235b4e">txVideoMemory</a>()</div>
<div class="line"><a name="l13113"></a><span class="lineno">13113</span>&#160;    {</div>
<div class="line"><a name="l13114"></a><span class="lineno">13114</span>&#160;    <span class="keywordflow">return</span> _txCanvas_Pixels;</div>
<div class="line"><a name="l13115"></a><span class="lineno">13115</span>&#160;    }</div>
<div class="line"><a name="l13116"></a><span class="lineno">13116</span>&#160; </div>
<div class="line"><a name="l13117"></a><span class="lineno">13117</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13118"></a><span class="lineno">13118</span>&#160; </div>
<div class="line"><a name="l13119"></a><span class="lineno">13119</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gab79782d80f6c61587d02f0633aa2f198">txGetExtentX</a> (HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13120"></a><span class="lineno">13120</span>&#160;    {</div>
<div class="line"><a name="l13121"></a><span class="lineno">13121</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (dc) .x;</div>
<div class="line"><a name="l13122"></a><span class="lineno">13122</span>&#160;    }</div>
<div class="line"><a name="l13123"></a><span class="lineno">13123</span>&#160; </div>
<div class="line"><a name="l13124"></a><span class="lineno">13124</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13125"></a><span class="lineno">13125</span>&#160; </div>
<div class="line"><a name="l13126"></a><span class="lineno">13126</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gaa9bb7fd84e0b9f59c96be89d70c74321">txGetExtentY</a> (HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13127"></a><span class="lineno">13127</span>&#160;    {</div>
<div class="line"><a name="l13128"></a><span class="lineno">13128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (dc) .y;</div>
<div class="line"><a name="l13129"></a><span class="lineno">13129</span>&#160;    }</div>
<div class="line"><a name="l13130"></a><span class="lineno">13130</span>&#160; </div>
<div class="line"><a name="l13131"></a><span class="lineno">13131</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13132"></a><span class="lineno">13132</span>&#160; </div>
<div class="line"><a name="l13133"></a><span class="lineno">13133</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l13134"></a><span class="lineno">13134</span>&#160; </div>
<div class="line"><a name="l13135"></a><span class="lineno">13135</span>&#160;POINT <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13136"></a><span class="lineno">13136</span>&#160;    {</div>
<div class="line"><a name="l13137"></a><span class="lineno">13137</span>&#160;$0  <span class="keyword">static</span> POINT err = {-1, -1};</div>
<div class="line"><a name="l13138"></a><span class="lineno">13138</span>&#160; </div>
<div class="line"><a name="l13139"></a><span class="lineno">13139</span>&#160;    <span class="keywordflow">if</span> (!dc) {$ POINT screen = { GetSystemMetrics (SM_CXSCREEN), GetSystemMetrics (SM_CYSCREEN) }; <span class="keywordflow">return</span> screen; };</div>
<div class="line"><a name="l13140"></a><span class="lineno">13140</span>&#160; </div>
<div class="line"><a name="l13141"></a><span class="lineno">13141</span>&#160;    <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) {$ <span class="keywordflow">return</span> err; }</div>
<div class="line"><a name="l13142"></a><span class="lineno">13142</span>&#160; </div>
<div class="line"><a name="l13143"></a><span class="lineno">13143</span>&#160;$   BITMAP bmap = {};</div>
<div class="line"><a name="l13144"></a><span class="lineno">13144</span>&#160;$   <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (Win32::GetObject (Win32::GetCurrentObject (dc, OBJ_BITMAP), <span class="keyword">sizeof</span> (bmap), &amp;bmap), dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13145"></a><span class="lineno">13145</span>&#160; </div>
<div class="line"><a name="l13146"></a><span class="lineno">13146</span>&#160;$   POINT  size = { bmap.bmWidth, bmap.bmHeight };</div>
<div class="line"><a name="l13147"></a><span class="lineno">13147</span>&#160;$   <span class="keywordflow">return</span> size;</div>
<div class="line"><a name="l13148"></a><span class="lineno">13148</span>&#160;    }</div>
<div class="line"><a name="l13149"></a><span class="lineno">13149</span>&#160; </div>
<div class="line"><a name="l13150"></a><span class="lineno">13150</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13151"></a><span class="lineno">13151</span>&#160; </div>
<div class="line"><a name="l13152"></a><span class="lineno">13152</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga0a3cf3a018cea9d5889d2626e9a37136">txDestroyWindow</a> (HWND wnd <span class="comment">/*= txWindow()*/</span>)</div>
<div class="line"><a name="l13153"></a><span class="lineno">13153</span>&#160;    {</div>
<div class="line"><a name="l13154"></a><span class="lineno">13154</span>&#160;$1  <span class="keywordflow">if</span> (!wnd || !<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13155"></a><span class="lineno">13155</span>&#160; </div>
<div class="line"><a name="l13156"></a><span class="lineno">13156</span>&#160;$   <span class="keywordflow">if</span> (wnd != <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>())</div>
<div class="line"><a name="l13157"></a><span class="lineno">13157</span>&#160;        {</div>
<div class="line"><a name="l13158"></a><span class="lineno">13158</span>&#160;$       <span class="keywordflow">return</span> !!SendNotifyMessage (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), _TX_WM_DESTROYWND, 0, (LPARAM) wnd);</div>
<div class="line"><a name="l13159"></a><span class="lineno">13159</span>&#160;        }</div>
<div class="line"><a name="l13160"></a><span class="lineno">13160</span>&#160; </div>
<div class="line"><a name="l13161"></a><span class="lineno">13161</span>&#160;$   <span class="keywordflow">if</span> (SendNotifyMessage (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), (_txMain? WM_CLOSE : WM_DESTROY), 0, 0) == 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13162"></a><span class="lineno">13162</span>&#160; </div>
<div class="line"><a name="l13163"></a><span class="lineno">13163</span>&#160;$   <span class="keywordflow">if</span> (_txMain)</div>
<div class="line"><a name="l13164"></a><span class="lineno">13164</span>&#160;        {</div>
<div class="line"><a name="l13165"></a><span class="lineno">13165</span>&#160;$       txNotifyIcon (NIIF_WARNING, NULL, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;Очень, очень плохо завершать программу через txDestroyWindow().\n\n&quot;</span></div>
<div class="line"><a name="l13166"></a><span class="lineno">13166</span>&#160;                                               <span class="stringliteral">&quot;Возвращайтесь через main(), там вам будут рады.\n&quot;</span>);</div>
<div class="line"><a name="l13167"></a><span class="lineno">13167</span>&#160;$       Sleep (<a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l13168"></a><span class="lineno">13168</span>&#160;        }</div>
<div class="line"><a name="l13169"></a><span class="lineno">13169</span>&#160; </div>
<div class="line"><a name="l13170"></a><span class="lineno">13170</span>&#160;$   _txWaitFor (!_txCanvas_Window, <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>);</div>
<div class="line"><a name="l13171"></a><span class="lineno">13171</span>&#160; </div>
<div class="line"><a name="l13172"></a><span class="lineno">13172</span>&#160;$   <span class="keywordflow">return</span> _txCanvas_Window == NULL;</div>
<div class="line"><a name="l13173"></a><span class="lineno">13173</span>&#160;    }</div>
<div class="line"><a name="l13174"></a><span class="lineno">13174</span>&#160; </div>
<div class="line"><a name="l13175"></a><span class="lineno">13175</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13176"></a><span class="lineno">13176</span>&#160; </div>
<div class="line"><a name="l13177"></a><span class="lineno">13177</span>&#160;HPEN <a class="code" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a> (COLORREF color, <span class="keywordtype">double</span> thickness <span class="comment">/*= 1*/</span>, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13178"></a><span class="lineno">13178</span>&#160;    {</div>
<div class="line"><a name="l13179"></a><span class="lineno">13179</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13180"></a><span class="lineno">13180</span>&#160; </div>
<div class="line"><a name="l13181"></a><span class="lineno">13181</span>&#160;$   HPEN pen = Win32::CreatePen ((color == <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>? PS_NULL : PS_SOLID), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (thickness), color);</div>
<div class="line"><a name="l13182"></a><span class="lineno">13182</span>&#160; </div>
<div class="line"><a name="l13183"></a><span class="lineno">13183</span>&#160;$   <span class="keywordflow">if</span> (!pen) <span class="keywordflow">return</span> (HPEN) NULL;</div>
<div class="line"><a name="l13184"></a><span class="lineno">13184</span>&#160; </div>
<div class="line"><a name="l13185"></a><span class="lineno">13185</span>&#160;$   <span class="keywordflow">if</span> (!_txBuffer_Select (pen, dc))</div>
<div class="line"><a name="l13186"></a><span class="lineno">13186</span>&#160;        {</div>
<div class="line"><a name="l13187"></a><span class="lineno">13187</span>&#160;$       Win32::DeleteObject (pen);</div>
<div class="line"><a name="l13188"></a><span class="lineno">13188</span>&#160;$       <span class="keywordflow">return</span> (HPEN) NULL;</div>
<div class="line"><a name="l13189"></a><span class="lineno">13189</span>&#160;        }</div>
<div class="line"><a name="l13190"></a><span class="lineno">13190</span>&#160; </div>
<div class="line"><a name="l13191"></a><span class="lineno">13191</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (Win32::SetTextColor (dc, color), dc) == CLR_INVALID)</div>
<div class="line"><a name="l13192"></a><span class="lineno">13192</span>&#160;        {$ <span class="keywordflow">return</span> (HPEN) NULL; }</div>
<div class="line"><a name="l13193"></a><span class="lineno">13193</span>&#160; </div>
<div class="line"><a name="l13194"></a><span class="lineno">13194</span>&#160;$   <span class="keywordflow">return</span> pen;</div>
<div class="line"><a name="l13195"></a><span class="lineno">13195</span>&#160;    }</div>
<div class="line"><a name="l13196"></a><span class="lineno">13196</span>&#160; </div>
<div class="line"><a name="l13197"></a><span class="lineno">13197</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13198"></a><span class="lineno">13198</span>&#160; </div>
<div class="line"><a name="l13199"></a><span class="lineno">13199</span>&#160;COLORREF txColor (<span class="keywordtype">double</span> red, <span class="keywordtype">double</span> green, <span class="keywordtype">double</span> blue)</div>
<div class="line"><a name="l13200"></a><span class="lineno">13200</span>&#160;    {</div>
<div class="line"><a name="l13201"></a><span class="lineno">13201</span>&#160;$1  <span class="keywordflow">if</span> (red   &gt; 1) red   = 1; <span class="keywordflow">if</span> (red   &lt; 0) red   = 0;</div>
<div class="line"><a name="l13202"></a><span class="lineno">13202</span>&#160;$   <span class="keywordflow">if</span> (green &gt; 1) green = 1; <span class="keywordflow">if</span> (green &lt; 0) green = 0;</div>
<div class="line"><a name="l13203"></a><span class="lineno">13203</span>&#160;$   <span class="keywordflow">if</span> (blue  &gt; 1) blue  = 1; <span class="keywordflow">if</span> (blue  &lt; 0) blue  = 0;</div>
<div class="line"><a name="l13204"></a><span class="lineno">13204</span>&#160; </div>
<div class="line"><a name="l13205"></a><span class="lineno">13205</span>&#160;$   COLORREF color = RGB (<a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (red * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (green * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (blue * 255));</div>
<div class="line"><a name="l13206"></a><span class="lineno">13206</span>&#160; </div>
<div class="line"><a name="l13207"></a><span class="lineno">13207</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a> (color)? color : CLR_INVALID;</div>
<div class="line"><a name="l13208"></a><span class="lineno">13208</span>&#160;    }</div>
<div class="line"><a name="l13209"></a><span class="lineno">13209</span>&#160; </div>
<div class="line"><a name="l13210"></a><span class="lineno">13210</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13211"></a><span class="lineno">13211</span>&#160; </div>
<div class="line"><a name="l13212"></a><span class="lineno">13212</span>&#160;COLORREF <a class="code" href="group___drawing.html#gab6462db4dbcca4915d460036c6c8896d">txGetColor</a> (HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13213"></a><span class="lineno">13213</span>&#160;    {</div>
<div class="line"><a name="l13214"></a><span class="lineno">13214</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> CLR_INVALID;</div>
<div class="line"><a name="l13215"></a><span class="lineno">13215</span>&#160; </div>
<div class="line"><a name="l13216"></a><span class="lineno">13216</span>&#160;$   HGDIOBJ obj = <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::GetCurrentObject (dc, OBJ_PEN)), dc);</div>
<div class="line"><a name="l13217"></a><span class="lineno">13217</span>&#160;$   assert (obj); <span class="keywordflow">if</span> (!obj) <span class="keywordflow">return</span> CLR_INVALID;              <span class="comment">//-V547</span></div>
<div class="line"><a name="l13218"></a><span class="lineno">13218</span>&#160; </div>
<div class="line"><a name="l13219"></a><span class="lineno">13219</span>&#160;$   <span class="keyword">union </span>{ EXTLOGPEN extLogPen; LOGPEN LogPen; } buf = {};  <span class="comment">//-V2514</span></div>
<div class="line"><a name="l13220"></a><span class="lineno">13220</span>&#160; </div>
<div class="line"><a name="l13221"></a><span class="lineno">13221</span>&#160;$   <span class="keywordtype">int</span> size = Win32::GetObject (obj, 0, NULL);</div>
<div class="line"><a name="l13222"></a><span class="lineno">13222</span>&#160;$   Win32::GetObject (obj, <span class="keyword">sizeof</span> (buf), &amp;buf) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13223"></a><span class="lineno">13223</span>&#160; </div>
<div class="line"><a name="l13224"></a><span class="lineno">13224</span>&#160;$   <span class="keywordflow">return</span> (size == <span class="keyword">sizeof</span> (LOGPEN))? buf.LogPen.lopnColor : buf.extLogPen.elpColor;</div>
<div class="line"><a name="l13225"></a><span class="lineno">13225</span>&#160;    }</div>
<div class="line"><a name="l13226"></a><span class="lineno">13226</span>&#160; </div>
<div class="line"><a name="l13227"></a><span class="lineno">13227</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13228"></a><span class="lineno">13228</span>&#160; </div>
<div class="line"><a name="l13229"></a><span class="lineno">13229</span>&#160;HBRUSH <a class="code" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a> (COLORREF color, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13230"></a><span class="lineno">13230</span>&#160;    {</div>
<div class="line"><a name="l13231"></a><span class="lineno">13231</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13232"></a><span class="lineno">13232</span>&#160; </div>
<div class="line"><a name="l13233"></a><span class="lineno">13233</span>&#160;$   HBRUSH brush = (color == <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>)? (HBRUSH) Win32::GetStockObject (HOLLOW_BRUSH) : Win32::CreateSolidBrush (color);</div>
<div class="line"><a name="l13234"></a><span class="lineno">13234</span>&#160; </div>
<div class="line"><a name="l13235"></a><span class="lineno">13235</span>&#160;$   <span class="keywordflow">return</span> (_txBuffer_Select (brush, dc))? brush : (Win32::DeleteObject (brush), (HBRUSH) NULL);</div>
<div class="line"><a name="l13236"></a><span class="lineno">13236</span>&#160;    }</div>
<div class="line"><a name="l13237"></a><span class="lineno">13237</span>&#160; </div>
<div class="line"><a name="l13238"></a><span class="lineno">13238</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13239"></a><span class="lineno">13239</span>&#160; </div>
<div class="line"><a name="l13240"></a><span class="lineno">13240</span>&#160;COLORREF txFillColor (<span class="keywordtype">double</span> red, <span class="keywordtype">double</span> green, <span class="keywordtype">double</span> blue)</div>
<div class="line"><a name="l13241"></a><span class="lineno">13241</span>&#160;    {</div>
<div class="line"><a name="l13242"></a><span class="lineno">13242</span>&#160;$1  <span class="keywordflow">if</span> (red   &gt; 1) red   = 1; <span class="keywordflow">if</span> (red   &lt; 0) red   = 0;</div>
<div class="line"><a name="l13243"></a><span class="lineno">13243</span>&#160;$   <span class="keywordflow">if</span> (green &gt; 1) green = 1; <span class="keywordflow">if</span> (green &lt; 0) green = 0;</div>
<div class="line"><a name="l13244"></a><span class="lineno">13244</span>&#160;$   <span class="keywordflow">if</span> (blue  &gt; 1) blue  = 1; <span class="keywordflow">if</span> (blue  &lt; 0) blue  = 0;</div>
<div class="line"><a name="l13245"></a><span class="lineno">13245</span>&#160; </div>
<div class="line"><a name="l13246"></a><span class="lineno">13246</span>&#160;$   COLORREF color = RGB (<a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (red * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (green * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (blue * 255));</div>
<div class="line"><a name="l13247"></a><span class="lineno">13247</span>&#160; </div>
<div class="line"><a name="l13248"></a><span class="lineno">13248</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a> (color)? color : CLR_INVALID;</div>
<div class="line"><a name="l13249"></a><span class="lineno">13249</span>&#160;    }</div>
<div class="line"><a name="l13250"></a><span class="lineno">13250</span>&#160; </div>
<div class="line"><a name="l13251"></a><span class="lineno">13251</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13252"></a><span class="lineno">13252</span>&#160; </div>
<div class="line"><a name="l13253"></a><span class="lineno">13253</span>&#160;COLORREF <a class="code" href="group___drawing.html#ga4d83b7e2d67f422cf703e15f2d7c4dfa">txGetFillColor</a> (HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13254"></a><span class="lineno">13254</span>&#160;    {</div>
<div class="line"><a name="l13255"></a><span class="lineno">13255</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> CLR_INVALID;</div>
<div class="line"><a name="l13256"></a><span class="lineno">13256</span>&#160; </div>
<div class="line"><a name="l13257"></a><span class="lineno">13257</span>&#160;$   HGDIOBJ obj = <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::GetCurrentObject (dc, OBJ_BRUSH)), dc);</div>
<div class="line"><a name="l13258"></a><span class="lineno">13258</span>&#160;$   assert (obj); <span class="keywordflow">if</span> (!obj) <span class="keywordflow">return</span> CLR_INVALID;  <span class="comment">//-V547</span></div>
<div class="line"><a name="l13259"></a><span class="lineno">13259</span>&#160; </div>
<div class="line"><a name="l13260"></a><span class="lineno">13260</span>&#160;$   LOGBRUSH buf = {};</div>
<div class="line"><a name="l13261"></a><span class="lineno">13261</span>&#160;$   <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::GetObject (obj, <span class="keyword">sizeof</span> (buf), &amp;buf)), dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13262"></a><span class="lineno">13262</span>&#160; </div>
<div class="line"><a name="l13263"></a><span class="lineno">13263</span>&#160;$   <span class="keywordflow">return</span> buf.lbColor;</div>
<div class="line"><a name="l13264"></a><span class="lineno">13264</span>&#160;    }</div>
<div class="line"><a name="l13265"></a><span class="lineno">13265</span>&#160; </div>
<div class="line"><a name="l13266"></a><span class="lineno">13266</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13267"></a><span class="lineno">13267</span>&#160; </div>
<div class="line"><a name="l13268"></a><span class="lineno">13268</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga78e83baeb6a02d5fa33dd8b062e513d9">txClear</a> (HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13269"></a><span class="lineno">13269</span>&#160;    {</div>
<div class="line"><a name="l13270"></a><span class="lineno">13270</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13271"></a><span class="lineno">13271</span>&#160; </div>
<div class="line"><a name="l13272"></a><span class="lineno">13272</span>&#160;$   POINT size = <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (dc);</div>
<div class="line"><a name="l13273"></a><span class="lineno">13273</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::PatBlt (dc, 0, 0, size.x, size.y, PATCOPY)), dc);</div>
<div class="line"><a name="l13274"></a><span class="lineno">13274</span>&#160;    }</div>
<div class="line"><a name="l13275"></a><span class="lineno">13275</span>&#160; </div>
<div class="line"><a name="l13276"></a><span class="lineno">13276</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13277"></a><span class="lineno">13277</span>&#160; </div>
<div class="line"><a name="l13278"></a><span class="lineno">13278</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gafafd861ab7dc599b2e68b258b6727c85">txSetPixel</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, COLORREF color, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13279"></a><span class="lineno">13279</span>&#160;    {</div>
<div class="line"><a name="l13280"></a><span class="lineno">13280</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13281"></a><span class="lineno">13281</span>&#160; </div>
<div class="line"><a name="l13282"></a><span class="lineno">13282</span>&#160;$   <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::SetPixel (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y), color)), dc);</div>
<div class="line"><a name="l13283"></a><span class="lineno">13283</span>&#160; </div>
<div class="line"><a name="l13284"></a><span class="lineno">13284</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l13285"></a><span class="lineno">13285</span>&#160;    }</div>
<div class="line"><a name="l13286"></a><span class="lineno">13286</span>&#160; </div>
<div class="line"><a name="l13287"></a><span class="lineno">13287</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13288"></a><span class="lineno">13288</span>&#160; </div>
<div class="line"><a name="l13289"></a><span class="lineno">13289</span>&#160;<span class="keywordtype">bool</span> txPixel (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> red, <span class="keywordtype">double</span> green, <span class="keywordtype">double</span> blue, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13290"></a><span class="lineno">13290</span>&#160;    {</div>
<div class="line"><a name="l13291"></a><span class="lineno">13291</span>&#160;$1  <span class="keywordflow">if</span> (red   &gt; 1) red   = 1; <span class="keywordflow">if</span> (red   &lt; 0) red   = 0;</div>
<div class="line"><a name="l13292"></a><span class="lineno">13292</span>&#160;$   <span class="keywordflow">if</span> (green &gt; 1) green = 1; <span class="keywordflow">if</span> (green &lt; 0) green = 0;</div>
<div class="line"><a name="l13293"></a><span class="lineno">13293</span>&#160;$   <span class="keywordflow">if</span> (blue  &gt; 1) blue  = 1; <span class="keywordflow">if</span> (blue  &lt; 0) blue  = 0;</div>
<div class="line"><a name="l13294"></a><span class="lineno">13294</span>&#160; </div>
<div class="line"><a name="l13295"></a><span class="lineno">13295</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#gafafd861ab7dc599b2e68b258b6727c85">txSetPixel</a> (x, y, RGB (<a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (red * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (green * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (blue * 255)), dc);</div>
<div class="line"><a name="l13296"></a><span class="lineno">13296</span>&#160;    }</div>
<div class="line"><a name="l13297"></a><span class="lineno">13297</span>&#160; </div>
<div class="line"><a name="l13298"></a><span class="lineno">13298</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13299"></a><span class="lineno">13299</span>&#160; </div>
<div class="line"><a name="l13300"></a><span class="lineno">13300</span>&#160;COLORREF <a class="code" href="group___drawing.html#ga90daedc95ac28938003edb5b50479542">txGetPixel</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13301"></a><span class="lineno">13301</span>&#160;    {</div>
<div class="line"><a name="l13302"></a><span class="lineno">13302</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> CLR_INVALID;</div>
<div class="line"><a name="l13303"></a><span class="lineno">13303</span>&#160; </div>
<div class="line"><a name="l13304"></a><span class="lineno">13304</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::GetPixel (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y))), dc);</div>
<div class="line"><a name="l13305"></a><span class="lineno">13305</span>&#160;    }</div>
<div class="line"><a name="l13306"></a><span class="lineno">13306</span>&#160; </div>
<div class="line"><a name="l13307"></a><span class="lineno">13307</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13308"></a><span class="lineno">13308</span>&#160; </div>
<div class="line"><a name="l13309"></a><span class="lineno">13309</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13310"></a><span class="lineno">13310</span>&#160;    {</div>
<div class="line"><a name="l13311"></a><span class="lineno">13311</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13312"></a><span class="lineno">13312</span>&#160; </div>
<div class="line"><a name="l13313"></a><span class="lineno">13313</span>&#160;$   <span class="keywordtype">bool</span> ok  = <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::MoveToEx (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y0), NULL)), dc);</div>
<div class="line"><a name="l13314"></a><span class="lineno">13314</span>&#160;$        ok &amp;= <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::LineTo   (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x1), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y1)      )), dc);</div>
<div class="line"><a name="l13315"></a><span class="lineno">13315</span>&#160; </div>
<div class="line"><a name="l13316"></a><span class="lineno">13316</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13317"></a><span class="lineno">13317</span>&#160;    }</div>
<div class="line"><a name="l13318"></a><span class="lineno">13318</span>&#160; </div>
<div class="line"><a name="l13319"></a><span class="lineno">13319</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13320"></a><span class="lineno">13320</span>&#160; </div>
<div class="line"><a name="l13321"></a><span class="lineno">13321</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga18a0418f3c06463e958077cddf2a4864">txRectangle</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13322"></a><span class="lineno">13322</span>&#160;    {</div>
<div class="line"><a name="l13323"></a><span class="lineno">13323</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13324"></a><span class="lineno">13324</span>&#160; </div>
<div class="line"><a name="l13325"></a><span class="lineno">13325</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::Rectangle (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x1), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y1))), dc);</div>
<div class="line"><a name="l13326"></a><span class="lineno">13326</span>&#160;    }</div>
<div class="line"><a name="l13327"></a><span class="lineno">13327</span>&#160; </div>
<div class="line"><a name="l13328"></a><span class="lineno">13328</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13329"></a><span class="lineno">13329</span>&#160; </div>
<div class="line"><a name="l13330"></a><span class="lineno">13330</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gacbbb638439ad7ba88804178516019fb1">txPolygon</a> (<span class="keyword">const</span> POINT points[], <span class="keywordtype">int</span> numPoints, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13331"></a><span class="lineno">13331</span>&#160;    {</div>
<div class="line"><a name="l13332"></a><span class="lineno">13332</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED    (points)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13333"></a><span class="lineno">13333</span>&#160;$   <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc))     <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13334"></a><span class="lineno">13334</span>&#160; </div>
<div class="line"><a name="l13335"></a><span class="lineno">13335</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::Polygon (dc, points, numPoints)), dc);</div>
<div class="line"><a name="l13336"></a><span class="lineno">13336</span>&#160;    }</div>
<div class="line"><a name="l13337"></a><span class="lineno">13337</span>&#160; </div>
<div class="line"><a name="l13338"></a><span class="lineno">13338</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13339"></a><span class="lineno">13339</span>&#160; </div>
<div class="line"><a name="l13340"></a><span class="lineno">13340</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaaf82e7c5a0fd06548f42c757f73d3dae">txEllipse</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13341"></a><span class="lineno">13341</span>&#160;    {</div>
<div class="line"><a name="l13342"></a><span class="lineno">13342</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13343"></a><span class="lineno">13343</span>&#160; </div>
<div class="line"><a name="l13344"></a><span class="lineno">13344</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::Ellipse (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x1), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y1))), dc);</div>
<div class="line"><a name="l13345"></a><span class="lineno">13345</span>&#160;    }</div>
<div class="line"><a name="l13346"></a><span class="lineno">13346</span>&#160; </div>
<div class="line"><a name="l13347"></a><span class="lineno">13347</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13348"></a><span class="lineno">13348</span>&#160; </div>
<div class="line"><a name="l13349"></a><span class="lineno">13349</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc">txCircle</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keywordtype">double</span> r)</div>
<div class="line"><a name="l13350"></a><span class="lineno">13350</span>&#160;    {</div>
<div class="line"><a name="l13351"></a><span class="lineno">13351</span>&#160;$1  <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#gaaf82e7c5a0fd06548f42c757f73d3dae">txEllipse</a> (x-r, y-r, x+r, y+r);</div>
<div class="line"><a name="l13352"></a><span class="lineno">13352</span>&#160;    }</div>
<div class="line"><a name="l13353"></a><span class="lineno">13353</span>&#160; </div>
<div class="line"><a name="l13354"></a><span class="lineno">13354</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13355"></a><span class="lineno">13355</span>&#160; </div>
<div class="line"><a name="l13356"></a><span class="lineno">13356</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga5e1e4cc39cc18962bb480c4adfa1344d">txArc</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> startAngle, <span class="keywordtype">double</span> totalAngle, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13357"></a><span class="lineno">13357</span>&#160;    {</div>
<div class="line"><a name="l13358"></a><span class="lineno">13358</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13359"></a><span class="lineno">13359</span>&#160; </div>
<div class="line"><a name="l13360"></a><span class="lineno">13360</span>&#160;$   POINT center = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((x0 + x1) /2), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((y0 + y1) /2) };</div>
<div class="line"><a name="l13361"></a><span class="lineno">13361</span>&#160; </div>
<div class="line"><a name="l13362"></a><span class="lineno">13362</span>&#160;$   <span class="keywordtype">double</span> start =  startAngle               * <a class="code" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a>/180,</div>
<div class="line"><a name="l13363"></a><span class="lineno">13363</span>&#160;           end   = (startAngle + totalAngle) * <a class="code" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a>/180;</div>
<div class="line"><a name="l13364"></a><span class="lineno">13364</span>&#160; </div>
<div class="line"><a name="l13365"></a><span class="lineno">13365</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::Arc (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x1), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y1),</div>
<div class="line"><a name="l13366"></a><span class="lineno">13366</span>&#160;                                     <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.x + 1E3*cos (start)), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.y - 1E3*sin (start)),</div>
<div class="line"><a name="l13367"></a><span class="lineno">13367</span>&#160;                                     <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.x + 1E3*cos (end)),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.y - 1E3*sin (end)))), dc);</div>
<div class="line"><a name="l13368"></a><span class="lineno">13368</span>&#160;    }</div>
<div class="line"><a name="l13369"></a><span class="lineno">13369</span>&#160; </div>
<div class="line"><a name="l13370"></a><span class="lineno">13370</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13371"></a><span class="lineno">13371</span>&#160; </div>
<div class="line"><a name="l13372"></a><span class="lineno">13372</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga8e06e3abcb6b3724d332feb8aa83a8df">txPie</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> startAngle, <span class="keywordtype">double</span> totalAngle, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13373"></a><span class="lineno">13373</span>&#160;    {</div>
<div class="line"><a name="l13374"></a><span class="lineno">13374</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13375"></a><span class="lineno">13375</span>&#160; </div>
<div class="line"><a name="l13376"></a><span class="lineno">13376</span>&#160;$   POINT center = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((x0 + x1) /2), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((y0 + y1) /2) };</div>
<div class="line"><a name="l13377"></a><span class="lineno">13377</span>&#160; </div>
<div class="line"><a name="l13378"></a><span class="lineno">13378</span>&#160;$   <span class="keywordtype">double</span> start =  startAngle               * <a class="code" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a>/180,</div>
<div class="line"><a name="l13379"></a><span class="lineno">13379</span>&#160;           end   = (startAngle + totalAngle) * <a class="code" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a>/180;</div>
<div class="line"><a name="l13380"></a><span class="lineno">13380</span>&#160; </div>
<div class="line"><a name="l13381"></a><span class="lineno">13381</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::Pie (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x1), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y1),</div>
<div class="line"><a name="l13382"></a><span class="lineno">13382</span>&#160;                                     <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.x + 1E3*cos (start)), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.y - 1E3*sin (start)),</div>
<div class="line"><a name="l13383"></a><span class="lineno">13383</span>&#160;                                     <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.x + 1E3*cos (end)),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.y - 1E3*sin (end)))), dc);</div>
<div class="line"><a name="l13384"></a><span class="lineno">13384</span>&#160;    }</div>
<div class="line"><a name="l13385"></a><span class="lineno">13385</span>&#160; </div>
<div class="line"><a name="l13386"></a><span class="lineno">13386</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13387"></a><span class="lineno">13387</span>&#160; </div>
<div class="line"><a name="l13388"></a><span class="lineno">13388</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga59468ca0fd4c182ac0a03573267eb3e9">txChord</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keywordtype">double</span> startAngle, <span class="keywordtype">double</span> totalAngle, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13389"></a><span class="lineno">13389</span>&#160;    {</div>
<div class="line"><a name="l13390"></a><span class="lineno">13390</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13391"></a><span class="lineno">13391</span>&#160; </div>
<div class="line"><a name="l13392"></a><span class="lineno">13392</span>&#160;$   POINT center = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((x0 + x1) /2), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((y0 + y1) /2) };</div>
<div class="line"><a name="l13393"></a><span class="lineno">13393</span>&#160; </div>
<div class="line"><a name="l13394"></a><span class="lineno">13394</span>&#160;$   <span class="keywordtype">double</span> start =  startAngle               * <a class="code" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a>/180,</div>
<div class="line"><a name="l13395"></a><span class="lineno">13395</span>&#160;           end   = (startAngle + totalAngle) * <a class="code" href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a>/180;</div>
<div class="line"><a name="l13396"></a><span class="lineno">13396</span>&#160; </div>
<div class="line"><a name="l13397"></a><span class="lineno">13397</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::Chord (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x1), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y1),</div>
<div class="line"><a name="l13398"></a><span class="lineno">13398</span>&#160;                                       <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.x + 1E3*cos (start)), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.y - 1E3*sin (start)),</div>
<div class="line"><a name="l13399"></a><span class="lineno">13399</span>&#160;                                       <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.x + 1E3*cos (end)),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (center.y - 1E3*sin (end)))), dc);</div>
<div class="line"><a name="l13400"></a><span class="lineno">13400</span>&#160;    }</div>
<div class="line"><a name="l13401"></a><span class="lineno">13401</span>&#160; </div>
<div class="line"><a name="l13402"></a><span class="lineno">13402</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13403"></a><span class="lineno">13403</span>&#160; </div>
<div class="line"><a name="l13404"></a><span class="lineno">13404</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga8adde0a20efa7597d8653653817353b2">txFloodFill</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y,</div>
<div class="line"><a name="l13405"></a><span class="lineno">13405</span>&#160;                  COLORREF color <span class="comment">/*= TX_TRANSPARENT*/</span>, DWORD mode <span class="comment">/*= FLOODFILLSURFACE*/</span>, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13406"></a><span class="lineno">13406</span>&#160;    {</div>
<div class="line"><a name="l13407"></a><span class="lineno">13407</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13408"></a><span class="lineno">13408</span>&#160; </div>
<div class="line"><a name="l13409"></a><span class="lineno">13409</span>&#160;$   <span class="keywordflow">if</span> (color == <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>) color = <a class="code" href="group___drawing.html#ga90daedc95ac28938003edb5b50479542">txGetPixel</a> (x, y, dc);</div>
<div class="line"><a name="l13410"></a><span class="lineno">13410</span>&#160; </div>
<div class="line"><a name="l13411"></a><span class="lineno">13411</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::ExtFloodFill (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y), color, mode)), dc);</div>
<div class="line"><a name="l13412"></a><span class="lineno">13412</span>&#160;    }</div>
<div class="line"><a name="l13413"></a><span class="lineno">13413</span>&#160; </div>
<div class="line"><a name="l13414"></a><span class="lineno">13414</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13415"></a><span class="lineno">13415</span>&#160; </div>
<div class="line"><a name="l13416"></a><span class="lineno">13416</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga52e119361961d9eee33c176a3084e55d">txTextOut</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y, <span class="keyword">const</span> <span class="keywordtype">char</span> text[], HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13417"></a><span class="lineno">13417</span>&#160;    {</div>
<div class="line"><a name="l13418"></a><span class="lineno">13418</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED    (text)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13419"></a><span class="lineno">13419</span>&#160;$   <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13420"></a><span class="lineno">13420</span>&#160; </div>
<div class="line"><a name="l13421"></a><span class="lineno">13421</span>&#160;$   <span class="keywordtype">int</span> len = (int) strlen (text);  <span class="comment">//-V202</span></div>
<div class="line"><a name="l13422"></a><span class="lineno">13422</span>&#160;$   <span class="keywordtype">bool</span> ok = <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::TextOut (dc, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y), text, len)), dc);</div>
<div class="line"><a name="l13423"></a><span class="lineno">13423</span>&#160; </div>
<div class="line"><a name="l13424"></a><span class="lineno">13424</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13425"></a><span class="lineno">13425</span>&#160;    }</div>
<div class="line"><a name="l13426"></a><span class="lineno">13426</span>&#160; </div>
<div class="line"><a name="l13427"></a><span class="lineno">13427</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13428"></a><span class="lineno">13428</span>&#160; </div>
<div class="line"><a name="l13429"></a><span class="lineno">13429</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaf6a9b31e58b6a0523ce1636a97053606">txDrawText</a> (<span class="keywordtype">double</span> x0, <span class="keywordtype">double</span> y0, <span class="keywordtype">double</span> x1, <span class="keywordtype">double</span> y1, <span class="keyword">const</span> <span class="keywordtype">char</span> text[],</div>
<div class="line"><a name="l13430"></a><span class="lineno">13430</span>&#160;                 <span class="keywordtype">unsigned</span> format <span class="comment">/*= DT_CENTER | DT_VCENTER | DT_WORDBREAK | DT_WORD_ELLIPSIS*/</span>,</div>
<div class="line"><a name="l13431"></a><span class="lineno">13431</span>&#160;                 HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13432"></a><span class="lineno">13432</span>&#160;    {</div>
<div class="line"><a name="l13433"></a><span class="lineno">13433</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED    (text)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13434"></a><span class="lineno">13434</span>&#160;$   <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13435"></a><span class="lineno">13435</span>&#160; </div>
<div class="line"><a name="l13436"></a><span class="lineno">13436</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l13437"></a><span class="lineno">13437</span>&#160; </div>
<div class="line"><a name="l13438"></a><span class="lineno">13438</span>&#160;$   <span class="keywordflow">if</span> (x0 &gt; x1)</div>
<div class="line"><a name="l13439"></a><span class="lineno">13439</span>&#160;        {</div>
<div class="line"><a name="l13440"></a><span class="lineno">13440</span>&#160;$       SetLastError (ERROR_INVALID_DATA);</div>
<div class="line"><a name="l13441"></a><span class="lineno">13441</span>&#160;$       <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;Параметр x0 = %g больше, чем x1 = %g. Текст выводиться не будет.&quot;</span>, x0, x1);</div>
<div class="line"><a name="l13442"></a><span class="lineno">13442</span>&#160;        }</div>
<div class="line"><a name="l13443"></a><span class="lineno">13443</span>&#160; </div>
<div class="line"><a name="l13444"></a><span class="lineno">13444</span>&#160;$   <span class="keywordflow">if</span> (y0 &gt; y1)</div>
<div class="line"><a name="l13445"></a><span class="lineno">13445</span>&#160;        {</div>
<div class="line"><a name="l13446"></a><span class="lineno">13446</span>&#160;$       SetLastError (ERROR_INVALID_DATA);</div>
<div class="line"><a name="l13447"></a><span class="lineno">13447</span>&#160;$       <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;Параметр y0 = %g больше, чем y1 = %g. Текст выводиться не будет.&quot;</span>, y0, y1);</div>
<div class="line"><a name="l13448"></a><span class="lineno">13448</span>&#160;        }</div>
<div class="line"><a name="l13449"></a><span class="lineno">13449</span>&#160; </div>
<div class="line"><a name="l13450"></a><span class="lineno">13450</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l13451"></a><span class="lineno">13451</span>&#160; </div>
<div class="line"><a name="l13452"></a><span class="lineno">13452</span>&#160;$   RECT r = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y0), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (x1), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (y1) };</div>
<div class="line"><a name="l13453"></a><span class="lineno">13453</span>&#160; </div>
<div class="line"><a name="l13454"></a><span class="lineno">13454</span>&#160;$   <span class="keywordflow">if</span> (!strchr (text, <span class="charliteral">&#39;\n&#39;</span>)) format |= DT_SINGLELINE;</div>
<div class="line"><a name="l13455"></a><span class="lineno">13455</span>&#160; </div>
<div class="line"><a name="l13456"></a><span class="lineno">13456</span>&#160;$   <span class="keywordtype">unsigned</span> prev = <a class="code" href="group___drawing.html#ga09938df8859ae8b62638a3af76ee6735">txSetTextAlign</a> (TA_LEFT | TA_TOP | TA_NOUPDATECP, dc);</div>
<div class="line"><a name="l13457"></a><span class="lineno">13457</span>&#160; </div>
<div class="line"><a name="l13458"></a><span class="lineno">13458</span>&#160;$   <span class="keywordtype">bool</span> ok = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13459"></a><span class="lineno">13459</span>&#160; </div>
<div class="line"><a name="l13460"></a><span class="lineno">13460</span>&#160;$   <span class="keywordflow">if</span> (Win32::DrawText)</div>
<div class="line"><a name="l13461"></a><span class="lineno">13461</span>&#160;        {</div>
<div class="line"><a name="l13462"></a><span class="lineno">13462</span>&#160;$       ok = !!<a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::DrawText (dc, text, -1, &amp;r, format)), dc);</div>
<div class="line"><a name="l13463"></a><span class="lineno">13463</span>&#160;$       Win32::GetPixel (dc, 0, 0);</div>
<div class="line"><a name="l13464"></a><span class="lineno">13464</span>&#160;$       ok = <span class="keyword">true</span>;  <span class="comment">//-V519</span></div>
<div class="line"><a name="l13465"></a><span class="lineno">13465</span>&#160;        }</div>
<div class="line"><a name="l13466"></a><span class="lineno">13466</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l13467"></a><span class="lineno">13467</span>&#160;        {</div>
<div class="line"><a name="l13468"></a><span class="lineno">13468</span>&#160;$       <a class="code" href="group___drawing.html#ga52e119361961d9eee33c176a3084e55d">txTextOut</a> ((x0 + x1) / 2, (y0 + y1) / 2, text);</div>
<div class="line"><a name="l13469"></a><span class="lineno">13469</span>&#160;$       ok = <span class="keyword">false</span>;</div>
<div class="line"><a name="l13470"></a><span class="lineno">13470</span>&#160;        }</div>
<div class="line"><a name="l13471"></a><span class="lineno">13471</span>&#160; </div>
<div class="line"><a name="l13472"></a><span class="lineno">13472</span>&#160;$   <a class="code" href="group___drawing.html#ga09938df8859ae8b62638a3af76ee6735">txSetTextAlign</a> (prev, dc);</div>
<div class="line"><a name="l13473"></a><span class="lineno">13473</span>&#160; </div>
<div class="line"><a name="l13474"></a><span class="lineno">13474</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13475"></a><span class="lineno">13475</span>&#160;    }</div>
<div class="line"><a name="l13476"></a><span class="lineno">13476</span>&#160; </div>
<div class="line"><a name="l13477"></a><span class="lineno">13477</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13478"></a><span class="lineno">13478</span>&#160; </div>
<div class="line"><a name="l13479"></a><span class="lineno">13479</span>&#160;HFONT <a class="code" href="group___drawing.html#ga6689b9a89add9c5eb5cf54a8c86539a4">txSelectFont</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">double</span> sizeY, <span class="keywordtype">double</span> sizeX <span class="comment">/*= -1*/</span>,</div>
<div class="line"><a name="l13480"></a><span class="lineno">13480</span>&#160;                    <span class="keywordtype">int</span> bold <span class="comment">/*= FW_DONTCARE*/</span>, <span class="keywordtype">bool</span> italic <span class="comment">/*= false*/</span>, <span class="keywordtype">bool</span> underline <span class="comment">/*= false*/</span>,</div>
<div class="line"><a name="l13481"></a><span class="lineno">13481</span>&#160;                    <span class="keywordtype">bool</span> strikeout <span class="comment">/*= false*/</span>, <span class="keywordtype">double</span> angle <span class="comment">/*= 0*/</span>,</div>
<div class="line"><a name="l13482"></a><span class="lineno">13482</span>&#160;                    HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13483"></a><span class="lineno">13483</span>&#160;    {</div>
<div class="line"><a name="l13484"></a><span class="lineno">13484</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED    (name)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13485"></a><span class="lineno">13485</span>&#160;$   <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc))   <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13486"></a><span class="lineno">13486</span>&#160; </div>
<div class="line"><a name="l13487"></a><span class="lineno">13487</span>&#160;$   HFONT font = <a class="code" href="group___drawing.html#ga794901725b6c4a96f585742b70c0ea05">txFontExist</a> (name)?</div>
<div class="line"><a name="l13488"></a><span class="lineno">13488</span>&#160;                     Win32::CreateFont (<a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (sizeY), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((sizeX &gt;= 0)? sizeX : sizeY/3),</div>
<div class="line"><a name="l13489"></a><span class="lineno">13489</span>&#160;                                        <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (angle*10), 0, bold, italic, underline, strikeout,</div>
<div class="line"><a name="l13490"></a><span class="lineno">13490</span>&#160;                                        RUSSIAN_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS,</div>
<div class="line"><a name="l13491"></a><span class="lineno">13491</span>&#160;                                        DEFAULT_QUALITY, DEFAULT_PITCH, name)</div>
<div class="line"><a name="l13492"></a><span class="lineno">13492</span>&#160;                     :</div>
<div class="line"><a name="l13493"></a><span class="lineno">13493</span>&#160;                     (HFONT) Win32::GetStockObject (SYSTEM_FIXED_FONT);</div>
<div class="line"><a name="l13494"></a><span class="lineno">13494</span>&#160; </div>
<div class="line"><a name="l13495"></a><span class="lineno">13495</span>&#160;$   _txBuffer_Select (font, dc);</div>
<div class="line"><a name="l13496"></a><span class="lineno">13496</span>&#160; </div>
<div class="line"><a name="l13497"></a><span class="lineno">13497</span>&#160;$   <span class="keywordflow">return</span> font;</div>
<div class="line"><a name="l13498"></a><span class="lineno">13498</span>&#160;    }</div>
<div class="line"><a name="l13499"></a><span class="lineno">13499</span>&#160; </div>
<div class="line"><a name="l13500"></a><span class="lineno">13500</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13501"></a><span class="lineno">13501</span>&#160; </div>
<div class="line"><a name="l13502"></a><span class="lineno">13502</span>&#160;SIZE <a class="code" href="group___drawing.html#ga64af5f87cd652548278ff98d26f58148">txGetTextExtent</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> text[], HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13503"></a><span class="lineno">13503</span>&#160;    {</div>
<div class="line"><a name="l13504"></a><span class="lineno">13504</span>&#160;$1  SIZE size = {-1, -1};</div>
<div class="line"><a name="l13505"></a><span class="lineno">13505</span>&#160; </div>
<div class="line"><a name="l13506"></a><span class="lineno">13506</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED    (text)) <span class="keywordflow">return</span> size;</div>
<div class="line"><a name="l13507"></a><span class="lineno">13507</span>&#160;$   <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc))   <span class="keywordflow">return</span> size;</div>
<div class="line"><a name="l13508"></a><span class="lineno">13508</span>&#160; </div>
<div class="line"><a name="l13509"></a><span class="lineno">13509</span>&#160;$   <span class="keywordtype">size_t</span> len = strlen (text);</div>
<div class="line"><a name="l13510"></a><span class="lineno">13510</span>&#160;$   <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::GetTextExtentPoint32 (dc, text, (<span class="keywordtype">int</span>) len, &amp;size)), dc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;  <span class="comment">//-V202</span></div>
<div class="line"><a name="l13511"></a><span class="lineno">13511</span>&#160; </div>
<div class="line"><a name="l13512"></a><span class="lineno">13512</span>&#160;$   <span class="keywordflow">return</span> size;</div>
<div class="line"><a name="l13513"></a><span class="lineno">13513</span>&#160;    }</div>
<div class="line"><a name="l13514"></a><span class="lineno">13514</span>&#160; </div>
<div class="line"><a name="l13515"></a><span class="lineno">13515</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13516"></a><span class="lineno">13516</span>&#160; </div>
<div class="line"><a name="l13517"></a><span class="lineno">13517</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gad5483eacac697420a84f66733e45ed02">txGetTextExtentX</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> text[], HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13518"></a><span class="lineno">13518</span>&#160;    {</div>
<div class="line"><a name="l13519"></a><span class="lineno">13519</span>&#160;$1  <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga64af5f87cd652548278ff98d26f58148">txGetTextExtent</a> (text, dc) .cx;</div>
<div class="line"><a name="l13520"></a><span class="lineno">13520</span>&#160;    }</div>
<div class="line"><a name="l13521"></a><span class="lineno">13521</span>&#160; </div>
<div class="line"><a name="l13522"></a><span class="lineno">13522</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13523"></a><span class="lineno">13523</span>&#160; </div>
<div class="line"><a name="l13524"></a><span class="lineno">13524</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gac021e9984ef217a7a8c14094e3d684c9">txGetTextExtentY</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> text[], HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13525"></a><span class="lineno">13525</span>&#160;    {</div>
<div class="line"><a name="l13526"></a><span class="lineno">13526</span>&#160;$1  <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga64af5f87cd652548278ff98d26f58148">txGetTextExtent</a> (text, dc) .cy;</div>
<div class="line"><a name="l13527"></a><span class="lineno">13527</span>&#160;    }</div>
<div class="line"><a name="l13528"></a><span class="lineno">13528</span>&#160; </div>
<div class="line"><a name="l13529"></a><span class="lineno">13529</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13530"></a><span class="lineno">13530</span>&#160; </div>
<div class="line"><a name="l13531"></a><span class="lineno">13531</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#ga09938df8859ae8b62638a3af76ee6735">txSetTextAlign</a> (<span class="keywordtype">unsigned</span> align <span class="comment">/*= TA_CENTER | TA_BASELINE*/</span>, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13532"></a><span class="lineno">13532</span>&#160;    {</div>
<div class="line"><a name="l13533"></a><span class="lineno">13533</span>&#160;$1  <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//-V601</span></div>
<div class="line"><a name="l13534"></a><span class="lineno">13534</span>&#160; </div>
<div class="line"><a name="l13535"></a><span class="lineno">13535</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::SetTextAlign (dc, align)), dc);</div>
<div class="line"><a name="l13536"></a><span class="lineno">13536</span>&#160;    }</div>
<div class="line"><a name="l13537"></a><span class="lineno">13537</span>&#160; </div>
<div class="line"><a name="l13538"></a><span class="lineno">13538</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13539"></a><span class="lineno">13539</span>&#160; </div>
<div class="line"><a name="l13540"></a><span class="lineno">13540</span>&#160;LOGFONT* <a class="code" href="group___drawing.html#ga794901725b6c4a96f585742b70c0ea05">txFontExist</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> name[])</div>
<div class="line"><a name="l13541"></a><span class="lineno">13541</span>&#160;    {</div>
<div class="line"><a name="l13542"></a><span class="lineno">13542</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (name)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13543"></a><span class="lineno">13543</span>&#160; </div>
<div class="line"><a name="l13544"></a><span class="lineno">13544</span>&#160;$   <span class="keyword">static</span> LOGFONT font = {};</div>
<div class="line"><a name="l13545"></a><span class="lineno">13545</span>&#160;$   font.lfCharSet = DEFAULT_CHARSET;</div>
<div class="line"><a name="l13546"></a><span class="lineno">13546</span>&#160;$   strncpy_s (font.lfFaceName, sizeof (font.lfFaceName), name, sizeof (font.lfFaceName) - 1);</div>
<div class="line"><a name="l13547"></a><span class="lineno">13547</span>&#160; </div>
<div class="line"><a name="l13548"></a><span class="lineno">13548</span>&#160;$   <span class="keyword">struct </span>tools</div>
<div class="line"><a name="l13549"></a><span class="lineno">13549</span>&#160;        {</div>
<div class="line"><a name="l13550"></a><span class="lineno">13550</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">int</span> CALLBACK enumFonts (<span class="keyword">const</span> LOGFONT* fnt, <span class="keyword">const</span> TEXTMETRIC*, DWORD, LPARAM data)</div>
<div class="line"><a name="l13551"></a><span class="lineno">13551</span>&#160;            {</div>
<div class="line"><a name="l13552"></a><span class="lineno">13552</span>&#160;$           <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (fnt))  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l13553"></a><span class="lineno">13553</span>&#160;$           <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (data)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l13554"></a><span class="lineno">13554</span>&#160; </div>
<div class="line"><a name="l13555"></a><span class="lineno">13555</span>&#160;<span class="preprocessor">            #ifndef __STRICT_ANSI__</span></div>
<div class="line"><a name="l13556"></a><span class="lineno">13556</span>&#160;$           <span class="keywordflow">return</span> _strnicmp (fnt-&gt;lfFaceName, ((LOGFONT*)data)-&gt;lfFaceName, LF_FACESIZE);</div>
<div class="line"><a name="l13557"></a><span class="lineno">13557</span>&#160; </div>
<div class="line"><a name="l13558"></a><span class="lineno">13558</span>&#160;<span class="preprocessor">            #else</span></div>
<div class="line"><a name="l13559"></a><span class="lineno">13559</span>&#160;$           <span class="keywordflow">return</span>  strncmp  (fnt-&gt;lfFaceName, ((LOGFONT*)data)-&gt;lfFaceName, LF_FACESIZE);</div>
<div class="line"><a name="l13560"></a><span class="lineno">13560</span>&#160; </div>
<div class="line"><a name="l13561"></a><span class="lineno">13561</span>&#160;<span class="preprocessor">            #endif</span></div>
<div class="line"><a name="l13562"></a><span class="lineno">13562</span>&#160;            }</div>
<div class="line"><a name="l13563"></a><span class="lineno">13563</span>&#160;        };</div>
<div class="line"><a name="l13564"></a><span class="lineno">13564</span>&#160; </div>
<div class="line"><a name="l13565"></a><span class="lineno">13565</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::EnumFontFamiliesEx (NULL, &amp;font, tools::enumFonts, (LPARAM) &amp;font, 0)), NULL) == 0? &amp;font : NULL;</div>
<div class="line"><a name="l13566"></a><span class="lineno">13566</span>&#160;    }</div>
<div class="line"><a name="l13567"></a><span class="lineno">13567</span>&#160; </div>
<div class="line"><a name="l13568"></a><span class="lineno">13568</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13569"></a><span class="lineno">13569</span>&#160; </div>
<div class="line"><a name="l13570"></a><span class="lineno">13570</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gabc64e03f4ca966e76bc714bbe8173761">txSelectObject</a> (HGDIOBJ obj, HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13571"></a><span class="lineno">13571</span>&#160;    {</div>
<div class="line"><a name="l13572"></a><span class="lineno">13572</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED    (obj)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13573"></a><span class="lineno">13573</span>&#160;$   <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc))  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13574"></a><span class="lineno">13574</span>&#160; </div>
<div class="line"><a name="l13575"></a><span class="lineno">13575</span>&#160;$   <span class="keywordflow">return</span> _txBuffer_Select (obj, dc);</div>
<div class="line"><a name="l13576"></a><span class="lineno">13576</span>&#160;    }</div>
<div class="line"><a name="l13577"></a><span class="lineno">13577</span>&#160; </div>
<div class="line"><a name="l13578"></a><span class="lineno">13578</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13579"></a><span class="lineno">13579</span>&#160; </div>
<div class="line"><a name="l13580"></a><span class="lineno">13580</span>&#160;HDC <a class="code" href="group___drawing.html#ga9b0d66f152f2b04e9c4511e3e7f2c521">txCreateCompatibleDC</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, HBITMAP bitmap <span class="comment">/*= NULL*/</span>, RGBQUAD** pixels <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l13581"></a><span class="lineno">13581</span>&#160;    {</div>
<div class="line"><a name="l13582"></a><span class="lineno">13582</span>&#160;$1  POINT size = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (sizeX), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (sizeY) };</div>
<div class="line"><a name="l13583"></a><span class="lineno">13583</span>&#160; </div>
<div class="line"><a name="l13584"></a><span class="lineno">13584</span>&#160;$   HDC dc = _txBuffer_Create (NULL, &amp;size, bitmap, pixels);</div>
<div class="line"><a name="l13585"></a><span class="lineno">13585</span>&#160;$   assert (dc); <span class="keywordflow">if</span> (!dc) <span class="keywordflow">return</span> NULL;  <span class="comment">//-V547</span></div>
<div class="line"><a name="l13586"></a><span class="lineno">13586</span>&#160; </div>
<div class="line"><a name="l13587"></a><span class="lineno">13587</span>&#160;$   <a class="code" href="group___drawing.html#gaa72c4849ac0c9bf6f95893f4265b9843">txSetDefaults</a> (dc);</div>
<div class="line"><a name="l13588"></a><span class="lineno">13588</span>&#160; </div>
<div class="line"><a name="l13589"></a><span class="lineno">13589</span>&#160;$   <span class="keywordflow">if</span> (!_txCanvas_UserDCs) <span class="keywordflow">return</span> dc;</div>
<div class="line"><a name="l13590"></a><span class="lineno">13590</span>&#160; </div>
<div class="line"><a name="l13591"></a><span class="lineno">13591</span>&#160;$   <a class="code" href="classtx_auto_lock.html">txAutoLock</a> _lock;</div>
<div class="line"><a name="l13592"></a><span class="lineno">13592</span>&#160;$   _txCanvas_UserDCs-&gt;push_back (dc);</div>
<div class="line"><a name="l13593"></a><span class="lineno">13593</span>&#160; </div>
<div class="line"><a name="l13594"></a><span class="lineno">13594</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_UserDCs-&gt;size() &gt;= <a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>)</div>
<div class="line"><a name="l13595"></a><span class="lineno">13595</span>&#160;        {$ txNotifyIcon (NIIF_WARNING, NULL, <span class="stringliteral">&quot;Вы загрузили уже %d HDC, системе может стать плохо.&quot;</span>, (<span class="keywordtype">int</span>) _txCanvas_UserDCs-&gt;size()); }  <span class="comment">//-V202</span></div>
<div class="line"><a name="l13596"></a><span class="lineno">13596</span>&#160; </div>
<div class="line"><a name="l13597"></a><span class="lineno">13597</span>&#160;$   <span class="keywordflow">return</span> dc;</div>
<div class="line"><a name="l13598"></a><span class="lineno">13598</span>&#160;    }</div>
<div class="line"><a name="l13599"></a><span class="lineno">13599</span>&#160; </div>
<div class="line"><a name="l13600"></a><span class="lineno">13600</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13601"></a><span class="lineno">13601</span>&#160; </div>
<div class="line"><a name="l13602"></a><span class="lineno">13602</span>&#160;HDC <a class="code" href="group___drawing.html#ga7535f88c0fd15b4b49195060d38f2603">txCreateDIBSection</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, RGBQUAD** pixels <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l13603"></a><span class="lineno">13603</span>&#160;    {</div>
<div class="line"><a name="l13604"></a><span class="lineno">13604</span>&#160;$1  RGBQUAD* pix = NULL;</div>
<div class="line"><a name="l13605"></a><span class="lineno">13605</span>&#160;    <span class="keywordflow">if</span> (!pixels) {$ pixels = &amp;pix; }</div>
<div class="line"><a name="l13606"></a><span class="lineno">13606</span>&#160; </div>
<div class="line"><a name="l13607"></a><span class="lineno">13607</span>&#160;$   HDC dc = <a class="code" href="group___drawing.html#ga9b0d66f152f2b04e9c4511e3e7f2c521">txCreateCompatibleDC</a> (sizeX, sizeY, NULL, pixels);</div>
<div class="line"><a name="l13608"></a><span class="lineno">13608</span>&#160; </div>
<div class="line"><a name="l13609"></a><span class="lineno">13609</span>&#160;$   RGBQUAD black = { 0, 0, 0, 255 };</div>
<div class="line"><a name="l13610"></a><span class="lineno">13610</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sizeX * sizeY; i++) (*pixels)[i] = black;  <span class="comment">//-V108</span></div>
<div class="line"><a name="l13611"></a><span class="lineno">13611</span>&#160; </div>
<div class="line"><a name="l13612"></a><span class="lineno">13612</span>&#160;$   <span class="keywordflow">return</span> dc;</div>
<div class="line"><a name="l13613"></a><span class="lineno">13613</span>&#160;    }</div>
<div class="line"><a name="l13614"></a><span class="lineno">13614</span>&#160; </div>
<div class="line"><a name="l13615"></a><span class="lineno">13615</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13616"></a><span class="lineno">13616</span>&#160; </div>
<div class="line"><a name="l13617"></a><span class="lineno">13617</span>&#160;HDC <a class="code" href="group___drawing.html#ga7535f88c0fd15b4b49195060d38f2603">txCreateDIBSection</a> (<span class="keywordtype">double</span> sizeX, <span class="keywordtype">double</span> sizeY, COLORREF** pixels)</div>
<div class="line"><a name="l13618"></a><span class="lineno">13618</span>&#160;    {</div>
<div class="line"><a name="l13619"></a><span class="lineno">13619</span>&#160;$1  <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga7535f88c0fd15b4b49195060d38f2603">txCreateDIBSection</a> (sizeX, sizeY, (RGBQUAD**) pixels);</div>
<div class="line"><a name="l13620"></a><span class="lineno">13620</span>&#160;    }</div>
<div class="line"><a name="l13621"></a><span class="lineno">13621</span>&#160; </div>
<div class="line"><a name="l13622"></a><span class="lineno">13622</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13623"></a><span class="lineno">13623</span>&#160; </div>
<div class="line"><a name="l13624"></a><span class="lineno">13624</span>&#160;HDC <a class="code" href="group___drawing.html#ga2cba42b999b157ec7a7d2bd32dfcc709">txLoadImage</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> filename[], <span class="keywordtype">int</span> sizeX <span class="comment">/*= 0*/</span>, <span class="keywordtype">int</span> sizeY <span class="comment">/*= 0*/</span>,</div>
<div class="line"><a name="l13625"></a><span class="lineno">13625</span>&#160;                 <span class="keywordtype">unsigned</span> imageFlags <span class="comment">/*= IMAGE_BITMAP*/</span>, <span class="keywordtype">unsigned</span> loadFlags <span class="comment">/*= LR_LOADFROMFILE*/</span>)</div>
<div class="line"><a name="l13626"></a><span class="lineno">13626</span>&#160;    {</div>
<div class="line"><a name="l13627"></a><span class="lineno">13627</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (filename &amp;&amp; *filename)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13628"></a><span class="lineno">13628</span>&#160; </div>
<div class="line"><a name="l13629"></a><span class="lineno">13629</span>&#160;$   HBITMAP image = (HBITMAP) Win32::LoadImage ((loadFlags &amp; LR_LOADFROMFILE)? NULL : GetModuleHandle (NULL),</div>
<div class="line"><a name="l13630"></a><span class="lineno">13630</span>&#160;                                                 filename, imageFlags, sizeX, sizeY, loadFlags);</div>
<div class="line"><a name="l13631"></a><span class="lineno">13631</span>&#160;$   <span class="keywordflow">if</span> (!image) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13632"></a><span class="lineno">13632</span>&#160; </div>
<div class="line"><a name="l13633"></a><span class="lineno">13633</span>&#160;$   HDC dc = <a class="code" href="group___drawing.html#ga9b0d66f152f2b04e9c4511e3e7f2c521">txCreateCompatibleDC</a> (sizeX, sizeY, image);</div>
<div class="line"><a name="l13634"></a><span class="lineno">13634</span>&#160; </div>
<div class="line"><a name="l13635"></a><span class="lineno">13635</span>&#160;$   <span class="keywordflow">if</span> (!(loadFlags &amp; LR_LOADFROMFILE)) <span class="keywordflow">return</span> dc;</div>
<div class="line"><a name="l13636"></a><span class="lineno">13636</span>&#160; </div>
<div class="line"><a name="l13637"></a><span class="lineno">13637</span>&#160;$   <span class="keyword">static</span> std::map &lt;std::string, unsigned&gt; loadTimes;</div>
<div class="line"><a name="l13638"></a><span class="lineno">13638</span>&#160;$   std::string file = filename;</div>
<div class="line"><a name="l13639"></a><span class="lineno">13639</span>&#160;$   <span class="keywordtype">unsigned</span> time    = GetTickCount();</div>
<div class="line"><a name="l13640"></a><span class="lineno">13640</span>&#160; </div>
<div class="line"><a name="l13641"></a><span class="lineno">13641</span>&#160;$   <span class="keywordflow">if</span> ((<span class="keywordtype">long</span>) (time - loadTimes [file]) &lt; <a class="code" href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a>)</div>
<div class="line"><a name="l13642"></a><span class="lineno">13642</span>&#160;        {$ txNotifyIcon (NIIF_WARNING, NULL, <span class="stringliteral">&quot;Вы загружаете \&quot;%s\&quot; слишком часто, программа будет тормозить.&quot;</span>, filename); }</div>
<div class="line"><a name="l13643"></a><span class="lineno">13643</span>&#160; </div>
<div class="line"><a name="l13644"></a><span class="lineno">13644</span>&#160;$   loadTimes [file] = time;</div>
<div class="line"><a name="l13645"></a><span class="lineno">13645</span>&#160; </div>
<div class="line"><a name="l13646"></a><span class="lineno">13646</span>&#160;$   <span class="keywordflow">return</span> dc;</div>
<div class="line"><a name="l13647"></a><span class="lineno">13647</span>&#160;    }</div>
<div class="line"><a name="l13648"></a><span class="lineno">13648</span>&#160; </div>
<div class="line"><a name="l13649"></a><span class="lineno">13649</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13650"></a><span class="lineno">13650</span>&#160; </div>
<div class="line"><a name="l13651"></a><span class="lineno">13651</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga505f212582bf9b2bf95a4ef15f84af42">txDeleteDC</a> (HDC* pdc)</div>
<div class="line"><a name="l13652"></a><span class="lineno">13652</span>&#160;    {</div>
<div class="line"><a name="l13653"></a><span class="lineno">13653</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (pdc)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13654"></a><span class="lineno">13654</span>&#160; </div>
<div class="line"><a name="l13655"></a><span class="lineno">13655</span>&#160;$   HDC  dc = *pdc;</div>
<div class="line"><a name="l13656"></a><span class="lineno">13656</span>&#160;$   <span class="keywordtype">bool</span> ok = _txBuffer_Delete (pdc);</div>
<div class="line"><a name="l13657"></a><span class="lineno">13657</span>&#160;$   <span class="keywordflow">if</span> (!ok) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13658"></a><span class="lineno">13658</span>&#160; </div>
<div class="line"><a name="l13659"></a><span class="lineno">13659</span>&#160;$   <span class="keywordflow">if</span> (!_txCanvas_UserDCs) <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13660"></a><span class="lineno">13660</span>&#160; </div>
<div class="line"><a name="l13661"></a><span class="lineno">13661</span>&#160;$   <a class="code" href="classtx_auto_lock.html">txAutoLock</a> _lock;</div>
<div class="line"><a name="l13662"></a><span class="lineno">13662</span>&#160; </div>
<div class="line"><a name="l13663"></a><span class="lineno">13663</span>&#160;$   <span class="keywordflow">for</span> (std::vector &lt;HDC&gt; ::iterator it = _txCanvas_UserDCs-&gt;begin(); it != _txCanvas_UserDCs-&gt;end(); ++it)</div>
<div class="line"><a name="l13664"></a><span class="lineno">13664</span>&#160;        <span class="keywordflow">if</span> (*it == dc)</div>
<div class="line"><a name="l13665"></a><span class="lineno">13665</span>&#160;            {</div>
<div class="line"><a name="l13666"></a><span class="lineno">13666</span>&#160;$           std::swap (*it, _txCanvas_UserDCs-&gt;back());</div>
<div class="line"><a name="l13667"></a><span class="lineno">13667</span>&#160;$           _txCanvas_UserDCs-&gt;pop_back();</div>
<div class="line"><a name="l13668"></a><span class="lineno">13668</span>&#160;$           <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l13669"></a><span class="lineno">13669</span>&#160;            }</div>
<div class="line"><a name="l13670"></a><span class="lineno">13670</span>&#160; </div>
<div class="line"><a name="l13671"></a><span class="lineno">13671</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13672"></a><span class="lineno">13672</span>&#160;    }</div>
<div class="line"><a name="l13673"></a><span class="lineno">13673</span>&#160; </div>
<div class="line"><a name="l13674"></a><span class="lineno">13674</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13675"></a><span class="lineno">13675</span>&#160; </div>
<div class="line"><a name="l13676"></a><span class="lineno">13676</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga505f212582bf9b2bf95a4ef15f84af42">txDeleteDC</a> (HDC dc)</div>
<div class="line"><a name="l13677"></a><span class="lineno">13677</span>&#160;    {</div>
<div class="line"><a name="l13678"></a><span class="lineno">13678</span>&#160;$1  <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga505f212582bf9b2bf95a4ef15f84af42">txDeleteDC</a> (&amp;dc);</div>
<div class="line"><a name="l13679"></a><span class="lineno">13679</span>&#160;    }</div>
<div class="line"><a name="l13680"></a><span class="lineno">13680</span>&#160; </div>
<div class="line"><a name="l13681"></a><span class="lineno">13681</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13682"></a><span class="lineno">13682</span>&#160; </div>
<div class="line"><a name="l13683"></a><span class="lineno">13683</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (HDC destImage,   <span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> height,</div>
<div class="line"><a name="l13684"></a><span class="lineno">13684</span>&#160;               HDC sourceImage, <span class="keywordtype">double</span> xSource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> ySource <span class="comment">/*= 0*/</span>, <span class="keywordtype">unsigned</span> operation <span class="comment">/*= SRCCOPY*/</span>)</div>
<div class="line"><a name="l13685"></a><span class="lineno">13685</span>&#160;    {</div>
<div class="line"><a name="l13686"></a><span class="lineno">13686</span>&#160;$1  <span class="keywordflow">if</span> (_TX_HDC_FAILED (destImage))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13687"></a><span class="lineno">13687</span>&#160;$   <span class="keywordflow">if</span> (_TX_HDC_FAILED (sourceImage)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13688"></a><span class="lineno">13688</span>&#160; </div>
<div class="line"><a name="l13689"></a><span class="lineno">13689</span>&#160;$   POINT size = <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (sourceImage);</div>
<div class="line"><a name="l13690"></a><span class="lineno">13690</span>&#160;$   <span class="keywordflow">if</span> (!width)  width  = size.x;  <span class="comment">//-V550</span></div>
<div class="line"><a name="l13691"></a><span class="lineno">13691</span>&#160;$   <span class="keywordflow">if</span> (!height) height = size.y;  <span class="comment">//-V550</span></div>
<div class="line"><a name="l13692"></a><span class="lineno">13692</span>&#160; </div>
<div class="line"><a name="l13693"></a><span class="lineno">13693</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::BitBlt (destImage,   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (yDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (width), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (height),</div>
<div class="line"><a name="l13694"></a><span class="lineno">13694</span>&#160;                                    sourceImage, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xSource), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (ySource), operation)), destImage);</div>
<div class="line"><a name="l13695"></a><span class="lineno">13695</span>&#160;    }</div>
<div class="line"><a name="l13696"></a><span class="lineno">13696</span>&#160; </div>
<div class="line"><a name="l13697"></a><span class="lineno">13697</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13698"></a><span class="lineno">13698</span>&#160; </div>
<div class="line"><a name="l13699"></a><span class="lineno">13699</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (<span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, HDC sourceImage, <span class="keywordtype">double</span> xSource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> ySource <span class="comment">/*= 0*/</span>)</div>
<div class="line"><a name="l13700"></a><span class="lineno">13700</span>&#160;    {</div>
<div class="line"><a name="l13701"></a><span class="lineno">13701</span>&#160;$1  <span class="keywordflow">if</span> (_TX_TXWINDOW_FAILED()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13702"></a><span class="lineno">13702</span>&#160; </div>
<div class="line"><a name="l13703"></a><span class="lineno">13703</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (<a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>(), xDest, yDest, 0, 0, sourceImage, xSource, ySource);</div>
<div class="line"><a name="l13704"></a><span class="lineno">13704</span>&#160;    }</div>
<div class="line"><a name="l13705"></a><span class="lineno">13705</span>&#160; </div>
<div class="line"><a name="l13706"></a><span class="lineno">13706</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13707"></a><span class="lineno">13707</span>&#160; </div>
<div class="line"><a name="l13708"></a><span class="lineno">13708</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga54f48f0bcb9453add294e0a9f8b1fb1d">txTransparentBlt</a> (HDC destImage,   <span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> height,</div>
<div class="line"><a name="l13709"></a><span class="lineno">13709</span>&#160;                       HDC sourceImage, <span class="keywordtype">double</span> xSource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> ySource <span class="comment">/*= 0*/</span>, COLORREF transColor <span class="comment">/*= TX_BLACK*/</span>)</div>
<div class="line"><a name="l13710"></a><span class="lineno">13710</span>&#160;    {</div>
<div class="line"><a name="l13711"></a><span class="lineno">13711</span>&#160;    <span class="comment">// Это проверки того, правильные ли HDC вы передали в функцию.</span></div>
<div class="line"><a name="l13712"></a><span class="lineno">13712</span>&#160;    <span class="comment">// Не бойтесь долларов - &lt;s&gt;это не запрещенная валюта&lt;/s&gt; это макросы для отладки TXLib&#39;а.</span></div>
<div class="line"><a name="l13713"></a><span class="lineno">13713</span>&#160;    <span class="comment">// При первом чтении это можно пропустить.</span></div>
<div class="line"><a name="l13714"></a><span class="lineno">13714</span>&#160; </div>
<div class="line"><a name="l13715"></a><span class="lineno">13715</span>&#160;$1  <span class="keywordflow">if</span> (_TX_HDC_FAILED (destImage))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13716"></a><span class="lineno">13716</span>&#160;$   <span class="keywordflow">if</span> (_TX_HDC_FAILED (sourceImage)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13717"></a><span class="lineno">13717</span>&#160; </div>
<div class="line"><a name="l13718"></a><span class="lineno">13718</span>&#160;    <span class="comment">// Это автоматическое определение размеров картинки (точнее, HDC источника - source) с помощью txGetExtent().</span></div>
<div class="line"><a name="l13719"></a><span class="lineno">13719</span>&#160;    <span class="comment">// При первом чтении это можно пропустить.</span></div>
<div class="line"><a name="l13720"></a><span class="lineno">13720</span>&#160; </div>
<div class="line"><a name="l13721"></a><span class="lineno">13721</span>&#160;$   POINT size = <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (sourceImage);</div>
<div class="line"><a name="l13722"></a><span class="lineno">13722</span>&#160;$   <span class="keywordflow">if</span> (!width)  width  = size.x;  <span class="comment">//-V550</span></div>
<div class="line"><a name="l13723"></a><span class="lineno">13723</span>&#160;$   <span class="keywordflow">if</span> (!height) height = size.y;  <span class="comment">//-V550</span></div>
<div class="line"><a name="l13724"></a><span class="lineno">13724</span>&#160; </div>
<div class="line"><a name="l13725"></a><span class="lineno">13725</span>&#160;    <span class="comment">// Это проверка того, что картинка (или ее часть) правильно попадает в окно (точнее, HDC приемника - destination, dest).</span></div>
<div class="line"><a name="l13726"></a><span class="lineno">13726</span>&#160;    <span class="comment">// Если она &quot;вылезает&quot; из окна в любую сторону, то Win32::TransparentBlt() не будет работать. Эта проверка происходит только</span></div>
<div class="line"><a name="l13727"></a><span class="lineno">13727</span>&#160;    <span class="comment">// в режиме отладки (когда не задан макрос NDEBUG - No Debugging, без отладки).</span></div>
<div class="line"><a name="l13728"></a><span class="lineno">13728</span>&#160;    <span class="comment">// При первом чтении это можно пропустить.</span></div>
<div class="line"><a name="l13729"></a><span class="lineno">13729</span>&#160; </div>
<div class="line"><a name="l13730"></a><span class="lineno">13730</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l13731"></a><span class="lineno">13731</span>&#160; </div>
<div class="line"><a name="l13732"></a><span class="lineno">13732</span>&#160;$   <span class="keywordflow">if</span> (!(0 &lt;= xSource &amp;&amp; xSource + width  &lt;= size.x &amp;&amp;</div>
<div class="line"><a name="l13733"></a><span class="lineno">13733</span>&#160;          0 &lt;= ySource &amp;&amp; ySource + height &lt;= size.y))</div>
<div class="line"><a name="l13734"></a><span class="lineno">13734</span>&#160;        {</div>
<div class="line"><a name="l13735"></a><span class="lineno">13735</span>&#160;$       SetLastError (ERROR_INVALID_DATA);</div>
<div class="line"><a name="l13736"></a><span class="lineno">13736</span>&#160;$       <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;Прямоугольник копируемой области {%g, %g, %g, %g} не полностью лежит внутри изображения-источника {%d, %d, %d, %d}, &quot;</span></div>
<div class="line"><a name="l13737"></a><span class="lineno">13737</span>&#160;                  <span class="stringliteral">&quot;функция txTransparentBlt() работать не будет.&quot;</span>, xSource, ySource, xSource + width, ySource + height, 0, 0, (<span class="keywordtype">int</span>) size.x, (<span class="keywordtype">int</span>) size.y);</div>
<div class="line"><a name="l13738"></a><span class="lineno">13738</span>&#160;        }</div>
<div class="line"><a name="l13739"></a><span class="lineno">13739</span>&#160; </div>
<div class="line"><a name="l13740"></a><span class="lineno">13740</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l13741"></a><span class="lineno">13741</span>&#160; </div>
<div class="line"><a name="l13742"></a><span class="lineno">13742</span>&#160;$   <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13743"></a><span class="lineno">13743</span>&#160; </div>
<div class="line"><a name="l13744"></a><span class="lineno">13744</span>&#160;$   <span class="keywordflow">if</span> (Win32::TransparentBlt)</div>
<div class="line"><a name="l13745"></a><span class="lineno">13745</span>&#160;        {</div>
<div class="line"><a name="l13746"></a><span class="lineno">13746</span>&#160;        <span class="comment">// А вот теперь уже надо начать читать.</span></div>
<div class="line"><a name="l13747"></a><span class="lineno">13747</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l13748"></a><span class="lineno">13748</span>&#160;        <span class="comment">// Ниже - это вызов стандартной Win32::TransparentBlt() из ядра Windows. Погуглите &quot;Windows TransparentBlt function&quot;</span></div>
<div class="line"><a name="l13749"></a><span class="lineno">13749</span>&#160;        <span class="comment">// и почитайте про ее параметры.</span></div>
<div class="line"><a name="l13750"></a><span class="lineno">13750</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l13751"></a><span class="lineno">13751</span>&#160;        <span class="comment">// Как видите, оригинальная функция из Win32 принимает размеры не только исходной, но и итоговой картинки, и если они не</span></div>
<div class="line"><a name="l13752"></a><span class="lineno">13752</span>&#160;        <span class="comment">// совпадают, то картинка будет уменьшена или увеличена. TXlib&#39;овская &lt;s&gt;паленая&lt;/s&gt; функция TransparentBlt предполагает, что</span></div>
<div class="line"><a name="l13753"></a><span class="lineno">13753</span>&#160;        <span class="comment">// эти размеры всегда совпадают, и поэтому при работе с TransparentBlt() масштаб будет всегда 1:1. &lt;s&gt;Так себе решение, но&lt;/s&gt;</span></div>
<div class="line"><a name="l13754"></a><span class="lineno">13754</span>&#160;        <span class="comment">// это сделано для упрощения вызова функции TransparentBlt().</span></div>
<div class="line"><a name="l13755"></a><span class="lineno">13755</span>&#160; </div>
<div class="line"><a name="l13756"></a><span class="lineno">13756</span>&#160;                               <span class="comment">// Только то, что эти параметры передаются одинаковыми, не дает возможность менять масштаб картинки!        // &lt;&lt;--</span></div>
<div class="line"><a name="l13757"></a><span class="lineno">13757</span>&#160;                               <span class="comment">//                                                                                                          // &lt;&lt;--</span></div>
<div class="line"><a name="l13758"></a><span class="lineno">13758</span>&#160;                               <span class="comment">//                                                                    |||||          ||||||                 // &lt;&lt;--</span></div>
<div class="line"><a name="l13759"></a><span class="lineno">13759</span>&#160;                               <span class="comment">//                                                                    vvvvv          vvvvvv                 // &lt;&lt;--</span></div>
<div class="line"><a name="l13760"></a><span class="lineno">13760</span>&#160;                                                                                                                                           <span class="comment">// &lt;&lt;--</span></div>
<div class="line"><a name="l13761"></a><span class="lineno">13761</span>&#160;$       ok &amp;= <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::TransparentBlt (destImage,   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (yDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (width), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (height),               <span class="comment">// &lt;&lt;&lt;&lt;</span></div>
<div class="line"><a name="l13762"></a><span class="lineno">13762</span>&#160;                                               sourceImage, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xSource), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (ySource), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (width), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (height), transColor)), <span class="comment">// &lt;&lt;&lt;&lt;</span></div>
<div class="line"><a name="l13763"></a><span class="lineno">13763</span>&#160;                                               destImage);                                                                                 <span class="comment">// &lt;&lt;--</span></div>
<div class="line"><a name="l13764"></a><span class="lineno">13764</span>&#160;                               <span class="comment">//                                                                    ^^^^^          ^^^^^^                 // &lt;&lt;--</span></div>
<div class="line"><a name="l13765"></a><span class="lineno">13765</span>&#160;                               <span class="comment">//                                                                    |||||          ||||||                 // &lt;&lt;--</span></div>
<div class="line"><a name="l13766"></a><span class="lineno">13766</span>&#160;                               <span class="comment">//                                                                                                          // &lt;&lt;--</span></div>
<div class="line"><a name="l13767"></a><span class="lineno">13767</span>&#160;        }                      <span class="comment">// См. &quot;TransparentBlt function&quot; в Google, ищите смысл параметров wSrc и wDest (hSrc и hDest). Думайте!     // &lt;&lt;--</span></div>
<div class="line"><a name="l13768"></a><span class="lineno">13768</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l13769"></a><span class="lineno">13769</span>&#160;        {</div>
<div class="line"><a name="l13770"></a><span class="lineno">13770</span>&#160;$       ok &amp;= <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::BitBlt         (destImage,   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (yDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (width), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (height),</div>
<div class="line"><a name="l13771"></a><span class="lineno">13771</span>&#160;                                               sourceImage, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xSource), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (ySource), SRCCOPY)),</div>
<div class="line"><a name="l13772"></a><span class="lineno">13772</span>&#160;                                               destImage);</div>
<div class="line"><a name="l13773"></a><span class="lineno">13773</span>&#160;        }</div>
<div class="line"><a name="l13774"></a><span class="lineno">13774</span>&#160; </div>
<div class="line"><a name="l13775"></a><span class="lineno">13775</span>&#160;    <span class="comment">// В TXLib-овской функции txTransparentBlt() проверок и комментариев больше, чем рабочего кода, и это как бы намекает, что</span></div>
<div class="line"><a name="l13776"></a><span class="lineno">13776</span>&#160;    <span class="comment">// нетрудно сделать свою аналогичную функцию без ограничений масштаба отображения. &lt;s&gt;Если ты дочитал до этого места,&lt;/s&gt;</span></div>
<div class="line"><a name="l13777"></a><span class="lineno">13777</span>&#160;    <span class="comment">// пересядь с иглы TXLib&#39;а на поверхность GDI Win32, &lt;s&gt;хотя GDI тоже так себе, так что лучше заюзай GDI+, SFML, OpenGL</span></div>
<div class="line"><a name="l13778"></a><span class="lineno">13778</span>&#160;    <span class="comment">// или DirectX, будет круто. Хотя это и сложнее.&lt;/s&gt;</span></div>
<div class="line"><a name="l13779"></a><span class="lineno">13779</span>&#160; </div>
<div class="line"><a name="l13780"></a><span class="lineno">13780</span>&#160;    <span class="comment">// Пожалуйста, не надо бездумно копировать себе в программу код из TXLib&#39;а. Осмыслите его и напишите свою функцию сами,</span></div>
<div class="line"><a name="l13781"></a><span class="lineno">13781</span>&#160;    <span class="comment">// иначе вы породите невнятный паленый код и безнадежно испортите себе карму. :((</span></div>
<div class="line"><a name="l13782"></a><span class="lineno">13782</span>&#160; </div>
<div class="line"><a name="l13783"></a><span class="lineno">13783</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13784"></a><span class="lineno">13784</span>&#160;    }</div>
<div class="line"><a name="l13785"></a><span class="lineno">13785</span>&#160; </div>
<div class="line"><a name="l13786"></a><span class="lineno">13786</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13787"></a><span class="lineno">13787</span>&#160; </div>
<div class="line"><a name="l13788"></a><span class="lineno">13788</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga54f48f0bcb9453add294e0a9f8b1fb1d">txTransparentBlt</a> (<span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, HDC sourceImage,</div>
<div class="line"><a name="l13789"></a><span class="lineno">13789</span>&#160;                       COLORREF transColor <span class="comment">/*= TX_BLACK*/</span>, <span class="keywordtype">double</span> xSource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> ySource <span class="comment">/*= 0*/</span>)</div>
<div class="line"><a name="l13790"></a><span class="lineno">13790</span>&#160;    {</div>
<div class="line"><a name="l13791"></a><span class="lineno">13791</span>&#160;$1  <span class="keywordflow">if</span> (_TX_TXWINDOW_FAILED()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13792"></a><span class="lineno">13792</span>&#160; </div>
<div class="line"><a name="l13793"></a><span class="lineno">13793</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga54f48f0bcb9453add294e0a9f8b1fb1d">txTransparentBlt</a> (<a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>(), xDest, yDest, 0, 0, sourceImage, xSource, ySource, transColor);</div>
<div class="line"><a name="l13794"></a><span class="lineno">13794</span>&#160;    }</div>
<div class="line"><a name="l13795"></a><span class="lineno">13795</span>&#160; </div>
<div class="line"><a name="l13796"></a><span class="lineno">13796</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13797"></a><span class="lineno">13797</span>&#160; </div>
<div class="line"><a name="l13798"></a><span class="lineno">13798</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga4d6f780cdef622df0fda71d0b3cfee52">txAlphaBlend</a> (HDC destImage,   <span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> height,</div>
<div class="line"><a name="l13799"></a><span class="lineno">13799</span>&#160;                   HDC sourceImage, <span class="keywordtype">double</span> xSource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> ySource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> alpha <span class="comment">/*= 1.0*/</span>)</div>
<div class="line"><a name="l13800"></a><span class="lineno">13800</span>&#160;    {</div>
<div class="line"><a name="l13801"></a><span class="lineno">13801</span>&#160;$1  <span class="keywordflow">if</span> (_TX_HDC_FAILED (destImage))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13802"></a><span class="lineno">13802</span>&#160;$   <span class="keywordflow">if</span> (_TX_HDC_FAILED (sourceImage)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13803"></a><span class="lineno">13803</span>&#160; </div>
<div class="line"><a name="l13804"></a><span class="lineno">13804</span>&#160;$   POINT size = <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (sourceImage);</div>
<div class="line"><a name="l13805"></a><span class="lineno">13805</span>&#160;$   <span class="keywordflow">if</span> (!width)  width  = size.x;  <span class="comment">//-V550</span></div>
<div class="line"><a name="l13806"></a><span class="lineno">13806</span>&#160;$   <span class="keywordflow">if</span> (!height) height = size.y;  <span class="comment">//-V550</span></div>
<div class="line"><a name="l13807"></a><span class="lineno">13807</span>&#160; </div>
<div class="line"><a name="l13808"></a><span class="lineno">13808</span>&#160;<span class="preprocessor">#if !defined (NDEBUG)</span></div>
<div class="line"><a name="l13809"></a><span class="lineno">13809</span>&#160; </div>
<div class="line"><a name="l13810"></a><span class="lineno">13810</span>&#160;$   <span class="keywordflow">if</span> (!(0 &lt;= xSource &amp;&amp; xSource + width  &lt;= size.x &amp;&amp;</div>
<div class="line"><a name="l13811"></a><span class="lineno">13811</span>&#160;          0 &lt;= ySource &amp;&amp; ySource + height &lt;= size.y))</div>
<div class="line"><a name="l13812"></a><span class="lineno">13812</span>&#160;        {</div>
<div class="line"><a name="l13813"></a><span class="lineno">13813</span>&#160;$       SetLastError (ERROR_INVALID_DATA);</div>
<div class="line"><a name="l13814"></a><span class="lineno">13814</span>&#160;$       <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;Прямоугольник копируемой области {%g, %g, %g, %g} не полностью лежит внутри изображения-источника {%d, %d, %d, %d}, &quot;</span></div>
<div class="line"><a name="l13815"></a><span class="lineno">13815</span>&#160;                  <span class="stringliteral">&quot;функция txAlphaBlend() работать не будет.&quot;</span>, xSource, ySource, xSource + width, ySource + height, 0, 0, (<span class="keywordtype">int</span>) size.x, (<span class="keywordtype">int</span>) size.y);</div>
<div class="line"><a name="l13816"></a><span class="lineno">13816</span>&#160;        }</div>
<div class="line"><a name="l13817"></a><span class="lineno">13817</span>&#160; </div>
<div class="line"><a name="l13818"></a><span class="lineno">13818</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l13819"></a><span class="lineno">13819</span>&#160; </div>
<div class="line"><a name="l13820"></a><span class="lineno">13820</span>&#160;$   <span class="keywordflow">if</span> (alpha &lt; 0) alpha = 0;</div>
<div class="line"><a name="l13821"></a><span class="lineno">13821</span>&#160;$   <span class="keywordflow">if</span> (alpha &gt; 1) alpha = 1;</div>
<div class="line"><a name="l13822"></a><span class="lineno">13822</span>&#160; </div>
<div class="line"><a name="l13823"></a><span class="lineno">13823</span>&#160;$   BITMAP bmap = { 0, 0, 0, 0, 0, 24 };</div>
<div class="line"><a name="l13824"></a><span class="lineno">13824</span>&#160;$   <span class="keywordtype">bool</span> ok = !!Win32::GetObject (<a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> ((Win32::GetCurrentObject (sourceImage, OBJ_BITMAP)), sourceImage), <span class="keyword">sizeof</span> (bmap), &amp;bmap);</div>
<div class="line"><a name="l13825"></a><span class="lineno">13825</span>&#160; </div>
<div class="line"><a name="l13826"></a><span class="lineno">13826</span>&#160;$   BLENDFUNCTION blend = { AC_SRC_OVER, 0, (BYTE) <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (alpha * 255), (BYTE) ((bmap.bmBitsPixel == 32)? AC_SRC_ALPHA : 0) };  <span class="comment">//-V112 //-V821 //-V2551</span></div>
<div class="line"><a name="l13827"></a><span class="lineno">13827</span>&#160; </div>
<div class="line"><a name="l13828"></a><span class="lineno">13828</span>&#160;$   <span class="keywordflow">if</span> (Win32::AlphaBlend)</div>
<div class="line"><a name="l13829"></a><span class="lineno">13829</span>&#160;        {</div>
<div class="line"><a name="l13830"></a><span class="lineno">13830</span>&#160;$       ok &amp;= <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::AlphaBlend (destImage,   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (yDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (width), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (height),</div>
<div class="line"><a name="l13831"></a><span class="lineno">13831</span>&#160;                                           sourceImage, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xSource), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (ySource), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (width), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (height), blend)),</div>
<div class="line"><a name="l13832"></a><span class="lineno">13832</span>&#160;                                           destImage);</div>
<div class="line"><a name="l13833"></a><span class="lineno">13833</span>&#160;        }</div>
<div class="line"><a name="l13834"></a><span class="lineno">13834</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l13835"></a><span class="lineno">13835</span>&#160;        {</div>
<div class="line"><a name="l13836"></a><span class="lineno">13836</span>&#160;$       ok &amp;= <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (!!(Win32::BitBlt     (destImage,   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (yDest),   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (width), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (height),</div>
<div class="line"><a name="l13837"></a><span class="lineno">13837</span>&#160;                                           sourceImage, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (xSource), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (ySource), SRCCOPY)),</div>
<div class="line"><a name="l13838"></a><span class="lineno">13838</span>&#160;                                           destImage);</div>
<div class="line"><a name="l13839"></a><span class="lineno">13839</span>&#160;$       ok = <span class="keyword">false</span>;  <span class="comment">//-V519</span></div>
<div class="line"><a name="l13840"></a><span class="lineno">13840</span>&#160;        }</div>
<div class="line"><a name="l13841"></a><span class="lineno">13841</span>&#160; </div>
<div class="line"><a name="l13842"></a><span class="lineno">13842</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13843"></a><span class="lineno">13843</span>&#160;    }</div>
<div class="line"><a name="l13844"></a><span class="lineno">13844</span>&#160; </div>
<div class="line"><a name="l13845"></a><span class="lineno">13845</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13846"></a><span class="lineno">13846</span>&#160; </div>
<div class="line"><a name="l13847"></a><span class="lineno">13847</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga4d6f780cdef622df0fda71d0b3cfee52">txAlphaBlend</a> (<span class="keywordtype">double</span> xDest, <span class="keywordtype">double</span> yDest, HDC sourceImage,</div>
<div class="line"><a name="l13848"></a><span class="lineno">13848</span>&#160;                   <span class="keywordtype">double</span> xSource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> ySource <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> alpha <span class="comment">/*= 1.0*/</span>)</div>
<div class="line"><a name="l13849"></a><span class="lineno">13849</span>&#160;    {</div>
<div class="line"><a name="l13850"></a><span class="lineno">13850</span>&#160;$1  <span class="keywordflow">if</span> (_TX_TXWINDOW_FAILED()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13851"></a><span class="lineno">13851</span>&#160; </div>
<div class="line"><a name="l13852"></a><span class="lineno">13852</span>&#160;$   <span class="keywordflow">return</span> <a class="code" href="group___drawing.html#ga4d6f780cdef622df0fda71d0b3cfee52">txAlphaBlend</a> (<a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>(), xDest, yDest, 0, 0, sourceImage, xSource, ySource, alpha);</div>
<div class="line"><a name="l13853"></a><span class="lineno">13853</span>&#160;    }</div>
<div class="line"><a name="l13854"></a><span class="lineno">13854</span>&#160; </div>
<div class="line"><a name="l13855"></a><span class="lineno">13855</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13856"></a><span class="lineno">13856</span>&#160; </div>
<div class="line"><a name="l13857"></a><span class="lineno">13857</span>&#160;HDC <a class="code" href="group___drawing.html#ga6280d640bb3b08dc82c8dd29caf5ff47">txUseAlpha</a> (HDC image)</div>
<div class="line"><a name="l13858"></a><span class="lineno">13858</span>&#160;    {</div>
<div class="line"><a name="l13859"></a><span class="lineno">13859</span>&#160;$1  <span class="keywordflow">if</span> (_TX_HDC_FAILED (image)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13860"></a><span class="lineno">13860</span>&#160; </div>
<div class="line"><a name="l13861"></a><span class="lineno">13861</span>&#160;$   HBITMAP bitmap = (HBITMAP) Win32::GetCurrentObject (image, OBJ_BITMAP);</div>
<div class="line"><a name="l13862"></a><span class="lineno">13862</span>&#160;$   <span class="keywordflow">if</span> (!bitmap) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13863"></a><span class="lineno">13863</span>&#160; </div>
<div class="line"><a name="l13864"></a><span class="lineno">13864</span>&#160;$   DIBSECTION dib = {};</div>
<div class="line"><a name="l13865"></a><span class="lineno">13865</span>&#160;$   Win32::GetObject (bitmap, <span class="keyword">sizeof</span> (dib), &amp;dib) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13866"></a><span class="lineno">13866</span>&#160; </div>
<div class="line"><a name="l13867"></a><span class="lineno">13867</span>&#160;$   POINT      size = {  dib.dsBm.bmWidth, dib.dsBm.bmHeight };</div>
<div class="line"><a name="l13868"></a><span class="lineno">13868</span>&#160;$   BITMAPINFO info = {{ <span class="keyword">sizeof</span> (info), size.x, size.y, 1, (WORD) (<span class="keyword">sizeof</span> (RGBQUAD) * 8), BI_RGB }};</div>
<div class="line"><a name="l13869"></a><span class="lineno">13869</span>&#160;$   RGBQUAD*   buf  = NULL;</div>
<div class="line"><a name="l13870"></a><span class="lineno">13870</span>&#160; </div>
<div class="line"><a name="l13871"></a><span class="lineno">13871</span>&#160;$   <span class="keywordtype">bool</span> isDIB = (dib.dsBm.bmPlanes        == 1                    &amp;&amp;</div>
<div class="line"><a name="l13872"></a><span class="lineno">13872</span>&#160;                  dib.dsBm.bmBitsPixel     == <span class="keyword">sizeof</span> (RGBQUAD) * 8 &amp;&amp;</div>
<div class="line"><a name="l13873"></a><span class="lineno">13873</span>&#160;                  dib.dsBmih.biCompression == DIB_RGB_COLORS       &amp;&amp;</div>
<div class="line"><a name="l13874"></a><span class="lineno">13874</span>&#160;                  dib.dsBm.bmBits);</div>
<div class="line"><a name="l13875"></a><span class="lineno">13875</span>&#160;$   <span class="keywordflow">if</span> (!isDIB)</div>
<div class="line"><a name="l13876"></a><span class="lineno">13876</span>&#160;        {</div>
<div class="line"><a name="l13877"></a><span class="lineno">13877</span>&#160;$       buf = <span class="keyword">new</span> (std::nothrow) RGBQUAD [size.x * size.y];  <span class="comment">//-V121</span></div>
<div class="line"><a name="l13878"></a><span class="lineno">13878</span>&#160;$       if (!buf) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l13879"></a><span class="lineno">13879</span>&#160; </div>
<div class="line"><a name="l13880"></a><span class="lineno">13880</span>&#160;$       Win32::GetDIBits (image, bitmap, 0, size.y, buf, &amp;info, DIB_RGB_COLORS) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13881"></a><span class="lineno">13881</span>&#160;        }</div>
<div class="line"><a name="l13882"></a><span class="lineno">13882</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l13883"></a><span class="lineno">13883</span>&#160;        {</div>
<div class="line"><a name="l13884"></a><span class="lineno">13884</span>&#160;$       buf = (RGBQUAD*) dib.dsBm.bmBits;</div>
<div class="line"><a name="l13885"></a><span class="lineno">13885</span>&#160;        }</div>
<div class="line"><a name="l13886"></a><span class="lineno">13886</span>&#160; </div>
<div class="line"><a name="l13887"></a><span class="lineno">13887</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; size.y; y++)</div>
<div class="line"><a name="l13888"></a><span class="lineno">13888</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; size.x; x++)</div>
<div class="line"><a name="l13889"></a><span class="lineno">13889</span>&#160;        {</div>
<div class="line"><a name="l13890"></a><span class="lineno">13890</span>&#160;        RGBQUAD* color = &amp;buf [x + y * size.x];  <span class="comment">// Get color at (x, y) within image buffer  //-V108</span></div>
<div class="line"><a name="l13891"></a><span class="lineno">13891</span>&#160; </div>
<div class="line"><a name="l13892"></a><span class="lineno">13892</span>&#160;        color-&gt;rgbRed   = (BYTE) <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (color-&gt;rgbRed   * color-&gt;rgbReserved / 255.0);</div>
<div class="line"><a name="l13893"></a><span class="lineno">13893</span>&#160;        color-&gt;rgbGreen = (BYTE) <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (color-&gt;rgbGreen * color-&gt;rgbReserved / 255.0);</div>
<div class="line"><a name="l13894"></a><span class="lineno">13894</span>&#160;        color-&gt;rgbBlue  = (BYTE) <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (color-&gt;rgbBlue  * color-&gt;rgbReserved / 255.0);</div>
<div class="line"><a name="l13895"></a><span class="lineno">13895</span>&#160;        }</div>
<div class="line"><a name="l13896"></a><span class="lineno">13896</span>&#160; </div>
<div class="line"><a name="l13897"></a><span class="lineno">13897</span>&#160;$   <span class="keywordflow">if</span> (!isDIB)</div>
<div class="line"><a name="l13898"></a><span class="lineno">13898</span>&#160;        {</div>
<div class="line"><a name="l13899"></a><span class="lineno">13899</span>&#160;$       Win32::SetDIBitsToDevice (image, 0, 0, size.x, size.y, 0, 0, 0, size.y, buf, &amp;info, DIB_RGB_COLORS) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13900"></a><span class="lineno">13900</span>&#160; </div>
<div class="line"><a name="l13901"></a><span class="lineno">13901</span>&#160;$       <span class="keyword">delete</span>[] buf;</div>
<div class="line"><a name="l13902"></a><span class="lineno">13902</span>&#160;        }</div>
<div class="line"><a name="l13903"></a><span class="lineno">13903</span>&#160; </div>
<div class="line"><a name="l13904"></a><span class="lineno">13904</span>&#160;$   <span class="keywordflow">return</span> image;</div>
<div class="line"><a name="l13905"></a><span class="lineno">13905</span>&#160;    }</div>
<div class="line"><a name="l13906"></a><span class="lineno">13906</span>&#160; </div>
<div class="line"><a name="l13907"></a><span class="lineno">13907</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13908"></a><span class="lineno">13908</span>&#160; </div>
<div class="line"><a name="l13909"></a><span class="lineno">13909</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga45389db909311454bbdfed3898d760d1">txSaveImage</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> filename[], HDC dc <span class="comment">/*= txDC()*/</span>)</div>
<div class="line"><a name="l13910"></a><span class="lineno">13910</span>&#160;    {</div>
<div class="line"><a name="l13911"></a><span class="lineno">13911</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED    (filename)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13912"></a><span class="lineno">13912</span>&#160;$   <span class="keywordflow">if</span> (_TX_DEFAULT_HDC_FAILED (dc))       <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l13913"></a><span class="lineno">13913</span>&#160; </div>
<div class="line"><a name="l13914"></a><span class="lineno">13914</span>&#160;$   POINT size = <a class="code" href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a> (dc);</div>
<div class="line"><a name="l13915"></a><span class="lineno">13915</span>&#160; </div>
<div class="line"><a name="l13916"></a><span class="lineno">13916</span>&#160;$   <span class="keywordtype">size_t</span> szHdrs = <span class="keyword">sizeof</span> (BITMAPFILEHEADER) + <span class="keyword">sizeof</span> (BITMAPINFOHEADER),  <span class="comment">//-V119</span></div>
<div class="line"><a name="l13917"></a><span class="lineno">13917</span>&#160;           szImg  = (size.x * size.y) * <span class="keyword">sizeof</span> (RGBQUAD);                   <span class="comment">//-V104</span></div>
<div class="line"><a name="l13918"></a><span class="lineno">13918</span>&#160; </div>
<div class="line"><a name="l13919"></a><span class="lineno">13919</span>&#160;$   BITMAP           bmap = {};</div>
<div class="line"><a name="l13920"></a><span class="lineno">13920</span>&#160;$   BITMAPFILEHEADER hdr  = { 0x4D42 <span class="comment">/* &#39;MB&#39; */</span>, (DWORD) (szHdrs + szImg), 0, 0, (DWORD) szHdrs };  <span class="comment">//-V202</span></div>
<div class="line"><a name="l13921"></a><span class="lineno">13921</span>&#160;$   BITMAPINFOHEADER info = { <span class="keyword">sizeof</span> (info), size.x, size.y, 1, (WORD) (<span class="keyword">sizeof</span> (RGBQUAD) * 8), BI_RGB };</div>
<div class="line"><a name="l13922"></a><span class="lineno">13922</span>&#160; </div>
<div class="line"><a name="l13923"></a><span class="lineno">13923</span>&#160;$   RGBQUAD* buf = NULL;</div>
<div class="line"><a name="l13924"></a><span class="lineno">13924</span>&#160;$   <span class="keywordtype">bool</span>     ok  = <span class="keyword">true</span>;</div>
<div class="line"><a name="l13925"></a><span class="lineno">13925</span>&#160; </div>
<div class="line"><a name="l13926"></a><span class="lineno">13926</span>&#160;$   ok &amp;= !!Win32::GetObject (Win32::GetCurrentObject (dc, OBJ_BITMAP), <span class="keyword">sizeof</span> (bmap), &amp;bmap);</div>
<div class="line"><a name="l13927"></a><span class="lineno">13927</span>&#160; </div>
<div class="line"><a name="l13928"></a><span class="lineno">13928</span>&#160;    <span class="keywordflow">if</span> (!ok) {$ <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l13929"></a><span class="lineno">13929</span>&#160; </div>
<div class="line"><a name="l13930"></a><span class="lineno">13930</span>&#160;$   <span class="keywordflow">if</span> (!bmap.bmBits)</div>
<div class="line"><a name="l13931"></a><span class="lineno">13931</span>&#160;        {</div>
<div class="line"><a name="l13932"></a><span class="lineno">13932</span>&#160;$       buf =  <span class="keyword">new</span> (std::nothrow) RGBQUAD [size.x * size.y];                <span class="comment">//-V121</span></div>
<div class="line"><a name="l13933"></a><span class="lineno">13933</span>&#160;$       ok &amp;= (buf != NULL);</div>
<div class="line"><a name="l13934"></a><span class="lineno">13934</span>&#160; </div>
<div class="line"><a name="l13935"></a><span class="lineno">13935</span>&#160;$       <span class="keywordtype">int</span> res = Win32::GetDIBits (dc,  (HBITMAP) Win32::GetCurrentObject (dc, OBJ_BITMAP), 0, size.y,</div>
<div class="line"><a name="l13936"></a><span class="lineno">13936</span>&#160;                                    buf, (BITMAPINFO*) &amp;info, DIB_RGB_COLORS);</div>
<div class="line"><a name="l13937"></a><span class="lineno">13937</span>&#160; </div>
<div class="line"><a name="l13938"></a><span class="lineno">13938</span>&#160;        <span class="keywordflow">if</span> (res == ERROR_INVALID_PARAMETER) {$ SetLastError (res); }</div>
<div class="line"><a name="l13939"></a><span class="lineno">13939</span>&#160; </div>
<div class="line"><a name="l13940"></a><span class="lineno">13940</span>&#160;$       ok &amp;= !!res;</div>
<div class="line"><a name="l13941"></a><span class="lineno">13941</span>&#160;        }</div>
<div class="line"><a name="l13942"></a><span class="lineno">13942</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l13943"></a><span class="lineno">13943</span>&#160;        {</div>
<div class="line"><a name="l13944"></a><span class="lineno">13944</span>&#160;$       buf = (RGBQUAD*) bmap.bmBits;</div>
<div class="line"><a name="l13945"></a><span class="lineno">13945</span>&#160;        }</div>
<div class="line"><a name="l13946"></a><span class="lineno">13946</span>&#160; </div>
<div class="line"><a name="l13947"></a><span class="lineno">13947</span>&#160;$   FILE* f = NULL;</div>
<div class="line"><a name="l13948"></a><span class="lineno">13948</span>&#160;$   <span class="keywordflow">if</span> (ok) fopen_s (&amp;f, filename, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l13949"></a><span class="lineno">13949</span>&#160;$   ok &amp;= (f != NULL);</div>
<div class="line"><a name="l13950"></a><span class="lineno">13950</span>&#160; </div>
<div class="line"><a name="l13951"></a><span class="lineno">13951</span>&#160;$   <span class="keywordflow">if</span> (ok) ok &amp;= (fwrite (&amp;hdr,  <span class="keyword">sizeof</span> (hdr),  1, f) == 1);               <span class="comment">//-V575 //-V595</span></div>
<div class="line"><a name="l13952"></a><span class="lineno">13952</span>&#160;$   <span class="keywordflow">if</span> (ok) ok &amp;= (fwrite (&amp;info, <span class="keyword">sizeof</span> (info), 1, f) == 1);</div>
<div class="line"><a name="l13953"></a><span class="lineno">13953</span>&#160;$   <span class="keywordflow">if</span> (ok) ok &amp;= (fwrite (buf,   szImg,         1, f) == 1);               <span class="comment">//-V575</span></div>
<div class="line"><a name="l13954"></a><span class="lineno">13954</span>&#160; </div>
<div class="line"><a name="l13955"></a><span class="lineno">13955</span>&#160;$   ok &amp;= (f &amp;&amp; fclose (f) == 0);</div>
<div class="line"><a name="l13956"></a><span class="lineno">13956</span>&#160; </div>
<div class="line"><a name="l13957"></a><span class="lineno">13957</span>&#160;$   <span class="keywordflow">if</span> (!bmap.bmBits)</div>
<div class="line"><a name="l13958"></a><span class="lineno">13958</span>&#160;        {</div>
<div class="line"><a name="l13959"></a><span class="lineno">13959</span>&#160;$       <span class="keyword">delete</span>[] buf;</div>
<div class="line"><a name="l13960"></a><span class="lineno">13960</span>&#160;$       buf = NULL;</div>
<div class="line"><a name="l13961"></a><span class="lineno">13961</span>&#160;        }</div>
<div class="line"><a name="l13962"></a><span class="lineno">13962</span>&#160; </div>
<div class="line"><a name="l13963"></a><span class="lineno">13963</span>&#160;$   <span class="keywordflow">return</span> ok;</div>
<div class="line"><a name="l13964"></a><span class="lineno">13964</span>&#160;    }</div>
<div class="line"><a name="l13965"></a><span class="lineno">13965</span>&#160; </div>
<div class="line"><a name="l13966"></a><span class="lineno">13966</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13967"></a><span class="lineno">13967</span>&#160; </div>
<div class="line"><a name="l13968"></a><span class="lineno">13968</span>&#160;<span class="keywordtype">double</span> <a class="code" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a> (<span class="keywordtype">double</span> time)</div>
<div class="line"><a name="l13969"></a><span class="lineno">13969</span>&#160;    {</div>
<div class="line"><a name="l13970"></a><span class="lineno">13970</span>&#160;$1  LARGE_INTEGER start = {};</div>
<div class="line"><a name="l13971"></a><span class="lineno">13971</span>&#160;$   QueryPerformanceCounter (&amp;start) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13972"></a><span class="lineno">13972</span>&#160; </div>
<div class="line"><a name="l13973"></a><span class="lineno">13973</span>&#160;$   LARGE_INTEGER freq = {};</div>
<div class="line"><a name="l13974"></a><span class="lineno">13974</span>&#160;$   QueryPerformanceFrequency (&amp;freq) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13975"></a><span class="lineno">13975</span>&#160; </div>
<div class="line"><a name="l13976"></a><span class="lineno">13976</span>&#160;$   <span class="keywordtype">int</span> lock = _txCanvas_RefreshLock;</div>
<div class="line"><a name="l13977"></a><span class="lineno">13977</span>&#160;$   _txCanvas_RefreshLock = 0;</div>
<div class="line"><a name="l13978"></a><span class="lineno">13978</span>&#160; </div>
<div class="line"><a name="l13979"></a><span class="lineno">13979</span>&#160;$   HWND wnd = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>();</div>
<div class="line"><a name="l13980"></a><span class="lineno">13980</span>&#160;    <span class="keywordflow">if</span> (wnd) {$ RedrawWindow (wnd, NULL, NULL, RDW_INVALIDATE | RDW_INTERNALPAINT | RDW_UPDATENOW); }</div>
<div class="line"><a name="l13981"></a><span class="lineno">13981</span>&#160; </div>
<div class="line"><a name="l13982"></a><span class="lineno">13982</span>&#160;$   Sleep (<a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((time &gt;= 0)? time : 0));</div>
<div class="line"><a name="l13983"></a><span class="lineno">13983</span>&#160; </div>
<div class="line"><a name="l13984"></a><span class="lineno">13984</span>&#160;$   _txCanvas_RefreshLock = lock;</div>
<div class="line"><a name="l13985"></a><span class="lineno">13985</span>&#160; </div>
<div class="line"><a name="l13986"></a><span class="lineno">13986</span>&#160;$   LARGE_INTEGER stop = {};</div>
<div class="line"><a name="l13987"></a><span class="lineno">13987</span>&#160;$   QueryPerformanceCounter (&amp;stop) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l13988"></a><span class="lineno">13988</span>&#160; </div>
<div class="line"><a name="l13989"></a><span class="lineno">13989</span>&#160;$   <span class="keywordflow">return</span> 1000.0 * (double) (stop.QuadPart - start.QuadPart) / (double) freq.QuadPart;</div>
<div class="line"><a name="l13990"></a><span class="lineno">13990</span>&#160;    }</div>
<div class="line"><a name="l13991"></a><span class="lineno">13991</span>&#160; </div>
<div class="line"><a name="l13992"></a><span class="lineno">13992</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l13993"></a><span class="lineno">13993</span>&#160; </div>
<div class="line"><a name="l13994"></a><span class="lineno">13994</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga532fa8a55c4f3d4f94ff0fdceae732b2">txLock</a> (<span class="keywordtype">bool</span> wait <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l13995"></a><span class="lineno">13995</span>&#160;    {</div>
<div class="line"><a name="l13996"></a><span class="lineno">13996</span>&#160;$0  <span class="keywordflow">if</span> (_txCanvas_RefreshLock &lt;= 0 || _txExit) Sleep (0);</div>
<div class="line"><a name="l13997"></a><span class="lineno">13997</span>&#160; </div>
<div class="line"><a name="l13998"></a><span class="lineno">13998</span>&#160;$   <span class="keywordflow">if</span> (wait) {$ <span class="keywordflow">return</span>      EnterCriticalSection (&amp;_txCanvas_LockBackBuf), <span class="keyword">true</span>; }  <span class="comment">//-V1048</span></div>
<div class="line"><a name="l13999"></a><span class="lineno">13999</span>&#160;    <span class="keywordflow">else</span>      {$ <span class="keywordflow">return</span> !!TryEnterCriticalSection (&amp;_txCanvas_LockBackBuf);       }</div>
<div class="line"><a name="l14000"></a><span class="lineno">14000</span>&#160;    }</div>
<div class="line"><a name="l14001"></a><span class="lineno">14001</span>&#160; </div>
<div class="line"><a name="l14002"></a><span class="lineno">14002</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14003"></a><span class="lineno">14003</span>&#160; </div>
<div class="line"><a name="l14004"></a><span class="lineno">14004</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a>()</div>
<div class="line"><a name="l14005"></a><span class="lineno">14005</span>&#160;    {</div>
<div class="line"><a name="l14006"></a><span class="lineno">14006</span>&#160;$0  LeaveCriticalSection (&amp;_txCanvas_LockBackBuf);</div>
<div class="line"><a name="l14007"></a><span class="lineno">14007</span>&#160; </div>
<div class="line"><a name="l14008"></a><span class="lineno">14008</span>&#160;$   <span class="keywordflow">if</span> (_txCanvas_RefreshLock &lt;= 0 || _txExit) Sleep (0);</div>
<div class="line"><a name="l14009"></a><span class="lineno">14009</span>&#160;$   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14010"></a><span class="lineno">14010</span>&#160;    }</div>
<div class="line"><a name="l14011"></a><span class="lineno">14011</span>&#160; </div>
<div class="line"><a name="l14012"></a><span class="lineno">14012</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l14013"></a><span class="lineno">14013</span>&#160; </div>
<div class="line"><a name="l14014"></a><span class="lineno">14014</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14015"></a><span class="lineno">14015</span>&#160; </div>
<div class="line"><a name="l14016"></a><span class="lineno">14016</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l14017"></a><span class="lineno">14017</span>&#160;<span class="keyword">inline</span> T <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a> (T value)</div>
<div class="line"><a name="l14018"></a><span class="lineno">14018</span>&#160;    {</div>
<div class="line"><a name="l14019"></a><span class="lineno">14019</span>&#160;$1  <a class="code" href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a>();</div>
<div class="line"><a name="l14020"></a><span class="lineno">14020</span>&#160;$   <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l14021"></a><span class="lineno">14021</span>&#160;    }</div>
<div class="line"><a name="l14022"></a><span class="lineno">14022</span>&#160; </div>
<div class="line"><a name="l14023"></a><span class="lineno">14023</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14024"></a><span class="lineno">14024</span>&#160; </div>
<div class="line"><a name="l14025"></a><span class="lineno">14025</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="group___drawing.html#gadc7fd9cdc8c007693db7b6d7de794709">txRedrawWindow</a>()</div>
<div class="line"><a name="l14026"></a><span class="lineno">14026</span>&#160;    {</div>
<div class="line"><a name="l14027"></a><span class="lineno">14027</span>&#160;$1  <a class="code" href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a> (0);</div>
<div class="line"><a name="l14028"></a><span class="lineno">14028</span>&#160;    }</div>
<div class="line"><a name="l14029"></a><span class="lineno">14029</span>&#160; </div>
<div class="line"><a name="l14030"></a><span class="lineno">14030</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14031"></a><span class="lineno">14031</span>&#160; </div>
<div class="line"><a name="l14032"></a><span class="lineno">14032</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gaff3d9c60900531f438a19216485bdd41">txUpdateWindow</a> (<span class="keywordtype">int</span> update <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l14033"></a><span class="lineno">14033</span>&#160;    {</div>
<div class="line"><a name="l14034"></a><span class="lineno">14034</span>&#160;$1  <span class="keywordflow">return</span> _txCanvas_SetRefreshLock (update &gt;= 0? (<span class="keywordtype">int</span>) !update : -update);</div>
<div class="line"><a name="l14035"></a><span class="lineno">14035</span>&#160;    }</div>
<div class="line"><a name="l14036"></a><span class="lineno">14036</span>&#160; </div>
<div class="line"><a name="l14037"></a><span class="lineno">14037</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14038"></a><span class="lineno">14038</span>&#160; </div>
<div class="line"><a name="l14039"></a><span class="lineno">14039</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#gae92e621aaed81f90e4d142356e38762a">txBegin</a>()</div>
<div class="line"><a name="l14040"></a><span class="lineno">14040</span>&#160;    {</div>
<div class="line"><a name="l14041"></a><span class="lineno">14041</span>&#160;$1  _txCanvas_SetRefreshLock (_txCanvas_RefreshLock + 1);</div>
<div class="line"><a name="l14042"></a><span class="lineno">14042</span>&#160; </div>
<div class="line"><a name="l14043"></a><span class="lineno">14043</span>&#160;$   <span class="keywordflow">return</span> _txCanvas_RefreshLock;</div>
<div class="line"><a name="l14044"></a><span class="lineno">14044</span>&#160;    }</div>
<div class="line"><a name="l14045"></a><span class="lineno">14045</span>&#160; </div>
<div class="line"><a name="l14046"></a><span class="lineno">14046</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14047"></a><span class="lineno">14047</span>&#160; </div>
<div class="line"><a name="l14048"></a><span class="lineno">14048</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___drawing.html#ga809dc04afd5348247846ee01ce9a06e6">txEnd</a>()</div>
<div class="line"><a name="l14049"></a><span class="lineno">14049</span>&#160;    {</div>
<div class="line"><a name="l14050"></a><span class="lineno">14050</span>&#160;$1  _txCanvas_SetRefreshLock (_txCanvas_RefreshLock - 1);</div>
<div class="line"><a name="l14051"></a><span class="lineno">14051</span>&#160; </div>
<div class="line"><a name="l14052"></a><span class="lineno">14052</span>&#160;$   <span class="keywordflow">return</span> _txCanvas_RefreshLock;</div>
<div class="line"><a name="l14053"></a><span class="lineno">14053</span>&#160;    }</div>
<div class="line"><a name="l14054"></a><span class="lineno">14054</span>&#160; </div>
<div class="line"><a name="l14055"></a><span class="lineno">14055</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14056"></a><span class="lineno">14056</span>&#160; </div>
<div class="line"><a name="l14057"></a><span class="lineno">14057</span>&#160;<span class="keyword">inline</span> POINT <a class="code" href="group___mouse.html#ga44606f3b7f5f345d15bb20d46fcf78b6">txMousePos</a>()</div>
<div class="line"><a name="l14058"></a><span class="lineno">14058</span>&#160;    {</div>
<div class="line"><a name="l14059"></a><span class="lineno">14059</span>&#160;$1  POINT pos = {};</div>
<div class="line"><a name="l14060"></a><span class="lineno">14060</span>&#160;$   GetCursorPos (&amp;pos);</div>
<div class="line"><a name="l14061"></a><span class="lineno">14061</span>&#160; </div>
<div class="line"><a name="l14062"></a><span class="lineno">14062</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>())</div>
<div class="line"><a name="l14063"></a><span class="lineno">14063</span>&#160;        {$ ScreenToClient (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), &amp;pos); }</div>
<div class="line"><a name="l14064"></a><span class="lineno">14064</span>&#160; </div>
<div class="line"><a name="l14065"></a><span class="lineno">14065</span>&#160;$   <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l14066"></a><span class="lineno">14066</span>&#160;    }</div>
<div class="line"><a name="l14067"></a><span class="lineno">14067</span>&#160; </div>
<div class="line"><a name="l14068"></a><span class="lineno">14068</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14069"></a><span class="lineno">14069</span>&#160; </div>
<div class="line"><a name="l14070"></a><span class="lineno">14070</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group___mouse.html#gae56f541d32ff7324dd6dd340411c1130">txMouseX</a>()</div>
<div class="line"><a name="l14071"></a><span class="lineno">14071</span>&#160;    {</div>
<div class="line"><a name="l14072"></a><span class="lineno">14072</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">double</span>) <a class="code" href="group___mouse.html#ga44606f3b7f5f345d15bb20d46fcf78b6">txMousePos</a>() .x;</div>
<div class="line"><a name="l14073"></a><span class="lineno">14073</span>&#160;    }</div>
<div class="line"><a name="l14074"></a><span class="lineno">14074</span>&#160; </div>
<div class="line"><a name="l14075"></a><span class="lineno">14075</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14076"></a><span class="lineno">14076</span>&#160; </div>
<div class="line"><a name="l14077"></a><span class="lineno">14077</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group___mouse.html#ga481847278ec77647082072325be5c226">txMouseY</a>()</div>
<div class="line"><a name="l14078"></a><span class="lineno">14078</span>&#160;    {</div>
<div class="line"><a name="l14079"></a><span class="lineno">14079</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">double</span>) <a class="code" href="group___mouse.html#ga44606f3b7f5f345d15bb20d46fcf78b6">txMousePos</a>() .y;</div>
<div class="line"><a name="l14080"></a><span class="lineno">14080</span>&#160;    }</div>
<div class="line"><a name="l14081"></a><span class="lineno">14081</span>&#160; </div>
<div class="line"><a name="l14082"></a><span class="lineno">14082</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14083"></a><span class="lineno">14083</span>&#160; </div>
<div class="line"><a name="l14084"></a><span class="lineno">14084</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l14085"></a><span class="lineno">14085</span>&#160; </div>
<div class="line"><a name="l14086"></a><span class="lineno">14086</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___mouse.html#ga3317e38b22d8e6f116c29503144c2cc2">txMouseButtons</a>()</div>
<div class="line"><a name="l14087"></a><span class="lineno">14087</span>&#160;    {</div>
<div class="line"><a name="l14088"></a><span class="lineno">14088</span>&#160;$1  HWND txWnd      = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>();</div>
<div class="line"><a name="l14089"></a><span class="lineno">14089</span>&#160;$   HWND foreground = GetForegroundWindow();</div>
<div class="line"><a name="l14090"></a><span class="lineno">14090</span>&#160; </div>
<div class="line"><a name="l14091"></a><span class="lineno">14091</span>&#160;$   <span class="keywordflow">if</span> ((txWnd &amp;&amp; (foreground == txWnd)) ||</div>
<div class="line"><a name="l14092"></a><span class="lineno">14092</span>&#160;       (!txWnd &amp;&amp; (foreground == Win32::GetConsoleWindow())))</div>
<div class="line"><a name="l14093"></a><span class="lineno">14093</span>&#160;        {</div>
<div class="line"><a name="l14094"></a><span class="lineno">14094</span>&#160;$       <span class="keywordflow">return</span> ((GetAsyncKeyState (VK_LBUTTON) &amp; 0x8000) &gt;&gt; 15) |  <span class="comment">// MSB to bit 0</span></div>
<div class="line"><a name="l14095"></a><span class="lineno">14095</span>&#160;               ((GetAsyncKeyState (VK_RBUTTON) &amp; 0x8000) &gt;&gt; 14) |  <span class="comment">// MSB to bit 1</span></div>
<div class="line"><a name="l14096"></a><span class="lineno">14096</span>&#160;               ((GetAsyncKeyState (VK_MBUTTON) &amp; 0x8000) &gt;&gt; 13);   <span class="comment">// MSB to bit 2</span></div>
<div class="line"><a name="l14097"></a><span class="lineno">14097</span>&#160;        }</div>
<div class="line"><a name="l14098"></a><span class="lineno">14098</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l14099"></a><span class="lineno">14099</span>&#160;        {$ <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l14100"></a><span class="lineno">14100</span>&#160;    }</div>
<div class="line"><a name="l14101"></a><span class="lineno">14101</span>&#160; </div>
<div class="line"><a name="l14102"></a><span class="lineno">14102</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14103"></a><span class="lineno">14103</span>&#160; </div>
<div class="line"><a name="l14104"></a><span class="lineno">14104</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (<span class="keywordtype">unsigned</span> color <span class="comment">/*= FOREGROUND_LIGHTGRAY*/</span>)</div>
<div class="line"><a name="l14105"></a><span class="lineno">14105</span>&#160;    {</div>
<div class="line"><a name="l14106"></a><span class="lineno">14106</span>&#160;    <span class="keywordtype">unsigned</span> oldAttr = <a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a>();</div>
<div class="line"><a name="l14107"></a><span class="lineno">14107</span>&#160; </div>
<div class="line"><a name="l14108"></a><span class="lineno">14108</span>&#160;    SetConsoleTextAttribute (GetStdHandle (STD_OUTPUT_HANDLE), (WORD) color);</div>
<div class="line"><a name="l14109"></a><span class="lineno">14109</span>&#160; </div>
<div class="line"><a name="l14110"></a><span class="lineno">14110</span>&#160;    <span class="keywordflow">return</span> oldAttr;</div>
<div class="line"><a name="l14111"></a><span class="lineno">14111</span>&#160;    }</div>
<div class="line"><a name="l14112"></a><span class="lineno">14112</span>&#160; </div>
<div class="line"><a name="l14113"></a><span class="lineno">14113</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14114"></a><span class="lineno">14114</span>&#160; </div>
<div class="line"><a name="l14115"></a><span class="lineno">14115</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a>()</div>
<div class="line"><a name="l14116"></a><span class="lineno">14116</span>&#160;    {</div>
<div class="line"><a name="l14117"></a><span class="lineno">14117</span>&#160;    CONSOLE_SCREEN_BUFFER_INFO con = {};</div>
<div class="line"><a name="l14118"></a><span class="lineno">14118</span>&#160;    GetConsoleScreenBufferInfo (GetStdHandle (STD_OUTPUT_HANDLE), &amp;con);</div>
<div class="line"><a name="l14119"></a><span class="lineno">14119</span>&#160; </div>
<div class="line"><a name="l14120"></a><span class="lineno">14120</span>&#160;    <span class="keywordflow">return</span> con.wAttributes;</div>
<div class="line"><a name="l14121"></a><span class="lineno">14121</span>&#160;    }</div>
<div class="line"><a name="l14122"></a><span class="lineno">14122</span>&#160; </div>
<div class="line"><a name="l14123"></a><span class="lineno">14123</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14124"></a><span class="lineno">14124</span>&#160; </div>
<div class="line"><a name="l14125"></a><span class="lineno">14125</span>&#160;POINT <a class="code" href="group___drawing.html#gaee548f7b5672cbcbb99246e0291d7336">txSetConsoleCursorPos</a> (<span class="keywordtype">double</span> x, <span class="keywordtype">double</span> y)</div>
<div class="line"><a name="l14126"></a><span class="lineno">14126</span>&#160;    {</div>
<div class="line"><a name="l14127"></a><span class="lineno">14127</span>&#160;$1  POINT fontSz = <a class="code" href="group___drawing.html#ga250455abeab8c99a51153ef8f4ec0396">txGetConsoleFontSize</a>();</div>
<div class="line"><a name="l14128"></a><span class="lineno">14128</span>&#160; </div>
<div class="line"><a name="l14129"></a><span class="lineno">14129</span>&#160;$   CONSOLE_SCREEN_BUFFER_INFO con = {};</div>
<div class="line"><a name="l14130"></a><span class="lineno">14130</span>&#160;$   GetConsoleScreenBufferInfo (GetStdHandle (STD_OUTPUT_HANDLE), &amp;con) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14131"></a><span class="lineno">14131</span>&#160; </div>
<div class="line"><a name="l14132"></a><span class="lineno">14132</span>&#160;$   COORD pos = { (short) <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (1.0 * x / fontSz.x + con.srWindow.Left),</div>
<div class="line"><a name="l14133"></a><span class="lineno">14133</span>&#160;                  (short) <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (1.0 * y / fontSz.y + con.srWindow.Top ) };</div>
<div class="line"><a name="l14134"></a><span class="lineno">14134</span>&#160; </div>
<div class="line"><a name="l14135"></a><span class="lineno">14135</span>&#160;$   SetConsoleCursorPosition (GetStdHandle (STD_OUTPUT_HANDLE), pos) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14136"></a><span class="lineno">14136</span>&#160; </div>
<div class="line"><a name="l14137"></a><span class="lineno">14137</span>&#160;$   POINT prev = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((con.dwCursorPosition.X - con.srWindow.Left) * fontSz.x),</div>
<div class="line"><a name="l14138"></a><span class="lineno">14138</span>&#160;                   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((con.dwCursorPosition.Y - con.srWindow.Top ) * fontSz.y) };</div>
<div class="line"><a name="l14139"></a><span class="lineno">14139</span>&#160;$   <span class="keywordflow">return</span> prev;</div>
<div class="line"><a name="l14140"></a><span class="lineno">14140</span>&#160;    }</div>
<div class="line"><a name="l14141"></a><span class="lineno">14141</span>&#160; </div>
<div class="line"><a name="l14142"></a><span class="lineno">14142</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14143"></a><span class="lineno">14143</span>&#160; </div>
<div class="line"><a name="l14144"></a><span class="lineno">14144</span>&#160;POINT <a class="code" href="group___drawing.html#ga3227242c57eef33049cdaee655f4faee">txGetConsoleCursorPos</a>()</div>
<div class="line"><a name="l14145"></a><span class="lineno">14145</span>&#160;    {</div>
<div class="line"><a name="l14146"></a><span class="lineno">14146</span>&#160;$1  POINT fontSz = <a class="code" href="group___drawing.html#ga250455abeab8c99a51153ef8f4ec0396">txGetConsoleFontSize</a>();</div>
<div class="line"><a name="l14147"></a><span class="lineno">14147</span>&#160; </div>
<div class="line"><a name="l14148"></a><span class="lineno">14148</span>&#160;$   CONSOLE_SCREEN_BUFFER_INFO con = {};</div>
<div class="line"><a name="l14149"></a><span class="lineno">14149</span>&#160;$   GetConsoleScreenBufferInfo (GetStdHandle (STD_OUTPUT_HANDLE), &amp;con) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14150"></a><span class="lineno">14150</span>&#160; </div>
<div class="line"><a name="l14151"></a><span class="lineno">14151</span>&#160;$   POINT  pos = { <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((con.dwCursorPosition.X - con.srWindow.Left) * fontSz.x),</div>
<div class="line"><a name="l14152"></a><span class="lineno">14152</span>&#160;                   <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> ((con.dwCursorPosition.Y - con.srWindow.Top ) * fontSz.y) };</div>
<div class="line"><a name="l14153"></a><span class="lineno">14153</span>&#160;$   <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l14154"></a><span class="lineno">14154</span>&#160;    }</div>
<div class="line"><a name="l14155"></a><span class="lineno">14155</span>&#160; </div>
<div class="line"><a name="l14156"></a><span class="lineno">14156</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14157"></a><span class="lineno">14157</span>&#160; </div>
<div class="line"><a name="l14158"></a><span class="lineno">14158</span>&#160;POINT <a class="code" href="group___drawing.html#gade3dc928a81efd7054c61fa6cb4ddc06">txGetConsoleExtent</a>()</div>
<div class="line"><a name="l14159"></a><span class="lineno">14159</span>&#160;    {</div>
<div class="line"><a name="l14160"></a><span class="lineno">14160</span>&#160;$1  CONSOLE_SCREEN_BUFFER_INFO con = {};</div>
<div class="line"><a name="l14161"></a><span class="lineno">14161</span>&#160;$   GetConsoleScreenBufferInfo (GetStdHandle (STD_OUTPUT_HANDLE), &amp;con) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14162"></a><span class="lineno">14162</span>&#160; </div>
<div class="line"><a name="l14163"></a><span class="lineno">14163</span>&#160;$   POINT  size = { con.srWindow.Right  - con.srWindow.Left + 1,</div>
<div class="line"><a name="l14164"></a><span class="lineno">14164</span>&#160;                    con.srWindow.Bottom - con.srWindow.Top  + 1 };</div>
<div class="line"><a name="l14165"></a><span class="lineno">14165</span>&#160;$   <span class="keywordflow">return</span> size;</div>
<div class="line"><a name="l14166"></a><span class="lineno">14166</span>&#160;    }</div>
<div class="line"><a name="l14167"></a><span class="lineno">14167</span>&#160; </div>
<div class="line"><a name="l14168"></a><span class="lineno">14168</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14169"></a><span class="lineno">14169</span>&#160; </div>
<div class="line"><a name="l14170"></a><span class="lineno">14170</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga2cb63c12d9206e9ed2b2c83c9a08f68e">txClearConsole</a>()</div>
<div class="line"><a name="l14171"></a><span class="lineno">14171</span>&#160;    {</div>
<div class="line"><a name="l14172"></a><span class="lineno">14172</span>&#160;$1  HANDLE out = GetStdHandle (STD_OUTPUT_HANDLE);</div>
<div class="line"><a name="l14173"></a><span class="lineno">14173</span>&#160; </div>
<div class="line"><a name="l14174"></a><span class="lineno">14174</span>&#160;$   CONSOLE_SCREEN_BUFFER_INFO con = {};</div>
<div class="line"><a name="l14175"></a><span class="lineno">14175</span>&#160;$   GetConsoleScreenBufferInfo (out, &amp;con) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14176"></a><span class="lineno">14176</span>&#160; </div>
<div class="line"><a name="l14177"></a><span class="lineno">14177</span>&#160;$   COORD start = {con.srWindow.Left, con.srWindow.Top};</div>
<div class="line"><a name="l14178"></a><span class="lineno">14178</span>&#160; </div>
<div class="line"><a name="l14179"></a><span class="lineno">14179</span>&#160;$   DWORD len   = (con.srWindow.Right  - con.srWindow.Left + 1) *</div>
<div class="line"><a name="l14180"></a><span class="lineno">14180</span>&#160;                  (con.srWindow.Bottom - con.srWindow.Top  + 1);</div>
<div class="line"><a name="l14181"></a><span class="lineno">14181</span>&#160; </div>
<div class="line"><a name="l14182"></a><span class="lineno">14182</span>&#160;$   DWORD written = 0;</div>
<div class="line"><a name="l14183"></a><span class="lineno">14183</span>&#160;$   FillConsoleOutputCharacter (out, 0x20 <span class="comment">/*&#39; &#39;*/</span>,    len, start, &amp;written) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;  <span class="comment">//-V112</span></div>
<div class="line"><a name="l14184"></a><span class="lineno">14184</span>&#160;$   FillConsoleOutputAttribute (out, con.wAttributes, len, start, &amp;written) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14185"></a><span class="lineno">14185</span>&#160; </div>
<div class="line"><a name="l14186"></a><span class="lineno">14186</span>&#160;$   SetConsoleCursorPosition (GetStdHandle (STD_OUTPUT_HANDLE), start) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14187"></a><span class="lineno">14187</span>&#160; </div>
<div class="line"><a name="l14188"></a><span class="lineno">14188</span>&#160;$   <span class="keywordflow">return</span> written == len;</div>
<div class="line"><a name="l14189"></a><span class="lineno">14189</span>&#160;    }</div>
<div class="line"><a name="l14190"></a><span class="lineno">14190</span>&#160; </div>
<div class="line"><a name="l14191"></a><span class="lineno">14191</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14192"></a><span class="lineno">14192</span>&#160; </div>
<div class="line"><a name="l14193"></a><span class="lineno">14193</span>&#160;POINT <a class="code" href="group___drawing.html#ga250455abeab8c99a51153ef8f4ec0396">txGetConsoleFontSize</a>()</div>
<div class="line"><a name="l14194"></a><span class="lineno">14194</span>&#160;    {</div>
<div class="line"><a name="l14195"></a><span class="lineno">14195</span>&#160;$1  Win32::CONSOLE_FONT_INFO font = {0, {8, 16}};</div>
<div class="line"><a name="l14196"></a><span class="lineno">14196</span>&#160; </div>
<div class="line"><a name="l14197"></a><span class="lineno">14197</span>&#160;$   _TX_CALL (Win32::GetCurrentConsoleFont, (GetStdHandle (STD_OUTPUT_HANDLE), <span class="keyword">false</span>, &amp;font));</div>
<div class="line"><a name="l14198"></a><span class="lineno">14198</span>&#160; </div>
<div class="line"><a name="l14199"></a><span class="lineno">14199</span>&#160;$   SIZE size = { font.dwFontSize.X, font.dwFontSize.Y };</div>
<div class="line"><a name="l14200"></a><span class="lineno">14200</span>&#160;$   <a class="code" href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a> (Win32::GetTextExtentPoint32 (_txCanvas_BackBuf[1], <span class="stringliteral">&quot;W&quot;</span>, 1, &amp;size), <a class="code" href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a>());  <span class="comment">//-V501</span></div>
<div class="line"><a name="l14201"></a><span class="lineno">14201</span>&#160; </div>
<div class="line"><a name="l14202"></a><span class="lineno">14202</span>&#160;$   POINT sizeFont = { size.cx, size.cy };</div>
<div class="line"><a name="l14203"></a><span class="lineno">14203</span>&#160;$   <span class="keywordflow">return</span> sizeFont;</div>
<div class="line"><a name="l14204"></a><span class="lineno">14204</span>&#160;    }</div>
<div class="line"><a name="l14205"></a><span class="lineno">14205</span>&#160; </div>
<div class="line"><a name="l14206"></a><span class="lineno">14206</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14207"></a><span class="lineno">14207</span>&#160; </div>
<div class="line"><a name="l14208"></a><span class="lineno">14208</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#gaa148d2040d20ed74cf46ab186c35f9ed">txTextCursor</a> (<span class="keywordtype">bool</span> blink <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l14209"></a><span class="lineno">14209</span>&#160;    {</div>
<div class="line"><a name="l14210"></a><span class="lineno">14210</span>&#160;$1  <span class="keywordtype">bool</span> old = _txConsole_IsBlinking;</div>
<div class="line"><a name="l14211"></a><span class="lineno">14211</span>&#160; </div>
<div class="line"><a name="l14212"></a><span class="lineno">14212</span>&#160;$   _txConsole_IsBlinking = blink;</div>
<div class="line"><a name="l14213"></a><span class="lineno">14213</span>&#160; </div>
<div class="line"><a name="l14214"></a><span class="lineno">14214</span>&#160;$   <span class="keywordflow">return</span> old;</div>
<div class="line"><a name="l14215"></a><span class="lineno">14215</span>&#160;    }</div>
<div class="line"><a name="l14216"></a><span class="lineno">14216</span>&#160; </div>
<div class="line"><a name="l14217"></a><span class="lineno">14217</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14218"></a><span class="lineno">14218</span>&#160; </div>
<div class="line"><a name="l14219"></a><span class="lineno">14219</span>&#160;<span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga177f8bcb7544821ea4b5bd0571fe7196">txPlaySound</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> filename[] <span class="comment">/*= NULL*/</span>, DWORD mode <span class="comment">/*= SND_ASYNC*/</span>)</div>
<div class="line"><a name="l14220"></a><span class="lineno">14220</span>&#160;    {</div>
<div class="line"><a name="l14221"></a><span class="lineno">14221</span>&#160;$1  mode |= SND_FILENAME | SND_NODEFAULT | SND_NOWAIT;</div>
<div class="line"><a name="l14222"></a><span class="lineno">14222</span>&#160;$   <span class="keywordflow">if</span> (mode &amp; SND_LOOP) mode = (mode &amp; ~SND_SYNC) | SND_ASYNC;</div>
<div class="line"><a name="l14223"></a><span class="lineno">14223</span>&#160; </div>
<div class="line"><a name="l14224"></a><span class="lineno">14224</span>&#160;$   <span class="keywordflow">if</span> (!filename) mode = SND_PURGE;</div>
<div class="line"><a name="l14225"></a><span class="lineno">14225</span>&#160; </div>
<div class="line"><a name="l14226"></a><span class="lineno">14226</span>&#160;$   <span class="keywordflow">return</span> !!Win32::PlaySound (filename, NULL, mode);</div>
<div class="line"><a name="l14227"></a><span class="lineno">14227</span>&#160;    }</div>
<div class="line"><a name="l14228"></a><span class="lineno">14228</span>&#160; </div>
<div class="line"><a name="l14229"></a><span class="lineno">14229</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14230"></a><span class="lineno">14230</span>&#160; </div>
<div class="line"><a name="l14231"></a><span class="lineno">14231</span>&#160;<span class="keywordtype">int</span> <a class="code" href="group___misc.html#gad6db0ee1b36288c7eb3f2196077971f9">txSpeak</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* text, ...)</div>
<div class="line"><a name="l14232"></a><span class="lineno">14232</span>&#160;    {</div>
<div class="line"><a name="l14233"></a><span class="lineno">14233</span>&#160;$1  <span class="keywordtype">bool</span> verbose = <span class="keyword">false</span>; (void) verbose;</div>
<div class="line"><a name="l14234"></a><span class="lineno">14234</span>&#160;$   <span class="keywordtype">bool</span> async   = <span class="keyword">false</span>; (void) async;</div>
<div class="line"><a name="l14235"></a><span class="lineno">14235</span>&#160; </div>
<div class="line"><a name="l14236"></a><span class="lineno">14236</span>&#160;$   <span class="keywordflow">for</span> (; text &amp;&amp; *text; text++)</div>
<div class="line"><a name="l14237"></a><span class="lineno">14237</span>&#160;        {</div>
<div class="line"><a name="l14238"></a><span class="lineno">14238</span>&#160;        <span class="keywordflow">if</span>      (*text == <span class="charliteral">&#39;\a&#39;</span>) {$ async   = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l14239"></a><span class="lineno">14239</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*text == <span class="charliteral">&#39;\v&#39;</span>) {$ verbose = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l14240"></a><span class="lineno">14240</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14241"></a><span class="lineno">14241</span>&#160;        }</div>
<div class="line"><a name="l14242"></a><span class="lineno">14242</span>&#160; </div>
<div class="line"><a name="l14243"></a><span class="lineno">14243</span>&#160;$   <span class="keywordtype">char</span> textA [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a>] = <span class="stringliteral">&quot;You asked to speak empty text. I would rather say that TX Library is cool! Cats rules!&quot;</span>;</div>
<div class="line"><a name="l14244"></a><span class="lineno">14244</span>&#160; </div>
<div class="line"><a name="l14245"></a><span class="lineno">14245</span>&#160;$   va_list arg; va_start (arg, text);</div>
<div class="line"><a name="l14246"></a><span class="lineno">14246</span>&#160;    <span class="keywordflow">if</span> (text &amp;&amp; *text) {$ _tx_vsnprintf_s (textA, <span class="keyword">sizeof</span> (textA) - 1, text, arg); }</div>
<div class="line"><a name="l14247"></a><span class="lineno">14247</span>&#160;$   va_end (arg);</div>
<div class="line"><a name="l14248"></a><span class="lineno">14248</span>&#160; </div>
<div class="line"><a name="l14249"></a><span class="lineno">14249</span>&#160;    <span class="keywordflow">if</span> (text &amp;&amp; verbose) {$ printf (<span class="stringliteral">&quot;%s&quot;</span>, textA); }</div>
<div class="line"><a name="l14250"></a><span class="lineno">14250</span>&#160; </div>
<div class="line"><a name="l14251"></a><span class="lineno">14251</span>&#160;<span class="preprocessor">#ifdef TX_USE_SPEAK</span></div>
<div class="line"><a name="l14252"></a><span class="lineno">14252</span>&#160; </div>
<div class="line"><a name="l14253"></a><span class="lineno">14253</span>&#160;$   <span class="keywordtype">int</span> time = GetTickCount();</div>
<div class="line"><a name="l14254"></a><span class="lineno">14254</span>&#160; </div>
<div class="line"><a name="l14255"></a><span class="lineno">14255</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">wchar_t</span> textW [<a class="code" href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a> * <span class="keyword">sizeof</span> (wchar_t)] = L<span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l14256"></a><span class="lineno">14256</span>&#160;$   MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, textA, -1, textW, <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (textW));</div>
<div class="line"><a name="l14257"></a><span class="lineno">14257</span>&#160; </div>
<div class="line"><a name="l14258"></a><span class="lineno">14258</span>&#160;$   <span class="keyword">static</span> ISpVoice* voice = NULL;</div>
<div class="line"><a name="l14259"></a><span class="lineno">14259</span>&#160; </div>
<div class="line"><a name="l14260"></a><span class="lineno">14260</span>&#160;$   <span class="keywordflow">if</span> (text &amp;&amp; !voice)</div>
<div class="line"><a name="l14261"></a><span class="lineno">14261</span>&#160;        {</div>
<div class="line"><a name="l14262"></a><span class="lineno">14262</span>&#160;$       HRESULT res = Win32::CoInitialize (NULL);</div>
<div class="line"><a name="l14263"></a><span class="lineno">14263</span>&#160;        <span class="keywordflow">if</span> (res == S_OK) {$ Win32::CoCreateInstance (Win32::CLSID_SpVoice, NULL, CLSCTX_ALL, Win32::IID_ISpVoice, (<span class="keywordtype">void</span>**) &amp;voice); }</div>
<div class="line"><a name="l14264"></a><span class="lineno">14264</span>&#160;        }</div>
<div class="line"><a name="l14265"></a><span class="lineno">14265</span>&#160; </div>
<div class="line"><a name="l14266"></a><span class="lineno">14266</span>&#160;$   <span class="keywordflow">if</span> (text &amp;&amp; voice)</div>
<div class="line"><a name="l14267"></a><span class="lineno">14267</span>&#160;        {</div>
<div class="line"><a name="l14268"></a><span class="lineno">14268</span>&#160;$       Win32::_fpreset();</div>
<div class="line"><a name="l14269"></a><span class="lineno">14269</span>&#160;$       voice-&gt;Speak (textW, SPF_PERSIST_XML | SPF_PURGEBEFORESPEAK | ((*textW == <span class="charliteral">&#39;&lt;&#39;</span>)? SPF_IS_XML : 0) | (async? SPF_ASYNC : 0), NULL);</div>
<div class="line"><a name="l14270"></a><span class="lineno">14270</span>&#160;$       <a class="code" href="group___misc.html#ga5de732de72c46b992ac2feeac2de7e42">tx_fpreset</a>();</div>
<div class="line"><a name="l14271"></a><span class="lineno">14271</span>&#160;        }</div>
<div class="line"><a name="l14272"></a><span class="lineno">14272</span>&#160; </div>
<div class="line"><a name="l14273"></a><span class="lineno">14273</span>&#160;$   <span class="keywordflow">if</span> (!text &amp;&amp; voice)</div>
<div class="line"><a name="l14274"></a><span class="lineno">14274</span>&#160;        {</div>
<div class="line"><a name="l14275"></a><span class="lineno">14275</span>&#160;$       voice-&gt;Release();</div>
<div class="line"><a name="l14276"></a><span class="lineno">14276</span>&#160;$       voice = NULL;</div>
<div class="line"><a name="l14277"></a><span class="lineno">14277</span>&#160; </div>
<div class="line"><a name="l14278"></a><span class="lineno">14278</span>&#160;$       Win32::CoUninitialize();</div>
<div class="line"><a name="l14279"></a><span class="lineno">14279</span>&#160;        }</div>
<div class="line"><a name="l14280"></a><span class="lineno">14280</span>&#160; </div>
<div class="line"><a name="l14281"></a><span class="lineno">14281</span>&#160;$   <span class="keywordflow">return</span> (voice)? GetTickCount() - time : -1;</div>
<div class="line"><a name="l14282"></a><span class="lineno">14282</span>&#160; </div>
<div class="line"><a name="l14283"></a><span class="lineno">14283</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l14284"></a><span class="lineno">14284</span>&#160; </div>
<div class="line"><a name="l14285"></a><span class="lineno">14285</span>&#160;$   <span class="keywordflow">if</span> (text)</div>
<div class="line"><a name="l14286"></a><span class="lineno">14286</span>&#160;        {</div>
<div class="line"><a name="l14287"></a><span class="lineno">14287</span>&#160;$       <span class="keywordtype">unsigned</span> oldAttr = <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_LIGHTRED | BACKGROUND_BLACK);</div>
<div class="line"><a name="l14288"></a><span class="lineno">14288</span>&#160; </div>
<div class="line"><a name="l14289"></a><span class="lineno">14289</span>&#160;$       txNotifyIcon (NIIF_ERROR, <span class="stringliteral">&quot;txSpeak(): Не могу произнести (нужен TX_USE_SPEAK, см. TXLib Help)&quot;</span>, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;%s&quot;</span>, textA);</div>
<div class="line"><a name="l14290"></a><span class="lineno">14290</span>&#160; </div>
<div class="line"><a name="l14291"></a><span class="lineno">14291</span>&#160;$       <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (oldAttr);</div>
<div class="line"><a name="l14292"></a><span class="lineno">14292</span>&#160;        }</div>
<div class="line"><a name="l14293"></a><span class="lineno">14293</span>&#160; </div>
<div class="line"><a name="l14294"></a><span class="lineno">14294</span>&#160;$   <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l14295"></a><span class="lineno">14295</span>&#160; </div>
<div class="line"><a name="l14296"></a><span class="lineno">14296</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l14297"></a><span class="lineno">14297</span>&#160;    }</div>
<div class="line"><a name="l14298"></a><span class="lineno">14298</span>&#160; </div>
<div class="line"><a name="l14299"></a><span class="lineno">14299</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14300"></a><span class="lineno">14300</span>&#160; </div>
<div class="line"><a name="l14301"></a><span class="lineno">14301</span>&#160;intptr_t <a class="code" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a> (<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keyword">const</span> <span class="keywordtype">char</span> fileName[],</div>
<div class="line"><a name="l14302"></a><span class="lineno">14302</span>&#160;                      <span class="keywordtype">double</span> zoom <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> gain <span class="comment">/*= 1*/</span>, HWND wnd <span class="comment">/*= txWindow()*/</span>)</div>
<div class="line"><a name="l14303"></a><span class="lineno">14303</span>&#160;    {</div>
<div class="line"><a name="l14304"></a><span class="lineno">14304</span>&#160;$1  <span class="keywordflow">if</span> (wnd &amp;&amp; wnd == <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>() &amp;&amp; _TX_TXWINDOW_FAILED()) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l14305"></a><span class="lineno">14305</span>&#160; </div>
<div class="line"><a name="l14306"></a><span class="lineno">14306</span>&#160;$   <span class="keywordtype">int</span> time = GetTickCount();  <span class="comment">//-V2551</span></div>
<div class="line"><a name="l14307"></a><span class="lineno">14307</span>&#160; </div>
<div class="line"><a name="l14308"></a><span class="lineno">14308</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span> processUID [64] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l14309"></a><span class="lineno">14309</span>&#160;    <span class="keywordflow">if</span> (!*processUID)</div>
<div class="line"><a name="l14310"></a><span class="lineno">14310</span>&#160;        {</div>
<div class="line"><a name="l14311"></a><span class="lineno">14311</span>&#160;$       FILETIME startTime = {}, <span class="keyword">null</span> = {};</div>
<div class="line"><a name="l14312"></a><span class="lineno">14312</span>&#160;$       GetProcessTimes (GetCurrentProcess(), &amp;startTime, &amp;<span class="keyword">null</span>, &amp;<span class="keyword">null</span>, &amp;<span class="keyword">null</span>) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14313"></a><span class="lineno">14313</span>&#160;$       _snprintf_s (processUID, sizeof (processUID) - 1, &quot;TXLib[%08X%08X]::<a class="code" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a>&quot;,</div>
<div class="line"><a name="l14314"></a><span class="lineno">14314</span>&#160;                    (<span class="keywordtype">unsigned</span>) startTime.dwHighDateTime, (<span class="keywordtype">unsigned</span>) startTime.dwLowDateTime) &lt; (<span class="keywordtype">int</span>) sizeof (processUID) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14315"></a><span class="lineno">14315</span>&#160;        }</div>
<div class="line"><a name="l14316"></a><span class="lineno">14316</span>&#160; </div>
<div class="line"><a name="l14317"></a><span class="lineno">14317</span>&#160;$   if (!fileName)</div>
<div class="line"><a name="l14318"></a><span class="lineno">14318</span>&#160;        {</div>
<div class="line"><a name="l14319"></a><span class="lineno">14319</span>&#160;$       _txTaskKill (<span class="stringliteral">&quot;vlc.exe&quot;</span>, processUID, 0);  <span class="comment">// Kill&#39;em all, by command line pattern</span></div>
<div class="line"><a name="l14320"></a><span class="lineno">14320</span>&#160;$       <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l14321"></a><span class="lineno">14321</span>&#160;        }</div>
<div class="line"><a name="l14322"></a><span class="lineno">14322</span>&#160; </div>
<div class="line"><a name="l14323"></a><span class="lineno">14323</span>&#160;$   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* vlcPath = _txPlayVideo_FindVLC();</div>
<div class="line"><a name="l14324"></a><span class="lineno">14324</span>&#160; </div>
<div class="line"><a name="l14325"></a><span class="lineno">14325</span>&#160;$   <span class="keywordflow">if</span> (!vlcPath || _access (vlcPath, 0) != 0)</div>
<div class="line"><a name="l14326"></a><span class="lineno">14326</span>&#160;        {</div>
<div class="line"><a name="l14327"></a><span class="lineno">14327</span>&#160;$       <span class="keyword">static</span> <span class="keywordtype">int</span> once = <span class="keyword">false</span>;  <span class="comment">//-V601</span></div>
<div class="line"><a name="l14328"></a><span class="lineno">14328</span>&#160; </div>
<div class="line"><a name="l14329"></a><span class="lineno">14329</span>&#160;$       <span class="keywordflow">if</span> (*fileName &amp;&amp; !once++)</div>
<div class="line"><a name="l14330"></a><span class="lineno">14330</span>&#160;            {$ <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;Не найден видеопроигрыватель VideoLAN (vlc.exe). Cкачайте его с сайта VideoLAN.org &quot;</span></div>
<div class="line"><a name="l14331"></a><span class="lineno">14331</span>&#160;                                    <span class="stringliteral">&quot;и установите. Без установки VideoLAN видео воспроизводиться не будет :(\n\n&quot;</span></div>
<div class="line"><a name="l14332"></a><span class="lineno">14332</span>&#160;                                    <span class="stringliteral">&quot;--\n&quot;</span> <span class="stringliteral">&quot;Всегда Ваша, функция &quot;</span> <span class="comment">/* как бы */</span> <span class="stringliteral">&quot;txPlayVideo()...\n&quot;</span></div>
<div class="line"><a name="l14333"></a><span class="lineno">14333</span>&#160;                                    <span class="stringliteral">&quot;P.S. См. мое описание в TXLib Help.&quot;</span>); }</div>
<div class="line"><a name="l14334"></a><span class="lineno">14334</span>&#160;$       <span class="keywordflow">return</span> INT_MIN;  <span class="comment">//-V109</span></div>
<div class="line"><a name="l14335"></a><span class="lineno">14335</span>&#160;        }</div>
<div class="line"><a name="l14336"></a><span class="lineno">14336</span>&#160; </div>
<div class="line"><a name="l14337"></a><span class="lineno">14337</span>&#160;$   <span class="keywordtype">bool</span> async = <span class="keyword">false</span>;</div>
<div class="line"><a name="l14338"></a><span class="lineno">14338</span>&#160;    <span class="keywordflow">if</span> (*fileName == <span class="charliteral">&#39;\a&#39;</span>) {$ async = <span class="keyword">true</span>; fileName++; }</div>
<div class="line"><a name="l14339"></a><span class="lineno">14339</span>&#160; </div>
<div class="line"><a name="l14340"></a><span class="lineno">14340</span>&#160;$   RECT rect = {};</div>
<div class="line"><a name="l14341"></a><span class="lineno">14341</span>&#160;    <span class="keywordflow">if</span> (wnd) {$ GetClientRect (wnd, &amp;rect); }</div>
<div class="line"><a name="l14342"></a><span class="lineno">14342</span>&#160; </div>
<div class="line"><a name="l14343"></a><span class="lineno">14343</span>&#160;    <span class="keywordflow">if</span> (!width)  {$ width  = rect.right;  }</div>
<div class="line"><a name="l14344"></a><span class="lineno">14344</span>&#160;    <span class="keywordflow">if</span> (!height) {$ height = rect.bottom; }</div>
<div class="line"><a name="l14345"></a><span class="lineno">14345</span>&#160; </div>
<div class="line"><a name="l14346"></a><span class="lineno">14346</span>&#160;    <span class="comment">// Create a child window to hold the video stream</span></div>
<div class="line"><a name="l14347"></a><span class="lineno">14347</span>&#160; </div>
<div class="line"><a name="l14348"></a><span class="lineno">14348</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* errPos = <span class="stringliteral">&quot;ВНЕЗАПНО&quot;</span>;</div>
<div class="line"><a name="l14349"></a><span class="lineno">14349</span>&#160; </div>
<div class="line"><a name="l14350"></a><span class="lineno">14350</span>&#160;$   <span class="keyword">volatile</span> HWND child = NULL;</div>
<div class="line"><a name="l14351"></a><span class="lineno">14351</span>&#160;$   <span class="keywordflow">if</span> (wnd &amp;&amp; (wnd == <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>()))</div>
<div class="line"><a name="l14352"></a><span class="lineno">14352</span>&#160;        {</div>
<div class="line"><a name="l14353"></a><span class="lineno">14353</span>&#160;$       <span class="keyword">const</span> <span class="keywordtype">char</span>* wndClass = txRegisterClass (<span class="stringliteral">&quot;txPlayVideo&quot;</span>, _txPlayVideo_WndProc, 0, NULL_BRUSH, 1);</div>
<div class="line"><a name="l14354"></a><span class="lineno">14354</span>&#160; </div>
<div class="line"><a name="l14355"></a><span class="lineno">14355</span>&#160;$       <span class="keyword">static</span> <span class="keywordtype">int</span> number = 1;</div>
<div class="line"><a name="l14356"></a><span class="lineno">14356</span>&#160;$       CREATESTRUCT createData = { NULL, NULL, (HMENU) (<span class="keywordtype">size_t</span>) number++, <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), height, width, y, x,</div>
<div class="line"><a name="l14357"></a><span class="lineno">14357</span>&#160;                                    WS_CHILD | WS_CLIPSIBLINGS | WS_VISIBLE, __func__, wndClass };</div>
<div class="line"><a name="l14358"></a><span class="lineno">14358</span>&#160;$       child = txCreateExtraWindow (createData);</div>
<div class="line"><a name="l14359"></a><span class="lineno">14359</span>&#160;$       <span class="keywordflow">if</span> (!child)</div>
<div class="line"><a name="l14360"></a><span class="lineno">14360</span>&#160;            {</div>
<div class="line"><a name="l14361"></a><span class="lineno">14361</span>&#160;$           txNotifyIcon (NIIF_ERROR, <span class="stringliteral">&quot;txPlayVideo() сообщает&quot;</span>, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;%s&quot;</span>,</div>
<div class="line"><a name="l14362"></a><span class="lineno">14362</span>&#160;                                       strstr (_txError (NULL, 0, NULL, 0, <span class="stringliteral">&quot;\f&quot;</span> <span class="stringliteral">&quot;Не могу создать окно для видео :(&quot;</span>), errPos));</div>
<div class="line"><a name="l14363"></a><span class="lineno">14363</span>&#160;$           <span class="keywordflow">return</span> INT_MIN+3;  <span class="comment">//-V109</span></div>
<div class="line"><a name="l14364"></a><span class="lineno">14364</span>&#160;            }</div>
<div class="line"><a name="l14365"></a><span class="lineno">14365</span>&#160; </div>
<div class="line"><a name="l14366"></a><span class="lineno">14366</span>&#160;$       BringWindowToTop (child);</div>
<div class="line"><a name="l14367"></a><span class="lineno">14367</span>&#160; </div>
<div class="line"><a name="l14368"></a><span class="lineno">14368</span>&#160;$       wnd = child;</div>
<div class="line"><a name="l14369"></a><span class="lineno">14369</span>&#160;        }</div>
<div class="line"><a name="l14370"></a><span class="lineno">14370</span>&#160; </div>
<div class="line"><a name="l14371"></a><span class="lineno">14371</span>&#160;    <span class="comment">// Build the command line</span></div>
<div class="line"><a name="l14372"></a><span class="lineno">14372</span>&#160; </div>
<div class="line"><a name="l14373"></a><span class="lineno">14373</span>&#160;    <span class="keywordflow">if</span> (!zoom &amp;&amp; !wnd) {$ zoom = 1; }</div>
<div class="line"><a name="l14374"></a><span class="lineno">14374</span>&#160; </div>
<div class="line"><a name="l14375"></a><span class="lineno">14375</span>&#160;$   <span class="keywordtype">char</span> sZoom [64] = <span class="stringliteral">&quot;--autoscale&quot;</span>;</div>
<div class="line"><a name="l14376"></a><span class="lineno">14376</span>&#160;    <span class="keywordflow">if</span> (zoom) {$ _snprintf_s (sZoom, <span class="keyword">sizeof</span> (sZoom) - 1, <span class="stringliteral">&quot;--no-autoscale --zoom=%.10g&quot;</span>, zoom) &lt; (int) <span class="keyword">sizeof</span> (sZoom) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>; }  <span class="comment">//-V550</span></div>
<div class="line"><a name="l14377"></a><span class="lineno">14377</span>&#160; </div>
<div class="line"><a name="l14378"></a><span class="lineno">14378</span>&#160;$   <span class="keyword">static</span> <span class="keywordtype">char</span> cmd [MAX_PATH*2 + 1024] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l14379"></a><span class="lineno">14379</span>&#160; </div>
<div class="line"><a name="l14380"></a><span class="lineno">14380</span>&#160;$   _snprintf_s (cmd, <span class="keyword">sizeof</span> (cmd) - 1, <span class="stringliteral">&quot;\&quot;%s\&quot; \&quot;%s\&quot; vlc://quit&quot;</span></div>
<div class="line"><a name="l14381"></a><span class="lineno">14381</span>&#160; </div>
<div class="line"><a name="l14382"></a><span class="lineno">14382</span>&#160;                 <span class="stringliteral">&quot; %s --gain=%.10g --drawable-hwnd=%p --video-title=\&quot;%s\&quot; --logfile=%s&quot;</span></div>
<div class="line"><a name="l14383"></a><span class="lineno">14383</span>&#160; </div>
<div class="line"><a name="l14384"></a><span class="lineno">14384</span>&#160;                 <span class="stringliteral">&quot; --live-caching=500 --network-caching=500 --quiet-synchro --no-embedded-video --file-logging&quot;</span></div>
<div class="line"><a name="l14385"></a><span class="lineno">14385</span>&#160; </div>
<div class="line"><a name="l14386"></a><span class="lineno">14386</span>&#160;                 <span class="stringliteral">&quot; --ignore-config --reset-config --no-one-instance --play-and-exit&quot;</span></div>
<div class="line"><a name="l14387"></a><span class="lineno">14387</span>&#160;                 <span class="stringliteral">&quot; --intf=dummy --dummy-quiet --quiet --no-video-deco --no-video-title-show --no-stats --no-sub-autodetect-file&quot;</span></div>
<div class="line"><a name="l14388"></a><span class="lineno">14388</span>&#160;                 <span class="stringliteral">&quot; --no-disable-screensaver --no-snapshot-preview --no-auto-preparse --no-mouse-events --no-keyboard-events&quot;</span>,</div>
<div class="line"><a name="l14389"></a><span class="lineno">14389</span>&#160; </div>
<div class="line"><a name="l14390"></a><span class="lineno">14390</span>&#160;                 vlcPath, (*fileName? fileName : <span class="stringliteral">&quot;fileName&quot;</span>), sZoom, gain, (<span class="keywordtype">void</span>*) wnd, processUID, <a class="code" href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a>) &lt; (int) <span class="keyword">sizeof</span> (cmd) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14391"></a><span class="lineno">14391</span>&#160; </div>
<div class="line"><a name="l14392"></a><span class="lineno">14392</span>&#160;$   <a class="code" href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a> (<span class="stringliteral">&quot;txPlayVideo (%d, %d, %d, %d, \&quot;%s\&quot;, %g, %g, %p): [%s]\n\n&quot;</span>,</div>
<div class="line"><a name="l14393"></a><span class="lineno">14393</span>&#160;                         x, y, width, height, fileName, zoom, gain, (<span class="keywordtype">void</span>*) wnd, cmd);</div>
<div class="line"><a name="l14394"></a><span class="lineno">14394</span>&#160;$   <span class="keywordflow">if</span> (!*fileName)</div>
<div class="line"><a name="l14395"></a><span class="lineno">14395</span>&#160;        {</div>
<div class="line"><a name="l14396"></a><span class="lineno">14396</span>&#160;        <span class="keywordflow">if</span> (child) {$ <a class="code" href="group___drawing.html#ga0a3cf3a018cea9d5889d2626e9a37136">txDestroyWindow</a> (child); }</div>
<div class="line"><a name="l14397"></a><span class="lineno">14397</span>&#160;$       <span class="keywordflow">return</span> (intptr_t) cmd;</div>
<div class="line"><a name="l14398"></a><span class="lineno">14398</span>&#160;        }</div>
<div class="line"><a name="l14399"></a><span class="lineno">14399</span>&#160; </div>
<div class="line"><a name="l14400"></a><span class="lineno">14400</span>&#160;$   <span class="keywordflow">if</span> (!strstr (fileName, <span class="stringliteral">&quot;://&quot;</span>) &amp;&amp; _access (fileName, 0) != 0)</div>
<div class="line"><a name="l14401"></a><span class="lineno">14401</span>&#160;        {</div>
<div class="line"><a name="l14402"></a><span class="lineno">14402</span>&#160;$       txNotifyIcon (NIIF_ERROR, <span class="stringliteral">&quot;txPlayVideo() сообщает&quot;</span>, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;%s&quot;</span>,</div>
<div class="line"><a name="l14403"></a><span class="lineno">14403</span>&#160;                                   strstr (_txError (NULL, 0, NULL, 0, <span class="stringliteral">&quot;\f&quot;</span> <span class="stringliteral">&quot;Не найден файл \&quot;%s\&quot;&quot;</span>, fileName), errPos));</div>
<div class="line"><a name="l14404"></a><span class="lineno">14404</span>&#160; </div>
<div class="line"><a name="l14405"></a><span class="lineno">14405</span>&#160;        <span class="keywordflow">if</span> (child) {$ <a class="code" href="group___drawing.html#ga0a3cf3a018cea9d5889d2626e9a37136">txDestroyWindow</a> (child); }</div>
<div class="line"><a name="l14406"></a><span class="lineno">14406</span>&#160;$       <span class="keywordflow">return</span> INT_MIN+1;  <span class="comment">//-V109</span></div>
<div class="line"><a name="l14407"></a><span class="lineno">14407</span>&#160;        }</div>
<div class="line"><a name="l14408"></a><span class="lineno">14408</span>&#160; </div>
<div class="line"><a name="l14409"></a><span class="lineno">14409</span>&#160;    <span class="comment">// Run VLC, run</span></div>
<div class="line"><a name="l14410"></a><span class="lineno">14410</span>&#160; </div>
<div class="line"><a name="l14411"></a><span class="lineno">14411</span>&#160;$   PROCESS_INFORMATION vlc   = {};</div>
<div class="line"><a name="l14412"></a><span class="lineno">14412</span>&#160;$   STARTUPINFO         start = { <span class="keyword">sizeof</span> (start) };</div>
<div class="line"><a name="l14413"></a><span class="lineno">14413</span>&#160;$   DWORD               ret   = 0;</div>
<div class="line"><a name="l14414"></a><span class="lineno">14414</span>&#160; </div>
<div class="line"><a name="l14415"></a><span class="lineno">14415</span>&#160;$   <span class="keywordflow">if</span> (CreateProcess (NULL, cmd, NULL, NULL, <span class="keyword">true</span>, 0, NULL, NULL, &amp;start, &amp;vlc) &amp;&amp;</div>
<div class="line"><a name="l14416"></a><span class="lineno">14416</span>&#160;        vlc.hProcess &amp;&amp; vlc.hThread)</div>
<div class="line"><a name="l14417"></a><span class="lineno">14417</span>&#160;        {</div>
<div class="line"><a name="l14418"></a><span class="lineno">14418</span>&#160;$       <span class="keywordflow">if</span> (child)</div>
<div class="line"><a name="l14419"></a><span class="lineno">14419</span>&#160;            {</div>
<div class="line"><a name="l14420"></a><span class="lineno">14420</span>&#160;$           assert (wnd == child);                                           <span class="comment">//-V547</span></div>
<div class="line"><a name="l14421"></a><span class="lineno">14421</span>&#160;$           SetWindowLongPtr (wnd, GWLP_USERDATA, (LONG_PTR) vlc.hProcess);  <span class="comment">//-V107</span></div>
<div class="line"><a name="l14422"></a><span class="lineno">14422</span>&#160;            }</div>
<div class="line"><a name="l14423"></a><span class="lineno">14423</span>&#160; </div>
<div class="line"><a name="l14424"></a><span class="lineno">14424</span>&#160;$       <span class="keywordflow">if</span> (!async)</div>
<div class="line"><a name="l14425"></a><span class="lineno">14425</span>&#160;            {</div>
<div class="line"><a name="l14426"></a><span class="lineno">14426</span>&#160;$           WaitForSingleObject (vlc.hProcess, INFINITE);</div>
<div class="line"><a name="l14427"></a><span class="lineno">14427</span>&#160;$           GetExitCodeProcess  (vlc.hProcess, &amp;ret) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14428"></a><span class="lineno">14428</span>&#160;            }</div>
<div class="line"><a name="l14429"></a><span class="lineno">14429</span>&#160; </div>
<div class="line"><a name="l14430"></a><span class="lineno">14430</span>&#160;$       <span class="keywordflow">if</span> (!child)</div>
<div class="line"><a name="l14431"></a><span class="lineno">14431</span>&#160;            {</div>
<div class="line"><a name="l14432"></a><span class="lineno">14432</span>&#160;$           CloseHandle (vlc.hProcess) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14433"></a><span class="lineno">14433</span>&#160;            }</div>
<div class="line"><a name="l14434"></a><span class="lineno">14434</span>&#160; </div>
<div class="line"><a name="l14435"></a><span class="lineno">14435</span>&#160;$       CloseHandle (vlc.hThread) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14436"></a><span class="lineno">14436</span>&#160; </div>
<div class="line"><a name="l14437"></a><span class="lineno">14437</span>&#160;$       return (async? (intptr_t) wnd : (ret == 0)? time - GetTickCount() : - (<span class="keywordtype">int</span>) ret);  <span class="comment">//-V105</span></div>
<div class="line"><a name="l14438"></a><span class="lineno">14438</span>&#160;        }</div>
<div class="line"><a name="l14439"></a><span class="lineno">14439</span>&#160;    else</div>
<div class="line"><a name="l14440"></a><span class="lineno">14440</span>&#160;        {</div>
<div class="line"><a name="l14441"></a><span class="lineno">14441</span>&#160;$       txNotifyIcon (NIIF_ERROR, <span class="stringliteral">&quot;txPlayVideo() сообщает&quot;</span>, <span class="stringliteral">&quot;%s&quot;</span>,</div>
<div class="line"><a name="l14442"></a><span class="lineno">14442</span>&#160;                                   strstr (_txError (NULL, 0, NULL, 0, <span class="stringliteral">&quot;\f&quot;</span> <span class="stringliteral">&quot;Ошибка запуска VideoLAN (%s)&quot;</span>, cmd), errPos));</div>
<div class="line"><a name="l14443"></a><span class="lineno">14443</span>&#160;$       <span class="keywordflow">if</span> (child)</div>
<div class="line"><a name="l14444"></a><span class="lineno">14444</span>&#160;            {$ <a class="code" href="group___drawing.html#ga0a3cf3a018cea9d5889d2626e9a37136">txDestroyWindow</a> (child); }</div>
<div class="line"><a name="l14445"></a><span class="lineno">14445</span>&#160; </div>
<div class="line"><a name="l14446"></a><span class="lineno">14446</span>&#160;$       <span class="keywordflow">return</span> INT_MIN+4;  <span class="comment">//-V112 //-V109</span></div>
<div class="line"><a name="l14447"></a><span class="lineno">14447</span>&#160;        }</div>
<div class="line"><a name="l14448"></a><span class="lineno">14448</span>&#160; </div>
<div class="line"><a name="l14449"></a><span class="lineno">14449</span>&#160;<span class="preprocessor">    #undef PROCESS_UID_</span></div>
<div class="line"><a name="l14450"></a><span class="lineno">14450</span>&#160;    }</div>
<div class="line"><a name="l14451"></a><span class="lineno">14451</span>&#160; </div>
<div class="line"><a name="l14452"></a><span class="lineno">14452</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14453"></a><span class="lineno">14453</span>&#160; </div>
<div class="line"><a name="l14454"></a><span class="lineno">14454</span>&#160;intptr_t <a class="code" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a> (<span class="keyword">const</span> <span class="keywordtype">char</span> fileName[], <span class="keywordtype">double</span> zoom <span class="comment">/*= 0*/</span>, <span class="keywordtype">double</span> gain <span class="comment">/*= 0*/</span>, HWND wnd <span class="comment">/*= txWindow()*/</span>)</div>
<div class="line"><a name="l14455"></a><span class="lineno">14455</span>&#160;    {</div>
<div class="line"><a name="l14456"></a><span class="lineno">14456</span>&#160;$1  <span class="keywordflow">return</span> <a class="code" href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a> (0, 0, 0, 0, fileName, zoom, gain, wnd);</div>
<div class="line"><a name="l14457"></a><span class="lineno">14457</span>&#160;    }</div>
<div class="line"><a name="l14458"></a><span class="lineno">14458</span>&#160; </div>
<div class="line"><a name="l14459"></a><span class="lineno">14459</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14460"></a><span class="lineno">14460</span>&#160; </div>
<div class="line"><a name="l14461"></a><span class="lineno">14461</span>&#160;LRESULT CALLBACK _txPlayVideo_WndProc (HWND wnd, UINT msg, WPARAM wpar, LPARAM lpar)</div>
<div class="line"><a name="l14462"></a><span class="lineno">14462</span>&#160;    {</div>
<div class="line"><a name="l14463"></a><span class="lineno">14463</span>&#160;    <span class="keyword">const</span> UINT_PTR checkTimer = 1;</div>
<div class="line"><a name="l14464"></a><span class="lineno">14464</span>&#160; </div>
<div class="line"><a name="l14465"></a><span class="lineno">14465</span>&#160;    <span class="keywordflow">switch</span> (msg)</div>
<div class="line"><a name="l14466"></a><span class="lineno">14466</span>&#160;        {</div>
<div class="line"><a name="l14467"></a><span class="lineno">14467</span>&#160;        <span class="keywordflow">case</span> WM_CREATE:</div>
<div class="line"><a name="l14468"></a><span class="lineno">14468</span>&#160;            {</div>
<div class="line"><a name="l14469"></a><span class="lineno">14469</span>&#160;$1          SetTimer  (wnd, checkTimer, 5*<a class="code" href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a>, NULL) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14470"></a><span class="lineno">14470</span>&#160;            }</div>
<div class="line"><a name="l14471"></a><span class="lineno">14471</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14472"></a><span class="lineno">14472</span>&#160; </div>
<div class="line"><a name="l14473"></a><span class="lineno">14473</span>&#160;        <span class="keywordflow">case</span> WM_DESTROY:</div>
<div class="line"><a name="l14474"></a><span class="lineno">14474</span>&#160;            {</div>
<div class="line"><a name="l14475"></a><span class="lineno">14475</span>&#160;$1          KillTimer (wnd, checkTimer) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14476"></a><span class="lineno">14476</span>&#160; </div>
<div class="line"><a name="l14477"></a><span class="lineno">14477</span>&#160;$           HANDLE vlc = (HANDLE)(uintptr_t) GetWindowLongPtr (wnd, GWLP_USERDATA);</div>
<div class="line"><a name="l14478"></a><span class="lineno">14478</span>&#160; </div>
<div class="line"><a name="l14479"></a><span class="lineno">14479</span>&#160;$           <span class="keywordflow">if</span> (vlc)</div>
<div class="line"><a name="l14480"></a><span class="lineno">14480</span>&#160;                {</div>
<div class="line"><a name="l14481"></a><span class="lineno">14481</span>&#160;$               Win32::TerminateProcess (vlc, 0);</div>
<div class="line"><a name="l14482"></a><span class="lineno">14482</span>&#160; </div>
<div class="line"><a name="l14483"></a><span class="lineno">14483</span>&#160;$               CloseHandle (vlc) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14484"></a><span class="lineno">14484</span>&#160; </div>
<div class="line"><a name="l14485"></a><span class="lineno">14485</span>&#160;$               SetWindowLongPtr (wnd, GWLP_USERDATA, 0);</div>
<div class="line"><a name="l14486"></a><span class="lineno">14486</span>&#160;                }</div>
<div class="line"><a name="l14487"></a><span class="lineno">14487</span>&#160;            }</div>
<div class="line"><a name="l14488"></a><span class="lineno">14488</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14489"></a><span class="lineno">14489</span>&#160; </div>
<div class="line"><a name="l14490"></a><span class="lineno">14490</span>&#160;        <span class="keywordflow">case</span> WM_TIMER:</div>
<div class="line"><a name="l14491"></a><span class="lineno">14491</span>&#160;            {</div>
<div class="line"><a name="l14492"></a><span class="lineno">14492</span>&#160;            HANDLE vlc = (HANDLE)(uintptr_t) GetWindowLongPtr (wnd, GWLP_USERDATA);</div>
<div class="line"><a name="l14493"></a><span class="lineno">14493</span>&#160; </div>
<div class="line"><a name="l14494"></a><span class="lineno">14494</span>&#160;            <span class="keywordflow">if</span> (vlc &amp;&amp; WaitForSingleObject (vlc, 0) != WAIT_TIMEOUT)</div>
<div class="line"><a name="l14495"></a><span class="lineno">14495</span>&#160;                {</div>
<div class="line"><a name="l14496"></a><span class="lineno">14496</span>&#160;$1              DestroyWindow (wnd) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14497"></a><span class="lineno">14497</span>&#160;                }</div>
<div class="line"><a name="l14498"></a><span class="lineno">14498</span>&#160;            }</div>
<div class="line"><a name="l14499"></a><span class="lineno">14499</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14500"></a><span class="lineno">14500</span>&#160; </div>
<div class="line"><a name="l14501"></a><span class="lineno">14501</span>&#160;        <span class="keywordflow">default</span>:  <span class="comment">//-V2522</span></div>
<div class="line"><a name="l14502"></a><span class="lineno">14502</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14503"></a><span class="lineno">14503</span>&#160;        }</div>
<div class="line"><a name="l14504"></a><span class="lineno">14504</span>&#160; </div>
<div class="line"><a name="l14505"></a><span class="lineno">14505</span>&#160;    <span class="keywordflow">return</span> DefWindowProc (wnd, msg, wpar, lpar);</div>
<div class="line"><a name="l14506"></a><span class="lineno">14506</span>&#160;    }</div>
<div class="line"><a name="l14507"></a><span class="lineno">14507</span>&#160; </div>
<div class="line"><a name="l14508"></a><span class="lineno">14508</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14509"></a><span class="lineno">14509</span>&#160; </div>
<div class="line"><a name="l14510"></a><span class="lineno">14510</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span>* _txPlayVideo_FindVLC()</div>
<div class="line"><a name="l14511"></a><span class="lineno">14511</span>&#160;    {</div>
<div class="line"><a name="l14512"></a><span class="lineno">14512</span>&#160;$1  <span class="keyword">static</span> <span class="keywordtype">char</span> vlcPath [MAX_PATH] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l14513"></a><span class="lineno">14513</span>&#160; </div>
<div class="line"><a name="l14514"></a><span class="lineno">14514</span>&#160;$   <span class="keywordflow">if</span> (SearchPath (NULL, <span class="stringliteral">&quot;vlc.bat&quot;</span>, NULL, <span class="keyword">sizeof</span> (vlcPath), vlcPath, NULL))</div>
<div class="line"><a name="l14515"></a><span class="lineno">14515</span>&#160;        {</div>
<div class="line"><a name="l14516"></a><span class="lineno">14516</span>&#160;        <span class="keywordflow">if</span> (_access (vlcPath, 0) == 0) {$ <span class="keywordflow">return</span> vlcPath; }</div>
<div class="line"><a name="l14517"></a><span class="lineno">14517</span>&#160;        }</div>
<div class="line"><a name="l14518"></a><span class="lineno">14518</span>&#160; </div>
<div class="line"><a name="l14519"></a><span class="lineno">14519</span>&#160;$   <span class="keywordflow">if</span> (SearchPath (NULL, <span class="stringliteral">&quot;vlc.exe&quot;</span>, NULL, <span class="keyword">sizeof</span> (vlcPath), vlcPath, NULL))</div>
<div class="line"><a name="l14520"></a><span class="lineno">14520</span>&#160;        {</div>
<div class="line"><a name="l14521"></a><span class="lineno">14521</span>&#160;        <span class="keywordflow">if</span> (_access (vlcPath, 0) == 0) {$ <span class="keywordflow">return</span> vlcPath; }</div>
<div class="line"><a name="l14522"></a><span class="lineno">14522</span>&#160;        }</div>
<div class="line"><a name="l14523"></a><span class="lineno">14523</span>&#160; </div>
<div class="line"><a name="l14524"></a><span class="lineno">14524</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___misc.html#gad942f797bce07af74cd11c88d50ddd3e">txRegQuery</a> (<span class="stringliteral">&quot;HKLM\\Software\\VideoLAN\\VLC&quot;</span>, NULL, vlcPath, <span class="keyword">sizeof</span> (vlcPath)))</div>
<div class="line"><a name="l14525"></a><span class="lineno">14525</span>&#160;        {</div>
<div class="line"><a name="l14526"></a><span class="lineno">14526</span>&#160;        <span class="keywordflow">if</span> (_access (vlcPath, 0) == 0) {$ <span class="keywordflow">return</span> vlcPath; }</div>
<div class="line"><a name="l14527"></a><span class="lineno">14527</span>&#160;        }</div>
<div class="line"><a name="l14528"></a><span class="lineno">14528</span>&#160; </div>
<div class="line"><a name="l14529"></a><span class="lineno">14529</span>&#160;$   <span class="keywordflow">if</span> (<a class="code" href="group___misc.html#gad942f797bce07af74cd11c88d50ddd3e">txRegQuery</a> (<span class="stringliteral">&quot;HKLM\\Software\\VideoLAN\\VLC&quot;</span>, <span class="stringliteral">&quot;InstallDir&quot;</span>, vlcPath, <span class="keyword">sizeof</span> (vlcPath)))</div>
<div class="line"><a name="l14530"></a><span class="lineno">14530</span>&#160;        {</div>
<div class="line"><a name="l14531"></a><span class="lineno">14531</span>&#160;$       strncat_s (vlcPath, <span class="keyword">sizeof</span> (vlcPath) - 1, <span class="stringliteral">&quot;\\vlc.exe&quot;</span>, INT_MAX);</div>
<div class="line"><a name="l14532"></a><span class="lineno">14532</span>&#160; </div>
<div class="line"><a name="l14533"></a><span class="lineno">14533</span>&#160;        <span class="keywordflow">if</span> (_access (vlcPath, 0) == 0) {$ <span class="keywordflow">return</span> vlcPath; }</div>
<div class="line"><a name="l14534"></a><span class="lineno">14534</span>&#160;        }</div>
<div class="line"><a name="l14535"></a><span class="lineno">14535</span>&#160; </div>
<div class="line"><a name="l14536"></a><span class="lineno">14536</span>&#160;$   strncpy_s (vlcPath, <span class="keyword">sizeof</span> (vlcPath), <span class="stringliteral">&quot;C:\\Program Files&quot;</span>    <span class="stringliteral">&quot;\\VideoLAN\\VLC\\vlc.exe&quot;</span>, UINT_MAX);  <span class="comment">//-V106</span></div>
<div class="line"><a name="l14537"></a><span class="lineno">14537</span>&#160;        {</div>
<div class="line"><a name="l14538"></a><span class="lineno">14538</span>&#160;        <span class="keywordflow">if</span> (_access (vlcPath, 0) == 0) {$ <span class="keywordflow">return</span> vlcPath; }</div>
<div class="line"><a name="l14539"></a><span class="lineno">14539</span>&#160;        }</div>
<div class="line"><a name="l14540"></a><span class="lineno">14540</span>&#160; </div>
<div class="line"><a name="l14541"></a><span class="lineno">14541</span>&#160;$   strncpy_s (vlcPath, <span class="keyword">sizeof</span> (vlcPath), <span class="stringliteral">&quot;C:\\Program Files (x86)\\VideoLAN\\VLC\\vlc.exe&quot;</span>, UINT_MAX);  <span class="comment">//-V106</span></div>
<div class="line"><a name="l14542"></a><span class="lineno">14542</span>&#160;        {</div>
<div class="line"><a name="l14543"></a><span class="lineno">14543</span>&#160;        <span class="keywordflow">if</span> (_access (vlcPath, 0) == 0) {$ <span class="keywordflow">return</span> vlcPath; }</div>
<div class="line"><a name="l14544"></a><span class="lineno">14544</span>&#160;        }</div>
<div class="line"><a name="l14545"></a><span class="lineno">14545</span>&#160; </div>
<div class="line"><a name="l14546"></a><span class="lineno">14546</span>&#160;$   <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l14547"></a><span class="lineno">14547</span>&#160;    }</div>
<div class="line"><a name="l14548"></a><span class="lineno">14548</span>&#160; </div>
<div class="line"><a name="l14549"></a><span class="lineno">14549</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14550"></a><span class="lineno">14550</span>&#160; </div>
<div class="line"><a name="l14551"></a><span class="lineno">14551</span>&#160;HRESULT <a class="code" href="group___misc.html#ga3f81b81baf3d43ec066bac4493149708">txSetProgress</a> (<span class="keywordtype">double</span> percent, <span class="keywordtype">unsigned</span> type <span class="comment">/*= TBPF_NORMAL*/</span>, HWND wnd <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l14552"></a><span class="lineno">14552</span>&#160;    {</div>
<div class="line"><a name="l14553"></a><span class="lineno">14553</span>&#160;$1  <span class="keyword">static</span> <span class="keywordtype">double</span> oldPercent = 100;</div>
<div class="line"><a name="l14554"></a><span class="lineno">14554</span>&#160; </div>
<div class="line"><a name="l14555"></a><span class="lineno">14555</span>&#160;    <span class="keywordflow">if</span> (percent &lt; 0) {$ percent    = <a class="code" href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a> (oldPercent, 100); }</div>
<div class="line"><a name="l14556"></a><span class="lineno">14556</span>&#160;    <span class="keywordflow">else</span>             {$ oldPercent = percent;               }</div>
<div class="line"><a name="l14557"></a><span class="lineno">14557</span>&#160; </div>
<div class="line"><a name="l14558"></a><span class="lineno">14558</span>&#160;$   HRESULT res = S_FALSE;</div>
<div class="line"><a name="l14559"></a><span class="lineno">14559</span>&#160; </div>
<div class="line"><a name="l14560"></a><span class="lineno">14560</span>&#160;<span class="preprocessor">    #if defined (__ITaskbarList3_INTERFACE_DEFINED__)</span></div>
<div class="line"><a name="l14561"></a><span class="lineno">14561</span>&#160; </div>
<div class="line"><a name="l14562"></a><span class="lineno">14562</span>&#160;$   HRESULT init = Win32::CoInitialize (NULL);</div>
<div class="line"><a name="l14563"></a><span class="lineno">14563</span>&#160; </div>
<div class="line"><a name="l14564"></a><span class="lineno">14564</span>&#160;$   <span class="keywordtype">bool</span> ok = <span class="keyword">true</span>;</div>
<div class="line"><a name="l14565"></a><span class="lineno">14565</span>&#160;$   res = S_OK;</div>
<div class="line"><a name="l14566"></a><span class="lineno">14566</span>&#160; </div>
<div class="line"><a name="l14567"></a><span class="lineno">14567</span>&#160;$   ITaskbarList3* taskbar = NULL;</div>
<div class="line"><a name="l14568"></a><span class="lineno">14568</span>&#160;    <span class="keywordflow">if</span> (ok) {$ res = Win32::CoCreateInstance (Win32::CLSID_TaskbarList, NULL, CLSCTX_INPROC_SERVER, Win32::IID_ITaskbarList3, (<span class="keywordtype">void</span>**) &amp;taskbar); }</div>
<div class="line"><a name="l14569"></a><span class="lineno">14569</span>&#160;$   ok &amp;= !!taskbar &amp;&amp; (res == S_OK);</div>
<div class="line"><a name="l14570"></a><span class="lineno">14570</span>&#160; </div>
<div class="line"><a name="l14571"></a><span class="lineno">14571</span>&#160;    <span class="keywordflow">if</span> (!wnd)              {$ wnd = <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(); }</div>
<div class="line"><a name="l14572"></a><span class="lineno">14572</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; taskbar)     {$ res = taskbar-&gt;SetProgressValue (wnd, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (percent), 100); ok &amp;= (res == S_OK); }</div>
<div class="line"><a name="l14573"></a><span class="lineno">14573</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; taskbar)     {$ res = taskbar-&gt;SetProgressState (wnd, (TBPFLAG) type);       ok &amp;= (res == S_OK); }</div>
<div class="line"><a name="l14574"></a><span class="lineno">14574</span>&#160; </div>
<div class="line"><a name="l14575"></a><span class="lineno">14575</span>&#160;    <span class="keywordflow">if</span> (wnd == <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>()) {$ wnd = Win32::GetConsoleWindow(); }</div>
<div class="line"><a name="l14576"></a><span class="lineno">14576</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; taskbar)     {$ res = taskbar-&gt;SetProgressValue (wnd, <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (percent), 100); ok &amp;= (res == S_OK); }</div>
<div class="line"><a name="l14577"></a><span class="lineno">14577</span>&#160;    <span class="keywordflow">if</span> (ok &amp;&amp; taskbar)     {$ res = taskbar-&gt;SetProgressState (wnd, (TBPFLAG) type);       ok &amp;= (res == S_OK); }</div>
<div class="line"><a name="l14578"></a><span class="lineno">14578</span>&#160; </div>
<div class="line"><a name="l14579"></a><span class="lineno">14579</span>&#160;    <span class="keywordflow">if</span> (taskbar) {$ taskbar-&gt;Release(); }</div>
<div class="line"><a name="l14580"></a><span class="lineno">14580</span>&#160; </div>
<div class="line"><a name="l14581"></a><span class="lineno">14581</span>&#160;    <span class="keywordflow">if</span> (init == S_OK) {$ Win32::CoUninitialize(); }</div>
<div class="line"><a name="l14582"></a><span class="lineno">14582</span>&#160; </div>
<div class="line"><a name="l14583"></a><span class="lineno">14583</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l14584"></a><span class="lineno">14584</span>&#160; </div>
<div class="line"><a name="l14585"></a><span class="lineno">14585</span>&#160;    (void) type; (void) wnd;</div>
<div class="line"><a name="l14586"></a><span class="lineno">14586</span>&#160; </div>
<div class="line"><a name="l14587"></a><span class="lineno">14587</span>&#160;$   <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l14588"></a><span class="lineno">14588</span>&#160;    }</div>
<div class="line"><a name="l14589"></a><span class="lineno">14589</span>&#160; </div>
<div class="line"><a name="l14590"></a><span class="lineno">14590</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l14591"></a><span class="lineno">14591</span>&#160; </div>
<div class="line"><a name="l14592"></a><span class="lineno">14592</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14593"></a><span class="lineno">14593</span>&#160; </div>
<div class="line"><a name="l14594"></a><span class="lineno">14594</span>&#160;<span class="comment">// +--&lt;&lt;&lt; Это вряд ли имеет отношение к тому, что вы ищете :)</span></div>
<div class="line"><a name="l14595"></a><span class="lineno">14595</span>&#160;<span class="comment">// V      Полезно смотреть не только вверх, но и вниз</span></div>
<div class="line"><a name="l14596"></a><span class="lineno">14596</span>&#160; </div>
<div class="line"><a name="l14597"></a><span class="lineno">14597</span>&#160;<span class="keyword">inline</span> WNDPROC <a class="code" href="group___misc.html#ga30fb1a6913174dfcea5079391f655be2">txSetWindowsHook</a> (WNDPROC wndProc <span class="comment">/*= NULL*/</span>)</div>
<div class="line"><a name="l14598"></a><span class="lineno">14598</span>&#160;    {</div>
<div class="line"><a name="l14599"></a><span class="lineno">14599</span>&#160;$1  WNDPROC old = _txAltWndProc; _txAltWndProc = wndProc;</div>
<div class="line"><a name="l14600"></a><span class="lineno">14600</span>&#160;$   <span class="keywordflow">return</span>  old;</div>
<div class="line"><a name="l14601"></a><span class="lineno">14601</span>&#160;    }</div>
<div class="line"><a name="l14602"></a><span class="lineno">14602</span>&#160; </div>
<div class="line"><a name="l14603"></a><span class="lineno">14603</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14604"></a><span class="lineno">14604</span>&#160; </div>
<div class="line"><a name="l14605"></a><span class="lineno">14605</span>&#160;<span class="comment">//     +--&lt;&lt;&lt; А это, наконец, искомое определение этой функции.</span></div>
<div class="line"><a name="l14606"></a><span class="lineno">14606</span>&#160;<span class="comment">//     |      Смотрите по сторонам! Нужная вам функция где-то рядом.</span></div>
<div class="line"><a name="l14607"></a><span class="lineno">14607</span>&#160;<span class="comment">//     |</span></div>
<div class="line"><a name="l14608"></a><span class="lineno">14608</span>&#160;<span class="comment">//     v</span></div>
<div class="line"><a name="l14609"></a><span class="lineno">14609</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___drawing.html#ga93cecf6b117fc403c0488f388b78a6d1">txIDontWantToHaveAPauseAfterMyProgramBeforeTheWindowWillClose_AndIWillNotBeAskingWhereIsMyPicture</a>()</div>
<div class="line"><a name="l14610"></a><span class="lineno">14610</span>&#160;    {</div>
<div class="line"><a name="l14611"></a><span class="lineno">14611</span>&#160;    <a class="code" href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a> (<span class="stringliteral">&quot;Это запланированная ошибка. Такое бывает. Вы хотели вызвать:\n\n&quot;</span></div>
<div class="line"><a name="l14612"></a><span class="lineno">14612</span>&#160; </div>
<div class="line"><a name="l14613"></a><span class="lineno">14613</span>&#160;                  <span class="stringliteral">&quot;txIDontWantToHaveAPauseAfterMyProgramBeforeTheWindowWillClose_AndIWillNotBeAskingWhereIsMyPicture()\n\n&quot;</span></div>
<div class="line"><a name="l14614"></a><span class="lineno">14614</span>&#160; </div>
<div class="line"><a name="l14615"></a><span class="lineno">14615</span>&#160;                  <span class="stringliteral">&quot;Хоть вы долго [копировали]набирали это имя, на самом деле эта функция не реализована. &quot;</span></div>
<div class="line"><a name="l14616"></a><span class="lineno">14616</span>&#160;                  <span class="stringliteral">&quot;Есть другая функция, которая убирает авто-паузу в конце программы, но в хелпе про нее не написано.\n\n&quot;</span></div>
<div class="line"><a name="l14617"></a><span class="lineno">14617</span>&#160; </div>
<div class="line"><a name="l14618"></a><span class="lineno">14618</span>&#160;                  <span class="stringliteral">&quot;Но не все так плохо. Определение нужной функции есть в исходных текстах TXLib.h, оно лежит рядом &quot;</span></div>
<div class="line"><a name="l14619"></a><span class="lineno">14619</span>&#160;                  <span class="stringliteral">&quot;с определением той функции с длинным названием, которую вы сейчас вызвали.\n\n&quot;</span></div>
<div class="line"><a name="l14620"></a><span class="lineno">14620</span>&#160; </div>
<div class="line"><a name="l14621"></a><span class="lineno">14621</span>&#160;                  <span class="stringliteral">&quot;Нажмите в редакторе Ctrl+O, найдите и откройте файл TXLib.h (он лежит в папке, куда вы &quot;</span></div>
<div class="line"><a name="l14622"></a><span class="lineno">14622</span>&#160;                  <span class="stringliteral">&quot;установили TXLib), затем нажмите Ctrl+F и ищите \&quot;txIDontWant\&quot;. Удачи!\n\n&quot;</span>,</div>
<div class="line"><a name="l14623"></a><span class="lineno">14623</span>&#160; </div>
<div class="line"><a name="l14624"></a><span class="lineno">14624</span>&#160;                  <span class="stringliteral">&quot;Не получилось&quot;</span>, MB_ICONSTOP);</div>
<div class="line"><a name="l14625"></a><span class="lineno">14625</span>&#160; </div>
<div class="line"><a name="l14626"></a><span class="lineno">14626</span>&#160;    <span class="comment">// The truth is out there... (C++files)</span></div>
<div class="line"><a name="l14627"></a><span class="lineno">14627</span>&#160; </div>
<div class="line"><a name="l14628"></a><span class="lineno">14628</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l14629"></a><span class="lineno">14629</span>&#160;    }</div>
<div class="line"><a name="l14630"></a><span class="lineno">14630</span>&#160; </div>
<div class="line"><a name="l14631"></a><span class="lineno">14631</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14632"></a><span class="lineno">14632</span>&#160; </div>
<div class="line"><a name="l14633"></a><span class="lineno">14633</span>&#160;<span class="comment">// Bingo! Now you are learned to use the Source, Luke. And may the Source be with you.</span></div>
<div class="line"><a name="l14634"></a><span class="lineno">14634</span>&#160; </div>
<div class="line"><a name="l14635"></a><span class="lineno">14635</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> txDisableAutoPause()</div>
<div class="line"><a name="l14636"></a><span class="lineno">14636</span>&#160;    {</div>
<div class="line"><a name="l14637"></a><span class="lineno">14637</span>&#160;    _txExit = <span class="keyword">true</span>;</div>
<div class="line"><a name="l14638"></a><span class="lineno">14638</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l14639"></a><span class="lineno">14639</span>&#160;    }</div>
<div class="line"><a name="l14640"></a><span class="lineno">14640</span>&#160; </div>
<div class="line"><a name="l14641"></a><span class="lineno">14641</span>&#160;<span class="comment">// P.S. This library contains more undocumented functions. Search them via &quot;Luke&quot; keyword.</span></div>
<div class="line"><a name="l14642"></a><span class="lineno">14642</span>&#160; </div>
<div class="line"><a name="l14643"></a><span class="lineno">14643</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14644"></a><span class="lineno">14644</span>&#160; </div>
<div class="line"><a name="l14645"></a><span class="lineno">14645</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l14646"></a><span class="lineno">14646</span>&#160; </div>
<div class="line"><a name="l14647"></a><span class="lineno">14647</span>&#160;<span class="keywordtype">void</span> _txDump (<span class="keyword">const</span> <span class="keywordtype">void</span>* address, <span class="keyword">const</span> <span class="keywordtype">char</span> name[] <span class="comment">/*= &quot;_txDump()&quot;*/</span>, <span class="keywordtype">bool</span> pause <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l14648"></a><span class="lineno">14648</span>&#160;    {</div>
<div class="line"><a name="l14649"></a><span class="lineno">14649</span>&#160;$1  assert (!_txIsBadReadPtr (address));</div>
<div class="line"><a name="l14650"></a><span class="lineno">14650</span>&#160; </div>
<div class="line"><a name="l14651"></a><span class="lineno">14651</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* p = (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) address;</div>
<div class="line"><a name="l14652"></a><span class="lineno">14652</span>&#160;$   <span class="keywordtype">unsigned</span> x = 0;</div>
<div class="line"><a name="l14653"></a><span class="lineno">14653</span>&#160; </div>
<div class="line"><a name="l14654"></a><span class="lineno">14654</span>&#160;$   <span class="keywordtype">unsigned</span> attr = <a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a>();</div>
<div class="line"><a name="l14655"></a><span class="lineno">14655</span>&#160; </div>
<div class="line"><a name="l14656"></a><span class="lineno">14656</span>&#160;$   <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_WHITE);</div>
<div class="line"><a name="l14657"></a><span class="lineno">14657</span>&#160;$   printf (<span class="stringliteral">&quot;\n%*.*s &quot;</span>, (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span> (address) * 2, (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span> (address) * 2, ((name)? name : <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l14658"></a><span class="lineno">14658</span>&#160; </div>
<div class="line"><a name="l14659"></a><span class="lineno">14659</span>&#160;$   <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_YELLOW);</div>
<div class="line"><a name="l14660"></a><span class="lineno">14660</span>&#160;$   <span class="keywordflow">for</span> (x = 0; x &lt; 16; x++) printf (<span class="stringliteral">&quot;%02X &quot;</span>, x);</div>
<div class="line"><a name="l14661"></a><span class="lineno">14661</span>&#160;$   <span class="keywordflow">for</span> (x = 0; x &lt; 16; x++) printf (<span class="stringliteral">&quot;%X&quot;</span>,    x);</div>
<div class="line"><a name="l14662"></a><span class="lineno">14662</span>&#160; </div>
<div class="line"><a name="l14663"></a><span class="lineno">14663</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>   isCtrl[] = <span class="stringliteral">&quot;\a&quot;</span> <span class="stringliteral">&quot;\b&quot;</span> <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;\r&quot;</span> <span class="stringliteral">&quot;\t&quot;</span> <span class="stringliteral">&quot;\0&quot;</span>;</div>
<div class="line"><a name="l14664"></a><span class="lineno">14664</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>   xlatCh[] =  <span class="stringliteral">&quot;·&quot;</span>  <span class="stringliteral">&quot;·&quot;</span>  <span class="stringliteral">&quot;·&quot;</span>  <span class="stringliteral">&quot;·&quot;</span>  <span class="stringliteral">&quot;·&quot;</span>  <span class="stringliteral">&quot;·&quot;</span>;</div>
<div class="line"><a name="l14665"></a><span class="lineno">14665</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">size_t</span> szCtrl   = <span class="keyword">sizeof</span> (isCtrl) - 1;</div>
<div class="line"><a name="l14666"></a><span class="lineno">14666</span>&#160; </div>
<div class="line"><a name="l14667"></a><span class="lineno">14667</span>&#160;$   <span class="keywordtype">int</span> oldCP = GetConsoleOutputCP();</div>
<div class="line"><a name="l14668"></a><span class="lineno">14668</span>&#160; </div>
<div class="line"><a name="l14669"></a><span class="lineno">14669</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; 16; y++, p += 16)</div>
<div class="line"><a name="l14670"></a><span class="lineno">14670</span>&#160;        {</div>
<div class="line"><a name="l14671"></a><span class="lineno">14671</span>&#160;        <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_YELLOW);</div>
<div class="line"><a name="l14672"></a><span class="lineno">14672</span>&#160; </div>
<div class="line"><a name="l14673"></a><span class="lineno">14673</span>&#160;        printf (<span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;%*p &quot;</span>, (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span> (address) * 2, p);</div>
<div class="line"><a name="l14674"></a><span class="lineno">14674</span>&#160; </div>
<div class="line"><a name="l14675"></a><span class="lineno">14675</span>&#160;        <span class="keywordtype">int</span> color = FOREGROUND_LIGHTGREEN;</div>
<div class="line"><a name="l14676"></a><span class="lineno">14676</span>&#160; </div>
<div class="line"><a name="l14677"></a><span class="lineno">14677</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; 16; x++)</div>
<div class="line"><a name="l14678"></a><span class="lineno">14678</span>&#160;            {</div>
<div class="line"><a name="l14679"></a><span class="lineno">14679</span>&#160;            <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (color + x/4%2);     <span class="comment">//-V112</span></div>
<div class="line"><a name="l14680"></a><span class="lineno">14680</span>&#160;            printf (<span class="stringliteral">&quot;%02X &quot;</span>, p[x]);</div>
<div class="line"><a name="l14681"></a><span class="lineno">14681</span>&#160;            }</div>
<div class="line"><a name="l14682"></a><span class="lineno">14682</span>&#160; </div>
<div class="line"><a name="l14683"></a><span class="lineno">14683</span>&#160;        <span class="keywordflow">for</span> (x = 0; x &lt; 16; x++)</div>
<div class="line"><a name="l14684"></a><span class="lineno">14684</span>&#160;            {</div>
<div class="line"><a name="l14685"></a><span class="lineno">14685</span>&#160;            <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (color + x/4%2);     <span class="comment">//-V112</span></div>
<div class="line"><a name="l14686"></a><span class="lineno">14686</span>&#160; </div>
<div class="line"><a name="l14687"></a><span class="lineno">14687</span>&#160;            <span class="keywordtype">char</span> c = p[x];</div>
<div class="line"><a name="l14688"></a><span class="lineno">14688</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span>* ctrl = (<span class="keyword">const</span> <span class="keywordtype">char</span>*) memchr (isCtrl, c, szCtrl);</div>
<div class="line"><a name="l14689"></a><span class="lineno">14689</span>&#160;            <span class="keywordflow">if</span> (ctrl) c = xlatCh [ctrl - isCtrl];</div>
<div class="line"><a name="l14690"></a><span class="lineno">14690</span>&#160; </div>
<div class="line"><a name="l14691"></a><span class="lineno">14691</span>&#160;            <span class="keywordflow">if</span> (ctrl) SetConsoleOutputCP (1251);  <span class="comment">//-V581</span></div>
<div class="line"><a name="l14692"></a><span class="lineno">14692</span>&#160; </div>
<div class="line"><a name="l14693"></a><span class="lineno">14693</span>&#160;            printf (<span class="stringliteral">&quot;%c&quot;</span>, c);</div>
<div class="line"><a name="l14694"></a><span class="lineno">14694</span>&#160; </div>
<div class="line"><a name="l14695"></a><span class="lineno">14695</span>&#160;            <span class="keywordflow">if</span> (ctrl) SetConsoleOutputCP (oldCP);</div>
<div class="line"><a name="l14696"></a><span class="lineno">14696</span>&#160;            }</div>
<div class="line"><a name="l14697"></a><span class="lineno">14697</span>&#160;        }</div>
<div class="line"><a name="l14698"></a><span class="lineno">14698</span>&#160; </div>
<div class="line"><a name="l14699"></a><span class="lineno">14699</span>&#160;$   <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (attr);</div>
<div class="line"><a name="l14700"></a><span class="lineno">14700</span>&#160;$   printf (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l14701"></a><span class="lineno">14701</span>&#160; </div>
<div class="line"><a name="l14702"></a><span class="lineno">14702</span>&#160;$   <span class="keywordflow">if</span> (pause)</div>
<div class="line"><a name="l14703"></a><span class="lineno">14703</span>&#160;        {</div>
<div class="line"><a name="l14704"></a><span class="lineno">14704</span>&#160;$       SetConsoleOutputCP (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>);</div>
<div class="line"><a name="l14705"></a><span class="lineno">14705</span>&#160; </div>
<div class="line"><a name="l14706"></a><span class="lineno">14706</span>&#160;$       fprintf (stderr, <span class="stringliteral">&quot;%-*s CodePage = %5d\n&quot;</span>, (<span class="keywordtype">int</span>) <span class="keyword">sizeof</span> (<span class="keywordtype">void</span>*) * 2 + 16*3, <span class="stringliteral">&quot;[Нажмите любую клавишу для продолжения]&quot;</span>, oldCP);</div>
<div class="line"><a name="l14707"></a><span class="lineno">14707</span>&#160;$       (void)_getch();</div>
<div class="line"><a name="l14708"></a><span class="lineno">14708</span>&#160; </div>
<div class="line"><a name="l14709"></a><span class="lineno">14709</span>&#160;$       SetConsoleOutputCP (oldCP);</div>
<div class="line"><a name="l14710"></a><span class="lineno">14710</span>&#160;        }</div>
<div class="line"><a name="l14711"></a><span class="lineno">14711</span>&#160;    }</div>
<div class="line"><a name="l14712"></a><span class="lineno">14712</span>&#160; </div>
<div class="line"><a name="l14713"></a><span class="lineno">14713</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14714"></a><span class="lineno">14714</span>&#160; </div>
<div class="line"><a name="l14715"></a><span class="lineno">14715</span>&#160;<span class="keywordtype">void</span> _txStackBackTrace (<span class="keyword">const</span> <span class="keywordtype">char</span> file[] <span class="comment">/*= &quot;?&quot;*/</span>, <span class="keywordtype">int</span> line <span class="comment">/*= 0*/</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> func[] <span class="comment">/*= &quot;?&quot;*/</span>,</div>
<div class="line"><a name="l14716"></a><span class="lineno">14716</span>&#160;                        <span class="keywordtype">bool</span> readSource <span class="comment">/*= true*/</span>)</div>
<div class="line"><a name="l14717"></a><span class="lineno">14717</span>&#160;    {</div>
<div class="line"><a name="l14718"></a><span class="lineno">14718</span>&#160;$1  <span class="keywordtype">unsigned</span> attr = <a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a>();</div>
<div class="line"><a name="l14719"></a><span class="lineno">14719</span>&#160;$   <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (FOREGROUND_LIGHTCYAN);</div>
<div class="line"><a name="l14720"></a><span class="lineno">14720</span>&#160; </div>
<div class="line"><a name="l14721"></a><span class="lineno">14721</span>&#160;$   fprintf (stderr, <span class="stringliteral">&quot;\n&quot;</span> <span class="stringliteral">&quot;--------------------------------------------------\n&quot;</span></div>
<div class="line"><a name="l14722"></a><span class="lineno">14722</span>&#160;                          <span class="stringliteral">&quot;Трассировка стека из \&quot;%s\&quot; at %s (%d):\n\n&quot;</span></div>
<div class="line"><a name="l14723"></a><span class="lineno">14723</span>&#160;                          <span class="stringliteral">&quot;%s\n\n&quot;</span></div>
<div class="line"><a name="l14724"></a><span class="lineno">14724</span>&#160;                          <span class="stringliteral">&quot;--------------------------------------------------\n\n&quot;</span>,</div>
<div class="line"><a name="l14725"></a><span class="lineno">14725</span>&#160;                          func, file, line, _txCaptureStackBackTrace (1, readSource));</div>
<div class="line"><a name="l14726"></a><span class="lineno">14726</span>&#160; </div>
<div class="line"><a name="l14727"></a><span class="lineno">14727</span>&#160;$   <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (attr);</div>
<div class="line"><a name="l14728"></a><span class="lineno">14728</span>&#160;    }</div>
<div class="line"><a name="l14729"></a><span class="lineno">14729</span>&#160; </div>
<div class="line"><a name="l14730"></a><span class="lineno">14730</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14731"></a><span class="lineno">14731</span>&#160; </div>
<div class="line"><a name="l14732"></a><span class="lineno">14732</span>&#160;<span class="keywordtype">char</span>* <a class="code" href="group___misc.html#gafbd4278ff893fc1c1e28b086197adebe">txDemangle</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* mangledName, std::nomeow_t)</div>
<div class="line"><a name="l14733"></a><span class="lineno">14733</span>&#160;    {</div>
<div class="line"><a name="l14734"></a><span class="lineno">14734</span>&#160;$1  <span class="keywordflow">if</span> (!mangledName) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l14735"></a><span class="lineno">14735</span>&#160; </div>
<div class="line"><a name="l14736"></a><span class="lineno">14736</span>&#160;$   <span class="keywordtype">char</span>* typeName = NULL;</div>
<div class="line"><a name="l14737"></a><span class="lineno">14737</span>&#160; </div>
<div class="line"><a name="l14738"></a><span class="lineno">14738</span>&#160;<span class="preprocessor">    #if defined (_GCC_VER)</span></div>
<div class="line"><a name="l14739"></a><span class="lineno">14739</span>&#160; </div>
<div class="line"><a name="l14740"></a><span class="lineno">14740</span>&#160;$   <span class="keywordtype">int</span> err = 1;</div>
<div class="line"><a name="l14741"></a><span class="lineno">14741</span>&#160;$   typeName = ::abi::__cxa_demangle (mangledName, 0, 0, &amp;err); (void) err;</div>
<div class="line"><a name="l14742"></a><span class="lineno">14742</span>&#160;    <span class="keywordflow">if</span> (typeName) {$ <span class="keywordflow">return</span> typeName; }</div>
<div class="line"><a name="l14743"></a><span class="lineno">14743</span>&#160; </div>
<div class="line"><a name="l14744"></a><span class="lineno">14744</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l14745"></a><span class="lineno">14745</span>&#160; </div>
<div class="line"><a name="l14746"></a><span class="lineno">14746</span>&#160;$   <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> flags = 0;</div>
<div class="line"><a name="l14747"></a><span class="lineno">14747</span>&#160; </div>
<div class="line"><a name="l14748"></a><span class="lineno">14748</span>&#160;$   <span class="keywordflow">if</span> (mangledName[0] == <span class="charliteral">&#39;.&#39;</span>)</div>
<div class="line"><a name="l14749"></a><span class="lineno">14749</span>&#160;        {</div>
<div class="line"><a name="l14750"></a><span class="lineno">14750</span>&#160;$       mangledName++;</div>
<div class="line"><a name="l14751"></a><span class="lineno">14751</span>&#160;$       flags = 0x2800;  <span class="comment">// UNDNAME_32_BIT_DECODE | UNDNAME_TYPE_ONLY</span></div>
<div class="line"><a name="l14752"></a><span class="lineno">14752</span>&#160;        }</div>
<div class="line"><a name="l14753"></a><span class="lineno">14753</span>&#160; </div>
<div class="line"><a name="l14754"></a><span class="lineno">14754</span>&#160;$   typeName = _TX_CALL (Win32::__unDName, (NULL, mangledName, 0, malloc, free, flags));</div>
<div class="line"><a name="l14755"></a><span class="lineno">14755</span>&#160;    <span class="keywordflow">if</span> (typeName) {$ <span class="keywordflow">return</span> typeName; }</div>
<div class="line"><a name="l14756"></a><span class="lineno">14756</span>&#160; </div>
<div class="line"><a name="l14757"></a><span class="lineno">14757</span>&#160;$   <span class="keywordflow">return</span> _strdup (mangledName);</div>
<div class="line"><a name="l14758"></a><span class="lineno">14758</span>&#160;    }</div>
<div class="line"><a name="l14759"></a><span class="lineno">14759</span>&#160; </div>
<div class="line"><a name="l14760"></a><span class="lineno">14760</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14761"></a><span class="lineno">14761</span>&#160; </div>
<div class="line"><a name="l14762"></a><span class="lineno">14762</span>&#160;std::string <a class="code" href="group___misc.html#gafbd4278ff893fc1c1e28b086197adebe">txDemangle</a> (<span class="keyword">const</span> <span class="keywordtype">char</span>* mangledName)</div>
<div class="line"><a name="l14763"></a><span class="lineno">14763</span>&#160;    {</div>
<div class="line"><a name="l14764"></a><span class="lineno">14764</span>&#160;$1  <span class="keywordtype">char</span>* typeName = <a class="code" href="group___misc.html#gafbd4278ff893fc1c1e28b086197adebe">txDemangle</a> (mangledName, std::nomeow);</div>
<div class="line"><a name="l14765"></a><span class="lineno">14765</span>&#160;$   std::string name (typeName? typeName : <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l14766"></a><span class="lineno">14766</span>&#160;$   free (typeName);</div>
<div class="line"><a name="l14767"></a><span class="lineno">14767</span>&#160; </div>
<div class="line"><a name="l14768"></a><span class="lineno">14768</span>&#160;$   <span class="keywordflow">return</span> name;</div>
<div class="line"><a name="l14769"></a><span class="lineno">14769</span>&#160;    }</div>
<div class="line"><a name="l14770"></a><span class="lineno">14770</span>&#160; </div>
<div class="line"><a name="l14771"></a><span class="lineno">14771</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14772"></a><span class="lineno">14772</span>&#160; </div>
<div class="line"><a name="l14773"></a><span class="lineno">14773</span>&#160;<span class="keywordtype">double</span> <a class="code" href="group___drawing.html#ga49983bddca35d531c521cf04c6c2449f">txQueryPerformance</a>()</div>
<div class="line"><a name="l14774"></a><span class="lineno">14774</span>&#160;    {</div>
<div class="line"><a name="l14775"></a><span class="lineno">14775</span>&#160;$1  <span class="keywordtype">int</span> maxTime    =  500;</div>
<div class="line"><a name="l14776"></a><span class="lineno">14776</span>&#160;$   <span class="keywordtype">int</span> maxSamples =  100;</div>
<div class="line"><a name="l14777"></a><span class="lineno">14777</span>&#160;$   POINT size     = {100, 100};</div>
<div class="line"><a name="l14778"></a><span class="lineno">14778</span>&#160; </div>
<div class="line"><a name="l14779"></a><span class="lineno">14779</span>&#160;$   HDC dc = _txBuffer_Create (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>(), &amp;size, NULL);</div>
<div class="line"><a name="l14780"></a><span class="lineno">14780</span>&#160;$   assert (dc); <span class="keywordflow">if</span> (!dc) <span class="keywordflow">return</span> -1;                                     <span class="comment">//-V547</span></div>
<div class="line"><a name="l14781"></a><span class="lineno">14781</span>&#160; </div>
<div class="line"><a name="l14782"></a><span class="lineno">14782</span>&#160;$   DWORD mask = (DWORD) SetThreadAffinityMask (GetCurrentThread(), 1);  <span class="comment">//-V202</span></div>
<div class="line"><a name="l14783"></a><span class="lineno">14783</span>&#160;$   assert (mask);</div>
<div class="line"><a name="l14784"></a><span class="lineno">14784</span>&#160; </div>
<div class="line"><a name="l14785"></a><span class="lineno">14785</span>&#160;$   LARGE_INTEGER freq = {};</div>
<div class="line"><a name="l14786"></a><span class="lineno">14786</span>&#160;$   QueryPerformanceFrequency (&amp;freq) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14787"></a><span class="lineno">14787</span>&#160; </div>
<div class="line"><a name="l14788"></a><span class="lineno">14788</span>&#160;$   LARGE_INTEGER start = {};</div>
<div class="line"><a name="l14789"></a><span class="lineno">14789</span>&#160;$   QueryPerformanceCounter (&amp;start) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14790"></a><span class="lineno">14790</span>&#160; </div>
<div class="line"><a name="l14791"></a><span class="lineno">14791</span>&#160;$   <span class="keywordtype">int</span> samples = 0;</div>
<div class="line"><a name="l14792"></a><span class="lineno">14792</span>&#160;$   <span class="keywordflow">while</span> (samples++ &lt; maxSamples)</div>
<div class="line"><a name="l14793"></a><span class="lineno">14793</span>&#160;        {</div>
<div class="line"><a name="l14794"></a><span class="lineno">14794</span>&#160;$       LARGE_INTEGER cur = {};</div>
<div class="line"><a name="l14795"></a><span class="lineno">14795</span>&#160;$       QueryPerformanceCounter (&amp;cur) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14796"></a><span class="lineno">14796</span>&#160; </div>
<div class="line"><a name="l14797"></a><span class="lineno">14797</span>&#160;$       <span class="keywordtype">double</span> t = 1000.0 * (double) (cur.QuadPart - start.QuadPart) / (double) freq.QuadPart;</div>
<div class="line"><a name="l14798"></a><span class="lineno">14798</span>&#160;$       if (t &gt; maxTime) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l14799"></a><span class="lineno">14799</span>&#160; </div>
<div class="line"><a name="l14800"></a><span class="lineno">14800</span>&#160;        <span class="comment">// Draw test scene</span></div>
<div class="line"><a name="l14801"></a><span class="lineno">14801</span>&#160; </div>
<div class="line"><a name="l14802"></a><span class="lineno">14802</span>&#160;$       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; size.y; y++)</div>
<div class="line"><a name="l14803"></a><span class="lineno">14803</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; size.x; x++)     <a class="code" href="group___drawing.html#gafafd861ab7dc599b2e68b258b6727c85">txSetPixel</a> (x, y, <a class="code" href="group___drawing.html#gacc1ae8a3821354abc2d3f8f42ee75706">TX_BLACK</a>, dc);</div>
<div class="line"><a name="l14804"></a><span class="lineno">14804</span>&#160; </div>
<div class="line"><a name="l14805"></a><span class="lineno">14805</span>&#160;$       <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = 0; y &lt; size.y; y += 10)</div>
<div class="line"><a name="l14806"></a><span class="lineno">14806</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; size.x; x += 50) <a class="code" href="group___drawing.html#ga52e119361961d9eee33c176a3084e55d">txTextOut</a>  (x, y, <span class="stringliteral">&quot;*&quot;</span>, dc);</div>
<div class="line"><a name="l14807"></a><span class="lineno">14807</span>&#160; </div>
<div class="line"><a name="l14808"></a><span class="lineno">14808</span>&#160;$       <a class="code" href="group___drawing.html#gaaf82e7c5a0fd06548f42c757f73d3dae">txEllipse</a> (0, 0, size.x, size.y, dc);</div>
<div class="line"><a name="l14809"></a><span class="lineno">14809</span>&#160;$       <a class="code" href="group___drawing.html#ga8adde0a20efa7597d8653653817353b2">txFloodFill</a> (size.x/2.0, size.y/2.0, <a class="code" href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a>, FLOODFILLSURFACE, dc);</div>
<div class="line"><a name="l14810"></a><span class="lineno">14810</span>&#160; </div>
<div class="line"><a name="l14811"></a><span class="lineno">14811</span>&#160;$       <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (dc, size.x/2.0,          0, size.x/2.0, size.y/2.0, dc,          0,          0) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14812"></a><span class="lineno">14812</span>&#160;$       <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (dc, size.x/2.0, size.y/2.0, size.x/2.0, size.y/2.0, dc,          0, size.y/2.0) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14813"></a><span class="lineno">14813</span>&#160;$       <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (dc,          0, size.y/2.0, size.x/2.0, size.y/2.0, dc,          0,          0) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14814"></a><span class="lineno">14814</span>&#160;$       <a class="code" href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a> (dc, size.x/2.0, size.y/2.0, size.x/2.0, size.y/2.0, dc, size.x/2.0,          0) <a class="code" href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a>;</div>
<div class="line"><a name="l14815"></a><span class="lineno">14815</span>&#160;        }</div>
<div class="line"><a name="l14816"></a><span class="lineno">14816</span>&#160; </div>
<div class="line"><a name="l14817"></a><span class="lineno">14817</span>&#160;$   mask = (DWORD) SetThreadAffinityMask (GetCurrentThread(), mask);  <span class="comment">//-V106 //-V202</span></div>
<div class="line"><a name="l14818"></a><span class="lineno">14818</span>&#160;$   assert (mask);</div>
<div class="line"><a name="l14819"></a><span class="lineno">14819</span>&#160; </div>
<div class="line"><a name="l14820"></a><span class="lineno">14820</span>&#160;$   _txBuffer_Delete (&amp;dc);</div>
<div class="line"><a name="l14821"></a><span class="lineno">14821</span>&#160; </div>
<div class="line"><a name="l14822"></a><span class="lineno">14822</span>&#160;$   return 3.0 * samples / sqrt (1.0 * size.x * size.y);</div>
<div class="line"><a name="l14823"></a><span class="lineno">14823</span>&#160;    }</div>
<div class="line"><a name="l14824"></a><span class="lineno">14824</span>&#160; </div>
<div class="line"><a name="l14825"></a><span class="lineno">14825</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14826"></a><span class="lineno">14826</span>&#160; </div>
<div class="line"><a name="l14827"></a><span class="lineno">14827</span>&#160;<span class="keywordtype">unsigned</span> <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (COLORREF color, COLORREF component)</div>
<div class="line"><a name="l14828"></a><span class="lineno">14828</span>&#160;    {</div>
<div class="line"><a name="l14829"></a><span class="lineno">14829</span>&#160;$1  <span class="keywordflow">switch</span> (component)</div>
<div class="line"><a name="l14830"></a><span class="lineno">14830</span>&#160;        {</div>
<div class="line"><a name="l14831"></a><span class="lineno">14831</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___drawing.html#ga93e1976dd8ae8d5e1b3932a4e5bfd158">TX_RED</a>:</div>
<div class="line"><a name="l14832"></a><span class="lineno">14832</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___drawing.html#gaa5cab2d4aa67ea50390c30f094a77862">TX_HUE</a>:        $ <span class="keywordflow">return</span> (color &gt;&gt;  0) &amp; 0xFF;</div>
<div class="line"><a name="l14833"></a><span class="lineno">14833</span>&#160; </div>
<div class="line"><a name="l14834"></a><span class="lineno">14834</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___drawing.html#ga32abcdee1b6897c768f21bf9264fe3eb">TX_GREEN</a>:</div>
<div class="line"><a name="l14835"></a><span class="lineno">14835</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___drawing.html#ga4395ad7eeeda9d2163a89996ca91133e">TX_SATURATION</a>: $ <span class="keywordflow">return</span> (color &gt;&gt;  8) &amp; 0xFF;</div>
<div class="line"><a name="l14836"></a><span class="lineno">14836</span>&#160; </div>
<div class="line"><a name="l14837"></a><span class="lineno">14837</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___drawing.html#gaa281a54954945bb0e96314fb4cfad7b9">TX_BLUE</a>:</div>
<div class="line"><a name="l14838"></a><span class="lineno">14838</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___drawing.html#ga03a8558c6bf26c0d6f59f85fc458c1a8">TX_LIGHTNESS</a>:  $ <span class="keywordflow">return</span> (color &gt;&gt; 16) &amp; 0xFF;</div>
<div class="line"><a name="l14839"></a><span class="lineno">14839</span>&#160; </div>
<div class="line"><a name="l14840"></a><span class="lineno">14840</span>&#160;        <span class="keywordflow">default</span>:            $ <span class="keywordflow">return</span> CLR_INVALID;</div>
<div class="line"><a name="l14841"></a><span class="lineno">14841</span>&#160;        }</div>
<div class="line"><a name="l14842"></a><span class="lineno">14842</span>&#160;    }</div>
<div class="line"><a name="l14843"></a><span class="lineno">14843</span>&#160; </div>
<div class="line"><a name="l14844"></a><span class="lineno">14844</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14845"></a><span class="lineno">14845</span>&#160; </div>
<div class="line"><a name="l14846"></a><span class="lineno">14846</span>&#160;COLORREF <a class="code" href="group___drawing.html#ga1350174ec2a2c83182437f04c88c2d95">txRGB2HSL</a> (COLORREF rgbColor)</div>
<div class="line"><a name="l14847"></a><span class="lineno">14847</span>&#160;    {</div>
<div class="line"><a name="l14848"></a><span class="lineno">14848</span>&#160;$1  <span class="keyword">struct </span>xRGB</div>
<div class="line"><a name="l14849"></a><span class="lineno">14849</span>&#160;        {</div>
<div class="line"><a name="l14850"></a><span class="lineno">14850</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> zero (<span class="keywordtype">double</span> val)</div>
<div class="line"><a name="l14851"></a><span class="lineno">14851</span>&#160;            {</div>
<div class="line"><a name="l14852"></a><span class="lineno">14852</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">double</span> prec = 0.001;</div>
<div class="line"><a name="l14853"></a><span class="lineno">14853</span>&#160; </div>
<div class="line"><a name="l14854"></a><span class="lineno">14854</span>&#160;            <span class="keywordflow">return</span> (fabs (val) &lt; prec);</div>
<div class="line"><a name="l14855"></a><span class="lineno">14855</span>&#160;            }</div>
<div class="line"><a name="l14856"></a><span class="lineno">14856</span>&#160;        };</div>
<div class="line"><a name="l14857"></a><span class="lineno">14857</span>&#160; </div>
<div class="line"><a name="l14858"></a><span class="lineno">14858</span>&#160;$   <span class="keywordtype">double</span> r  = <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (rgbColor, <a class="code" href="group___drawing.html#ga93e1976dd8ae8d5e1b3932a4e5bfd158">TX_RED</a>)   / 255.0,  <span class="comment">//-V2551</span></div>
<div class="line"><a name="l14859"></a><span class="lineno">14859</span>&#160;           g  = <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (rgbColor, <a class="code" href="group___drawing.html#ga32abcdee1b6897c768f21bf9264fe3eb">TX_GREEN</a>) / 255.0,  <span class="comment">//-V2551</span></div>
<div class="line"><a name="l14860"></a><span class="lineno">14860</span>&#160;           b  = <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (rgbColor, <a class="code" href="group___drawing.html#gaa281a54954945bb0e96314fb4cfad7b9">TX_BLUE</a>)  / 255.0,  <span class="comment">//-V2551</span></div>
<div class="line"><a name="l14861"></a><span class="lineno">14861</span>&#160; </div>
<div class="line"><a name="l14862"></a><span class="lineno">14862</span>&#160;           m1 = <a class="code" href="group___misc.html#gafa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a> (<a class="code" href="group___misc.html#gafa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a> (r, g), b),</div>
<div class="line"><a name="l14863"></a><span class="lineno">14863</span>&#160;           m2 = <a class="code" href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a> (<a class="code" href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a> (r, g), b),</div>
<div class="line"><a name="l14864"></a><span class="lineno">14864</span>&#160;           dm = m1 - m2,</div>
<div class="line"><a name="l14865"></a><span class="lineno">14865</span>&#160;           sm = m1 + m2,</div>
<div class="line"><a name="l14866"></a><span class="lineno">14866</span>&#160; </div>
<div class="line"><a name="l14867"></a><span class="lineno">14867</span>&#160;           h  = 0,</div>
<div class="line"><a name="l14868"></a><span class="lineno">14868</span>&#160;           s  = 0,</div>
<div class="line"><a name="l14869"></a><span class="lineno">14869</span>&#160;           l  = sm / 2;</div>
<div class="line"><a name="l14870"></a><span class="lineno">14870</span>&#160; </div>
<div class="line"><a name="l14871"></a><span class="lineno">14871</span>&#160;$   <span class="keywordflow">if</span> (!xRGB::zero (dm))</div>
<div class="line"><a name="l14872"></a><span class="lineno">14872</span>&#160;        {</div>
<div class="line"><a name="l14873"></a><span class="lineno">14873</span>&#160;$       sm = (sm &lt;= 1)? sm : (2-sm);</div>
<div class="line"><a name="l14874"></a><span class="lineno">14874</span>&#160;$       s = (!xRGB::zero (sm))? dm/sm : 0;</div>
<div class="line"><a name="l14875"></a><span class="lineno">14875</span>&#160; </div>
<div class="line"><a name="l14876"></a><span class="lineno">14876</span>&#160;$       <span class="keywordtype">double</span> cr = (!xRGB::zero (dm))? (m1 - r) / dm : 0,</div>
<div class="line"><a name="l14877"></a><span class="lineno">14877</span>&#160;               cg = (!xRGB::zero (dm))? (m1 - g) / dm : 0,</div>
<div class="line"><a name="l14878"></a><span class="lineno">14878</span>&#160;               cb = (!xRGB::zero (dm))? (m1 - b) / dm : 0;</div>
<div class="line"><a name="l14879"></a><span class="lineno">14879</span>&#160; </div>
<div class="line"><a name="l14880"></a><span class="lineno">14880</span>&#160;$       <span class="keywordflow">if</span> (xRGB::zero (r - m1)) h =     cb - cg;</div>
<div class="line"><a name="l14881"></a><span class="lineno">14881</span>&#160;$       <span class="keywordflow">if</span> (xRGB::zero (g - m1)) h = 2 + cr - cb;</div>
<div class="line"><a name="l14882"></a><span class="lineno">14882</span>&#160;$       <span class="keywordflow">if</span> (xRGB::zero (b - m1)) h = 4 + cg - cr;</div>
<div class="line"><a name="l14883"></a><span class="lineno">14883</span>&#160;        }</div>
<div class="line"><a name="l14884"></a><span class="lineno">14884</span>&#160; </div>
<div class="line"><a name="l14885"></a><span class="lineno">14885</span>&#160;$   h = (h &gt;= 0)? h*60 : h*60 + 360;</div>
<div class="line"><a name="l14886"></a><span class="lineno">14886</span>&#160; </div>
<div class="line"><a name="l14887"></a><span class="lineno">14887</span>&#160;$   <span class="keywordflow">return</span> RGB (<a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (h / 360.0 * 256), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (s * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (l * 255));</div>
<div class="line"><a name="l14888"></a><span class="lineno">14888</span>&#160;    }</div>
<div class="line"><a name="l14889"></a><span class="lineno">14889</span>&#160; </div>
<div class="line"><a name="l14890"></a><span class="lineno">14890</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14891"></a><span class="lineno">14891</span>&#160; </div>
<div class="line"><a name="l14892"></a><span class="lineno">14892</span>&#160;COLORREF <a class="code" href="group___drawing.html#ga6d5e95c1f234d32b8859826859127244">txHSL2RGB</a> (COLORREF hslColor)</div>
<div class="line"><a name="l14893"></a><span class="lineno">14893</span>&#160;    {</div>
<div class="line"><a name="l14894"></a><span class="lineno">14894</span>&#160;$1  <span class="keyword">struct </span>xRGB</div>
<div class="line"><a name="l14895"></a><span class="lineno">14895</span>&#160;        {</div>
<div class="line"><a name="l14896"></a><span class="lineno">14896</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">double</span> calc (<span class="keywordtype">double</span> h, <span class="keywordtype">double</span> m1, <span class="keywordtype">double</span> m2)</div>
<div class="line"><a name="l14897"></a><span class="lineno">14897</span>&#160;            {</div>
<div class="line"><a name="l14898"></a><span class="lineno">14898</span>&#160;$2          <span class="keywordflow">while</span> (h &lt; 0)   h += 360;</div>
<div class="line"><a name="l14899"></a><span class="lineno">14899</span>&#160;$           <span class="keywordflow">while</span> (h &gt; 360) h -= 360;</div>
<div class="line"><a name="l14900"></a><span class="lineno">14900</span>&#160; </div>
<div class="line"><a name="l14901"></a><span class="lineno">14901</span>&#160;$           <span class="keywordflow">return</span> (h &lt;  60)? m1 + (m2-m1) *      h  / 60 :</div>
<div class="line"><a name="l14902"></a><span class="lineno">14902</span>&#160;                   (h &lt; 180)? m2 :</div>
<div class="line"><a name="l14903"></a><span class="lineno">14903</span>&#160;                   (h &lt; 240)? m1 + (m2-m1) * (240-h) / 60 :</div>
<div class="line"><a name="l14904"></a><span class="lineno">14904</span>&#160;                              m1;</div>
<div class="line"><a name="l14905"></a><span class="lineno">14905</span>&#160;            }</div>
<div class="line"><a name="l14906"></a><span class="lineno">14906</span>&#160;        };</div>
<div class="line"><a name="l14907"></a><span class="lineno">14907</span>&#160; </div>
<div class="line"><a name="l14908"></a><span class="lineno">14908</span>&#160;$   <span class="keywordtype">int</span>    si = <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (hslColor, <a class="code" href="group___drawing.html#ga4395ad7eeeda9d2163a89996ca91133e">TX_SATURATION</a>);</div>
<div class="line"><a name="l14909"></a><span class="lineno">14909</span>&#160; </div>
<div class="line"><a name="l14910"></a><span class="lineno">14910</span>&#160;$   <span class="keywordtype">double</span> h  = <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (hslColor, <a class="code" href="group___drawing.html#gaa5cab2d4aa67ea50390c30f094a77862">TX_HUE</a>)        / 256.0 * 360,</div>
<div class="line"><a name="l14911"></a><span class="lineno">14911</span>&#160;           s  = <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (hslColor, <a class="code" href="group___drawing.html#ga4395ad7eeeda9d2163a89996ca91133e">TX_SATURATION</a>) / 255.0,</div>
<div class="line"><a name="l14912"></a><span class="lineno">14912</span>&#160;           l  = <a class="code" href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a> (hslColor, <a class="code" href="group___drawing.html#ga03a8558c6bf26c0d6f59f85fc458c1a8">TX_LIGHTNESS</a>)  / 255.0,</div>
<div class="line"><a name="l14913"></a><span class="lineno">14913</span>&#160; </div>
<div class="line"><a name="l14914"></a><span class="lineno">14914</span>&#160;           m2 = (l &lt;= 0.5)? l * (1 + s) : l + s - l * s,</div>
<div class="line"><a name="l14915"></a><span class="lineno">14915</span>&#160;           m1 = 2 * l - m2,</div>
<div class="line"><a name="l14916"></a><span class="lineno">14916</span>&#160; </div>
<div class="line"><a name="l14917"></a><span class="lineno">14917</span>&#160;           r = (si)? xRGB::calc (h + 120, m1, m2) : l,</div>
<div class="line"><a name="l14918"></a><span class="lineno">14918</span>&#160;           g = (si)? xRGB::calc (h,       m1, m2) : l,</div>
<div class="line"><a name="l14919"></a><span class="lineno">14919</span>&#160;           b = (si)? xRGB::calc (h - 120, m1, m2) : l;</div>
<div class="line"><a name="l14920"></a><span class="lineno">14920</span>&#160; </div>
<div class="line"><a name="l14921"></a><span class="lineno">14921</span>&#160;$   <span class="keywordflow">return</span> RGB (<a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (r * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (g * 255), <a class="code" href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a> (b * 255));</div>
<div class="line"><a name="l14922"></a><span class="lineno">14922</span>&#160;    }</div>
<div class="line"><a name="l14923"></a><span class="lineno">14923</span>&#160; </div>
<div class="line"><a name="l14924"></a><span class="lineno">14924</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14925"></a><span class="lineno">14925</span>&#160; </div>
<div class="line"><a name="l14926"></a><span class="lineno">14926</span>&#160;<span class="keywordtype">void</span> <a class="code" href="group___misc.html#ga5de732de72c46b992ac2feeac2de7e42">tx_fpreset</a>()</div>
<div class="line"><a name="l14927"></a><span class="lineno">14927</span>&#160;    {</div>
<div class="line"><a name="l14928"></a><span class="lineno">14928</span>&#160;$1  <a class="code" href="classtx_auto_lock.html">txAutoLock</a> _lock;</div>
<div class="line"><a name="l14929"></a><span class="lineno">14929</span>&#160; </div>
<div class="line"><a name="l14930"></a><span class="lineno">14930</span>&#160;$   Win32::_fpreset();</div>
<div class="line"><a name="l14931"></a><span class="lineno">14931</span>&#160; </div>
<div class="line"><a name="l14932"></a><span class="lineno">14932</span>&#160;$   <span class="keywordtype">unsigned</span> new87 = 0x0008001C;  <span class="comment">// _EM_INVALID | _EM_DENORMAL | _EM_ZERODIVIDE | _EM_OVERFLOW | _EM_UNDERFLOW</span></div>
<div class="line"><a name="l14933"></a><span class="lineno">14933</span>&#160; </div>
<div class="line"><a name="l14934"></a><span class="lineno">14934</span>&#160;<span class="preprocessor">    #if !defined (__CYGWIN__)</span></div>
<div class="line"><a name="l14935"></a><span class="lineno">14935</span>&#160; </div>
<div class="line"><a name="l14936"></a><span class="lineno">14936</span>&#160;$   <span class="keywordtype">unsigned</span> old87 = 0;</div>
<div class="line"><a name="l14937"></a><span class="lineno">14937</span>&#160;$   <span class="keywordflow">if</span> (_controlfp_s (&amp;old87, 0, 0) == 0)</div>
<div class="line"><a name="l14938"></a><span class="lineno">14938</span>&#160;        {$ (void) _controlfp_s (&amp;old87, old87  &amp; ~new87, 0x0008001F); }  <span class="comment">// _MCW_EM</span></div>
<div class="line"><a name="l14939"></a><span class="lineno">14939</span>&#160; </div>
<div class="line"><a name="l14940"></a><span class="lineno">14940</span>&#160;<span class="preprocessor">    #else</span></div>
<div class="line"><a name="l14941"></a><span class="lineno">14941</span>&#160; </div>
<div class="line"><a name="l14942"></a><span class="lineno">14942</span>&#160;$   Win32::_controlfp (Win32::_controlfp (0, 0) &amp; ~new87, 0x0008001F);    <span class="comment">// _MCW_EM</span></div>
<div class="line"><a name="l14943"></a><span class="lineno">14943</span>&#160; </div>
<div class="line"><a name="l14944"></a><span class="lineno">14944</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l14945"></a><span class="lineno">14945</span>&#160;    }</div>
<div class="line"><a name="l14946"></a><span class="lineno">14946</span>&#160; </div>
<div class="line"><a name="l14947"></a><span class="lineno">14947</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l14948"></a><span class="lineno">14948</span>&#160; </div>
<div class="line"><a name="l14949"></a><span class="lineno">14949</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14950"></a><span class="lineno">14950</span>&#160; </div>
<div class="line"><a name="l14951"></a><span class="lineno">14951</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11)</span></div>
<div class="line"><a name="l14952"></a><span class="lineno">14952</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> txFramesToAverage&gt;</div>
<div class="line"><a name="l14953"></a><span class="lineno">14953</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l14954"></a><span class="lineno">14954</span>&#160; </div>
<div class="line"><a name="l14955"></a><span class="lineno">14955</span>&#160;<span class="keywordtype">double</span> <a class="code" href="group___drawing.html#ga1aca71127c9986f995b2372903d65964">txGetFPS</a> (<span class="keywordtype">int</span> minFrames)</div>
<div class="line"><a name="l14956"></a><span class="lineno">14956</span>&#160;    {</div>
<div class="line"><a name="l14957"></a><span class="lineno">14957</span>&#160;$1  <span class="keyword">static</span> _tx_thread LARGE_INTEGER time0 = {}; <span class="keywordflow">if</span> (!time0.QuadPart) QueryPerformanceCounter (&amp;time0);</div>
<div class="line"><a name="l14958"></a><span class="lineno">14958</span>&#160;$                     LARGE_INTEGER time  = {};                      QueryPerformanceCounter (&amp;time);</div>
<div class="line"><a name="l14959"></a><span class="lineno">14959</span>&#160; </div>
<div class="line"><a name="l14960"></a><span class="lineno">14960</span>&#160;$   <span class="keywordflow">if</span> (time.QuadPart - time0.QuadPart == 0)</div>
<div class="line"><a name="l14961"></a><span class="lineno">14961</span>&#160;        {$ <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l14962"></a><span class="lineno">14962</span>&#160; </div>
<div class="line"><a name="l14963"></a><span class="lineno">14963</span>&#160;$   LARGE_INTEGER freq = {}; QueryPerformanceFrequency (&amp;freq);</div>
<div class="line"><a name="l14964"></a><span class="lineno">14964</span>&#160; </div>
<div class="line"><a name="l14965"></a><span class="lineno">14965</span>&#160;$   <span class="keywordtype">double</span> fps = (double) freq.QuadPart / (<span class="keywordtype">double</span>) (time.QuadPart - time0.QuadPart);</div>
<div class="line"><a name="l14966"></a><span class="lineno">14966</span>&#160;$   time0 = time;</div>
<div class="line"><a name="l14967"></a><span class="lineno">14967</span>&#160; </div>
<div class="line"><a name="l14968"></a><span class="lineno">14968</span>&#160;$   <span class="keywordflow">if</span> (txFramesToAverage == 0) <span class="keywordflow">return</span> fps;</div>
<div class="line"><a name="l14969"></a><span class="lineno">14969</span>&#160; </div>
<div class="line"><a name="l14970"></a><span class="lineno">14970</span>&#160;$   <span class="keyword">static</span> _tx_thread <span class="keywordtype">double</span> average [txFramesToAverage] = {};</div>
<div class="line"><a name="l14971"></a><span class="lineno">14971</span>&#160;$   <span class="keyword">static</span> _tx_thread <span class="keywordtype">unsigned</span> n = 0;</div>
<div class="line"><a name="l14972"></a><span class="lineno">14972</span>&#160; </div>
<div class="line"><a name="l14973"></a><span class="lineno">14973</span>&#160;$   average [n++ % txFramesToAverage] = fps;</div>
<div class="line"><a name="l14974"></a><span class="lineno">14974</span>&#160; </div>
<div class="line"><a name="l14975"></a><span class="lineno">14975</span>&#160;$   <span class="keywordtype">unsigned</span> nn = <a class="code" href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a> (n, (<span class="keywordtype">unsigned</span>) <a class="code" href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a> (average));</div>
<div class="line"><a name="l14976"></a><span class="lineno">14976</span>&#160; </div>
<div class="line"><a name="l14977"></a><span class="lineno">14977</span>&#160;$   fps = 0;</div>
<div class="line"><a name="l14978"></a><span class="lineno">14978</span>&#160;$   <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; nn; i++) fps += average[i];</div>
<div class="line"><a name="l14979"></a><span class="lineno">14979</span>&#160;$   fps /= nn;</div>
<div class="line"><a name="l14980"></a><span class="lineno">14980</span>&#160; </div>
<div class="line"><a name="l14981"></a><span class="lineno">14981</span>&#160;$   <span class="keywordflow">return</span> ((<span class="keywordtype">int</span>)n &gt;= <a class="code" href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a> (minFrames, txFramesToAverage))? fps : 0;</div>
<div class="line"><a name="l14982"></a><span class="lineno">14982</span>&#160;    }</div>
<div class="line"><a name="l14983"></a><span class="lineno">14983</span>&#160; </div>
<div class="line"><a name="l14984"></a><span class="lineno">14984</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14985"></a><span class="lineno">14985</span>&#160; </div>
<div class="line"><a name="l14986"></a><span class="lineno">14986</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l14987"></a><span class="lineno">14987</span>&#160;<span class="keyword">inline</span> T zero() { T __zero = {}; <span class="keywordflow">return</span> __zero; }</div>
<div class="line"><a name="l14988"></a><span class="lineno">14988</span>&#160; </div>
<div class="line"><a name="l14989"></a><span class="lineno">14989</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14990"></a><span class="lineno">14990</span>&#160; </div>
<div class="line"><a name="l14991"></a><span class="lineno">14991</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a> (std::nomeow_t, <span class="keywordtype">double</span> left, <span class="keywordtype">double</span> right)</div>
<div class="line"><a name="l14992"></a><span class="lineno">14992</span>&#160;    {</div>
<div class="line"><a name="l14993"></a><span class="lineno">14993</span>&#160;    <span class="keywordflow">return</span> left + (right - left) * ((<span class="keywordtype">double</span>) rand() / RAND_MAX);</div>
<div class="line"><a name="l14994"></a><span class="lineno">14994</span>&#160;    }</div>
<div class="line"><a name="l14995"></a><span class="lineno">14995</span>&#160; </div>
<div class="line"><a name="l14996"></a><span class="lineno">14996</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l14997"></a><span class="lineno">14997</span>&#160; </div>
<div class="line"><a name="l14998"></a><span class="lineno">14998</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tx, <span class="keyword">typename</span> Ta, <span class="keyword">typename</span> Tb&gt;</div>
<div class="line"><a name="l14999"></a><span class="lineno">14999</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow_t, Tx x, Ta a, Tb b)</div>
<div class="line"><a name="l15000"></a><span class="lineno">15000</span>&#160;    {</div>
<div class="line"><a name="l15001"></a><span class="lineno">15001</span>&#160;    <span class="keywordflow">return</span> a &lt;= x &amp;&amp; x &lt;= b;</div>
<div class="line"><a name="l15002"></a><span class="lineno">15002</span>&#160;    }</div>
<div class="line"><a name="l15003"></a><span class="lineno">15003</span>&#160; </div>
<div class="line"><a name="l15004"></a><span class="lineno">15004</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15005"></a><span class="lineno">15005</span>&#160; </div>
<div class="line"><a name="l15006"></a><span class="lineno">15006</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow_t, <span class="keyword">const</span> POINT&amp; pt, <span class="keyword">const</span> RECT&amp; rect)</div>
<div class="line"><a name="l15007"></a><span class="lineno">15007</span>&#160;    {</div>
<div class="line"><a name="l15008"></a><span class="lineno">15008</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;pt))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l15009"></a><span class="lineno">15009</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;rect)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l15010"></a><span class="lineno">15010</span>&#160; </div>
<div class="line"><a name="l15011"></a><span class="lineno">15011</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, pt.x, rect.left, rect.right) &amp;&amp;</div>
<div class="line"><a name="l15012"></a><span class="lineno">15012</span>&#160;           <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, pt.y, rect.top,  rect.bottom);</div>
<div class="line"><a name="l15013"></a><span class="lineno">15013</span>&#160;    }</div>
<div class="line"><a name="l15014"></a><span class="lineno">15014</span>&#160; </div>
<div class="line"><a name="l15015"></a><span class="lineno">15015</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15016"></a><span class="lineno">15016</span>&#160; </div>
<div class="line"><a name="l15017"></a><span class="lineno">15017</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow_t, <span class="keyword">const</span> COORD&amp; pt, <span class="keyword">const</span> SMALL_RECT&amp; rect)</div>
<div class="line"><a name="l15018"></a><span class="lineno">15018</span>&#160;    {</div>
<div class="line"><a name="l15019"></a><span class="lineno">15019</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;pt))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l15020"></a><span class="lineno">15020</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;rect)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l15021"></a><span class="lineno">15021</span>&#160; </div>
<div class="line"><a name="l15022"></a><span class="lineno">15022</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, pt.X, rect.Left, rect.Right) &amp;&amp;</div>
<div class="line"><a name="l15023"></a><span class="lineno">15023</span>&#160;           <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, pt.Y, rect.Top,  rect.Bottom);</div>
<div class="line"><a name="l15024"></a><span class="lineno">15024</span>&#160;    }</div>
<div class="line"><a name="l15025"></a><span class="lineno">15025</span>&#160; </div>
<div class="line"><a name="l15026"></a><span class="lineno">15026</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15027"></a><span class="lineno">15027</span>&#160; </div>
<div class="line"><a name="l15028"></a><span class="lineno">15028</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a> (<span class="keywordtype">int</span> range)</div>
<div class="line"><a name="l15029"></a><span class="lineno">15029</span>&#160;    {</div>
<div class="line"><a name="l15030"></a><span class="lineno">15030</span>&#160;    <span class="keywordflow">if</span> (rand() % 100 == 0) fprintf (stderr, <span class="stringliteral">&quot;%.4s &quot;</span>, (<span class="keyword">const</span> <span class="keyword">volatile</span> <span class="keywordtype">char</span>*) ((rand() &amp; 0x0F)? &amp;_txCanaryFirst : &amp;_txCanaryLast));  <span class="comment">//-V206</span></div>
<div class="line"><a name="l15031"></a><span class="lineno">15031</span>&#160; </div>
<div class="line"><a name="l15032"></a><span class="lineno">15032</span>&#160;    <span class="keywordflow">return</span> rand() % range;</div>
<div class="line"><a name="l15033"></a><span class="lineno">15033</span>&#160;    }</div>
<div class="line"><a name="l15034"></a><span class="lineno">15034</span>&#160; </div>
<div class="line"><a name="l15035"></a><span class="lineno">15035</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15036"></a><span class="lineno">15036</span>&#160; </div>
<div class="line"><a name="l15037"></a><span class="lineno">15037</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">double</span> <a class="code" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a> (<span class="keywordtype">double</span> left, <span class="keywordtype">double</span> right)</div>
<div class="line"><a name="l15038"></a><span class="lineno">15038</span>&#160;    {</div>
<div class="line"><a name="l15039"></a><span class="lineno">15039</span>&#160;    <span class="keywordflow">if</span> (rand() % 100 == 0) fprintf (stderr, <span class="stringliteral">&quot;%.4s &quot;</span>, (<span class="keyword">const</span> <span class="keyword">volatile</span> <span class="keywordtype">char</span>*) ((rand() &amp; 0x0F)? &amp;_txCanaryFirst : &amp;_txCanaryLast));  <span class="comment">//-V206</span></div>
<div class="line"><a name="l15040"></a><span class="lineno">15040</span>&#160; </div>
<div class="line"><a name="l15041"></a><span class="lineno">15041</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a> (std::nomeow, left, right);</div>
<div class="line"><a name="l15042"></a><span class="lineno">15042</span>&#160;    }</div>
<div class="line"><a name="l15043"></a><span class="lineno">15043</span>&#160; </div>
<div class="line"><a name="l15044"></a><span class="lineno">15044</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15045"></a><span class="lineno">15045</span>&#160; </div>
<div class="line"><a name="l15046"></a><span class="lineno">15046</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> Tx, <span class="keyword">typename</span> Ta, <span class="keyword">typename</span> Tb&gt;</div>
<div class="line"><a name="l15047"></a><span class="lineno">15047</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (Tx x, Ta a, Tb b)</div>
<div class="line"><a name="l15048"></a><span class="lineno">15048</span>&#160;    {</div>
<div class="line"><a name="l15049"></a><span class="lineno">15049</span>&#160;    <span class="keywordflow">if</span> (rand() % 100 == 0) fprintf (stderr, <span class="stringliteral">&quot;%.4s &quot;</span>, (<span class="keyword">const</span> <span class="keyword">volatile</span> <span class="keywordtype">char</span>*) ((rand() &amp; 0x0F)? &amp;_txCanaryFirst : &amp;_txCanaryLast));  <span class="comment">//-V206</span></div>
<div class="line"><a name="l15050"></a><span class="lineno">15050</span>&#160; </div>
<div class="line"><a name="l15051"></a><span class="lineno">15051</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, x, a, b);</div>
<div class="line"><a name="l15052"></a><span class="lineno">15052</span>&#160;    }</div>
<div class="line"><a name="l15053"></a><span class="lineno">15053</span>&#160; </div>
<div class="line"><a name="l15054"></a><span class="lineno">15054</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15055"></a><span class="lineno">15055</span>&#160; </div>
<div class="line"><a name="l15056"></a><span class="lineno">15056</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (<span class="keyword">const</span> POINT&amp; pt, <span class="keyword">const</span> RECT&amp; rect)</div>
<div class="line"><a name="l15057"></a><span class="lineno">15057</span>&#160;    {</div>
<div class="line"><a name="l15058"></a><span class="lineno">15058</span>&#160;    <span class="keywordflow">if</span> (rand() % 100 == 0) fprintf (stderr, <span class="stringliteral">&quot;%.4s &quot;</span>, (<span class="keyword">const</span> <span class="keyword">volatile</span> <span class="keywordtype">char</span>*) ((rand() &amp; 0x0F)? &amp;_txCanaryFirst : &amp;_txCanaryLast));  <span class="comment">//-V206</span></div>
<div class="line"><a name="l15059"></a><span class="lineno">15059</span>&#160; </div>
<div class="line"><a name="l15060"></a><span class="lineno">15060</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, pt, rect);</div>
<div class="line"><a name="l15061"></a><span class="lineno">15061</span>&#160;    }</div>
<div class="line"><a name="l15062"></a><span class="lineno">15062</span>&#160; </div>
<div class="line"><a name="l15063"></a><span class="lineno">15063</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15064"></a><span class="lineno">15064</span>&#160; </div>
<div class="line"><a name="l15065"></a><span class="lineno">15065</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (<span class="keyword">const</span> COORD&amp; pt, <span class="keyword">const</span> SMALL_RECT&amp; rect)</div>
<div class="line"><a name="l15066"></a><span class="lineno">15066</span>&#160;    {</div>
<div class="line"><a name="l15067"></a><span class="lineno">15067</span>&#160;    <span class="keywordflow">if</span> (rand() % 100 == 0) fprintf (stderr, <span class="stringliteral">&quot;%.4s &quot;</span>, (<span class="keyword">const</span> <span class="keyword">volatile</span> <span class="keywordtype">char</span>*) ((rand() &amp; 0x0F)? &amp;_txCanaryFirst : &amp;_txCanaryLast));  <span class="comment">//-V206</span></div>
<div class="line"><a name="l15068"></a><span class="lineno">15068</span>&#160; </div>
<div class="line"><a name="l15069"></a><span class="lineno">15069</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a> (std::nomeow, pt, rect);</div>
<div class="line"><a name="l15070"></a><span class="lineno">15070</span>&#160;    }</div>
<div class="line"><a name="l15071"></a><span class="lineno">15071</span>&#160; </div>
<div class="line"><a name="l15072"></a><span class="lineno">15072</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l15073"></a><span class="lineno">15073</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15074"></a><span class="lineno">15074</span>&#160; </div>
<div class="line"><a name="l15075"></a><span class="lineno">15075</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15076"></a><span class="lineno">15076</span>&#160;<span class="comment">//{          txPrintf() implementation</span></div>
<div class="line"><a name="l15077"></a><span class="lineno">15077</span>&#160;<span class="comment">//           Реализация txPrintf()</span></div>
<div class="line"><a name="l15078"></a><span class="lineno">15078</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15079"></a><span class="lineno">15079</span>&#160; </div>
<div class="line"><a name="l15080"></a><span class="lineno">15080</span>&#160;<span class="preprocessor">#if defined (_TX_CPP11)</span></div>
<div class="line"><a name="l15081"></a><span class="lineno">15081</span>&#160; </div>
<div class="line"><a name="l15082"></a><span class="lineno">15082</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt; <span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt,                                  <span class="keyword">const</span> T&amp; arg, ArgsT... args);</div>
<div class="line"><a name="l15083"></a><span class="lineno">15083</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt; <span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, width_t width,                   <span class="keyword">const</span> T&amp; arg, ArgsT... args);</div>
<div class="line"><a name="l15084"></a><span class="lineno">15084</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt; <span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt,                precision_t prec, <span class="keyword">const</span> T&amp; arg, ArgsT... args);</div>
<div class="line"><a name="l15085"></a><span class="lineno">15085</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt; <span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, width_t width, precision_t prec, <span class="keyword">const</span> T&amp; arg, ArgsT... args);</div>
<div class="line"><a name="l15086"></a><span class="lineno">15086</span>&#160;                                         <span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt);</div>
<div class="line"><a name="l15087"></a><span class="lineno">15087</span>&#160; </div>
<div class="line"><a name="l15088"></a><span class="lineno">15088</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;                    <span class="keywordtype">void</span> _txPrintV (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, <span class="keyword">const</span> T&amp; arg);</div>
<div class="line"><a name="l15089"></a><span class="lineno">15089</span>&#160;                                         <span class="keywordtype">void</span> _txPrintV (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, <span class="keywordtype">int</span>*     arg);</div>
<div class="line"><a name="l15090"></a><span class="lineno">15090</span>&#160;                                         <span class="keywordtype">void</span> _txPrintV (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt);</div>
<div class="line"><a name="l15091"></a><span class="lineno">15091</span>&#160; </div>
<div class="line"><a name="l15092"></a><span class="lineno">15092</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15093"></a><span class="lineno">15093</span>&#160; </div>
<div class="line"><a name="l15094"></a><span class="lineno">15094</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15095"></a><span class="lineno">15095</span>&#160;<span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, <span class="keyword">const</span> T&amp; arg, ArgsT... args)</div>
<div class="line"><a name="l15096"></a><span class="lineno">15096</span>&#160;    {</div>
<div class="line"><a name="l15097"></a><span class="lineno">15097</span>&#160;$1  assert (fmt);</div>
<div class="line"><a name="l15098"></a><span class="lineno">15098</span>&#160; </div>
<div class="line"><a name="l15099"></a><span class="lineno">15099</span>&#160;$   _txPrintV (stream, format, n,   fmt);</div>
<div class="line"><a name="l15100"></a><span class="lineno">15100</span>&#160; </div>
<div class="line"><a name="l15101"></a><span class="lineno">15101</span>&#160;    <span class="keywordflow">if</span> (fmt[0] == <span class="charliteral">&#39;%&#39;</span>) {$}</div>
<div class="line"><a name="l15102"></a><span class="lineno">15102</span>&#160;    <span class="keywordflow">else</span> {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\&quot;%%$\&quot; required to print an argument in ...\&quot;%s\&quot; while printing %s argument %d in \&quot;%s\&quot;&quot;</span>, fmt, txTypename (arg), n, format); }</div>
<div class="line"><a name="l15103"></a><span class="lineno">15103</span>&#160; </div>
<div class="line"><a name="l15104"></a><span class="lineno">15104</span>&#160;$   _txPrintV (stream, format, n,   fmt, arg);</div>
<div class="line"><a name="l15105"></a><span class="lineno">15105</span>&#160; </div>
<div class="line"><a name="l15106"></a><span class="lineno">15106</span>&#160;$   _txPrintF (stream, format, n+1, fmt, args...);</div>
<div class="line"><a name="l15107"></a><span class="lineno">15107</span>&#160;    }</div>
<div class="line"><a name="l15108"></a><span class="lineno">15108</span>&#160; </div>
<div class="line"><a name="l15109"></a><span class="lineno">15109</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15110"></a><span class="lineno">15110</span>&#160; </div>
<div class="line"><a name="l15111"></a><span class="lineno">15111</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15112"></a><span class="lineno">15112</span>&#160;<span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, width_t width, <span class="keyword">const</span> T&amp; arg, ArgsT... args)</div>
<div class="line"><a name="l15113"></a><span class="lineno">15113</span>&#160;    {</div>
<div class="line"><a name="l15114"></a><span class="lineno">15114</span>&#160;$1  assert (&amp;stream);</div>
<div class="line"><a name="l15115"></a><span class="lineno">15115</span>&#160;$   assert (fmt);</div>
<div class="line"><a name="l15116"></a><span class="lineno">15116</span>&#160; </div>
<div class="line"><a name="l15117"></a><span class="lineno">15117</span>&#160;$   _txPrintV (stream, format, n,   fmt);</div>
<div class="line"><a name="l15118"></a><span class="lineno">15118</span>&#160; </div>
<div class="line"><a name="l15119"></a><span class="lineno">15119</span>&#160;    <span class="keywordflow">if</span> (fmt[0] == <span class="charliteral">&#39;%&#39;</span> &amp;&amp; fmt[1] == <span class="charliteral">&#39;*&#39;</span>) {$ stream &lt;&lt; std::setw (width); }  <span class="comment">//-V2006</span></div>
<div class="line"><a name="l15120"></a><span class="lineno">15120</span>&#160;    <span class="keywordflow">else</span> {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\&quot;%%*\&quot; required to setwidth (%d) in ...\&quot;%s\&quot; while printing %s argument %d in \&quot;%s\&quot;&quot;</span>, width, fmt, txTypename (arg), n, format); }</div>
<div class="line"><a name="l15121"></a><span class="lineno">15121</span>&#160; </div>
<div class="line"><a name="l15122"></a><span class="lineno">15122</span>&#160;$   _txPrintV (stream, format, n,   fmt, arg);</div>
<div class="line"><a name="l15123"></a><span class="lineno">15123</span>&#160; </div>
<div class="line"><a name="l15124"></a><span class="lineno">15124</span>&#160;$   _txPrintF (stream, format, n+1, fmt, args...);</div>
<div class="line"><a name="l15125"></a><span class="lineno">15125</span>&#160;    }</div>
<div class="line"><a name="l15126"></a><span class="lineno">15126</span>&#160; </div>
<div class="line"><a name="l15127"></a><span class="lineno">15127</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15128"></a><span class="lineno">15128</span>&#160; </div>
<div class="line"><a name="l15129"></a><span class="lineno">15129</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15130"></a><span class="lineno">15130</span>&#160;<span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, precision_t prec, <span class="keyword">const</span> T&amp; arg, ArgsT... args)</div>
<div class="line"><a name="l15131"></a><span class="lineno">15131</span>&#160;    {</div>
<div class="line"><a name="l15132"></a><span class="lineno">15132</span>&#160;$1  assert (&amp;stream);</div>
<div class="line"><a name="l15133"></a><span class="lineno">15133</span>&#160;$   assert (fmt);</div>
<div class="line"><a name="l15134"></a><span class="lineno">15134</span>&#160; </div>
<div class="line"><a name="l15135"></a><span class="lineno">15135</span>&#160;$   _txPrintV (stream, format, n,   fmt);</div>
<div class="line"><a name="l15136"></a><span class="lineno">15136</span>&#160; </div>
<div class="line"><a name="l15137"></a><span class="lineno">15137</span>&#160;    <span class="keywordflow">if</span> (fmt[0] == <span class="charliteral">&#39;%&#39;</span> &amp;&amp; fmt[1] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; fmt[2] == <span class="charliteral">&#39;*&#39;</span>) {$ stream &lt;&lt; std::setprecision ((std::streamsize) (prec + 1)); }  <span class="comment">//-V2006 //-V1028</span></div>
<div class="line"><a name="l15138"></a><span class="lineno">15138</span>&#160;    <span class="keywordflow">else</span> {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\&quot;%%.*\&quot; required to setprecision (%d) in ...\&quot;%s\&quot; while printing %s argument %d in \&quot;%s\&quot;&quot;</span>, prec, fmt, txTypename (arg), n, format); }</div>
<div class="line"><a name="l15139"></a><span class="lineno">15139</span>&#160; </div>
<div class="line"><a name="l15140"></a><span class="lineno">15140</span>&#160;$   _txPrintV (stream, format, n,   fmt, arg);</div>
<div class="line"><a name="l15141"></a><span class="lineno">15141</span>&#160; </div>
<div class="line"><a name="l15142"></a><span class="lineno">15142</span>&#160;$   _txPrintF (stream, format, n+1, fmt, args...);</div>
<div class="line"><a name="l15143"></a><span class="lineno">15143</span>&#160;    }</div>
<div class="line"><a name="l15144"></a><span class="lineno">15144</span>&#160; </div>
<div class="line"><a name="l15145"></a><span class="lineno">15145</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15146"></a><span class="lineno">15146</span>&#160; </div>
<div class="line"><a name="l15147"></a><span class="lineno">15147</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15148"></a><span class="lineno">15148</span>&#160;<span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, width_t width, precision_t prec, <span class="keyword">const</span> T&amp; arg, ArgsT... args)</div>
<div class="line"><a name="l15149"></a><span class="lineno">15149</span>&#160;    {</div>
<div class="line"><a name="l15150"></a><span class="lineno">15150</span>&#160;$1  assert (&amp;stream);</div>
<div class="line"><a name="l15151"></a><span class="lineno">15151</span>&#160;$   assert (fmt);</div>
<div class="line"><a name="l15152"></a><span class="lineno">15152</span>&#160; </div>
<div class="line"><a name="l15153"></a><span class="lineno">15153</span>&#160;$   _txPrintV (stream, format, n,   fmt);</div>
<div class="line"><a name="l15154"></a><span class="lineno">15154</span>&#160; </div>
<div class="line"><a name="l15155"></a><span class="lineno">15155</span>&#160;    <span class="keywordflow">if</span> (fmt[0] == <span class="charliteral">&#39;%&#39;</span> &amp;&amp; fmt[1] == <span class="charliteral">&#39;*&#39;</span> &amp;&amp; fmt[2] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; fmt[3] == <span class="charliteral">&#39;*&#39;</span>) {$ stream &lt;&lt; std::setw (width) &lt;&lt; std::setprecision ((std::streamsize) (prec + 1)); }  <span class="comment">//-V2006 //-V1028</span></div>
<div class="line"><a name="l15156"></a><span class="lineno">15156</span>&#160;    <span class="keywordflow">else</span> {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\&quot;%%*.*\&quot; required to setwidth (%d) and setprecision (%d) in ...\&quot;%s\&quot; while printing %s argument %d in \&quot;%s\&quot;&quot;</span>, width, prec, fmt, txTypename (arg), n, format); }</div>
<div class="line"><a name="l15157"></a><span class="lineno">15157</span>&#160; </div>
<div class="line"><a name="l15158"></a><span class="lineno">15158</span>&#160;$   _txPrintV (stream, format, n,   fmt, arg);</div>
<div class="line"><a name="l15159"></a><span class="lineno">15159</span>&#160; </div>
<div class="line"><a name="l15160"></a><span class="lineno">15160</span>&#160;$   _txPrintF (stream, format, n+1, fmt, args...);</div>
<div class="line"><a name="l15161"></a><span class="lineno">15161</span>&#160;    }</div>
<div class="line"><a name="l15162"></a><span class="lineno">15162</span>&#160; </div>
<div class="line"><a name="l15163"></a><span class="lineno">15163</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15164"></a><span class="lineno">15164</span>&#160; </div>
<div class="line"><a name="l15165"></a><span class="lineno">15165</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> _txPrintF (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt)</div>
<div class="line"><a name="l15166"></a><span class="lineno">15166</span>&#160;    {</div>
<div class="line"><a name="l15167"></a><span class="lineno">15167</span>&#160;$1  assert (fmt);</div>
<div class="line"><a name="l15168"></a><span class="lineno">15168</span>&#160; </div>
<div class="line"><a name="l15169"></a><span class="lineno">15169</span>&#160;$   _txPrintV (stream, format, n,   fmt);</div>
<div class="line"><a name="l15170"></a><span class="lineno">15170</span>&#160; </div>
<div class="line"><a name="l15171"></a><span class="lineno">15171</span>&#160;    <span class="keywordflow">if</span> (!fmt[0]) {$}</div>
<div class="line"><a name="l15172"></a><span class="lineno">15172</span>&#160;    <span class="keywordflow">else</span> {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;No argument provided for %% in \&quot;%s\&quot; while printing \&quot;%s\&quot;&quot;</span>, fmt, format); }</div>
<div class="line"><a name="l15173"></a><span class="lineno">15173</span>&#160;    }</div>
<div class="line"><a name="l15174"></a><span class="lineno">15174</span>&#160; </div>
<div class="line"><a name="l15175"></a><span class="lineno">15175</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15176"></a><span class="lineno">15176</span>&#160; </div>
<div class="line"><a name="l15177"></a><span class="lineno">15177</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> _txPrintV (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>*, <span class="keywordtype">int</span>, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt)</div>
<div class="line"><a name="l15178"></a><span class="lineno">15178</span>&#160;    {</div>
<div class="line"><a name="l15179"></a><span class="lineno">15179</span>&#160;$1  assert (&amp;stream);</div>
<div class="line"><a name="l15180"></a><span class="lineno">15180</span>&#160;$   assert (fmt);</div>
<div class="line"><a name="l15181"></a><span class="lineno">15181</span>&#160; </div>
<div class="line"><a name="l15182"></a><span class="lineno">15182</span>&#160;$   <span class="keywordflow">while</span> (*fmt)</div>
<div class="line"><a name="l15183"></a><span class="lineno">15183</span>&#160;        {</div>
<div class="line"><a name="l15184"></a><span class="lineno">15184</span>&#160;        <span class="keywordflow">if</span> (fmt[0] == <span class="charliteral">&#39;%&#39;</span>)</div>
<div class="line"><a name="l15185"></a><span class="lineno">15185</span>&#160;            {</div>
<div class="line"><a name="l15186"></a><span class="lineno">15186</span>&#160;            <span class="keywordflow">if</span> (fmt[1] == <span class="charliteral">&#39;%&#39;</span>) fmt++;</div>
<div class="line"><a name="l15187"></a><span class="lineno">15187</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15188"></a><span class="lineno">15188</span>&#160;            }</div>
<div class="line"><a name="l15189"></a><span class="lineno">15189</span>&#160; </div>
<div class="line"><a name="l15190"></a><span class="lineno">15190</span>&#160;        stream &lt;&lt; *fmt++;</div>
<div class="line"><a name="l15191"></a><span class="lineno">15191</span>&#160;        }</div>
<div class="line"><a name="l15192"></a><span class="lineno">15192</span>&#160;$   }</div>
<div class="line"><a name="l15193"></a><span class="lineno">15193</span>&#160; </div>
<div class="line"><a name="l15194"></a><span class="lineno">15194</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15195"></a><span class="lineno">15195</span>&#160; </div>
<div class="line"><a name="l15196"></a><span class="lineno">15196</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a name="l15197"></a><span class="lineno">15197</span>&#160;<span class="keywordtype">void</span> _txPrintV (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, <span class="keyword">const</span> T&amp; arg)</div>
<div class="line"><a name="l15198"></a><span class="lineno">15198</span>&#160;    {</div>
<div class="line"><a name="l15199"></a><span class="lineno">15199</span>&#160;$1  assert (&amp;stream);</div>
<div class="line"><a name="l15200"></a><span class="lineno">15200</span>&#160;$   assert (fmt);</div>
<div class="line"><a name="l15201"></a><span class="lineno">15201</span>&#160; </div>
<div class="line"><a name="l15202"></a><span class="lineno">15202</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;arg)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l15203"></a><span class="lineno">15203</span>&#160; </div>
<div class="line"><a name="l15204"></a><span class="lineno">15204</span>&#160;    <span class="keywordflow">if</span> (fmt[0] == <span class="charliteral">&#39;%&#39;</span>) {$}</div>
<div class="line"><a name="l15205"></a><span class="lineno">15205</span>&#160;    <span class="keywordflow">else</span> {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\&quot;%%$\&quot; required to print an argument in ...\&quot;%s\&quot; while printing %s argument %d in \&quot;%s\&quot;&quot;</span>, fmt, txTypename (arg), n, format); }</div>
<div class="line"><a name="l15206"></a><span class="lineno">15206</span>&#160; </div>
<div class="line"><a name="l15207"></a><span class="lineno">15207</span>&#160;$   fmt++;</div>
<div class="line"><a name="l15208"></a><span class="lineno">15208</span>&#160; </div>
<div class="line"><a name="l15209"></a><span class="lineno">15209</span>&#160;$   <span class="keywordtype">char</span>                    oldFill  = stream.fill (<span class="charliteral">&#39; &#39;</span>);</div>
<div class="line"><a name="l15210"></a><span class="lineno">15210</span>&#160;$   std::ios_base::fmtflags oldFlags = stream.flags();</div>
<div class="line"><a name="l15211"></a><span class="lineno">15211</span>&#160; </div>
<div class="line"><a name="l15212"></a><span class="lineno">15212</span>&#160;$   <span class="keywordflow">for</span> (;;) <span class="keywordflow">switch</span> (*fmt)</div>
<div class="line"><a name="l15213"></a><span class="lineno">15213</span>&#160;        {</div>
<div class="line"><a name="l15214"></a><span class="lineno">15214</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>: $ stream &lt;&lt; std::left;     fmt++; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15215"></a><span class="lineno">15215</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>: $ stream &lt;&lt; std::showpos;  fmt++; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15216"></a><span class="lineno">15216</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>: $ stream.fill (<span class="charliteral">&#39; &#39;</span>);       fmt++; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15217"></a><span class="lineno">15217</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>: $ stream &lt;&lt; std::showbase; fmt++; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15218"></a><span class="lineno">15218</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>: $ stream.fill (<span class="charliteral">&#39;0&#39;</span>);       fmt++; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15219"></a><span class="lineno">15219</span>&#160; </div>
<div class="line"><a name="l15220"></a><span class="lineno">15220</span>&#160;        <span class="keywordflow">default</span>:  $ <span class="keywordflow">goto</span> end;</div>
<div class="line"><a name="l15221"></a><span class="lineno">15221</span>&#160;        }</div>
<div class="line"><a name="l15222"></a><span class="lineno">15222</span>&#160;    end:</div>
<div class="line"><a name="l15223"></a><span class="lineno">15223</span>&#160; </div>
<div class="line"><a name="l15224"></a><span class="lineno">15224</span>&#160;$   <span class="keywordtype">int</span> width = (*fmt != <span class="charliteral">&#39;*&#39;</span>)?                  (<span class="keywordtype">int</span>) strtoul (fmt, <span class="keyword">const_cast &lt;</span><span class="keywordtype">char</span>**<span class="keyword">&gt;</span> (&amp;fmt), 10) : (fmt++, 0);</div>
<div class="line"><a name="l15225"></a><span class="lineno">15225</span>&#160;$   <span class="keywordtype">int</span> prec  = (*fmt == <span class="charliteral">&#39;.&#39;</span>)? (*++fmt != <span class="charliteral">&#39;*&#39;</span>)? (int) strtoul (fmt, <span class="keyword">const_cast &lt;</span><span class="keywordtype">char</span>**<span class="keyword">&gt;</span> (&amp;fmt), 10) : (fmt++, 0) : 0;</div>
<div class="line"><a name="l15226"></a><span class="lineno">15226</span>&#160; </div>
<div class="line"><a name="l15227"></a><span class="lineno">15227</span>&#160;    <span class="keywordflow">if</span> (width) {$ stream &lt;&lt; std::setw (width);        }</div>
<div class="line"><a name="l15228"></a><span class="lineno">15228</span>&#160;    <span class="keywordflow">if</span> (prec)  {$ stream &lt;&lt; std::setprecision (prec); }</div>
<div class="line"><a name="l15229"></a><span class="lineno">15229</span>&#160; </div>
<div class="line"><a name="l15230"></a><span class="lineno">15230</span>&#160;$   fmt += strspn (fmt, <span class="stringliteral">&quot;hljztL&quot;</span>);</div>
<div class="line"><a name="l15231"></a><span class="lineno">15231</span>&#160; </div>
<div class="line"><a name="l15232"></a><span class="lineno">15232</span>&#160;$   <span class="keywordflow">switch</span> (*fmt)</div>
<div class="line"><a name="l15233"></a><span class="lineno">15233</span>&#160;        {</div>
<div class="line"><a name="l15234"></a><span class="lineno">15234</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;$&#39;</span>:</div>
<div class="line"><a name="l15235"></a><span class="lineno">15235</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>: $                                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15236"></a><span class="lineno">15236</span>&#160; </div>
<div class="line"><a name="l15237"></a><span class="lineno">15237</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div>
<div class="line"><a name="l15238"></a><span class="lineno">15238</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:</div>
<div class="line"><a name="l15239"></a><span class="lineno">15239</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>: $ stream &lt;&lt; std::dec;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15240"></a><span class="lineno">15240</span>&#160; </div>
<div class="line"><a name="l15241"></a><span class="lineno">15241</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>: $ stream &lt;&lt; std::oct;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15242"></a><span class="lineno">15242</span>&#160; </div>
<div class="line"><a name="l15243"></a><span class="lineno">15243</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>: $ stream &lt;&lt; std::hex;                          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15244"></a><span class="lineno">15244</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>: $ stream &lt;&lt; std::hex        &lt;&lt; std::uppercase; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15245"></a><span class="lineno">15245</span>&#160; </div>
<div class="line"><a name="l15246"></a><span class="lineno">15246</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>: $ stream &lt;&lt; std::fixed;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15247"></a><span class="lineno">15247</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>: $ stream &lt;&lt; std::fixed      &lt;&lt; std::uppercase; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15248"></a><span class="lineno">15248</span>&#160; </div>
<div class="line"><a name="l15249"></a><span class="lineno">15249</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>: $ stream &lt;&lt; std::scientific;                   <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15250"></a><span class="lineno">15250</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>: $ stream &lt;&lt; std::scientific &lt;&lt; std::uppercase; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15251"></a><span class="lineno">15251</span>&#160; </div>
<div class="line"><a name="l15252"></a><span class="lineno">15252</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;g&#39;</span>: $                                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15253"></a><span class="lineno">15253</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;G&#39;</span>: $ stream                    &lt;&lt; std::uppercase; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15254"></a><span class="lineno">15254</span>&#160; </div>
<div class="line"><a name="l15255"></a><span class="lineno">15255</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>: $                                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15256"></a><span class="lineno">15256</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>: $ stream                    &lt;&lt; std::uppercase; <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15257"></a><span class="lineno">15257</span>&#160; </div>
<div class="line"><a name="l15258"></a><span class="lineno">15258</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line"><a name="l15259"></a><span class="lineno">15259</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line"><a name="l15260"></a><span class="lineno">15260</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>: $                                              <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15261"></a><span class="lineno">15261</span>&#160; </div>
<div class="line"><a name="l15262"></a><span class="lineno">15262</span>&#160;        <span class="keywordflow">default</span>:  $ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;Invalid format &#39;%.1s&#39; at \&quot;%s\&quot; while printing %s argument %d in \&quot;%s\&quot;&quot;</span>, fmt, fmt, txTypename (arg), n, format); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15263"></a><span class="lineno">15263</span>&#160;        }</div>
<div class="line"><a name="l15264"></a><span class="lineno">15264</span>&#160; </div>
<div class="line"><a name="l15265"></a><span class="lineno">15265</span>&#160;$   fmt++;</div>
<div class="line"><a name="l15266"></a><span class="lineno">15266</span>&#160; </div>
<div class="line"><a name="l15267"></a><span class="lineno">15267</span>&#160;    <span class="keywordflow">if</span> (&amp;arg) {$ stream &lt;&lt; arg;      }</div>
<div class="line"><a name="l15268"></a><span class="lineno">15268</span>&#160;    <span class="keywordflow">else</span>      {$ stream &lt;&lt; <span class="stringliteral">&quot;(null)&quot;</span>; }</div>
<div class="line"><a name="l15269"></a><span class="lineno">15269</span>&#160; </div>
<div class="line"><a name="l15270"></a><span class="lineno">15270</span>&#160;$   stream.fill  (oldFill);</div>
<div class="line"><a name="l15271"></a><span class="lineno">15271</span>&#160;$   stream.flags (oldFlags);</div>
<div class="line"><a name="l15272"></a><span class="lineno">15272</span>&#160;    }</div>
<div class="line"><a name="l15273"></a><span class="lineno">15273</span>&#160; </div>
<div class="line"><a name="l15274"></a><span class="lineno">15274</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15275"></a><span class="lineno">15275</span>&#160; </div>
<div class="line"><a name="l15276"></a><span class="lineno">15276</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">void</span> _txPrintV (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>*&amp; fmt, <span class="keywordtype">int</span>* arg)  <span class="comment">//-V2009</span></div>
<div class="line"><a name="l15277"></a><span class="lineno">15277</span>&#160;    {</div>
<div class="line"><a name="l15278"></a><span class="lineno">15278</span>&#160;$1  assert (fmt);</div>
<div class="line"><a name="l15279"></a><span class="lineno">15279</span>&#160; </div>
<div class="line"><a name="l15280"></a><span class="lineno">15280</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (arg)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l15281"></a><span class="lineno">15281</span>&#160; </div>
<div class="line"><a name="l15282"></a><span class="lineno">15282</span>&#160;    <span class="keywordflow">if</span> (fmt[0] == <span class="charliteral">&#39;%&#39;</span> &amp;&amp; fmt[1] == <span class="charliteral">&#39;n&#39;</span>) {$}</div>
<div class="line"><a name="l15283"></a><span class="lineno">15283</span>&#160;    <span class="keywordflow">else</span> {$ <a class="code" href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a> (<span class="stringliteral">&quot;\&quot;%%n\&quot; required to store print length in int* argument %d in \&quot;%s\&quot;&quot;</span>, n, format); }</div>
<div class="line"><a name="l15284"></a><span class="lineno">15284</span>&#160; </div>
<div class="line"><a name="l15285"></a><span class="lineno">15285</span>&#160;$   *arg = (int) stream.str().length();  <span class="comment">//-V202</span></div>
<div class="line"><a name="l15286"></a><span class="lineno">15286</span>&#160; </div>
<div class="line"><a name="l15287"></a><span class="lineno">15287</span>&#160;$   fmt += 2;</div>
<div class="line"><a name="l15288"></a><span class="lineno">15288</span>&#160;    }</div>
<div class="line"><a name="l15289"></a><span class="lineno">15289</span>&#160; </div>
<div class="line"><a name="l15290"></a><span class="lineno">15290</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15291"></a><span class="lineno">15291</span>&#160; </div>
<div class="line"><a name="l15292"></a><span class="lineno">15292</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">const</span> T&amp;    _txPrintfNormalizeArg (<span class="keyword">const</span> T&amp;           arg) { <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;arg)) {;}          <span class="keywordflow">return</span> arg;         }</div>
<div class="line"><a name="l15293"></a><span class="lineno">15293</span>&#160;                      <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* _txPrintfNormalizeArg (<span class="keyword">const</span> std::string&amp; arg) { <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;arg)) <span class="keywordflow">return</span> NULL; <span class="keywordflow">return</span> arg.c_str(); }</div>
<div class="line"><a name="l15294"></a><span class="lineno">15294</span>&#160; </div>
<div class="line"><a name="l15295"></a><span class="lineno">15295</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15296"></a><span class="lineno">15296</span>&#160; </div>
<div class="line"><a name="l15297"></a><span class="lineno">15297</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15298"></a><span class="lineno">15298</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> txPrintf (std::ostringstream&amp; stream, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args)</div>
<div class="line"><a name="l15299"></a><span class="lineno">15299</span>&#160;    {</div>
<div class="line"><a name="l15300"></a><span class="lineno">15300</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;stream)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l15301"></a><span class="lineno">15301</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;format)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l15302"></a><span class="lineno">15302</span>&#160; </div>
<div class="line"><a name="l15303"></a><span class="lineno">15303</span>&#160;$   <span class="keyword">const</span> <span class="keywordtype">char</span>* fmt = format;</div>
<div class="line"><a name="l15304"></a><span class="lineno">15304</span>&#160;$   _txPrintF (stream, format, 2, fmt, _txPrintfNormalizeArg (args)...);</div>
<div class="line"><a name="l15305"></a><span class="lineno">15305</span>&#160; </div>
<div class="line"><a name="l15306"></a><span class="lineno">15306</span>&#160;$   <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) stream.str().length();  <span class="comment">//-V202</span></div>
<div class="line"><a name="l15307"></a><span class="lineno">15307</span>&#160;    }</div>
<div class="line"><a name="l15308"></a><span class="lineno">15308</span>&#160; </div>
<div class="line"><a name="l15309"></a><span class="lineno">15309</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15310"></a><span class="lineno">15310</span>&#160; </div>
<div class="line"><a name="l15311"></a><span class="lineno">15311</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15312"></a><span class="lineno">15312</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> txPrintf (<span class="keywordtype">char</span> buffer[], <span class="keywordtype">size_t</span> size, <span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args)</div>
<div class="line"><a name="l15313"></a><span class="lineno">15313</span>&#160;    {</div>
<div class="line"><a name="l15314"></a><span class="lineno">15314</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;buffer)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l15315"></a><span class="lineno">15315</span>&#160;$   <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;format)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l15316"></a><span class="lineno">15316</span>&#160; </div>
<div class="line"><a name="l15317"></a><span class="lineno">15317</span>&#160;$   <span class="keywordflow">if</span> (size &gt; 0) size--;</div>
<div class="line"><a name="l15318"></a><span class="lineno">15318</span>&#160;$   buffer[size] = 0;</div>
<div class="line"><a name="l15319"></a><span class="lineno">15319</span>&#160; </div>
<div class="line"><a name="l15320"></a><span class="lineno">15320</span>&#160;$   <span class="keywordflow">if</span> (!size) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l15321"></a><span class="lineno">15321</span>&#160; </div>
<div class="line"><a name="l15322"></a><span class="lineno">15322</span>&#160;$   std::ostringstream stream;</div>
<div class="line"><a name="l15323"></a><span class="lineno">15323</span>&#160;$   stream.rdbuf() -&gt; pubsetbuf (buffer, size);</div>
<div class="line"><a name="l15324"></a><span class="lineno">15324</span>&#160; </div>
<div class="line"><a name="l15325"></a><span class="lineno">15325</span>&#160;$   txPrintf (stream, format, args...);</div>
<div class="line"><a name="l15326"></a><span class="lineno">15326</span>&#160; </div>
<div class="line"><a name="l15327"></a><span class="lineno">15327</span>&#160;$   <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) stream.str().length();  <span class="comment">//-V202</span></div>
<div class="line"><a name="l15328"></a><span class="lineno">15328</span>&#160;    }</div>
<div class="line"><a name="l15329"></a><span class="lineno">15329</span>&#160; </div>
<div class="line"><a name="l15330"></a><span class="lineno">15330</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15331"></a><span class="lineno">15331</span>&#160; </div>
<div class="line"><a name="l15332"></a><span class="lineno">15332</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15333"></a><span class="lineno">15333</span>&#160;<span class="keyword">inline</span> std::string txFormat (<span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args)</div>
<div class="line"><a name="l15334"></a><span class="lineno">15334</span>&#160;    {</div>
<div class="line"><a name="l15335"></a><span class="lineno">15335</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;format)) <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l15336"></a><span class="lineno">15336</span>&#160; </div>
<div class="line"><a name="l15337"></a><span class="lineno">15337</span>&#160;$   std::ostringstream stream;</div>
<div class="line"><a name="l15338"></a><span class="lineno">15338</span>&#160; </div>
<div class="line"><a name="l15339"></a><span class="lineno">15339</span>&#160;$   txPrintf (stream, format, args...);</div>
<div class="line"><a name="l15340"></a><span class="lineno">15340</span>&#160; </div>
<div class="line"><a name="l15341"></a><span class="lineno">15341</span>&#160;$   <span class="keywordflow">return</span> stream.str();</div>
<div class="line"><a name="l15342"></a><span class="lineno">15342</span>&#160;    }</div>
<div class="line"><a name="l15343"></a><span class="lineno">15343</span>&#160; </div>
<div class="line"><a name="l15344"></a><span class="lineno">15344</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15345"></a><span class="lineno">15345</span>&#160; </div>
<div class="line"><a name="l15346"></a><span class="lineno">15346</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span>... ArgsT&gt;</div>
<div class="line"><a name="l15347"></a><span class="lineno">15347</span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> txPrintf (<span class="keyword">const</span> <span class="keywordtype">char</span>* format, ArgsT... args)</div>
<div class="line"><a name="l15348"></a><span class="lineno">15348</span>&#160;    {</div>
<div class="line"><a name="l15349"></a><span class="lineno">15349</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;format)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l15350"></a><span class="lineno">15350</span>&#160; </div>
<div class="line"><a name="l15351"></a><span class="lineno">15351</span>&#160;$   <span class="keywordflow">return</span> printf (<span class="stringliteral">&quot;%s&quot;</span>, txFormat (format, args...) .c_str());</div>
<div class="line"><a name="l15352"></a><span class="lineno">15352</span>&#160;    }</div>
<div class="line"><a name="l15353"></a><span class="lineno">15353</span>&#160; </div>
<div class="line"><a name="l15354"></a><span class="lineno">15354</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l15355"></a><span class="lineno">15355</span>&#160; </div>
<div class="line"><a name="l15356"></a><span class="lineno">15356</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15357"></a><span class="lineno">15357</span>&#160; </div>
<div class="line"><a name="l15358"></a><span class="lineno">15358</span>&#160;       <span class="keywordtype">int</span> _txPrintfCheck (<span class="keyword">const</span> <span class="keywordtype">char</span>* format, ...) tx_printfy (1);</div>
<div class="line"><a name="l15359"></a><span class="lineno">15359</span>&#160;inline <span class="keywordtype">int</span> _txPrintfCheck (const <span class="keywordtype">char</span>*,        ...) { <span class="keywordflow">return</span> 0; }</div>
<div class="line"><a name="l15360"></a><span class="lineno">15360</span>&#160; </div>
<div class="line"><a name="l15361"></a><span class="lineno">15361</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l15362"></a><span class="lineno">15362</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15363"></a><span class="lineno">15363</span>&#160; </div>
<div class="line"><a name="l15364"></a><span class="lineno">15364</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15365"></a><span class="lineno">15365</span>&#160;<span class="comment">//{          txDialog methods implementation</span></div>
<div class="line"><a name="l15366"></a><span class="lineno">15366</span>&#160;<span class="comment">//           Реализация методов класса txDialog</span></div>
<div class="line"><a name="l15367"></a><span class="lineno">15367</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l15368"></a><span class="lineno">15368</span>&#160;<span class="comment">//           See [1] http://msdn.microsoft.com/ru-ru/library/windows/desktop/ms645389%28v=vs.85%29.aspx</span></div>
<div class="line"><a name="l15369"></a><span class="lineno">15369</span>&#160;<span class="comment">//               [2] http://blogs.msdn.microsoft.com/oldnewthing/20050429-00/?p=35743</span></div>
<div class="line"><a name="l15370"></a><span class="lineno">15370</span>&#160;<span class="comment">//               [3] http://blogs.msdn.microsoft.com/oldnewthing/20040623-00/?p=38753</span></div>
<div class="line"><a name="l15371"></a><span class="lineno">15371</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15372"></a><span class="lineno">15372</span>&#160; </div>
<div class="line"><a name="l15373"></a><span class="lineno">15373</span>&#160;<span class="preprocessor">#ifndef TX_COMPILED                                                          </span><span class="comment">// &lt;&lt;&lt; THE CODE IS HERE, UNFOLD IT &lt;&lt;&lt;</span></div>
<div class="line"><a name="l15374"></a><span class="lineno">15374</span>&#160; </div>
<div class="line"><a name="l15375"></a><span class="lineno">15375</span>&#160;<a class="code" href="structtx_dialog.html#a081a2029ed8e4ffd6726c9f39966a04c">txDialog::txDialog</a> () :</div>
<div class="line"><a name="l15376"></a><span class="lineno">15376</span>&#160;    layout_ (NULL)</div>
<div class="line"><a name="l15377"></a><span class="lineno">15377</span>&#160;    {$1}</div>
<div class="line"><a name="l15378"></a><span class="lineno">15378</span>&#160; </div>
<div class="line"><a name="l15379"></a><span class="lineno">15379</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15380"></a><span class="lineno">15380</span>&#160; </div>
<div class="line"><a name="l15381"></a><span class="lineno">15381</span>&#160;<a class="code" href="structtx_dialog.html#a081a2029ed8e4ffd6726c9f39966a04c">txDialog::txDialog</a> (<span class="keyword">const</span> Layout* layout) :</div>
<div class="line"><a name="l15382"></a><span class="lineno">15382</span>&#160;    layout_ (layout)</div>
<div class="line"><a name="l15383"></a><span class="lineno">15383</span>&#160;    {$1}</div>
<div class="line"><a name="l15384"></a><span class="lineno">15384</span>&#160; </div>
<div class="line"><a name="l15385"></a><span class="lineno">15385</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15386"></a><span class="lineno">15386</span>&#160; </div>
<div class="line"><a name="l15387"></a><span class="lineno">15387</span>&#160;<span class="keyword">const</span> <a class="code" href="structtx_dialog_1_1_layout.html">txDialog::Layout</a>* <a class="code" href="structtx_dialog.html#a971fb450a33205168aff3a7b186e04a3">txDialog::setLayout</a> (<span class="keyword">const</span> Layout* layout)</div>
<div class="line"><a name="l15388"></a><span class="lineno">15388</span>&#160;    {</div>
<div class="line"><a name="l15389"></a><span class="lineno">15389</span>&#160;$1  assert (layout);</div>
<div class="line"><a name="l15390"></a><span class="lineno">15390</span>&#160; </div>
<div class="line"><a name="l15391"></a><span class="lineno">15391</span>&#160;$   return ::std::swap (layout_, layout), layout;</div>
<div class="line"><a name="l15392"></a><span class="lineno">15392</span>&#160;    }</div>
<div class="line"><a name="l15393"></a><span class="lineno">15393</span>&#160; </div>
<div class="line"><a name="l15394"></a><span class="lineno">15394</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15395"></a><span class="lineno">15395</span>&#160; </div>
<div class="line"><a name="l15396"></a><span class="lineno">15396</span>&#160;intptr_t <a class="code" href="structtx_dialog.html#a7b075b1d868782be0973d6eb82121b94">txDialog::dialogBox</a> (WORD resourceID)</div>
<div class="line"><a name="l15397"></a><span class="lineno">15397</span>&#160;    {</div>
<div class="line"><a name="l15398"></a><span class="lineno">15398</span>&#160;$1  <span class="keyword">const</span> <span class="keywordtype">char</span>* resName = (<span class="keywordtype">char</span>*)(uintptr_t) resourceID;</div>
<div class="line"><a name="l15399"></a><span class="lineno">15399</span>&#160; </div>
<div class="line"><a name="l15400"></a><span class="lineno">15400</span>&#160;$   <span class="keywordflow">if</span> (!FindResource (NULL, resName, RT_DIALOG)) <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;Не найден ресурс диалога %d&quot;</span>, resourceID), 0;</div>
<div class="line"><a name="l15401"></a><span class="lineno">15401</span>&#160; </div>
<div class="line"><a name="l15402"></a><span class="lineno">15402</span>&#160;$   <span class="keywordflow">return</span> DialogBoxParam (NULL, resName, NULL, (DLGPROC) <a class="code" href="structtx_dialog.html#a1224cc6dee12d46b554b3ef4de18aa6d">DialogProc_</a>, (LPARAM) <span class="keyword">this</span>);</div>
<div class="line"><a name="l15403"></a><span class="lineno">15403</span>&#160;    }</div>
<div class="line"><a name="l15404"></a><span class="lineno">15404</span>&#160; </div>
<div class="line"><a name="l15405"></a><span class="lineno">15405</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15406"></a><span class="lineno">15406</span>&#160; </div>
<div class="line"><a name="l15407"></a><span class="lineno">15407</span>&#160;intptr_t <a class="code" href="structtx_dialog.html#a7b075b1d868782be0973d6eb82121b94">txDialog::dialogBox</a> (<span class="keyword">const</span> <a class="code" href="structtx_dialog_1_1_layout.html">txDialog::Layout</a>* layout <span class="comment">/*= NULL*/</span>, <span class="keywordtype">size_t</span> bufsize <span class="comment">/*= 0*/</span>)</div>
<div class="line"><a name="l15408"></a><span class="lineno">15408</span>&#160;    {</div>
<div class="line"><a name="l15409"></a><span class="lineno">15409</span>&#160;$1  <span class="keywordflow">if</span> (!layout)  layout = layout_;</div>
<div class="line"><a name="l15410"></a><span class="lineno">15410</span>&#160;$   <span class="keywordflow">if</span> (!layout)  <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;Не установлен динамический шаблон диалога&quot;</span>), 0;</div>
<div class="line"><a name="l15411"></a><span class="lineno">15411</span>&#160; </div>
<div class="line"><a name="l15412"></a><span class="lineno">15412</span>&#160;$   <span class="keywordflow">if</span> (!bufsize) bufsize = 1024;</div>
<div class="line"><a name="l15413"></a><span class="lineno">15413</span>&#160; </div>
<div class="line"><a name="l15414"></a><span class="lineno">15414</span>&#160;$   DLGTEMPLATE* tmpl = (DLGTEMPLATE*) GlobalAlloc (GPTR, bufsize);</div>
<div class="line"><a name="l15415"></a><span class="lineno">15415</span>&#160;$   <span class="keywordflow">if</span> (!tmpl) <span class="keywordflow">return</span> <a class="code" href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a> (<span class="stringliteral">&quot;GlobalAlloc(): Нет памяти для шаблона диалога&quot;</span>), 0;</div>
<div class="line"><a name="l15416"></a><span class="lineno">15416</span>&#160; </div>
<div class="line"><a name="l15417"></a><span class="lineno">15417</span>&#160;$   <span class="keyword">const</span> Layout* dlg = &amp;layout[0];</div>
<div class="line"><a name="l15418"></a><span class="lineno">15418</span>&#160;$   <span class="keyword">const</span> Layout  def = { <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a1988e748c6846b398b020c0cb6f057ab">DIALOG</a>, NULL, 0, 0,0,0,0, WS_CAPTION | WS_SYSMENU | DS_MODALFRAME | DS_CENTER, <span class="stringliteral">&quot;MS Shell Dlg&quot;</span>, 8 };</div>
<div class="line"><a name="l15419"></a><span class="lineno">15419</span>&#160; </div>
<div class="line"><a name="l15420"></a><span class="lineno">15420</span>&#160;$   <span class="keywordtype">void</span>* ptr = _tx_DLGTEMPLATE_Create (tmpl, bufsize,</div>
<div class="line"><a name="l15421"></a><span class="lineno">15421</span>&#160;                                       (dlg-&gt;style? dlg-&gt;style : def.style) | DS_SETFONT, 0, 0,</div>
<div class="line"><a name="l15422"></a><span class="lineno">15422</span>&#160;                                        dlg-&gt;x, dlg-&gt;y, dlg-&gt;sx, dlg-&gt;sy,</div>
<div class="line"><a name="l15423"></a><span class="lineno">15423</span>&#160;                                        dlg-&gt;caption?  dlg-&gt;caption  : def.caption,</div>
<div class="line"><a name="l15424"></a><span class="lineno">15424</span>&#160;                                        dlg-&gt;font?     dlg-&gt;font     : def.font,</div>
<div class="line"><a name="l15425"></a><span class="lineno">15425</span>&#160;                                        dlg-&gt;fontsize? dlg-&gt;fontsize : def.fontsize, NULL);</div>
<div class="line"><a name="l15426"></a><span class="lineno">15426</span>&#160;$   WORD i = 0;</div>
<div class="line"><a name="l15427"></a><span class="lineno">15427</span>&#160;$   <span class="keywordflow">for</span> (i = 1; layout[i].<a class="code" href="structtx_dialog_1_1_layout.html#a2591914a85c05cce0fc862df1a569064">wndclass</a> != <a class="code" href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a342a4f0af79f46e07894a95e5951b7aa">END</a>; ++i)</div>
<div class="line"><a name="l15428"></a><span class="lineno">15428</span>&#160;        {</div>
<div class="line"><a name="l15429"></a><span class="lineno">15429</span>&#160;$       <span class="keyword">const</span> Layout* item = &amp;layout[i];</div>
<div class="line"><a name="l15430"></a><span class="lineno">15430</span>&#160; </div>
<div class="line"><a name="l15431"></a><span class="lineno">15431</span>&#160;$       ptr = _tx_DLGTEMPLATE_Add (ptr, bufsize - ((<span class="keywordtype">char</span>*)ptr - (<span class="keywordtype">char</span>*)tmpl),</div>
<div class="line"><a name="l15432"></a><span class="lineno">15432</span>&#160;                                   item-&gt;style | WS_VISIBLE, 0, item-&gt;x, item-&gt;y, item-&gt;sx, item-&gt;sy,</div>
<div class="line"><a name="l15433"></a><span class="lineno">15433</span>&#160;                                   item-&gt;id, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)(uintptr_t) item-&gt;wndclass, item-&gt;caption);</div>
<div class="line"><a name="l15434"></a><span class="lineno">15434</span>&#160;        }</div>
<div class="line"><a name="l15435"></a><span class="lineno">15435</span>&#160; </div>
<div class="line"><a name="l15436"></a><span class="lineno">15436</span>&#160;$   tmpl-&gt;cdit = (<span class="keywordtype">unsigned</span> short) (i-1);</div>
<div class="line"><a name="l15437"></a><span class="lineno">15437</span>&#160; </div>
<div class="line"><a name="l15438"></a><span class="lineno">15438</span>&#160;$   intptr_t res = DialogBoxIndirectParam (NULL, tmpl, NULL, (DLGPROC) <a class="code" href="structtx_dialog.html#a1224cc6dee12d46b554b3ef4de18aa6d">DialogProc_</a>, (LPARAM) <span class="keyword">this</span>);</div>
<div class="line"><a name="l15439"></a><span class="lineno">15439</span>&#160; </div>
<div class="line"><a name="l15440"></a><span class="lineno">15440</span>&#160;$   GlobalFree (tmpl);</div>
<div class="line"><a name="l15441"></a><span class="lineno">15441</span>&#160; </div>
<div class="line"><a name="l15442"></a><span class="lineno">15442</span>&#160;$   <span class="keywordflow">return</span> res;</div>
<div class="line"><a name="l15443"></a><span class="lineno">15443</span>&#160;    }</div>
<div class="line"><a name="l15444"></a><span class="lineno">15444</span>&#160; </div>
<div class="line"><a name="l15445"></a><span class="lineno">15445</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15446"></a><span class="lineno">15446</span>&#160; </div>
<div class="line"><a name="l15447"></a><span class="lineno">15447</span>&#160;<span class="keywordtype">int</span> <a class="code" href="structtx_dialog.html#a39efe9383833aedb0839d2519173930e">txDialog::dialogProc</a> (HWND wnd, UINT msg, WPARAM wParam, LPARAM)</div>
<div class="line"><a name="l15448"></a><span class="lineno">15448</span>&#160;    {</div>
<div class="line"><a name="l15449"></a><span class="lineno">15449</span>&#160;$1  <span class="keywordflow">switch</span> (msg)</div>
<div class="line"><a name="l15450"></a><span class="lineno">15450</span>&#160;        {</div>
<div class="line"><a name="l15451"></a><span class="lineno">15451</span>&#160;        <span class="keywordflow">case</span> WM_INITDIALOG: $ SetForegroundWindow (wnd);</div>
<div class="line"><a name="l15452"></a><span class="lineno">15452</span>&#160;                            $ <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15453"></a><span class="lineno">15453</span>&#160; </div>
<div class="line"><a name="l15454"></a><span class="lineno">15454</span>&#160;        <span class="keywordflow">case</span> WM_COMMAND:    $ <span class="keywordflow">switch</span> (LOWORD (wParam))</div>
<div class="line"><a name="l15455"></a><span class="lineno">15455</span>&#160;            {</div>
<div class="line"><a name="l15456"></a><span class="lineno">15456</span>&#160;            <span class="keywordflow">case</span> IDOK:</div>
<div class="line"><a name="l15457"></a><span class="lineno">15457</span>&#160;            <span class="keywordflow">case</span> IDCANCEL:  $ SetForegroundWindow (<a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>()? <a class="code" href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a>() : Win32::GetConsoleWindow());</div>
<div class="line"><a name="l15458"></a><span class="lineno">15458</span>&#160;                            $ EndDialog (wnd, (uintptr_t) <span class="keyword">this</span>);</div>
<div class="line"><a name="l15459"></a><span class="lineno">15459</span>&#160;                            $ <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15460"></a><span class="lineno">15460</span>&#160; </div>
<div class="line"><a name="l15461"></a><span class="lineno">15461</span>&#160;            <span class="keywordflow">default</span>:        $ <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15462"></a><span class="lineno">15462</span>&#160;            }</div>
<div class="line"><a name="l15463"></a><span class="lineno">15463</span>&#160;                            $ <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15464"></a><span class="lineno">15464</span>&#160;        <span class="keywordflow">default</span>:            $ <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l15465"></a><span class="lineno">15465</span>&#160;        }</div>
<div class="line"><a name="l15466"></a><span class="lineno">15466</span>&#160; </div>
<div class="line"><a name="l15467"></a><span class="lineno">15467</span>&#160;$   <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l15468"></a><span class="lineno">15468</span>&#160;    }</div>
<div class="line"><a name="l15469"></a><span class="lineno">15469</span>&#160; </div>
<div class="line"><a name="l15470"></a><span class="lineno">15470</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15471"></a><span class="lineno">15471</span>&#160; </div>
<div class="line"><a name="l15472"></a><span class="lineno">15472</span>&#160;intptr_t CALLBACK <a class="code" href="structtx_dialog.html#a1224cc6dee12d46b554b3ef4de18aa6d">txDialog::DialogProc_</a> (HWND wnd, UINT msg, WPARAM wParam, LPARAM lParam)</div>
<div class="line"><a name="l15473"></a><span class="lineno">15473</span>&#160;    {</div>
<div class="line"><a name="l15474"></a><span class="lineno">15474</span>&#160;$1  <span class="keyword">static</span> <a class="code" href="structtx_dialog.html">txDialog</a>* this__ = NULL;</div>
<div class="line"><a name="l15475"></a><span class="lineno">15475</span>&#160;$   <span class="keywordflow">if</span> (msg == WM_INITDIALOG) this__ = (<a class="code" href="structtx_dialog.html">txDialog</a>*) lParam;</div>
<div class="line"><a name="l15476"></a><span class="lineno">15476</span>&#160;$   <span class="keywordflow">if</span> (!this__) <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><a name="l15477"></a><span class="lineno">15477</span>&#160; </div>
<div class="line"><a name="l15478"></a><span class="lineno">15478</span>&#160;$   <span class="keywordflow">return</span> this__-&gt; <a class="code" href="structtx_dialog.html#a39efe9383833aedb0839d2519173930e">dialogProc</a> (wnd, msg, wParam, lParam);  <span class="comment">//-V109</span></div>
<div class="line"><a name="l15479"></a><span class="lineno">15479</span>&#160;    }</div>
<div class="line"><a name="l15480"></a><span class="lineno">15480</span>&#160; </div>
<div class="line"><a name="l15481"></a><span class="lineno">15481</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15482"></a><span class="lineno">15482</span>&#160; </div>
<div class="line"><a name="l15483"></a><span class="lineno">15483</span>&#160;<span class="keywordtype">void</span>* _tx_DLGTEMPLATE_Create (<span class="keywordtype">void</span>* globalMem, <span class="keywordtype">size_t</span> bufsize, DWORD style, DWORD exStyle,</div>
<div class="line"><a name="l15484"></a><span class="lineno">15484</span>&#160;                              WORD controls, <span class="keywordtype">short</span> x, <span class="keywordtype">short</span> y, <span class="keywordtype">short</span> cx, <span class="keywordtype">short</span> cy,</div>
<div class="line"><a name="l15485"></a><span class="lineno">15485</span>&#160;                              <span class="keyword">const</span> <span class="keywordtype">char</span> caption[], <span class="keyword">const</span> <span class="keywordtype">char</span> font[], WORD fontsize, <span class="keyword">const</span> <span class="keywordtype">char</span> menu[])</div>
<div class="line"><a name="l15486"></a><span class="lineno">15486</span>&#160;    {</div>
<div class="line"><a name="l15487"></a><span class="lineno">15487</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (globalMem)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l15488"></a><span class="lineno">15488</span>&#160; </div>
<div class="line"><a name="l15489"></a><span class="lineno">15489</span>&#160;$   WORD* pw = (WORD*) globalMem;</div>
<div class="line"><a name="l15490"></a><span class="lineno">15490</span>&#160; </div>
<div class="line"><a name="l15491"></a><span class="lineno">15491</span>&#160;$   DLGTEMPLATE* tmpl = ((DLGTEMPLATE*&amp;) pw)++;</div>
<div class="line"><a name="l15492"></a><span class="lineno">15492</span>&#160; </div>
<div class="line"><a name="l15493"></a><span class="lineno">15493</span>&#160;$   tmpl-&gt;style = style;</div>
<div class="line"><a name="l15494"></a><span class="lineno">15494</span>&#160;$   tmpl-&gt;dwExtendedStyle = exStyle;</div>
<div class="line"><a name="l15495"></a><span class="lineno">15495</span>&#160;$   tmpl-&gt;cdit  = controls;</div>
<div class="line"><a name="l15496"></a><span class="lineno">15496</span>&#160;$   tmpl-&gt;x     = x;</div>
<div class="line"><a name="l15497"></a><span class="lineno">15497</span>&#160;$   tmpl-&gt;y     = y;</div>
<div class="line"><a name="l15498"></a><span class="lineno">15498</span>&#160;$   tmpl-&gt;cx    = cx;</div>
<div class="line"><a name="l15499"></a><span class="lineno">15499</span>&#160;$   tmpl-&gt;cy    = cy;</div>
<div class="line"><a name="l15500"></a><span class="lineno">15500</span>&#160; </div>
<div class="line"><a name="l15501"></a><span class="lineno">15501</span>&#160;$   <span class="keywordflow">if</span> (menu &gt; (<span class="keyword">const</span> <span class="keywordtype">char</span>*) 0xFFFF)</div>
<div class="line"><a name="l15502"></a><span class="lineno">15502</span>&#160;        {</div>
<div class="line"><a name="l15503"></a><span class="lineno">15503</span>&#160;$       pw  += MultiByteToWideChar  (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, (menu?    menu    : <span class="stringliteral">&quot;&quot;</span>), -1, (<span class="keywordtype">wchar_t</span>*) pw,           <span class="comment">//-V547</span></div>
<div class="line"><a name="l15504"></a><span class="lineno">15504</span>&#160;                                    (<span class="keywordtype">int</span>) (bufsize? bufsize - ((<span class="keywordtype">char</span>*) pw - (<span class="keywordtype">char</span>*) globalMem) : 0xFFFF));  <span class="comment">//-V202</span></div>
<div class="line"><a name="l15505"></a><span class="lineno">15505</span>&#160;        }</div>
<div class="line"><a name="l15506"></a><span class="lineno">15506</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l15507"></a><span class="lineno">15507</span>&#160;        {</div>
<div class="line"><a name="l15508"></a><span class="lineno">15508</span>&#160;$       *pw++ = (WORD)(uintptr_t) (menu? 0xFFFF : 0);</div>
<div class="line"><a name="l15509"></a><span class="lineno">15509</span>&#160;$       *pw++ = (WORD)(uintptr_t)  menu;</div>
<div class="line"><a name="l15510"></a><span class="lineno">15510</span>&#160;        }</div>
<div class="line"><a name="l15511"></a><span class="lineno">15511</span>&#160; </div>
<div class="line"><a name="l15512"></a><span class="lineno">15512</span>&#160;$   <span class="keywordflow">if</span> (caption)</div>
<div class="line"><a name="l15513"></a><span class="lineno">15513</span>&#160;        {</div>
<div class="line"><a name="l15514"></a><span class="lineno">15514</span>&#160;$       pw  += MultiByteToWideChar  (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, (caption? caption : <span class="stringliteral">&quot;&quot;</span>), -1, (<span class="keywordtype">wchar_t</span>*) pw,           <span class="comment">//-V547</span></div>
<div class="line"><a name="l15515"></a><span class="lineno">15515</span>&#160;                                    (<span class="keywordtype">int</span>) (bufsize? bufsize - ((<span class="keywordtype">char</span>*) pw - (<span class="keywordtype">char</span>*) globalMem) : 0xFFFF));  <span class="comment">//-V202</span></div>
<div class="line"><a name="l15516"></a><span class="lineno">15516</span>&#160;        }</div>
<div class="line"><a name="l15517"></a><span class="lineno">15517</span>&#160; </div>
<div class="line"><a name="l15518"></a><span class="lineno">15518</span>&#160;$   <span class="keywordflow">if</span> (style &amp; DS_SETFONT)</div>
<div class="line"><a name="l15519"></a><span class="lineno">15519</span>&#160;        {</div>
<div class="line"><a name="l15520"></a><span class="lineno">15520</span>&#160;$       *pw++ = fontsize;</div>
<div class="line"><a name="l15521"></a><span class="lineno">15521</span>&#160;$        pw  += MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, (font?    font    : <span class="stringliteral">&quot;&quot;</span>), -1, (<span class="keywordtype">wchar_t</span>*) pw,</div>
<div class="line"><a name="l15522"></a><span class="lineno">15522</span>&#160;                                    (<span class="keywordtype">int</span>) (bufsize? bufsize - ((<span class="keywordtype">char</span>*) pw - (<span class="keywordtype">char</span>*) globalMem) : 0xFFFF));  <span class="comment">//-V202</span></div>
<div class="line"><a name="l15523"></a><span class="lineno">15523</span>&#160;        }</div>
<div class="line"><a name="l15524"></a><span class="lineno">15524</span>&#160; </div>
<div class="line"><a name="l15525"></a><span class="lineno">15525</span>&#160;$   <span class="keywordflow">return</span> pw;</div>
<div class="line"><a name="l15526"></a><span class="lineno">15526</span>&#160;    }</div>
<div class="line"><a name="l15527"></a><span class="lineno">15527</span>&#160; </div>
<div class="line"><a name="l15528"></a><span class="lineno">15528</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15529"></a><span class="lineno">15529</span>&#160; </div>
<div class="line"><a name="l15530"></a><span class="lineno">15530</span>&#160;<span class="keywordtype">void</span>* _tx_DLGTEMPLATE_Add (<span class="keywordtype">void</span>* dlgTemplatePtr, <span class="keywordtype">size_t</span> bufsize, DWORD style, DWORD exStyle,</div>
<div class="line"><a name="l15531"></a><span class="lineno">15531</span>&#160;                           <span class="keywordtype">short</span> x, <span class="keywordtype">short</span> y, <span class="keywordtype">short</span> cx, <span class="keywordtype">short</span> cy,</div>
<div class="line"><a name="l15532"></a><span class="lineno">15532</span>&#160;                           WORD <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> wclass[], <span class="keyword">const</span> <span class="keywordtype">char</span> caption[])</div>
<div class="line"><a name="l15533"></a><span class="lineno">15533</span>&#160;    {</div>
<div class="line"><a name="l15534"></a><span class="lineno">15534</span>&#160;$1  <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (dlgTemplatePtr)) <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l15535"></a><span class="lineno">15535</span>&#160; </div>
<div class="line"><a name="l15536"></a><span class="lineno">15536</span>&#160;$   WORD* pw = (LPWORD) dlgTemplatePtr;  <span class="comment">// Force align at word boundary</span></div>
<div class="line"><a name="l15537"></a><span class="lineno">15537</span>&#160;$   ((ULONG&amp;) pw)  += 3;  <span class="comment">//-V205</span></div>
<div class="line"><a name="l15538"></a><span class="lineno">15538</span>&#160;$   ((ULONG&amp;) pw) &gt;&gt;= 2;  <span class="comment">//-V205</span></div>
<div class="line"><a name="l15539"></a><span class="lineno">15539</span>&#160;$   ((ULONG&amp;) pw) &lt;&lt;= 2;  <span class="comment">//-V205</span></div>
<div class="line"><a name="l15540"></a><span class="lineno">15540</span>&#160; </div>
<div class="line"><a name="l15541"></a><span class="lineno">15541</span>&#160;$   DLGITEMTEMPLATE* tmpl = ((DLGITEMTEMPLATE*&amp;) pw)++;</div>
<div class="line"><a name="l15542"></a><span class="lineno">15542</span>&#160; </div>
<div class="line"><a name="l15543"></a><span class="lineno">15543</span>&#160;$   tmpl-&gt;style = style;</div>
<div class="line"><a name="l15544"></a><span class="lineno">15544</span>&#160;$   tmpl-&gt;dwExtendedStyle = exStyle;</div>
<div class="line"><a name="l15545"></a><span class="lineno">15545</span>&#160;$   tmpl-&gt;x     = x;</div>
<div class="line"><a name="l15546"></a><span class="lineno">15546</span>&#160;$   tmpl-&gt;y     = y;</div>
<div class="line"><a name="l15547"></a><span class="lineno">15547</span>&#160;$   tmpl-&gt;cx    = cx;</div>
<div class="line"><a name="l15548"></a><span class="lineno">15548</span>&#160;$   tmpl-&gt;cy    = cy;</div>
<div class="line"><a name="l15549"></a><span class="lineno">15549</span>&#160;$   tmpl-&gt;id    = id;</div>
<div class="line"><a name="l15550"></a><span class="lineno">15550</span>&#160; </div>
<div class="line"><a name="l15551"></a><span class="lineno">15551</span>&#160;$   <span class="keywordflow">if</span> (HIWORD (wclass) == 0xFFFF)</div>
<div class="line"><a name="l15552"></a><span class="lineno">15552</span>&#160;        {</div>
<div class="line"><a name="l15553"></a><span class="lineno">15553</span>&#160;$       *pw++ = (WORD) (HIWORD ((uintptr_t) wclass));</div>
<div class="line"><a name="l15554"></a><span class="lineno">15554</span>&#160;$       *pw++ = (WORD) (LOWORD ((uintptr_t) wclass));</div>
<div class="line"><a name="l15555"></a><span class="lineno">15555</span>&#160;        }</div>
<div class="line"><a name="l15556"></a><span class="lineno">15556</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (wclass)</div>
<div class="line"><a name="l15557"></a><span class="lineno">15557</span>&#160;        {</div>
<div class="line"><a name="l15558"></a><span class="lineno">15558</span>&#160;$       pw  += MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, <span class="keyword">const_cast &lt;</span><span class="keywordtype">char</span>*<span class="keyword">&gt;</span> (wclass), -1, (<span class="keywordtype">wchar_t</span>*) pw,</div>
<div class="line"><a name="l15559"></a><span class="lineno">15559</span>&#160;                                   (<span class="keywordtype">int</span>) (bufsize? bufsize - ((<span class="keywordtype">char</span>*) pw - (<span class="keywordtype">char</span>*) dlgTemplatePtr) : 0xFFFF));   <span class="comment">//-V202</span></div>
<div class="line"><a name="l15560"></a><span class="lineno">15560</span>&#160;        }</div>
<div class="line"><a name="l15561"></a><span class="lineno">15561</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l15562"></a><span class="lineno">15562</span>&#160;        {</div>
<div class="line"><a name="l15563"></a><span class="lineno">15563</span>&#160;$       *pw++ = 0;</div>
<div class="line"><a name="l15564"></a><span class="lineno">15564</span>&#160;        }</div>
<div class="line"><a name="l15565"></a><span class="lineno">15565</span>&#160; </div>
<div class="line"><a name="l15566"></a><span class="lineno">15566</span>&#160;$   <span class="keywordflow">if</span> (caption)</div>
<div class="line"><a name="l15567"></a><span class="lineno">15567</span>&#160;         {</div>
<div class="line"><a name="l15568"></a><span class="lineno">15568</span>&#160;$        pw  += MultiByteToWideChar (<a class="code" href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a>, 0, caption, -1, (<span class="keywordtype">wchar_t</span>*) pw,</div>
<div class="line"><a name="l15569"></a><span class="lineno">15569</span>&#160;                                    (<span class="keywordtype">int</span>) (bufsize? bufsize - ((<span class="keywordtype">char</span>*) pw - (<span class="keywordtype">char</span>*) dlgTemplatePtr) : 0xFFFF));  <span class="comment">//-V202</span></div>
<div class="line"><a name="l15570"></a><span class="lineno">15570</span>&#160;         }</div>
<div class="line"><a name="l15571"></a><span class="lineno">15571</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l15572"></a><span class="lineno">15572</span>&#160;        {</div>
<div class="line"><a name="l15573"></a><span class="lineno">15573</span>&#160;$       *pw++ = 0;</div>
<div class="line"><a name="l15574"></a><span class="lineno">15574</span>&#160;        }</div>
<div class="line"><a name="l15575"></a><span class="lineno">15575</span>&#160; </div>
<div class="line"><a name="l15576"></a><span class="lineno">15576</span>&#160;$   *pw++ = 0;</div>
<div class="line"><a name="l15577"></a><span class="lineno">15577</span>&#160; </div>
<div class="line"><a name="l15578"></a><span class="lineno">15578</span>&#160;$   <span class="keywordflow">return</span> pw;</div>
<div class="line"><a name="l15579"></a><span class="lineno">15579</span>&#160;    }</div>
<div class="line"><a name="l15580"></a><span class="lineno">15580</span>&#160; </div>
<div class="line"><a name="l15581"></a><span class="lineno">15581</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// TX_COMPILED</span></div>
<div class="line"><a name="l15582"></a><span class="lineno">15582</span>&#160; </div>
<div class="line"><a name="l15583"></a><span class="lineno">15583</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l15584"></a><span class="lineno">15584</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15585"></a><span class="lineno">15585</span>&#160; </div>
<div class="line"><a name="l15586"></a><span class="lineno">15586</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15587"></a><span class="lineno">15587</span>&#160;<span class="comment">//{          Cleaning up the utility macros</span></div>
<div class="line"><a name="l15588"></a><span class="lineno">15588</span>&#160;<span class="comment">//           Очистка служебных макросов</span></div>
<div class="line"><a name="l15589"></a><span class="lineno">15589</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15590"></a><span class="lineno">15590</span>&#160; </div>
<div class="line"><a name="l15591"></a><span class="lineno">15591</span>&#160;<span class="preprocessor">#undef       $</span></div>
<div class="line"><a name="l15592"></a><span class="lineno">15592</span>&#160;<span class="preprocessor">#undef       $0</span></div>
<div class="line"><a name="l15593"></a><span class="lineno">15593</span>&#160;<span class="preprocessor">#undef       $1</span></div>
<div class="line"><a name="l15594"></a><span class="lineno">15594</span>&#160;<span class="preprocessor">#undef       $2</span></div>
<div class="line"><a name="l15595"></a><span class="lineno">15595</span>&#160;<span class="preprocessor">#undef       $3</span></div>
<div class="line"><a name="l15596"></a><span class="lineno">15596</span>&#160;<span class="preprocessor">#undef       $4</span></div>
<div class="line"><a name="l15597"></a><span class="lineno">15597</span>&#160;<span class="preprocessor">#undef       $5</span></div>
<div class="line"><a name="l15598"></a><span class="lineno">15598</span>&#160;<span class="preprocessor">#undef       $6</span></div>
<div class="line"><a name="l15599"></a><span class="lineno">15599</span>&#160;<span class="preprocessor">#undef       $7</span></div>
<div class="line"><a name="l15600"></a><span class="lineno">15600</span>&#160;<span class="preprocessor">#undef       $8</span></div>
<div class="line"><a name="l15601"></a><span class="lineno">15601</span>&#160;<span class="preprocessor">#undef       $9</span></div>
<div class="line"><a name="l15602"></a><span class="lineno">15602</span>&#160;<span class="preprocessor">#undef       $$</span></div>
<div class="line"><a name="l15603"></a><span class="lineno">15603</span>&#160; </div>
<div class="line"><a name="l15604"></a><span class="lineno">15604</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l15605"></a><span class="lineno">15605</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15606"></a><span class="lineno">15606</span>&#160; </div>
<div class="line"><a name="l15608"></a><span class="lineno">15608</span>&#160; </div>
<div class="line"><a name="l15609"></a><span class="lineno">15609</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15610"></a><span class="lineno">15610</span>&#160;<span class="comment">//{          Experimental Debugging macros</span></div>
<div class="line"><a name="l15612"></a><span class="lineno">15612</span>&#160;<span class="comment"></span><span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15613"></a><span class="lineno">15613</span>&#160; </div>
<div class="line"><a name="l15614"></a><span class="lineno">15614</span>&#160;<span class="comment">//{----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15734"></a><span class="lineno">15734</span>&#160;<span class="comment"></span><span class="comment">//}----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15735"></a><span class="lineno">15735</span>&#160; </div>
<div class="line"><a name="l15736"></a><span class="lineno">15736</span>&#160;<span class="preprocessor">#ifndef __TX_DEBUG_MACROS</span></div>
<div class="line"><a name="l15737"></a><span class="lineno"><a class="line" href="group___misc.html#gaaa5d2cd4ba134312dcaca4e8316bbe9e">15737</a></span>&#160;<span class="preprocessor">#define __TX_DEBUG_MACROS  (&quot;Группа отладочных $-макросов&quot;</span>)</div>
<div class="line"><a name="l15738"></a><span class="lineno">15738</span>&#160; </div>
<div class="line"><a name="l15740"></a><span class="lineno">15740</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15741"></a><span class="lineno">15741</span>&#160; </div>
<div class="line"><a name="l15742"></a><span class="lineno">15742</span>&#160;<span class="preprocessor">#define $H            txSetConsoleAttr (FOREGROUND_BLACK        | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15743"></a><span class="lineno">15743</span>&#160;<span class="preprocessor">#define $B            txSetConsoleAttr (FOREGROUND_BLUE         | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15744"></a><span class="lineno">15744</span>&#160;<span class="preprocessor">#define $G            txSetConsoleAttr (FOREGROUND_GREEN        | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15745"></a><span class="lineno">15745</span>&#160;<span class="preprocessor">#define $C            txSetConsoleAttr (FOREGROUND_CYAN         | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15746"></a><span class="lineno">15746</span>&#160;<span class="preprocessor">#define $R            txSetConsoleAttr (FOREGROUND_RED          | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15747"></a><span class="lineno">15747</span>&#160;<span class="preprocessor">#define $M            txSetConsoleAttr (FOREGROUND_MAGENTA      | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15748"></a><span class="lineno">15748</span>&#160;<span class="preprocessor">#define $Y            txSetConsoleAttr (FOREGROUND_DARKYELLOW   | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15749"></a><span class="lineno">15749</span>&#160;<span class="preprocessor">#define $d            txSetConsoleAttr (FOREGROUND_LIGHTGRAY    | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15750"></a><span class="lineno">15750</span>&#160;<span class="preprocessor">#define $D            txSetConsoleAttr (FOREGROUND_DARKGRAY     | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15751"></a><span class="lineno">15751</span>&#160;<span class="preprocessor">#define $b            txSetConsoleAttr (FOREGROUND_LIGHTBLUE    | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15752"></a><span class="lineno">15752</span>&#160;<span class="preprocessor">#define $g            txSetConsoleAttr (FOREGROUND_LIGHTGREEN   | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15753"></a><span class="lineno">15753</span>&#160;<span class="preprocessor">#define $c            txSetConsoleAttr (FOREGROUND_LIGHTCYAN    | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15754"></a><span class="lineno">15754</span>&#160;<span class="preprocessor">#define $r            txSetConsoleAttr (FOREGROUND_LIGHTRED     | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15755"></a><span class="lineno">15755</span>&#160;<span class="preprocessor">#define $m            txSetConsoleAttr (FOREGROUND_LIGHTMAGENTA | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15756"></a><span class="lineno">15756</span>&#160;<span class="preprocessor">#define $y            txSetConsoleAttr (FOREGROUND_YELLOW       | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15757"></a><span class="lineno">15757</span>&#160;<span class="preprocessor">#define $h            txSetConsoleAttr (FOREGROUND_WHITE        | BACKGROUND_BLACK);</span></div>
<div class="line"><a name="l15758"></a><span class="lineno">15758</span>&#160; </div>
<div class="line"><a name="l15759"></a><span class="lineno">15759</span>&#160;<span class="preprocessor">#define $i            txSetConsoleAttr (FOREGROUND_LIGHTCYAN    | BACKGROUND_BLUE);</span></div>
<div class="line"><a name="l15760"></a><span class="lineno">15760</span>&#160;<span class="preprocessor">#define $I            txSetConsoleAttr (FOREGROUND_YELLOW       | BACKGROUND_BLUE);</span></div>
<div class="line"><a name="l15761"></a><span class="lineno">15761</span>&#160;<span class="preprocessor">#define $o            txSetConsoleAttr (FOREGROUND_LIGHTGREEN   | BACKGROUND_GREEN);</span></div>
<div class="line"><a name="l15762"></a><span class="lineno">15762</span>&#160;<span class="preprocessor">#define $O            txSetConsoleAttr (FOREGROUND_YELLOW       | BACKGROUND_GREEN);</span></div>
<div class="line"><a name="l15763"></a><span class="lineno">15763</span>&#160;<span class="preprocessor">#define $e            txSetConsoleAttr (FOREGROUND_WHITE        | BACKGROUND_RED);</span></div>
<div class="line"><a name="l15764"></a><span class="lineno">15764</span>&#160;<span class="preprocessor">#define $E            txSetConsoleAttr (FOREGROUND_YELLOW       | BACKGROUND_RED);</span></div>
<div class="line"><a name="l15765"></a><span class="lineno">15765</span>&#160;<span class="preprocessor">#define $w            txSetConsoleAttr (FOREGROUND_LIGHTMAGENTA | BACKGROUND_MAGENTA);</span></div>
<div class="line"><a name="l15766"></a><span class="lineno">15766</span>&#160;<span class="preprocessor">#define $W            txSetConsoleAttr (FOREGROUND_YELLOW       | BACKGROUND_MAGENTA);</span></div>
<div class="line"><a name="l15767"></a><span class="lineno">15767</span>&#160;<span class="preprocessor">#define $f            txSetConsoleAttr (FOREGROUND_BLACK        | BACKGROUND_LIGHTRED);</span></div>
<div class="line"><a name="l15768"></a><span class="lineno">15768</span>&#160;<span class="preprocessor">#define $F            txSetConsoleAttr (FOREGROUND_MAGENTA      | BACKGROUND_LIGHTRED);</span></div>
<div class="line"><a name="l15769"></a><span class="lineno">15769</span>&#160;<span class="preprocessor">#define $l            txSetConsoleAttr (FOREGROUND_BLACK        | BACKGROUND_DARKGRAY);</span></div>
<div class="line"><a name="l15770"></a><span class="lineno">15770</span>&#160;<span class="preprocessor">#define $L            txSetConsoleAttr (FOREGROUND_LIGHTGRAY    | BACKGROUND_DARKGRAY);</span></div>
<div class="line"><a name="l15771"></a><span class="lineno">15771</span>&#160; </div>
<div class="line"><a name="l15772"></a><span class="lineno">15772</span>&#160;<span class="preprocessor">#define $T( cond )    txSetConsoleAttr ((cond)? FOREGROUND_LIGHTGREEN : FOREGROUND_LIGHTRED );</span></div>
<div class="line"><a name="l15773"></a><span class="lineno">15773</span>&#160; </div>
<div class="line"><a name="l15774"></a><span class="lineno">15774</span>&#160;<span class="preprocessor">#define $s            _txSaveConsoleAttr TX_JOIN (__txSavedConsoleAttrs, __LINE__);</span></div>
<div class="line"><a name="l15775"></a><span class="lineno">15775</span>&#160; </div>
<div class="line"><a name="l15776"></a><span class="lineno">15776</span>&#160;<span class="preprocessor">#define $sH           $s $H</span></div>
<div class="line"><a name="l15777"></a><span class="lineno">15777</span>&#160;<span class="preprocessor">#define $sB           $s $B</span></div>
<div class="line"><a name="l15778"></a><span class="lineno">15778</span>&#160;<span class="preprocessor">#define $sG           $s $G</span></div>
<div class="line"><a name="l15779"></a><span class="lineno">15779</span>&#160;<span class="preprocessor">#define $sC           $s $C</span></div>
<div class="line"><a name="l15780"></a><span class="lineno">15780</span>&#160;<span class="preprocessor">#define $sR           $s $R</span></div>
<div class="line"><a name="l15781"></a><span class="lineno">15781</span>&#160;<span class="preprocessor">#define $sM           $s $M</span></div>
<div class="line"><a name="l15782"></a><span class="lineno">15782</span>&#160;<span class="preprocessor">#define $sY           $s $Y</span></div>
<div class="line"><a name="l15783"></a><span class="lineno">15783</span>&#160;<span class="preprocessor">#define $sd           $s $d</span></div>
<div class="line"><a name="l15784"></a><span class="lineno">15784</span>&#160;<span class="preprocessor">#define $sD           $s $D</span></div>
<div class="line"><a name="l15785"></a><span class="lineno">15785</span>&#160;<span class="preprocessor">#define $sb           $s $b</span></div>
<div class="line"><a name="l15786"></a><span class="lineno">15786</span>&#160;<span class="preprocessor">#define $sg           $s $g</span></div>
<div class="line"><a name="l15787"></a><span class="lineno">15787</span>&#160;<span class="preprocessor">#define $sc           $s $c</span></div>
<div class="line"><a name="l15788"></a><span class="lineno">15788</span>&#160;<span class="preprocessor">#define $sr           $s $r</span></div>
<div class="line"><a name="l15789"></a><span class="lineno">15789</span>&#160;<span class="preprocessor">#define $sm           $s $m</span></div>
<div class="line"><a name="l15790"></a><span class="lineno">15790</span>&#160;<span class="preprocessor">#define $sy           $s $y</span></div>
<div class="line"><a name="l15791"></a><span class="lineno">15791</span>&#160;<span class="preprocessor">#define $sh           $s $h</span></div>
<div class="line"><a name="l15792"></a><span class="lineno">15792</span>&#160; </div>
<div class="line"><a name="l15793"></a><span class="lineno">15793</span>&#160;<span class="preprocessor">#define $si           $s $i</span></div>
<div class="line"><a name="l15794"></a><span class="lineno">15794</span>&#160;<span class="preprocessor">#define $sI           $s $I</span></div>
<div class="line"><a name="l15795"></a><span class="lineno">15795</span>&#160;<span class="preprocessor">#define $so           $s $o</span></div>
<div class="line"><a name="l15796"></a><span class="lineno">15796</span>&#160;<span class="preprocessor">#define $sO           $s $O</span></div>
<div class="line"><a name="l15797"></a><span class="lineno">15797</span>&#160;<span class="preprocessor">#define $se           $s $e</span></div>
<div class="line"><a name="l15798"></a><span class="lineno">15798</span>&#160;<span class="preprocessor">#define $sE           $s $E</span></div>
<div class="line"><a name="l15799"></a><span class="lineno">15799</span>&#160;<span class="preprocessor">#define $sw           $s $w</span></div>
<div class="line"><a name="l15800"></a><span class="lineno">15800</span>&#160;<span class="preprocessor">#define $sW           $s $W</span></div>
<div class="line"><a name="l15801"></a><span class="lineno">15801</span>&#160;<span class="preprocessor">#define $sf           $s $f</span></div>
<div class="line"><a name="l15802"></a><span class="lineno">15802</span>&#160;<span class="preprocessor">#define $sF           $s $F</span></div>
<div class="line"><a name="l15803"></a><span class="lineno">15803</span>&#160;<span class="preprocessor">#define $sl           $s $l</span></div>
<div class="line"><a name="l15804"></a><span class="lineno">15804</span>&#160;<span class="preprocessor">#define $sL           $s $L</span></div>
<div class="line"><a name="l15805"></a><span class="lineno">15805</span>&#160; </div>
<div class="line"><a name="l15806"></a><span class="lineno">15806</span>&#160;<span class="preprocessor">#define $sT( cond )   $s $T (cond)</span></div>
<div class="line"><a name="l15807"></a><span class="lineno">15807</span>&#160; </div>
<div class="line"><a name="l15808"></a><span class="lineno">15808</span>&#160;<span class="preprocessor">#define $test(cond)   { if (!!(cond)) { $o std::cerr &lt;&lt; &quot;[PASSED] &quot;</span> __TX_FILELINE__ &quot;: &quot; #cond; } \</div>
<div class="line"><a name="l15809"></a><span class="lineno">15809</span>&#160;                        else          { $e std::cerr &lt;&lt; &quot;[FAILED] &quot; __TX_FILELINE__ &quot;: &quot; #cond; } $d; }</div>
<div class="line"><a name="l15810"></a><span class="lineno">15810</span>&#160; </div>
<div class="line"><a name="l15811"></a><span class="lineno">15811</span>&#160;<span class="preprocessor">#define $status(cond) $test (cond)</span></div>
<div class="line"><a name="l15812"></a><span class="lineno">15812</span>&#160; </div>
<div class="line"><a name="l15813"></a><span class="lineno">15813</span>&#160;<span class="preprocessor">#define $unittest( code, expected )                                                                                             \</span></div>
<div class="line"><a name="l15814"></a><span class="lineno">15814</span>&#160;<span class="preprocessor">    {                                                                                                                           \</span></div>
<div class="line"><a name="l15815"></a><span class="lineno">15815</span>&#160;<span class="preprocessor">    const _tx_decltype (code)     &amp; _result   = (code);       </span><span class="comment">/* Should use auto, but g++ 4.7.2 default std is &lt; 2011 */</span><span class="preprocessor">        \</span></div>
<div class="line"><a name="l15816"></a><span class="lineno">15816</span>&#160;<span class="preprocessor">    const _tx_decltype (expected) &amp; _expected = (expected);                                                                     \</span></div>
<div class="line"><a name="l15817"></a><span class="lineno">15817</span>&#160;<span class="preprocessor">                                                                                                                                \</span></div>
<div class="line"><a name="l15818"></a><span class="lineno">15818</span>&#160;<span class="preprocessor">    if (_result == _expected)                                                                                                   \</span></div>
<div class="line"><a name="l15819"></a><span class="lineno">15819</span>&#160;<span class="preprocessor">        { $so std::cerr &lt;&lt; &quot;[PASSED] &quot;</span> __TX_FILELINE__ &quot;: &quot; #code; }                                                            \</div>
<div class="line"><a name="l15820"></a><span class="lineno">15820</span>&#160;    else                                                                                                                        \</div>
<div class="line"><a name="l15821"></a><span class="lineno">15821</span>&#160;        { $se std::cerr &lt;&lt; &quot;[FAILED] &quot; __TX_FILELINE__ &quot;: &quot; #code &quot; == (&quot; &lt;&lt; _result &lt;&lt; &quot;), should be (&quot; &lt;&lt; _expected &lt;&lt; &quot;)&quot;; } \</div>
<div class="line"><a name="l15822"></a><span class="lineno">15822</span>&#160;                                                                                                                                \</div>
<div class="line"><a name="l15823"></a><span class="lineno">15823</span>&#160;    $n;                                                                                                                         \</div>
<div class="line"><a name="l15824"></a><span class="lineno">15824</span>&#160;    (_result == _expected);                                                                                                     \</div>
<div class="line"><a name="l15825"></a><span class="lineno">15825</span>&#160;    }</div>
<div class="line"><a name="l15826"></a><span class="lineno">15826</span>&#160; </div>
<div class="line"><a name="l15827"></a><span class="lineno">15827</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l15828"></a><span class="lineno">15828</span>&#160; </div>
<div class="line"><a name="l15829"></a><span class="lineno">15829</span>&#160;<span class="preprocessor">#define $V(  var, ...)        (               _txDumpVar ((var), _tx$PrefixV (      __VA_ARGS__), &quot;]\n&quot;</span>) )</div>
<div class="line"><a name="l15830"></a><span class="lineno">15830</span>&#160;<span class="preprocessor">#define $V_( var, ...)        (               _txDumpVar ((var), _tx$PrefixV (      __VA_ARGS__), &quot;] &quot;</span> ) )</div>
<div class="line"><a name="l15831"></a><span class="lineno">15831</span>&#160;<span class="preprocessor">#define $V__(var, ...)        (               _txDumpVar ((var), _tx$PrefixV (      __VA_ARGS__), &quot;]&quot;</span>  ) )</div>
<div class="line"><a name="l15832"></a><span class="lineno">15832</span>&#160; </div>
<div class="line"><a name="l15833"></a><span class="lineno">15833</span>&#160;<span class="preprocessor">#define $(   var, ...)        (               _txDumpVar ((var), _tx$Prefix  (#var, __VA_ARGS__), &quot;]\n&quot;</span>) )</div>
<div class="line"><a name="l15834"></a><span class="lineno">15834</span>&#160;<span class="preprocessor">#define $_(  var, ...)        (               _txDumpVar ((var), _tx$Prefix  (#var, __VA_ARGS__), &quot;] &quot;</span> ) )</div>
<div class="line"><a name="l15835"></a><span class="lineno">15835</span>&#160;<span class="preprocessor">#define $__( var, ...)        (               _txDumpVar ((var), _tx$Prefix  (#var, __VA_ARGS__), &quot;]&quot;</span>  ) )</div>
<div class="line"><a name="l15836"></a><span class="lineno">15836</span>&#160; </div>
<div class="line"><a name="l15837"></a><span class="lineno">15837</span>&#160;<span class="preprocessor">#define $x(  var, ...)        (               _txDumpVar ((var), _tx$Prefix  (#var, __VA_ARGS__), &quot;]\n&quot;</span>, ::std::ios_base::showbase | ::std::ios_base::hex) )</div>
<div class="line"><a name="l15838"></a><span class="lineno">15838</span>&#160;<span class="preprocessor">#define $x_( var, ...)        (               _txDumpVar ((var), _tx$Prefix  (#var, __VA_ARGS__), &quot;] &quot;</span>,  ::std::ios_base::showbase | ::std::ios_base::hex) )</div>
<div class="line"><a name="l15839"></a><span class="lineno">15839</span>&#160; </div>
<div class="line"><a name="l15840"></a><span class="lineno">15840</span>&#160;<span class="preprocessor">#define $v(  var, cond, ...)  { { $st (cond); _txDumpVar ((var), _tx$Prefix  (#var, __VA_ARGS__), &quot;]&quot;</span> ); } $n; }</div>
<div class="line"><a name="l15841"></a><span class="lineno">15841</span>&#160;<span class="preprocessor">#define $v_( var, cond, ...)  {   $st (cond); _txDumpVar ((var), _tx$Prefix  (#var, __VA_ARGS__), &quot;]&quot;</span> );       }</div>
<div class="line"><a name="l15842"></a><span class="lineno">15842</span>&#160; </div>
<div class="line"><a name="l15843"></a><span class="lineno">15843</span>&#160;<span class="preprocessor">#define $$                    { txOutputDebugPrintf (&quot;\f\n&quot;</span>); { $sC txOutputDebugPrintf (&quot;\f&quot; &quot;[%s (%d) %s]&quot;, __FILE__, __LINE__, __TX_FUNCTION__);                                   } txOutputDebugPrintf (&quot;\f\n&quot;); }</div>
<div class="line"><a name="l15844"></a><span class="lineno">15844</span>&#160;<span class="preprocessor">#define $$_                   { txOutputDebugPrintf (&quot;\f\n&quot;</span>); { $sC txOutputDebugPrintf (&quot;\f&quot; &quot;[&quot; &quot;(%d) %s]&quot;,           __LINE__, __func__);                                          } txOutputDebugPrintf (&quot;\f\n&quot;); }</div>
<div class="line"><a name="l15845"></a><span class="lineno">15845</span>&#160;<span class="preprocessor">#define $meow(...)            { txOutputDebugPrintf (&quot;\f\n&quot;</span>); { $sc txOutputDebugPrintf (&quot;\f&quot; &quot;[%s (%d) %s]&quot;, __FILE__, __LINE__, __func__); txOutputDebugPrintf (&quot;\f &quot; __VA_ARGS__); } txOutputDebugPrintf (&quot;\f\n&quot;); }</div>
<div class="line"><a name="l15846"></a><span class="lineno">15846</span>&#160; </div>
<div class="line"><a name="l15847"></a><span class="lineno">15847</span>&#160;<span class="preprocessor">#define $$$(   ... )          ( ::std::cerr &lt;&lt; &quot;\n[&quot;</span> __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]\n&quot;, _txDumpVar ((__VA_ARGS__),&quot;\n[&quot; __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;: &quot;, &quot;, DONE]\n\n&quot;) )</div>
<div class="line"><a name="l15848"></a><span class="lineno">15848</span>&#160;<span class="preprocessor">#define $$$_(  ... )          ( ::std::cerr &lt;&lt; &quot;\n[&quot;</span> __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]\n&quot;, _txDumpVar ((__VA_ARGS__),  &quot;[&quot; __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;: &quot;, &quot;, DONE]\n\n&quot;) )</div>
<div class="line"><a name="l15849"></a><span class="lineno">15849</span>&#160; </div>
<div class="line"><a name="l15850"></a><span class="lineno">15850</span>&#160;<span class="preprocessor">#define $$$$(  ... )          { ::std::cerr &lt;&lt; &quot;\n[&quot;</span> __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]\n&quot;; _txDumpVarSuffix         (&quot;\n[&quot; __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__        &quot; DONE]\n\n&quot;); { __VA_ARGS__; } }</div>
<div class="line"><a name="l15851"></a><span class="lineno">15851</span>&#160;<span class="preprocessor">#define $$$$_( ... )          { ::std::cerr &lt;&lt; &quot;\n[&quot;</span> __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]\n&quot;; _txDumpVarSuffix         (  &quot;[&quot; __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__        &quot; DONE]\n\n&quot;); { __VA_ARGS__; } }</div>
<div class="line"><a name="l15852"></a><span class="lineno">15852</span>&#160;<span class="preprocessor">#define $do(   ... )            ::std::cerr &lt;&lt; &quot;\n[&quot;</span> __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]\n&quot;;                                                                                           __VA_ARGS__</div>
<div class="line"><a name="l15853"></a><span class="lineno">15853</span>&#160;<span class="preprocessor">#define $DO(   ... )            ::std::cerr &lt;&lt; &quot;\n[&quot;</span> __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]...\n&quot;; $p;                                                                                    __VA_ARGS__</div>
<div class="line"><a name="l15854"></a><span class="lineno">15854</span>&#160;<span class="preprocessor">#define $Do(   ... )            ::std::cerr &lt;&lt; &quot;\n[&quot;</span> __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]...\n&quot;;                                                                                        \</div>
<div class="line"><a name="l15855"></a><span class="lineno">15855</span>&#160;                                txMessageBox ( &quot;\n[&quot; __TX_FILELINE__ &quot;: &quot; #__VA_ARGS__ &quot;]...\n&quot;, __TX_FUNCTION__);                                                                      __VA_ARGS__</div>
<div class="line"><a name="l15856"></a><span class="lineno">15856</span>&#160; </div>
<div class="line"><a name="l15857"></a><span class="lineno">15857</span>&#160;<span class="preprocessor">#define $n                    { ::std::cerr &lt;&lt; &quot;\n&quot;</span>;   }</div>
<div class="line"><a name="l15858"></a><span class="lineno">15858</span>&#160;<span class="preprocessor">#define $nn                   { ::std::cerr &lt;&lt; &quot;\n\n&quot;</span>; }</div>
<div class="line"><a name="l15859"></a><span class="lineno">15859</span>&#160;<span class="preprocessor">#define $t                    { ::std::cerr &lt;&lt; &quot;\t&quot;</span>;   }</div>
<div class="line"><a name="l15860"></a><span class="lineno">15860</span>&#160; </div>
<div class="line"><a name="l15861"></a><span class="lineno">15861</span>&#160;<span class="preprocessor">#define _tx$PrefixV(    ...)  ( *(__VA_ARGS__ &quot;&quot;</span>)? (&quot;[&quot; __VA_ARGS__ &quot;: &quot;          ) : (&quot;[&quot;          ) )</div>
<div class="line"><a name="l15862"></a><span class="lineno">15862</span>&#160;<span class="preprocessor">#define _tx$Prefix(var, ...)  ( *(__VA_ARGS__ &quot;&quot;</span>)? (&quot;[&quot; __VA_ARGS__ &quot;: &quot; var &quot; = &quot;) : (&quot;[&quot; var &quot; = &quot;) )</div>
<div class="line"><a name="l15863"></a><span class="lineno">15863</span>&#160; </div>
<div class="line"><a name="l15864"></a><span class="lineno">15864</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15865"></a><span class="lineno">15865</span>&#160; </div>
<div class="line"><a name="l15866"></a><span class="lineno">15866</span>&#160;<span class="comment">// This will never be documented, he-he. Read the source, Luke.</span></div>
<div class="line"><a name="l15867"></a><span class="lineno">15867</span>&#160; </div>
<div class="line"><a name="l15868"></a><span class="lineno">15868</span>&#160;<span class="preprocessor">#if defined (_DEBUG)</span></div>
<div class="line"><a name="l15869"></a><span class="lineno">15869</span>&#160;<span class="preprocessor">    #define $debug    if (1)</span></div>
<div class="line"><a name="l15870"></a><span class="lineno">15870</span>&#160;<span class="preprocessor">    #define $printf   if (1)</span></div>
<div class="line"><a name="l15871"></a><span class="lineno">15871</span>&#160;<span class="preprocessor">    #define $PRINTF   if (1)</span></div>
<div class="line"><a name="l15872"></a><span class="lineno">15872</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l15873"></a><span class="lineno">15873</span>&#160;<span class="preprocessor">    #define $debug    if (0)</span></div>
<div class="line"><a name="l15874"></a><span class="lineno">15874</span>&#160;<span class="preprocessor">    #define $printf   if (0)</span></div>
<div class="line"><a name="l15875"></a><span class="lineno">15875</span>&#160;<span class="preprocessor">    #define $PRINTF   if (0)</span></div>
<div class="line"><a name="l15876"></a><span class="lineno">15876</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l15877"></a><span class="lineno">15877</span>&#160; </div>
<div class="line"><a name="l15878"></a><span class="lineno">15878</span>&#160;<span class="preprocessor">#define $$d           $debug</span></div>
<div class="line"><a name="l15879"></a><span class="lineno">15879</span>&#160;<span class="preprocessor">#define $$w           $$$$</span></div>
<div class="line"><a name="l15880"></a><span class="lineno">15880</span>&#160;<span class="preprocessor">#define $$s           __TX_FILELINE__</span></div>
<div class="line"><a name="l15881"></a><span class="lineno">15881</span>&#160;<span class="preprocessor">#define $$b           { txSleep(); DebugBreak(); }</span></div>
<div class="line"><a name="l15882"></a><span class="lineno">15882</span>&#160;<span class="preprocessor">#define $$p           { txSleep(); if (txMessageBox (__TX_FILELINE__ &quot;\n\n&quot;</span> &quot;[Повтор] - продолжение программы,\n&quot; &quot;[Отмена] - остановка&quot;, \</div>
<div class="line"><a name="l15883"></a><span class="lineno">15883</span>&#160;                                                                      __TX_FUNCTION__, MB_ICONINFORMATION | MB_RETRYCANCEL) == IDCANCEL) ::exit (2); }</div>
<div class="line"><a name="l15884"></a><span class="lineno">15884</span>&#160;<span class="preprocessor">#define $$P           ( txSleep(),     txMessageBox (__TX_FILELINE__, __TX_FUNCTION__, MB_ICONINFORMATION | MB_YESNOCANCEL) )</span></div>
<div class="line"><a name="l15885"></a><span class="lineno">15885</span>&#160;<span class="preprocessor">#define $ppp          { { $sy; fprintf (stderr, &quot;[%s &quot;</span>&quot;%s: &quot;&quot;Нажмите любую клавишу для продолжения]&quot;, __TX_FILELINE__, __TX_FUNCTION__); } $P; { $sy; fprintf (stderr, &quot;...\n&quot;); } }</div>
<div class="line"><a name="l15886"></a><span class="lineno">15886</span>&#160;<span class="preprocessor">#define $pp           { { $sy; fprintf (stderr, &quot;[%04d %s: &quot;</span>&quot;Нажмите любую клавишу для продолжения]&quot;, __LINE__,        __TX_FUNCTION__); } $P; { $sy; fprintf (stderr, &quot;...\n&quot;); } }</div>
<div class="line"><a name="l15887"></a><span class="lineno">15887</span>&#160;<span class="preprocessor">#define $p            { { $sy; fprintf (stderr, &quot;[%s &quot;</span>&quot;%s(): Нажмите любую клавишу для продолжения]&quot;, __TX_FILELINE__, __func__);        } $P; { $sy; fprintf (stderr, &quot;...\n&quot;); } }</div>
<div class="line"><a name="l15888"></a><span class="lineno">15888</span>&#160;<span class="preprocessor">#define $ppp_         { { $sy; fprintf (stderr, &quot;[%s &quot;</span>&quot;%s]&quot;,                                          __TX_FILELINE__, __TX_FUNCTION__); } $P; { $sy; fprintf (stderr, &quot;...\n&quot;); } }</div>
<div class="line"><a name="l15889"></a><span class="lineno">15889</span>&#160;<span class="preprocessor">#define $pp_          { { $sy; fprintf (stderr, &quot;[%04d %s]&quot;</span>,                                          __LINE__,        __TX_FUNCTION__); } $P; { $sy; fprintf (stderr, &quot;...\n&quot;); } }</div>
<div class="line"><a name="l15890"></a><span class="lineno">15890</span>&#160;<span class="preprocessor">#define $p_           { { $sy; fprintf (stderr, &quot;[%s &quot;</span>&quot;%s()]&quot;,                                        __TX_FILELINE__, __func__);        } $P; { $sy; fprintf (stderr, &quot;...\n&quot;); } }</div>
<div class="line"><a name="l15891"></a><span class="lineno">15891</span>&#160;<span class="preprocessor">#define $P            ( txSleep(), ((int(*)()) (_getch)) () )  </span><span class="comment">// Avoid &quot;return value not used&quot;</span></div>
<div class="line"><a name="l15892"></a><span class="lineno">15892</span>&#160; </div>
<div class="line"><a name="l15893"></a><span class="lineno">15893</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15894"></a><span class="lineno">15894</span>&#160; </div>
<div class="line"><a name="l15895"></a><span class="lineno">15895</span>&#160;<span class="keyword">struct </span>_txSaveConsoleAttr</div>
<div class="line"><a name="l15896"></a><span class="lineno">15896</span>&#160;    {</div>
<div class="line"><a name="l15897"></a><span class="lineno">15897</span>&#160;    <span class="keywordtype">unsigned</span> attr_;</div>
<div class="line"><a name="l15898"></a><span class="lineno">15898</span>&#160; </div>
<div class="line"><a name="l15899"></a><span class="lineno">15899</span>&#160;             _txSaveConsoleAttr()           : attr_ (<a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a> ()) {}</div>
<div class="line"><a name="l15900"></a><span class="lineno">15900</span>&#160;    <span class="keyword">explicit</span> _txSaveConsoleAttr (WORD attr) : attr_ (<a class="code" href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a> ()) { <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (attr);  }</div>
<div class="line"><a name="l15901"></a><span class="lineno">15901</span>&#160;            ~_txSaveConsoleAttr()                                         { <a class="code" href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a> (attr_); }</div>
<div class="line"><a name="l15902"></a><span class="lineno">15902</span>&#160;    };</div>
<div class="line"><a name="l15903"></a><span class="lineno">15903</span>&#160; </div>
<div class="line"><a name="l15904"></a><span class="lineno">15904</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15905"></a><span class="lineno">15905</span>&#160; </div>
<div class="line"><a name="l15906"></a><span class="lineno">15906</span>&#160;<span class="keyword">struct </span>_txDumpVarSuffix</div>
<div class="line"><a name="l15907"></a><span class="lineno">15907</span>&#160;    {</div>
<div class="line"><a name="l15908"></a><span class="lineno">15908</span>&#160;    <span class="keyword">typedef</span> _txDumpVarSuffix this_t;</div>
<div class="line"><a name="l15909"></a><span class="lineno">15909</span>&#160; </div>
<div class="line"><a name="l15910"></a><span class="lineno">15910</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* suffix_;</div>
<div class="line"><a name="l15911"></a><span class="lineno">15911</span>&#160; </div>
<div class="line"><a name="l15912"></a><span class="lineno">15912</span>&#160;    <span class="keyword">explicit</span> _txDumpVarSuffix (<span class="keyword">const</span> <span class="keywordtype">char</span> suffix[] = <span class="stringliteral">&quot;&quot;</span>) : suffix_ (suffix) { assert (suffix); }</div>
<div class="line"><a name="l15913"></a><span class="lineno">15913</span>&#160;            ~_txDumpVarSuffix()                          { ::std::cerr &lt;&lt; suffix_; }</div>
<div class="line"><a name="l15914"></a><span class="lineno">15914</span>&#160; </div>
<div class="line"><a name="l15915"></a><span class="lineno">15915</span>&#160;            _txDumpVarSuffix (<span class="keyword">const</span> this_t&amp;) _tx_delete;</div>
<div class="line"><a name="l15916"></a><span class="lineno">15916</span>&#160;    this_t&amp; operator =       (<span class="keyword">const</span> this_t&amp;) _tx_delete;</div>
<div class="line"><a name="l15917"></a><span class="lineno">15917</span>&#160;    };</div>
<div class="line"><a name="l15918"></a><span class="lineno">15918</span>&#160; </div>
<div class="line"><a name="l15919"></a><span class="lineno">15919</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15920"></a><span class="lineno">15920</span>&#160; </div>
<div class="line"><a name="l15921"></a><span class="lineno">15921</span>&#160;<span class="preprocessor">#define ARGS__        const char* prefix, const char* suffix, std::ios_base::fmtflags flags,                             int deep</span></div>
<div class="line"><a name="l15922"></a><span class="lineno">15922</span>&#160;<span class="preprocessor">#define ARGS_         const char* prefix, const char* suffix, std::ios_base::fmtflags flags = std::ios_base::fmtflags(), int deep = 0</span></div>
<div class="line"><a name="l15923"></a><span class="lineno">15923</span>&#160;<span class="preprocessor">#define VALS_         prefix, suffix, flags, deep</span></div>
<div class="line"><a name="l15924"></a><span class="lineno">15924</span>&#160;<span class="preprocessor">#define ERRPTR_(p)  { $sE; stream &lt;&lt; &quot;&lt;НЕВЕРНЫЙ АДРЕС &quot;</span> &lt;&lt; (const void*) (p) &lt;&lt; &quot;&gt;&quot;; }</div>
<div class="line"><a name="l15925"></a><span class="lineno">15925</span>&#160; </div>
<div class="line"><a name="l15926"></a><span class="lineno">15926</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> StreamT&gt; <span class="keyword">const</span> T&amp;    _txDumpVal (<span class="keyword">const</span> T&amp; value, StreamT&amp; stream, ARGS_);</div>
<div class="line"><a name="l15927"></a><span class="lineno">15927</span>&#160; </div>
<div class="line"><a name="l15928"></a><span class="lineno">15928</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15929"></a><span class="lineno">15929</span>&#160; </div>
<div class="line"><a name="l15930"></a><span class="lineno">15930</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span> <span class="keyword">const</span> T&amp;               _txDumpVar (<span class="keyword">const</span> T&amp;            value,      ARGS_)      { _txDumpVal (value, std:: cerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15931"></a><span class="lineno">15931</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">inline</span>       T&amp;               _txDumpVar (      T&amp;            value,      ARGS_)      { _txDumpVal (value, std:: cerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15932"></a><span class="lineno">15932</span>&#160; </div>
<div class="line"><a name="l15933"></a><span class="lineno">15933</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;      <span class="keyword">inline</span> <span class="keyword">const</span> char           (&amp;_txDumpVar (<span class="keyword">const</span> <span class="keywordtype">char</span>        (&amp;value) [N], ARGS_)) [N] { _txDumpVal (value, std:: cerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15934"></a><span class="lineno">15934</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;      <span class="keyword">inline</span>       char           (&amp;_txDumpVar (      <span class="keywordtype">char</span>        (&amp;value) [N], ARGS_)) [N] { _txDumpVal (value, std:: cerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15935"></a><span class="lineno">15935</span>&#160; </div>
<div class="line"><a name="l15936"></a><span class="lineno">15936</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;      <span class="keyword">inline</span> <span class="keyword">const</span> wchar_t        (&amp;_txDumpVar (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>     (&amp;value) [N], ARGS_)) [N] { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15937"></a><span class="lineno">15937</span>&#160;<span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;      <span class="keyword">inline</span>       wchar_t        (&amp;_txDumpVar (      <span class="keywordtype">wchar_t</span>     (&amp;value) [N], ARGS_)) [N] { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15938"></a><span class="lineno">15938</span>&#160; </div>
<div class="line"><a name="l15939"></a><span class="lineno">15939</span>&#160;                      <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>&amp;         _txDumpVar (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>&amp;      value,      ARGS_)      { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15940"></a><span class="lineno">15940</span>&#160;                      <span class="keyword">inline</span>       <span class="keywordtype">wchar_t</span>&amp;         _txDumpVar (      <span class="keywordtype">wchar_t</span>&amp;      value,      ARGS_)      { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15941"></a><span class="lineno">15941</span>&#160; </div>
<div class="line"><a name="l15942"></a><span class="lineno">15942</span>&#160;                      <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>*&amp;        _txDumpVar (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>*&amp;     value,      ARGS_)      { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15943"></a><span class="lineno">15943</span>&#160;                      <span class="keyword">inline</span>       <span class="keywordtype">wchar_t</span>*&amp;        _txDumpVar (      <span class="keywordtype">wchar_t</span>*&amp;     value,      ARGS_)      { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15944"></a><span class="lineno">15944</span>&#160; </div>
<div class="line"><a name="l15945"></a><span class="lineno">15945</span>&#160;                      <span class="keyword">inline</span> <span class="keyword">const</span> std::wstring&amp;    _txDumpVar (<span class="keyword">const</span> std::wstring&amp; value,      ARGS_)      { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15946"></a><span class="lineno">15946</span>&#160;                      <span class="keyword">inline</span>       std::wstring&amp;    _txDumpVar (      std::wstring&amp; value,      ARGS_)      { _txDumpVal (value, std::wcerr, VALS_); <span class="keywordflow">return</span> value; }</div>
<div class="line"><a name="l15947"></a><span class="lineno">15947</span>&#160; </div>
<div class="line"><a name="l15948"></a><span class="lineno">15948</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15949"></a><span class="lineno">15949</span>&#160; </div>
<div class="line"><a name="l15950"></a><span class="lineno">15950</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> StreamT&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> _txDumpVal (<span class="keyword">const</span> T&amp;            value, StreamT&amp; stream) { stream &lt;&lt;         value;         }</div>
<div class="line"><a name="l15951"></a><span class="lineno">15951</span>&#160;<span class="keyword">template</span>             &lt;<span class="keyword">typename</span> StreamT&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> _txDumpVal (<span class="keyword">const</span> <span class="keywordtype">char</span>          value, StreamT&amp; stream) { stream &lt;&lt;  <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; value &lt;&lt;  <span class="stringliteral">&quot;&#39;&quot;</span>; }</div>
<div class="line"><a name="l15952"></a><span class="lineno">15952</span>&#160;<span class="keyword">template</span>             &lt;<span class="keyword">typename</span> StreamT&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> _txDumpVal (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>       value, StreamT&amp; stream) { stream &lt;&lt; L<span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; value &lt;&lt; L<span class="stringliteral">&quot;&#39;&quot;</span>; }</div>
<div class="line"><a name="l15953"></a><span class="lineno">15953</span>&#160;<span class="keyword">template</span>             &lt;<span class="keyword">typename</span> StreamT&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> _txDumpVal (<span class="keyword">const</span> std::string&amp;  value, StreamT&amp; stream) { stream &lt;&lt;  <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; value &lt;&lt;  <span class="charliteral">&#39;&quot;&#39;</span>; }</div>
<div class="line"><a name="l15954"></a><span class="lineno">15954</span>&#160;<span class="keyword">template</span>             &lt;<span class="keyword">typename</span> StreamT&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> _txDumpVal (<span class="keyword">const</span> std::wstring&amp; value, StreamT&amp; stream) { stream &lt;&lt; L<span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; value &lt;&lt; L<span class="charliteral">&#39;&quot;&#39;</span>; }</div>
<div class="line"><a name="l15955"></a><span class="lineno">15955</span>&#160; </div>
<div class="line"><a name="l15956"></a><span class="lineno">15956</span>&#160;<span class="keyword">template</span>             &lt;<span class="keyword">typename</span> StreamT&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> _txDumpVal (<span class="keyword">const</span> <span class="keywordtype">char</span>*         value, StreamT&amp; stream)</div>
<div class="line"><a name="l15957"></a><span class="lineno">15957</span>&#160;    {</div>
<div class="line"><a name="l15958"></a><span class="lineno">15958</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;stream)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l15959"></a><span class="lineno">15959</span>&#160; </div>
<div class="line"><a name="l15960"></a><span class="lineno">15960</span>&#160;    <span class="keywordflow">if</span> (!_txIsBadReadPtr (value)) stream &lt;&lt;  <span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; value &lt;&lt;  <span class="charliteral">&#39;&quot;&#39;</span>;</div>
<div class="line"><a name="l15961"></a><span class="lineno">15961</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!value)              stream &lt;&lt;  <span class="stringliteral">&quot;(null)&quot;</span>;</div>
<div class="line"><a name="l15962"></a><span class="lineno">15962</span>&#160;    <span class="keywordflow">else</span>                          ERRPTR_ (value);</div>
<div class="line"><a name="l15963"></a><span class="lineno">15963</span>&#160;    }</div>
<div class="line"><a name="l15964"></a><span class="lineno">15964</span>&#160; </div>
<div class="line"><a name="l15965"></a><span class="lineno">15965</span>&#160;<span class="keyword">template</span>             &lt;<span class="keyword">typename</span> StreamT&gt; <span class="keyword">inline</span> <span class="keywordtype">void</span> _txDumpVal (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>*      value, StreamT&amp; stream)</div>
<div class="line"><a name="l15966"></a><span class="lineno">15966</span>&#160;    {</div>
<div class="line"><a name="l15967"></a><span class="lineno">15967</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;stream)) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l15968"></a><span class="lineno">15968</span>&#160; </div>
<div class="line"><a name="l15969"></a><span class="lineno">15969</span>&#160;    <span class="keywordflow">if</span> (!_txIsBadReadPtr (value)) stream &lt;&lt; L<span class="charliteral">&#39;&quot;&#39;</span> &lt;&lt; value &lt;&lt; L<span class="charliteral">&#39;&quot;&#39;</span>;</div>
<div class="line"><a name="l15970"></a><span class="lineno">15970</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!value)              stream &lt;&lt; L<span class="stringliteral">&quot;(null)&quot;</span>;</div>
<div class="line"><a name="l15971"></a><span class="lineno">15971</span>&#160;    <span class="keywordflow">else</span>                          ERRPTR_ (value);</div>
<div class="line"><a name="l15972"></a><span class="lineno">15972</span>&#160;    }</div>
<div class="line"><a name="l15973"></a><span class="lineno">15973</span>&#160; </div>
<div class="line"><a name="l15974"></a><span class="lineno">15974</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l15975"></a><span class="lineno">15975</span>&#160; </div>
<div class="line"><a name="l15976"></a><span class="lineno">15976</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> StreamT&gt;</div>
<div class="line"><a name="l15977"></a><span class="lineno">15977</span>&#160;<span class="keyword">inline</span> <span class="keyword">const</span> T&amp; _txDumpVal (<span class="keyword">const</span> T&amp; value, StreamT&amp; stream, ARGS__)</div>
<div class="line"><a name="l15978"></a><span class="lineno">15978</span>&#160;    {</div>
<div class="line"><a name="l15979"></a><span class="lineno">15979</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;stream)) <span class="keywordflow">return</span> value;  <span class="comment">//-V778</span></div>
<div class="line"><a name="l15980"></a><span class="lineno">15980</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED ( prefix)) <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l15981"></a><span class="lineno">15981</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED ( suffix)) <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l15982"></a><span class="lineno">15982</span>&#160; </div>
<div class="line"><a name="l15983"></a><span class="lineno">15983</span>&#160;    $sc;</div>
<div class="line"><a name="l15984"></a><span class="lineno">15984</span>&#160;    <span class="keywordflow">if</span> (!deep) stream &lt;&lt; prefix;</div>
<div class="line"><a name="l15985"></a><span class="lineno">15985</span>&#160; </div>
<div class="line"><a name="l15986"></a><span class="lineno">15986</span>&#160;    std::ios_base::fmtflags old = stream.flags ((flags)? flags : stream.flags());</div>
<div class="line"><a name="l15987"></a><span class="lineno">15987</span>&#160; </div>
<div class="line"><a name="l15988"></a><span class="lineno">15988</span>&#160;    <span class="keywordflow">if</span> (!_txIsBadReadPtr (&amp;value))</div>
<div class="line"><a name="l15989"></a><span class="lineno">15989</span>&#160;        {</div>
<div class="line"><a name="l15990"></a><span class="lineno">15990</span>&#160;        _txDumpVal (value, stream);</div>
<div class="line"><a name="l15991"></a><span class="lineno">15991</span>&#160;        }</div>
<div class="line"><a name="l15992"></a><span class="lineno">15992</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l15993"></a><span class="lineno">15993</span>&#160;        ERRPTR_ (&amp;value);</div>
<div class="line"><a name="l15994"></a><span class="lineno">15994</span>&#160; </div>
<div class="line"><a name="l15995"></a><span class="lineno">15995</span>&#160;    stream.flags (old);</div>
<div class="line"><a name="l15996"></a><span class="lineno">15996</span>&#160; </div>
<div class="line"><a name="l15997"></a><span class="lineno">15997</span>&#160;    <span class="keywordflow">if</span> (!deep) stream &lt;&lt; suffix;</div>
<div class="line"><a name="l15998"></a><span class="lineno">15998</span>&#160; </div>
<div class="line"><a name="l15999"></a><span class="lineno">15999</span>&#160;    <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l16000"></a><span class="lineno">16000</span>&#160;    }</div>
<div class="line"><a name="l16001"></a><span class="lineno">16001</span>&#160; </div>
<div class="line"><a name="l16002"></a><span class="lineno">16002</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16003"></a><span class="lineno">16003</span>&#160; </div>
<div class="line"><a name="l16004"></a><span class="lineno">16004</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keywordtype">int</span> N&gt;</div>
<div class="line"><a name="l16005"></a><span class="lineno">16005</span>&#160;<span class="keyword">inline</span> T (&amp;_txDumpVar (T (&amp;value) [N], ARGS_)) [N]</div>
<div class="line"><a name="l16006"></a><span class="lineno">16006</span>&#160;    {</div>
<div class="line"><a name="l16007"></a><span class="lineno">16007</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED ( prefix)) <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l16008"></a><span class="lineno">16008</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED ( suffix)) <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l16009"></a><span class="lineno">16009</span>&#160; </div>
<div class="line"><a name="l16010"></a><span class="lineno">16010</span>&#160;    std::ostream&amp; stream = std::cerr;</div>
<div class="line"><a name="l16011"></a><span class="lineno">16011</span>&#160; </div>
<div class="line"><a name="l16012"></a><span class="lineno">16012</span>&#160;    $sc; <span class="keywordflow">if</span> (!deep) std::cerr &lt;&lt; prefix;</div>
<div class="line"><a name="l16013"></a><span class="lineno">16013</span>&#160;    $C;  std::cerr &lt;&lt; ((deep)? <span class="stringliteral">&quot; {&quot;</span> : <span class="stringliteral">&quot;{&quot;</span>);</div>
<div class="line"><a name="l16014"></a><span class="lineno">16014</span>&#160; </div>
<div class="line"><a name="l16015"></a><span class="lineno">16015</span>&#160;    <span class="keywordflow">if</span> (!_txIsBadReadPtr (value))</div>
<div class="line"><a name="l16016"></a><span class="lineno">16016</span>&#160;        {</div>
<div class="line"><a name="l16017"></a><span class="lineno">16017</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; ; i++)</div>
<div class="line"><a name="l16018"></a><span class="lineno">16018</span>&#160;            {</div>
<div class="line"><a name="l16019"></a><span class="lineno">16019</span>&#160;            { $sC; stream &lt;&lt; <span class="stringliteral">&quot;[&quot;</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">&quot;]=&quot;</span>; }</div>
<div class="line"><a name="l16020"></a><span class="lineno">16020</span>&#160; </div>
<div class="line"><a name="l16021"></a><span class="lineno">16021</span>&#160;            _txDumpVar (value[i], prefix, suffix, flags, deep+1);</div>
<div class="line"><a name="l16022"></a><span class="lineno">16022</span>&#160; </div>
<div class="line"><a name="l16023"></a><span class="lineno">16023</span>&#160;            <span class="keywordflow">if</span> (i &gt;= N-1) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l16024"></a><span class="lineno">16024</span>&#160; </div>
<div class="line"><a name="l16025"></a><span class="lineno">16025</span>&#160;            stream &lt;&lt; <span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l16026"></a><span class="lineno">16026</span>&#160;            }</div>
<div class="line"><a name="l16027"></a><span class="lineno">16027</span>&#160;        }</div>
<div class="line"><a name="l16028"></a><span class="lineno">16028</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l16029"></a><span class="lineno">16029</span>&#160;        ERRPTR_ (&amp;value);</div>
<div class="line"><a name="l16030"></a><span class="lineno">16030</span>&#160; </div>
<div class="line"><a name="l16031"></a><span class="lineno">16031</span>&#160;    $C; std::cerr &lt;&lt; <span class="stringliteral">&quot;}&quot;</span>;</div>
<div class="line"><a name="l16032"></a><span class="lineno">16032</span>&#160;    $c; <span class="keywordflow">if</span> (!deep) std::cerr &lt;&lt; suffix;</div>
<div class="line"><a name="l16033"></a><span class="lineno">16033</span>&#160; </div>
<div class="line"><a name="l16034"></a><span class="lineno">16034</span>&#160;    <span class="keywordflow">return</span> value;</div>
<div class="line"><a name="l16035"></a><span class="lineno">16035</span>&#160;    }</div>
<div class="line"><a name="l16036"></a><span class="lineno">16036</span>&#160; </div>
<div class="line"><a name="l16037"></a><span class="lineno">16037</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16038"></a><span class="lineno">16038</span>&#160; </div>
<div class="line"><a name="l16039"></a><span class="lineno">16039</span>&#160;<span class="keyword">inline</span> std::ostream&amp; operator &lt;&lt; (std::ostream&amp; stream, <span class="keyword">const</span> POINT&amp; point)</div>
<div class="line"><a name="l16040"></a><span class="lineno">16040</span>&#160;    {</div>
<div class="line"><a name="l16041"></a><span class="lineno">16041</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;stream)) <span class="keywordflow">return</span> stream;</div>
<div class="line"><a name="l16042"></a><span class="lineno">16042</span>&#160; </div>
<div class="line"><a name="l16043"></a><span class="lineno">16043</span>&#160;    <span class="keywordflow">if</span> (!_txIsBadReadPtr (&amp;point)) stream &lt;&lt; <span class="stringliteral">&quot;{ x: &quot;</span> &lt;&lt; point.x &lt;&lt; <span class="stringliteral">&quot;, y: &quot;</span> &lt;&lt; point.y &lt;&lt; <span class="stringliteral">&quot; }&quot;</span>;           <span class="comment">// NOLINT (clang-diagnostic-undefined-bool-conversion)</span></div>
<div class="line"><a name="l16044"></a><span class="lineno">16044</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!&amp;point)              stream &lt;&lt; <span class="stringliteral">&quot;(null)&quot;</span>;</div>
<div class="line"><a name="l16045"></a><span class="lineno">16045</span>&#160;    <span class="keywordflow">else</span> ERRPTR_ (&amp;point);</div>
<div class="line"><a name="l16046"></a><span class="lineno">16046</span>&#160; </div>
<div class="line"><a name="l16047"></a><span class="lineno">16047</span>&#160;    <span class="keywordflow">return</span> stream;</div>
<div class="line"><a name="l16048"></a><span class="lineno">16048</span>&#160;    }</div>
<div class="line"><a name="l16049"></a><span class="lineno">16049</span>&#160; </div>
<div class="line"><a name="l16050"></a><span class="lineno">16050</span>&#160;<span class="keyword">inline</span> std::ostream&amp; operator &lt;&lt; (std::ostream&amp; stream, <span class="keyword">const</span> SIZE&amp; size)</div>
<div class="line"><a name="l16051"></a><span class="lineno">16051</span>&#160;    {</div>
<div class="line"><a name="l16052"></a><span class="lineno">16052</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;stream)) <span class="keywordflow">return</span> stream;</div>
<div class="line"><a name="l16053"></a><span class="lineno">16053</span>&#160; </div>
<div class="line"><a name="l16054"></a><span class="lineno">16054</span>&#160;    <span class="keywordflow">if</span> (&amp;size) stream &lt;&lt; <span class="stringliteral">&quot;{ cx: &quot;</span> &lt;&lt; size.cx &lt;&lt; <span class="stringliteral">&quot;, cy: &quot;</span> &lt;&lt; size.cy &lt;&lt; <span class="stringliteral">&quot; }&quot;</span>;          <span class="comment">// NOLINT (clang-diagnostic-undefined-bool-conversion)</span></div>
<div class="line"><a name="l16055"></a><span class="lineno">16055</span>&#160;    <span class="keywordflow">else</span>       stream &lt;&lt; <span class="stringliteral">&quot;(null)&quot;</span>;</div>
<div class="line"><a name="l16056"></a><span class="lineno">16056</span>&#160; </div>
<div class="line"><a name="l16057"></a><span class="lineno">16057</span>&#160;    <span class="keywordflow">return</span> stream;</div>
<div class="line"><a name="l16058"></a><span class="lineno">16058</span>&#160;    }</div>
<div class="line"><a name="l16059"></a><span class="lineno">16059</span>&#160; </div>
<div class="line"><a name="l16060"></a><span class="lineno">16060</span>&#160;<span class="keyword">inline</span> std::ostream&amp; operator &lt;&lt; (std::ostream&amp; stream, <span class="keyword">const</span> RECT&amp; rect)</div>
<div class="line"><a name="l16061"></a><span class="lineno">16061</span>&#160;    {</div>
<div class="line"><a name="l16062"></a><span class="lineno">16062</span>&#160;    <span class="keywordflow">if</span> (_TX_ARGUMENT_FAILED (&amp;stream)) <span class="keywordflow">return</span> stream;</div>
<div class="line"><a name="l16063"></a><span class="lineno">16063</span>&#160; </div>
<div class="line"><a name="l16064"></a><span class="lineno">16064</span>&#160;    <span class="keywordflow">if</span> (&amp;rect) stream &lt;&lt; <span class="stringliteral">&quot;{ left: &quot;</span>  &lt;&lt; rect.left  &lt;&lt; <span class="stringliteral">&quot;, top: &quot;</span>    &lt;&lt; rect.top    &lt;&lt;  <span class="comment">// NOLINT (clang-diagnostic-undefined-bool-conversion)</span></div>
<div class="line"><a name="l16065"></a><span class="lineno">16065</span>&#160;                         <span class="stringliteral">&quot;, right: &quot;</span> &lt;&lt; rect.right &lt;&lt; <span class="stringliteral">&quot;, bottom: &quot;</span> &lt;&lt; rect.bottom &lt;&lt; <span class="stringliteral">&quot; }&quot;</span>;</div>
<div class="line"><a name="l16066"></a><span class="lineno">16066</span>&#160; </div>
<div class="line"><a name="l16067"></a><span class="lineno">16067</span>&#160;    <span class="keywordflow">else</span>       stream &lt;&lt; <span class="stringliteral">&quot;(null)&quot;</span>;</div>
<div class="line"><a name="l16068"></a><span class="lineno">16068</span>&#160; </div>
<div class="line"><a name="l16069"></a><span class="lineno">16069</span>&#160;    <span class="keywordflow">return</span> stream;</div>
<div class="line"><a name="l16070"></a><span class="lineno">16070</span>&#160;    }</div>
<div class="line"><a name="l16071"></a><span class="lineno">16071</span>&#160; </div>
<div class="line"><a name="l16072"></a><span class="lineno">16072</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16073"></a><span class="lineno">16073</span>&#160; </div>
<div class="line"><a name="l16074"></a><span class="lineno">16074</span>&#160;<span class="preprocessor">#undef ARGS__</span></div>
<div class="line"><a name="l16075"></a><span class="lineno">16075</span>&#160;<span class="preprocessor">#undef ARGS_</span></div>
<div class="line"><a name="l16076"></a><span class="lineno">16076</span>&#160;<span class="preprocessor">#undef VALS_</span></div>
<div class="line"><a name="l16077"></a><span class="lineno">16077</span>&#160;<span class="preprocessor">#undef ERRPTR_</span></div>
<div class="line"><a name="l16078"></a><span class="lineno">16078</span>&#160; </div>
<div class="line"><a name="l16079"></a><span class="lineno">16079</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16081"></a><span class="lineno">16081</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l16082"></a><span class="lineno">16082</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l16083"></a><span class="lineno">16083</span>&#160; </div>
<div class="line"><a name="l16084"></a><span class="lineno">16084</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l16085"></a><span class="lineno">16085</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16086"></a><span class="lineno">16086</span>&#160; </div>
<div class="line"><a name="l16088"></a><span class="lineno">16088</span>&#160; </div>
<div class="line"><a name="l16089"></a><span class="lineno">16089</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16090"></a><span class="lineno">16090</span>&#160;<span class="comment">//{          TXAPI calls tracing</span></div>
<div class="line"><a name="l16091"></a><span class="lineno">16091</span>&#160;<span class="comment">//           Трассировка вызовов TXAPI</span></div>
<div class="line"><a name="l16092"></a><span class="lineno">16092</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16093"></a><span class="lineno">16093</span>&#160; </div>
<div class="line"><a name="l16094"></a><span class="lineno">16094</span>&#160;<span class="preprocessor">#ifndef   FOR_DOXYGEN_ONLY</span></div>
<div class="line"><a name="l16095"></a><span class="lineno">16095</span>&#160; </div>
<div class="line"><a name="l16096"></a><span class="lineno">16096</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l16097"></a><span class="lineno">16097</span>&#160;<span class="preprocessor">#undef  _txLocCurSet</span></div>
<div class="line"><a name="l16098"></a><span class="lineno">16098</span>&#160;<span class="preprocessor">#define _txLocCurSet()                 __txLocCurSet (__FILE__, __LINE__, NULL)</span></div>
<div class="line"><a name="l16099"></a><span class="lineno">16099</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l16100"></a><span class="lineno">16100</span>&#160; </div>
<div class="line"><a name="l16101"></a><span class="lineno">16101</span>&#160;<span class="preprocessor">#define txAlphaBlend(...)              ( _txLocCurSet(), txAlphaBlend          (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16102"></a><span class="lineno">16102</span>&#160;<span class="preprocessor">#define txArc(...)                     ( _txLocCurSet(), txArc                 (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16103"></a><span class="lineno">16103</span>&#160;<span class="preprocessor">#define txBegin(...)                   ( _txLocCurSet(), txBegin               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16104"></a><span class="lineno">16104</span>&#160;<span class="preprocessor">#define txBitBlt(...)                  ( _txLocCurSet(), txBitBlt              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16105"></a><span class="lineno">16105</span>&#160;<span class="preprocessor">#define txChord(...)                   ( _txLocCurSet(), txChord               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16106"></a><span class="lineno">16106</span>&#160;<span class="preprocessor">#define txCircle(...)                  ( _txLocCurSet(), txCircle              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16107"></a><span class="lineno">16107</span>&#160;<span class="preprocessor">#define txClear(...)                   ( _txLocCurSet(), txClear               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16108"></a><span class="lineno">16108</span>&#160;<span class="preprocessor">#define txClearConsole(...)            ( _txLocCurSet(), txClearConsole        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16109"></a><span class="lineno">16109</span>&#160;<span class="preprocessor">#define txColor(...)                   ( _txLocCurSet(), txColor               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16110"></a><span class="lineno">16110</span>&#160;<span class="preprocessor">#define txCreateCompatibleDC(...)      ( _txLocCurSet(), txCreateCompatibleDC  (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16111"></a><span class="lineno">16111</span>&#160;<span class="preprocessor">#define txCreateDIBSection(...)        ( _txLocCurSet(), txCreateDIBSection    (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16112"></a><span class="lineno">16112</span>&#160;<span class="preprocessor">#define txCreateExtraWindow(...)       ( _txLocCurSet(), txCreateExtraWindow   (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16113"></a><span class="lineno">16113</span>&#160;<span class="preprocessor">#define txCreateWindow(...)            ( _txLocCurSet(), txCreateWindow        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16114"></a><span class="lineno">16114</span>&#160;<span class="preprocessor">#define txDC(...)                      ( _txLocCurSet(), txDC                  (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16115"></a><span class="lineno">16115</span>&#160;<span class="preprocessor">#define txDeleteDC(...)                ( _txLocCurSet(), txDeleteDC            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16116"></a><span class="lineno">16116</span>&#160;<span class="preprocessor">#define txDemangle(...)                ( _txLocCurSet(), txDemangle            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16117"></a><span class="lineno">16117</span>&#160;<span class="preprocessor">#define txDestroyWindow(...)           ( _txLocCurSet(), txDestroyWindow       (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16118"></a><span class="lineno">16118</span>&#160;<span class="preprocessor">#define txDisableAutoPause(...)        ( _txLocCurSet(), txDisableAutoPause    (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16119"></a><span class="lineno">16119</span>&#160;<span class="preprocessor">#define txDrawText(...)                ( _txLocCurSet(), txDrawText            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16120"></a><span class="lineno">16120</span>&#160;<span class="preprocessor">#define txEllipse(...)                 ( _txLocCurSet(), txEllipse             (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16121"></a><span class="lineno">16121</span>&#160;<span class="preprocessor">#define txEnd(...)                     ( _txLocCurSet(), txEnd                 (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16122"></a><span class="lineno">16122</span>&#160;<span class="preprocessor">#define txExtractColor(...)            ( _txLocCurSet(), txExtractColor        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16123"></a><span class="lineno">16123</span>&#160;<span class="preprocessor">#define txFillColor(...)               ( _txLocCurSet(), txFillColor           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16124"></a><span class="lineno">16124</span>&#160;<span class="preprocessor">#define txFloodFill(...)               ( _txLocCurSet(), txFloodFill           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16125"></a><span class="lineno">16125</span>&#160;<span class="preprocessor">#define txFontExist(...)               ( _txLocCurSet(), txFontExist           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16126"></a><span class="lineno">16126</span>&#160;<span class="preprocessor">#define txFormat(...)                  ( _txLocCurSet(), txFormat              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16127"></a><span class="lineno">16127</span>&#160;<span class="preprocessor">#define txGetAsyncKeyState(...)        ( _txLocCurSet(), txGetAsyncKeyState    (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16128"></a><span class="lineno">16128</span>&#160;<span class="preprocessor">#define txGetColor(...)                ( _txLocCurSet(), txGetColor            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16129"></a><span class="lineno">16129</span>&#160;<span class="preprocessor">#define txGetConsoleAttr(...)          ( _txLocCurSet(), txGetConsoleAttr      (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16130"></a><span class="lineno">16130</span>&#160;<span class="preprocessor">#define txGetConsoleCursorPos(...)     ( _txLocCurSet(), txGetConsoleCursorPos (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16131"></a><span class="lineno">16131</span>&#160;<span class="preprocessor">#define txGetConsoleExtent(...)        ( _txLocCurSet(), txGetConsoleExtent    (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16132"></a><span class="lineno">16132</span>&#160;<span class="preprocessor">#define txGetConsoleFontSize(...)      ( _txLocCurSet(), txGetConsoleFontSize  (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16133"></a><span class="lineno">16133</span>&#160;<span class="preprocessor">#define txGetExtent(...)               ( _txLocCurSet(), txGetExtent           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16134"></a><span class="lineno">16134</span>&#160;<span class="preprocessor">#define txGetExtentX(...)              ( _txLocCurSet(), txGetExtentX          (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16135"></a><span class="lineno">16135</span>&#160;<span class="preprocessor">#define txGetExtentY(...)              ( _txLocCurSet(), txGetExtentY          (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16136"></a><span class="lineno">16136</span>&#160;<span class="preprocessor">#define txGetFillColor(...)            ( _txLocCurSet(), txGetFillColor        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16137"></a><span class="lineno">16137</span>&#160;<span class="preprocessor">#define txGetFPS(...)                  ( _txLocCurSet(), txGetFPS              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16138"></a><span class="lineno">16138</span>&#160;<span class="preprocessor">#define txGetModuleFileName(...)       ( _txLocCurSet(), txGetModuleFileName   (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16139"></a><span class="lineno">16139</span>&#160;<span class="preprocessor">#define txGetPixel(...)                ( _txLocCurSet(), txGetPixel            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16140"></a><span class="lineno">16140</span>&#160;<span class="preprocessor">#define txGetTextExtent(...)           ( _txLocCurSet(), txGetTextExtent       (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16141"></a><span class="lineno">16141</span>&#160;<span class="preprocessor">#define txGetTextExtentX(...)          ( _txLocCurSet(), txGetTextExtentX      (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16142"></a><span class="lineno">16142</span>&#160;<span class="preprocessor">#define txGetTextExtentY(...)          ( _txLocCurSet(), txGetTextExtentY      (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16143"></a><span class="lineno">16143</span>&#160;<span class="preprocessor">#define txHSL2RGB(...)                 ( _txLocCurSet(), txHSL2RGB             (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16144"></a><span class="lineno">16144</span>&#160;<span class="preprocessor">#define txInputBox(...)                ( _txLocCurSet(), txInputBox            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16145"></a><span class="lineno">16145</span>&#160;<span class="preprocessor">#define txLine(...)                    ( _txLocCurSet(), txLine                (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16146"></a><span class="lineno">16146</span>&#160;<span class="preprocessor">#define txLoadImage(...)               ( _txLocCurSet(), txLoadImage           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16147"></a><span class="lineno">16147</span>&#160;<span class="preprocessor">#define txLock(...)                    ( _txLocCurSet(), txLock                (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16148"></a><span class="lineno">16148</span>&#160;<span class="preprocessor">#define txMessageBox(...)              ( _txLocCurSet(), txMessageBox          (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16149"></a><span class="lineno">16149</span>&#160;<span class="preprocessor">#define txMouseButtons(...)            ( _txLocCurSet(), txMouseButtons        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16150"></a><span class="lineno">16150</span>&#160;<span class="preprocessor">#define txMousePos(...)                ( _txLocCurSet(), txMousePos            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16151"></a><span class="lineno">16151</span>&#160;<span class="preprocessor">#define txMouseX(...)                  ( _txLocCurSet(), txMouseX              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16152"></a><span class="lineno">16152</span>&#160;<span class="preprocessor">#define txMouseY(...)                  ( _txLocCurSet(), txMouseY              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16153"></a><span class="lineno">16153</span>&#160;<span class="preprocessor">#define txNotifyIcon(...)              ( _txLocCurSet(), txNotifyIcon          (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16154"></a><span class="lineno">16154</span>&#160;<span class="preprocessor">#define txOK(...)                      ( _txLocCurSet(), txOK                  (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16155"></a><span class="lineno">16155</span>&#160;<span class="preprocessor">#define txOutputDebugPrintf(...)       ( _txLocCurSet(), txOutputDebugPrintf   (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16156"></a><span class="lineno">16156</span>&#160;<span class="preprocessor">#define txPie(...)                     ( _txLocCurSet(), txPie                 (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16157"></a><span class="lineno">16157</span>&#160;<span class="preprocessor">#define txPixel(...)                   ( _txLocCurSet(), txPixel               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16158"></a><span class="lineno">16158</span>&#160;<span class="preprocessor">#define txPlaySound(...)               ( _txLocCurSet(), txPlaySound           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16159"></a><span class="lineno">16159</span>&#160;<span class="preprocessor">#define txPlayVideo(...)               ( _txLocCurSet(), txPlayVideo           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16160"></a><span class="lineno">16160</span>&#160;<span class="preprocessor">#define txPolygon(...)                 ( _txLocCurSet(), txPolygon             (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16161"></a><span class="lineno">16161</span>&#160;<span class="preprocessor">#define txPrintf(...)                  ( _txLocCurSet(), txPrintf              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16162"></a><span class="lineno">16162</span>&#160;<span class="preprocessor">#define txQueryPerformance(...)        ( _txLocCurSet(), txQueryPerformance    (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16163"></a><span class="lineno">16163</span>&#160;<span class="preprocessor">#define txRectangle(...)               ( _txLocCurSet(), txRectangle           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16164"></a><span class="lineno">16164</span>&#160;<span class="preprocessor">#define txRedrawWindow(...)            ( _txLocCurSet(), txRedrawWindow        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16165"></a><span class="lineno">16165</span>&#160;<span class="preprocessor">#define txRegisterClass(...)           ( _txLocCurSet(), txRegisterClass       (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16166"></a><span class="lineno">16166</span>&#160;<span class="preprocessor">#define txRegQuery(...)                ( _txLocCurSet(), txRegQuery            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16167"></a><span class="lineno">16167</span>&#160;<span class="preprocessor">#define txReopenStdio(...)             ( _txLocCurSet(), txReopenStdio         (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16168"></a><span class="lineno">16168</span>&#160;<span class="preprocessor">#define txRGB2HSL(...)                 ( _txLocCurSet(), txRGB2HSL             (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16169"></a><span class="lineno">16169</span>&#160;<span class="preprocessor">#define txSaveImage(...)               ( _txLocCurSet(), txSaveImage           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16170"></a><span class="lineno">16170</span>&#160;<span class="preprocessor">#define txSelectFont(...)              ( _txLocCurSet(), txSelectFont          (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16171"></a><span class="lineno">16171</span>&#160;<span class="preprocessor">#define txSelectObject(...)            ( _txLocCurSet(), txSelectObject        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16172"></a><span class="lineno">16172</span>&#160;<span class="preprocessor">#define txSetColor(...)                ( _txLocCurSet(), txSetColor            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16173"></a><span class="lineno">16173</span>&#160;<span class="preprocessor">#define txSetConsoleAttr(...)          ( _txLocCurSet(), txSetConsoleAttr      (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16174"></a><span class="lineno">16174</span>&#160;<span class="preprocessor">#define txSetConsoleCursorPos(...)     ( _txLocCurSet(), txSetConsoleCursorPos (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16175"></a><span class="lineno">16175</span>&#160;<span class="preprocessor">#define txSetDefaults(...)             ( _txLocCurSet(), txSetDefaults         (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16176"></a><span class="lineno">16176</span>&#160;<span class="preprocessor">#define txSetFillColor(...)            ( _txLocCurSet(), txSetFillColor        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16177"></a><span class="lineno">16177</span>&#160;<span class="preprocessor">#define txSetLocale(...)               ( _txLocCurSet(), txSetLocale           (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16178"></a><span class="lineno">16178</span>&#160;<span class="preprocessor">#define txSetPixel(...)                ( _txLocCurSet(), txSetPixel            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16179"></a><span class="lineno">16179</span>&#160;<span class="preprocessor">#define txSetProgress(...)             ( _txLocCurSet(), txSetProgress         (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16180"></a><span class="lineno">16180</span>&#160;<span class="preprocessor">#define txSetTextAlign(...)            ( _txLocCurSet(), txSetTextAlign        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16181"></a><span class="lineno">16181</span>&#160;<span class="preprocessor">#define txSetWindowsHook(...)          ( _txLocCurSet(), txSetWindowsHook      (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16182"></a><span class="lineno">16182</span>&#160;<span class="preprocessor">#define txSleep(...)                   ( _txLocCurSet(), txSleep               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16183"></a><span class="lineno">16183</span>&#160;<span class="preprocessor">#define txSpeak(...)                   ( _txLocCurSet(), txSpeak               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16184"></a><span class="lineno">16184</span>&#160;<span class="preprocessor">#define txTextCursor(...)              ( _txLocCurSet(), txTextCursor          (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16185"></a><span class="lineno">16185</span>&#160;<span class="preprocessor">#define txTextOut(...)                 ( _txLocCurSet(), txTextOut             (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16186"></a><span class="lineno">16186</span>&#160;<span class="preprocessor">#define txTransparentBlt(...)          ( _txLocCurSet(), txTransparentBlt      (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16187"></a><span class="lineno">16187</span>&#160;<span class="preprocessor">#define txTriangle(...)                ( _txLocCurSet(), txTriangle            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16188"></a><span class="lineno">16188</span>&#160;<span class="preprocessor">#define txUnlock(...)                  ( _txLocCurSet(), txUnlock              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16189"></a><span class="lineno">16189</span>&#160;<span class="preprocessor">#define txUpdateWindow(...)            ( _txLocCurSet(), txUpdateWindow        (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16190"></a><span class="lineno">16190</span>&#160;<span class="preprocessor">#define txUseAlpha(...)                ( _txLocCurSet(), txUseAlpha            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16191"></a><span class="lineno">16191</span>&#160;<span class="preprocessor">#define txVersion(...)                 ( _txLocCurSet(), txVersion             (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16192"></a><span class="lineno">16192</span>&#160;<span class="preprocessor">#define txVersionNumber(...)           ( _txLocCurSet(), txVersionNumber       (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16193"></a><span class="lineno">16193</span>&#160;<span class="preprocessor">#define txWindow(...)                  ( _txLocCurSet(), txWindow              (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16194"></a><span class="lineno">16194</span>&#160;<span class="preprocessor">#define tx_fpreset(...)                ( _txLocCurSet(), tx_fpreset            (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16195"></a><span class="lineno">16195</span>&#160;<span class="preprocessor">#define tx_glGetError(...)             ( _txLocCurSet(), tx_glGetError         (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16196"></a><span class="lineno">16196</span>&#160;<span class="preprocessor">#define _txDump(...)                   ( _txLocCurSet(), _txDump               (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16197"></a><span class="lineno">16197</span>&#160;<span class="preprocessor">#define _txStackBackTrace(...)         ( _txLocCurSet(), _txStackBackTrace     (__VA_ARGS__) )</span></div>
<div class="line"><a name="l16198"></a><span class="lineno">16198</span>&#160; </div>
<div class="line"><a name="l16199"></a><span class="lineno">16199</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l16200"></a><span class="lineno">16200</span>&#160; </div>
<div class="line"><a name="l16201"></a><span class="lineno">16201</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l16202"></a><span class="lineno">16202</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16203"></a><span class="lineno">16203</span>&#160; </div>
<div class="line"><a name="l16205"></a><span class="lineno">16205</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l16206"></a><span class="lineno">16206</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16207"></a><span class="lineno">16207</span>&#160; </div>
<div class="line"><a name="l16208"></a><span class="lineno">16208</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16209"></a><span class="lineno">16209</span>&#160;<span class="comment">//{          The namespaces</span></div>
<div class="line"><a name="l16210"></a><span class="lineno">16210</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16211"></a><span class="lineno">16211</span>&#160; </div>
<div class="line"><a name="l16214"></a><span class="lineno">16214</span>&#160;_TX_END_NAMESPACE</div>
<div class="line"><a name="l16215"></a><span class="lineno">16215</span>&#160; </div>
<div class="line"><a name="l16218"></a><span class="lineno">16218</span>&#160;<span class="keyword">using namespace </span>TX;                    <span class="comment">// Allow easy usage of TXLib functions</span></div>
<div class="line"><a name="l16219"></a><span class="lineno">16219</span>&#160; </div>
<div class="line"><a name="l16220"></a><span class="lineno">16220</span>&#160;using ::std::cin;                      <span class="comment">// Predefined usings to avoid &quot;using namespace std&quot;</span></div>
<div class="line"><a name="l16221"></a><span class="lineno">16221</span>&#160;using ::std::cout;</div>
<div class="line"><a name="l16222"></a><span class="lineno">16222</span>&#160;using ::std::cerr;</div>
<div class="line"><a name="l16223"></a><span class="lineno">16223</span>&#160;using ::std::string;</div>
<div class="line"><a name="l16224"></a><span class="lineno">16224</span>&#160;using ::std::wcin;</div>
<div class="line"><a name="l16225"></a><span class="lineno">16225</span>&#160;using ::std::wcout;</div>
<div class="line"><a name="l16226"></a><span class="lineno">16226</span>&#160;using ::std::wcerr;</div>
<div class="line"><a name="l16227"></a><span class="lineno">16227</span>&#160;using ::std::wstring;</div>
<div class="line"><a name="l16228"></a><span class="lineno">16228</span>&#160; </div>
<div class="line"><a name="l16229"></a><span class="lineno">16229</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l16230"></a><span class="lineno">16230</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16231"></a><span class="lineno">16231</span>&#160; </div>
<div class="line"><a name="l16232"></a><span class="lineno">16232</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16233"></a><span class="lineno">16233</span>&#160;<span class="comment">//{          Compiler- and platform-specific</span></div>
<div class="line"><a name="l16234"></a><span class="lineno">16234</span>&#160;<span class="comment">//           Адаптация к компиляторам и платформам</span></div>
<div class="line"><a name="l16235"></a><span class="lineno">16235</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16237"></a><span class="lineno">16237</span>&#160;<span class="comment"></span> </div>
<div class="line"><a name="l16238"></a><span class="lineno">16238</span>&#160;<span class="preprocessor">#if defined (_GCC_VER)</span></div>
<div class="line"><a name="l16239"></a><span class="lineno">16239</span>&#160; </div>
<div class="line"><a name="l16240"></a><span class="lineno">16240</span>&#160;<span class="preprocessor">    #pragma GCC optimize               &quot;strict-aliasing&quot;</span></div>
<div class="line"><a name="l16241"></a><span class="lineno">16241</span>&#160; </div>
<div class="line"><a name="l16242"></a><span class="lineno">16242</span>&#160;<span class="preprocessor">    #pragma GCC pop_options</span></div>
<div class="line"><a name="l16243"></a><span class="lineno">16243</span>&#160;<span class="preprocessor">    #pragma GCC diagnostic pop</span></div>
<div class="line"><a name="l16244"></a><span class="lineno">16244</span>&#160; </div>
<div class="line"><a name="l16245"></a><span class="lineno">16245</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l16246"></a><span class="lineno">16246</span>&#160; </div>
<div class="line"><a name="l16247"></a><span class="lineno">16247</span>&#160;<span class="preprocessor">#if defined (_CLANG_VER)</span></div>
<div class="line"><a name="l16248"></a><span class="lineno">16248</span>&#160; </div>
<div class="line"><a name="l16249"></a><span class="lineno">16249</span>&#160;<span class="preprocessor">    #pragma clang diagnostic pop</span></div>
<div class="line"><a name="l16250"></a><span class="lineno">16250</span>&#160; </div>
<div class="line"><a name="l16251"></a><span class="lineno">16251</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l16252"></a><span class="lineno">16252</span>&#160; </div>
<div class="line"><a name="l16253"></a><span class="lineno">16253</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16254"></a><span class="lineno">16254</span>&#160; </div>
<div class="line"><a name="l16255"></a><span class="lineno">16255</span>&#160;<span class="preprocessor">#if defined (_MSC_VER)</span></div>
<div class="line"><a name="l16256"></a><span class="lineno">16256</span>&#160; </div>
<div class="line"><a name="l16257"></a><span class="lineno">16257</span>&#160;<span class="preprocessor">    #pragma warning (pop)              </span><span class="comment">// Restoring maximum level</span></div>
<div class="line"><a name="l16258"></a><span class="lineno">16258</span>&#160; </div>
<div class="line"><a name="l16259"></a><span class="lineno">16259</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l16260"></a><span class="lineno">16260</span>&#160; </div>
<div class="line"><a name="l16261"></a><span class="lineno">16261</span>&#160;<span class="preprocessor">#if defined (__INTEL_COMPILER)</span></div>
<div class="line"><a name="l16262"></a><span class="lineno">16262</span>&#160; </div>
<div class="line"><a name="l16263"></a><span class="lineno">16263</span>&#160;<span class="preprocessor">    #pragma warning (default:  174)    </span><span class="comment">// Remark: expression has no effect</span></div>
<div class="line"><a name="l16264"></a><span class="lineno">16264</span>&#160;<span class="preprocessor">    #pragma warning (default:  304)    </span><span class="comment">// Remark: access control not specified (&quot;public&quot; by default)</span></div>
<div class="line"><a name="l16265"></a><span class="lineno">16265</span>&#160;<span class="preprocessor">    #pragma warning (default:  444)    </span><span class="comment">// Remark: destructor for base class &quot;...&quot; is not virtual</span></div>
<div class="line"><a name="l16266"></a><span class="lineno">16266</span>&#160;<span class="preprocessor">    #pragma warning (default:  522)    </span><span class="comment">// Remark: function redeclared &quot;inline&quot; after being called</span></div>
<div class="line"><a name="l16267"></a><span class="lineno">16267</span>&#160;<span class="preprocessor">    #pragma warning (default: 1684)    </span><span class="comment">// Conversion from pointer to same-sized integral type (potential portability problem)</span></div>
<div class="line"><a name="l16268"></a><span class="lineno">16268</span>&#160; </div>
<div class="line"><a name="l16269"></a><span class="lineno">16269</span>&#160;<span class="preprocessor">    #pragma warning (disable:  981)    </span><span class="comment">// Remark: operands are evaluated in unspecified order</span></div>
<div class="line"><a name="l16270"></a><span class="lineno">16270</span>&#160; </div>
<div class="line"><a name="l16271"></a><span class="lineno">16271</span>&#160;<span class="preprocessor">    #endif</span></div>
<div class="line"><a name="l16272"></a><span class="lineno">16272</span>&#160; </div>
<div class="line"><a name="l16274"></a><span class="lineno">16274</span>&#160;<span class="comment">//}</span></div>
<div class="line"><a name="l16275"></a><span class="lineno">16275</span>&#160;<span class="comment">//-----------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><a name="l16276"></a><span class="lineno">16276</span>&#160; </div>
<div class="line"><a name="l16277"></a><span class="lineno">16277</span>&#160;<span class="preprocessor">#endif </span><span class="comment">// __TXLIB_H_INCLUDED</span></div>
<div class="line"><a name="l16278"></a><span class="lineno">16278</span>&#160; </div>
<div class="line"><a name="l16279"></a><span class="lineno">16279</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16280"></a><span class="lineno">16280</span>&#160;<span class="comment">// EOF</span></div>
<div class="line"><a name="l16281"></a><span class="lineno">16281</span>&#160;<span class="comment">//=================================================================================================================</span></div>
<div class="line"><a name="l16282"></a><span class="lineno">16282</span>&#160;                                                                                                                   </div>
<div class="line"><a name="l16283"></a><span class="lineno">16283</span>&#160;                                                                  </div>
<div class="line"><a name="l16284"></a><span class="lineno">16284</span>&#160; </div>
<div class="line"><a name="l16285"></a><span class="lineno">16285</span>&#160; </div>
<div class="line"><a name="l16286"></a><span class="lineno">16286</span>&#160; </div>
<div class="line"><a name="l16287"></a><span class="lineno">16287</span>&#160; </div>
<div class="line"><a name="l16288"></a><span class="lineno">16288</span>&#160; </div>
<div class="line"><a name="l16289"></a><span class="lineno">16289</span>&#160; </div>
<div class="line"><a name="l16290"></a><span class="lineno">16290</span>&#160; </div>
<div class="line"><a name="l16291"></a><span class="lineno">16291</span>&#160; </div>
<div class="line"><a name="l16292"></a><span class="lineno">16292</span>&#160; </div>
<div class="line"><a name="l16293"></a><span class="lineno">16293</span>&#160; </div>
<div class="line"><a name="l16294"></a><span class="lineno">16294</span>&#160; </div>
<div class="line"><a name="l16295"></a><span class="lineno">16295</span>&#160; </div>
<div class="line"><a name="l16296"></a><span class="lineno">16296</span>&#160; </div>
<div class="line"><a name="l16297"></a><span class="lineno">16297</span>&#160; </div>
<div class="line"><a name="l16298"></a><span class="lineno">16298</span>&#160; </div>
<div class="line"><a name="l16299"></a><span class="lineno">16299</span>&#160; </div>
<div class="ttc" id="aclasstx_auto_lock_html"><div class="ttname"><a href="classtx_auto_lock.html">txAutoLock</a></div><div class="ttdoc">Класс для автоматической блокировки и разблокировки критической секции.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6320</div></div>
<div class="ttc" id="aclasstx_auto_lock_html_a838aae52b26597bf7aa0cd931611dca4"><div class="ttname"><a href="classtx_auto_lock.html#a838aae52b26597bf7aa0cd931611dca4">txAutoLock::~txAutoLock</a></div><div class="ttdeci">~txAutoLock()</div><div class="ttdoc">Деструктор, разблокирует секцию</div><div class="ttdef"><b>Definition:</b> TXLib.h:6384</div></div>
<div class="ttc" id="aclasstx_auto_lock_html_acc8301ae37ef7ee9d5b9c774d27da379"><div class="ttname"><a href="classtx_auto_lock.html#acc8301ae37ef7ee9d5b9c774d27da379">txAutoLock::txAutoLock</a></div><div class="ttdeci">txAutoLock(bool mandatory=true)</div><div class="ttdoc">Конструктор для блокировки холста TXLib.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6374</div></div>
<div class="ttc" id="aclasstx_auto_lock_html_ae7aa09749ac613c09b651a4a2e12934f"><div class="ttname"><a href="classtx_auto_lock.html#ae7aa09749ac613c09b651a4a2e12934f">txAutoLock::cs_</a></div><div class="ttdeci">CRITICAL_SECTION * cs_</div><div class="ttdoc">Блокируемая критическая секция</div><div class="ttdef"><b>Definition:</b> TXLib.h:6405</div></div>
<div class="ttc" id="aclasstx_auto_lock_html_af28070ec9fc2a4466cb7dbd0868c9616"><div class="ttname"><a href="classtx_auto_lock.html#af28070ec9fc2a4466cb7dbd0868c9616">txAutoLock::txAutoLock</a></div><div class="ttdeci">txAutoLock(CRITICAL_SECTION *cs, bool mandatory=true)</div><div class="ttdoc">Конструктор, блокирует критическую секцию</div><div class="ttdef"><b>Definition:</b> TXLib.h:6350</div></div>
<div class="ttc" id="agroup___dialogs_html_ga5b47575087d696b5fddf972ce4d83657"><div class="ttname"><a href="group___dialogs.html#ga5b47575087d696b5fddf972ce4d83657">txDialog::CONTROL</a></div><div class="ttdeci">CONTROL</div><div class="ttdoc">Константы для задания типа контрола.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6472</div></div>
<div class="ttc" id="agroup___dialogs_html_gaf1f2c033b7edc26174a28771a708ee7c"><div class="ttname"><a href="group___dialogs.html#gaf1f2c033b7edc26174a28771a708ee7c">txInputBox</a></div><div class="ttdeci">const char * txInputBox(const char *text=NULL, const char *caption=NULL, const char *input=NULL) tx_nodiscard</div><div class="ttdoc">Ввод строки в отдельном окне.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6808</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657a1988e748c6846b398b020c0cb6f057ab"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a1988e748c6846b398b020c0cb6f057ab">txDialog::DIALOG</a></div><div class="ttdeci">@ DIALOG</div><div class="ttdoc">Начало описания диалога</div><div class="ttdef"><b>Definition:</b> TXLib.h:6473</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657a342a4f0af79f46e07894a95e5951b7aa"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a342a4f0af79f46e07894a95e5951b7aa">txDialog::END</a></div><div class="ttdeci">@ END</div><div class="ttdoc">Конец описания диалога</div><div class="ttdef"><b>Definition:</b> TXLib.h:6480</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657a5e7719d9f62ad1839c67e21e8ebf64e2"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a5e7719d9f62ad1839c67e21e8ebf64e2">txDialog::COMBOBOX</a></div><div class="ttdeci">@ COMBOBOX</div><div class="ttdoc">Комбинированный список</div><div class="ttdef"><b>Definition:</b> TXLib.h:6479</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657a71c9095b5417af67a6a9b4a5140a09ea"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657a71c9095b5417af67a6a9b4a5140a09ea">txDialog::LISTBOX</a></div><div class="ttdeci">@ LISTBOX</div><div class="ttdoc">Список с прокруткой</div><div class="ttdef"><b>Definition:</b> TXLib.h:6477</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657aa4f15111fd03f7781dd5e910c9476085"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aa4f15111fd03f7781dd5e910c9476085">txDialog::BUTTON</a></div><div class="ttdeci">@ BUTTON</div><div class="ttdoc">Кнопка</div><div class="ttdef"><b>Definition:</b> TXLib.h:6474</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657aec6c84113cb4f1cd430238d4b909b40a"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aec6c84113cb4f1cd430238d4b909b40a">txDialog::STATIC</a></div><div class="ttdeci">@ STATIC</div><div class="ttdoc">Нередактируемый элемент (текст, картинка и т.д.)</div><div class="ttdef"><b>Definition:</b> TXLib.h:6476</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657aef6361d5dcbf8ce520f398a079b414cb"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657aef6361d5dcbf8ce520f398a079b414cb">txDialog::EDIT</a></div><div class="ttdeci">@ EDIT</div><div class="ttdoc">Редактируемый текст</div><div class="ttdef"><b>Definition:</b> TXLib.h:6475</div></div>
<div class="ttc" id="agroup___dialogs_html_gga5b47575087d696b5fddf972ce4d83657af7644a14f317118ad12a6c5eaa216e9f"><div class="ttname"><a href="group___dialogs.html#gga5b47575087d696b5fddf972ce4d83657af7644a14f317118ad12a6c5eaa216e9f">txDialog::SCROLLBAR</a></div><div class="ttdeci">@ SCROLLBAR</div><div class="ttdoc">Полоса прокрутки</div><div class="ttdef"><b>Definition:</b> TXLib.h:6478</div></div>
<div class="ttc" id="agroup___drawing_html_ga03a8558c6bf26c0d6f59f85fc458c1a8"><div class="ttname"><a href="group___drawing.html#ga03a8558c6bf26c0d6f59f85fc458c1a8">TX_LIGHTNESS</a></div><div class="ttdeci">const COLORREF TX_LIGHTNESS</div><div class="ttdoc">Светлота цвета в модели HSL, [0; 255].</div><div class="ttdef"><b>Definition:</b> TXLib.h:1482</div></div>
<div class="ttc" id="agroup___drawing_html_ga09938df8859ae8b62638a3af76ee6735"><div class="ttname"><a href="group___drawing.html#ga09938df8859ae8b62638a3af76ee6735">txSetTextAlign</a></div><div class="ttdeci">unsigned txSetTextAlign(unsigned align=TA_CENTER|TA_BASELINE, HDC dc=txDC())</div><div class="ttdoc">Устанавливает текущее выравнивание текста (влево/вправо/по центру).</div></div>
<div class="ttc" id="agroup___drawing_html_ga0a3cf3a018cea9d5889d2626e9a37136"><div class="ttname"><a href="group___drawing.html#ga0a3cf3a018cea9d5889d2626e9a37136">txDestroyWindow</a></div><div class="ttdeci">bool txDestroyWindow(HWND wnd=txWindow())</div><div class="ttdoc">Уничтожает окно.</div></div>
<div class="ttc" id="agroup___drawing_html_ga11074386e81c0c8677f36c0a16ac0aa1"><div class="ttname"><a href="group___drawing.html#ga11074386e81c0c8677f36c0a16ac0aa1">txGetExtent</a></div><div class="ttdeci">POINT txGetExtent(HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Возвращает размер окна, картинки или холста в виде структуры POINT.</div></div>
<div class="ttc" id="agroup___drawing_html_ga12ffceef73c1a081c073f4d7c2914618"><div class="ttname"><a href="group___drawing.html#ga12ffceef73c1a081c073f4d7c2914618">txGetModuleFileName</a></div><div class="ttdeci">const char * txGetModuleFileName(bool fileNameOnly=true) tx_nodiscard</div><div class="ttdoc">Возвращает имя исполняемого файла или изначальный заголовок окна TXLib.</div></div>
<div class="ttc" id="agroup___drawing_html_ga1350174ec2a2c83182437f04c88c2d95"><div class="ttname"><a href="group___drawing.html#ga1350174ec2a2c83182437f04c88c2d95">txRGB2HSL</a></div><div class="ttdeci">COLORREF txRGB2HSL(COLORREF rgbColor) tx_nodiscard</div><div class="ttdoc">Преобразует цвет из формата RGB в формат HSL.</div></div>
<div class="ttc" id="agroup___drawing_html_ga16ef56f4dfb0cf5f8422bab9663eb7a9"><div class="ttname"><a href="group___drawing.html#ga16ef56f4dfb0cf5f8422bab9663eb7a9">TX_DARKGRAY</a></div><div class="ttdeci">const COLORREF TX_DARKGRAY</div><div class="ttdoc">Темно-серый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1463</div></div>
<div class="ttc" id="agroup___drawing_html_ga18a0418f3c06463e958077cddf2a4864"><div class="ttname"><a href="group___drawing.html#ga18a0418f3c06463e958077cddf2a4864">txRectangle</a></div><div class="ttdeci">bool txRectangle(double x0, double y0, double x1, double y1, HDC dc=txDC())</div><div class="ttdoc">Рисует прямоугольник.</div></div>
<div class="ttc" id="agroup___drawing_html_ga1aca71127c9986f995b2372903d65964"><div class="ttname"><a href="group___drawing.html#ga1aca71127c9986f995b2372903d65964">txGetFPS</a></div><div class="ttdeci">double txGetFPS(int minFrames=txFramesToAverage) tx_nodiscard</div><div class="ttdoc">Выдает количество кадров (вызовов этой функции) в секунду.</div></div>
<div class="ttc" id="agroup___drawing_html_ga20dd7bcf9971724f274d321b8489d206"><div class="ttname"><a href="group___drawing.html#ga20dd7bcf9971724f274d321b8489d206">TX_BLM</a></div><div class="ttdeci">const COLORREF TX_BLM</div><div class="ttdoc">Альтернативный политкорректный трендовый цвет!</div><div class="ttdef"><b>Definition:</b> TXLib.h:1475</div></div>
<div class="ttc" id="agroup___drawing_html_ga250455abeab8c99a51153ef8f4ec0396"><div class="ttname"><a href="group___drawing.html#ga250455abeab8c99a51153ef8f4ec0396">txGetConsoleFontSize</a></div><div class="ttdeci">POINT txGetConsoleFontSize() tx_nodiscard</div><div class="ttdoc">Возвращает размеры шрифта консоли.</div></div>
<div class="ttc" id="agroup___drawing_html_ga2b069ef0d81d1b217e8a4f019140ee92"><div class="ttname"><a href="group___drawing.html#ga2b069ef0d81d1b217e8a4f019140ee92">TX_LIGHTGREEN</a></div><div class="ttdeci">const COLORREF TX_LIGHTGREEN</div><div class="ttdoc">Светло-зеленый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1466</div></div>
<div class="ttc" id="agroup___drawing_html_ga2cb63c12d9206e9ed2b2c83c9a08f68e"><div class="ttname"><a href="group___drawing.html#ga2cb63c12d9206e9ed2b2c83c9a08f68e">txClearConsole</a></div><div class="ttdeci">bool txClearConsole()</div><div class="ttdoc">Стирает текст консоли.</div></div>
<div class="ttc" id="agroup___drawing_html_ga2cba42b999b157ec7a7d2bd32dfcc709"><div class="ttname"><a href="group___drawing.html#ga2cba42b999b157ec7a7d2bd32dfcc709">txLoadImage</a></div><div class="ttdeci">HDC txLoadImage(const char filename[], int sizeX=0, int sizeY=0, unsigned imageFlags=IMAGE_BITMAP, unsigned loadFlags=LR_LOADFROMFILE) tx_nodiscard</div><div class="ttdoc">Загружает из файла изображение в формате BMP. Делает это довольно медленно.</div></div>
<div class="ttc" id="agroup___drawing_html_ga3227242c57eef33049cdaee655f4faee"><div class="ttname"><a href="group___drawing.html#ga3227242c57eef33049cdaee655f4faee">txGetConsoleCursorPos</a></div><div class="ttdeci">POINT txGetConsoleCursorPos()</div><div class="ttdoc">Возвращает позицию мигающего курсора консоли.</div></div>
<div class="ttc" id="agroup___drawing_html_ga3291ffa23a348c25985d780ab8f7088b"><div class="ttname"><a href="group___drawing.html#ga3291ffa23a348c25985d780ab8f7088b">txOK</a></div><div class="ttdeci">bool txOK() tx_nodiscard</div><div class="ttdoc">Проверка правильности работы библиотеки</div></div>
<div class="ttc" id="agroup___drawing_html_ga32abcdee1b6897c768f21bf9264fe3eb"><div class="ttname"><a href="group___drawing.html#ga32abcdee1b6897c768f21bf9264fe3eb">TX_GREEN</a></div><div class="ttdeci">const COLORREF TX_GREEN</div><div class="ttdoc">Зеленый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1456</div></div>
<div class="ttc" id="agroup___drawing_html_ga39fc3e530244cd74a18b58b2554cf686"><div class="ttname"><a href="group___drawing.html#ga39fc3e530244cd74a18b58b2554cf686">TX_LIGHTBLUE</a></div><div class="ttdeci">const COLORREF TX_LIGHTBLUE</div><div class="ttdoc">Светло-синий цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1465</div></div>
<div class="ttc" id="agroup___drawing_html_ga3a8ec79acc0dcbcc04bff3aecc235b4e"><div class="ttname"><a href="group___drawing.html#ga3a8ec79acc0dcbcc04bff3aecc235b4e">txVideoMemory</a></div><div class="ttdeci">RGBQUAD * txVideoMemory() tx_nodiscard</div><div class="ttdoc">Возвращает буфер памяти, связанный с холстом (HDC) TXLib.</div></div>
<div class="ttc" id="agroup___drawing_html_ga4395ad7eeeda9d2163a89996ca91133e"><div class="ttname"><a href="group___drawing.html#ga4395ad7eeeda9d2163a89996ca91133e">TX_SATURATION</a></div><div class="ttdeci">const COLORREF TX_SATURATION</div><div class="ttdoc">Насыщенность цвета в модели HSL, [0; 255].</div><div class="ttdef"><b>Definition:</b> TXLib.h:1481</div></div>
<div class="ttc" id="agroup___drawing_html_ga45389db909311454bbdfed3898d760d1"><div class="ttname"><a href="group___drawing.html#ga45389db909311454bbdfed3898d760d1">txSaveImage</a></div><div class="ttdeci">bool txSaveImage(const char filename[], HDC dc=txDC())</div><div class="ttdoc">Сохраняет в файл изображение в формате BMP.</div></div>
<div class="ttc" id="agroup___drawing_html_ga49983bddca35d531c521cf04c6c2449f"><div class="ttname"><a href="group___drawing.html#ga49983bddca35d531c521cf04c6c2449f">txQueryPerformance</a></div><div class="ttdeci">double txQueryPerformance() tx_nodiscard</div><div class="ttdoc">Оценивает скорость работы компьютера.</div></div>
<div class="ttc" id="agroup___drawing_html_ga4d6f780cdef622df0fda71d0b3cfee52"><div class="ttname"><a href="group___drawing.html#ga4d6f780cdef622df0fda71d0b3cfee52">txAlphaBlend</a></div><div class="ttdeci">bool txAlphaBlend(HDC destImage, double xDest, double yDest, double width, double height, HDC sourceImage, double xSource=0, double ySource=0, double alpha=1.0)</div><div class="ttdoc">Копирует изображение с одного холста (контекста рисования, DC) на другой с учетом полупрозрачности.</div></div>
<div class="ttc" id="agroup___drawing_html_ga4d83b7e2d67f422cf703e15f2d7c4dfa"><div class="ttname"><a href="group___drawing.html#ga4d83b7e2d67f422cf703e15f2d7c4dfa">txGetFillColor</a></div><div class="ttdeci">COLORREF txGetFillColor(HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Возвращает текущий цвет заполнения фигур.</div></div>
<div class="ttc" id="agroup___drawing_html_ga505f212582bf9b2bf95a4ef15f84af42"><div class="ttname"><a href="group___drawing.html#ga505f212582bf9b2bf95a4ef15f84af42">txDeleteDC</a></div><div class="ttdeci">bool txDeleteDC(HDC dc)</div><div class="ttdoc">Уничтожает холст (контекст рисования, DC) в памяти.</div></div>
<div class="ttc" id="agroup___drawing_html_ga52767d764788c2e7dd93ee6d1c9f681b"><div class="ttname"><a href="group___drawing.html#ga52767d764788c2e7dd93ee6d1c9f681b">TX_white</a></div><div class="ttdeci">const COLORREF TX_white</div><div class="ttdoc">BLM-compatible name for this color.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1476</div></div>
<div class="ttc" id="agroup___drawing_html_ga52e119361961d9eee33c176a3084e55d"><div class="ttname"><a href="group___drawing.html#ga52e119361961d9eee33c176a3084e55d">txTextOut</a></div><div class="ttdeci">bool txTextOut(double x, double y, const char text[], HDC dc=txDC())</div><div class="ttdoc">Рисует текст.</div></div>
<div class="ttc" id="agroup___drawing_html_ga54f48f0bcb9453add294e0a9f8b1fb1d"><div class="ttname"><a href="group___drawing.html#ga54f48f0bcb9453add294e0a9f8b1fb1d">txTransparentBlt</a></div><div class="ttdeci">bool txTransparentBlt(HDC destImage, double xDest, double yDest, double width, double height, HDC sourceImage, double xSource=0, double ySource=0, COLORREF transColor=TX_BLACK)</div><div class="ttdoc">Копирует изображение с одного холста (контекста рисования, DC) на другой с учетом прозрачности.</div></div>
<div class="ttc" id="agroup___drawing_html_ga59169dd9d9168dcbd3d4fa30d3e94f22"><div class="ttname"><a href="group___drawing.html#ga59169dd9d9168dcbd3d4fa30d3e94f22">TX_CYAN</a></div><div class="ttdeci">const COLORREF TX_CYAN</div><div class="ttdoc">Бирюзовый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1457</div></div>
<div class="ttc" id="agroup___drawing_html_ga59468ca0fd4c182ac0a03573267eb3e9"><div class="ttname"><a href="group___drawing.html#ga59468ca0fd4c182ac0a03573267eb3e9">txChord</a></div><div class="ttdeci">bool txChord(double x0, double y0, double x1, double y1, double startAngle, double totalAngle, HDC dc=txDC())</div><div class="ttdoc">Рисует хорду эллипса.</div></div>
<div class="ttc" id="agroup___drawing_html_ga5d70fde53b10abdb4e9511268b9e1ee9"><div class="ttname"><a href="group___drawing.html#ga5d70fde53b10abdb4e9511268b9e1ee9">TX_TRANSPARENT</a></div><div class="ttdeci">const COLORREF TX_TRANSPARENT</div><div class="ttdoc">Прозрачный цвет. Отключает рисование. //-V112.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1473</div></div>
<div class="ttc" id="agroup___drawing_html_ga5e1e4cc39cc18962bb480c4adfa1344d"><div class="ttname"><a href="group___drawing.html#ga5e1e4cc39cc18962bb480c4adfa1344d">txArc</a></div><div class="ttdeci">bool txArc(double x0, double y0, double x1, double y1, double startAngle, double totalAngle, HDC dc=txDC())</div><div class="ttdoc">Рисует дугу эллипса.</div></div>
<div class="ttc" id="agroup___drawing_html_ga6280d640bb3b08dc82c8dd29caf5ff47"><div class="ttname"><a href="group___drawing.html#ga6280d640bb3b08dc82c8dd29caf5ff47">txUseAlpha</a></div><div class="ttdeci">HDC txUseAlpha(HDC image)</div><div class="ttdoc">Пересчитывает цвета пикселей с учетом прозрачности (переводит цвета в формат Premultiplied Alpha).</div></div>
<div class="ttc" id="agroup___drawing_html_ga6388bef316887789b735b7fbbc04ec4d"><div class="ttname"><a href="group___drawing.html#ga6388bef316887789b735b7fbbc04ec4d">TX_YELLOW</a></div><div class="ttdeci">const COLORREF TX_YELLOW</div><div class="ttdoc">Желтый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1471</div></div>
<div class="ttc" id="agroup___drawing_html_ga64af5f87cd652548278ff98d26f58148"><div class="ttname"><a href="group___drawing.html#ga64af5f87cd652548278ff98d26f58148">txGetTextExtent</a></div><div class="ttdeci">SIZE txGetTextExtent(const char text[], HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Вычисляет размеры текстовой надписи.</div></div>
<div class="ttc" id="agroup___drawing_html_ga6625deb7ac8953a7e516285ac81c0b34"><div class="ttname"><a href="group___drawing.html#ga6625deb7ac8953a7e516285ac81c0b34">TX_LIGHTGRAY</a></div><div class="ttdeci">const COLORREF TX_LIGHTGRAY</div><div class="ttdoc">Светло-серый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1464</div></div>
<div class="ttc" id="agroup___drawing_html_ga6689b9a89add9c5eb5cf54a8c86539a4"><div class="ttname"><a href="group___drawing.html#ga6689b9a89add9c5eb5cf54a8c86539a4">txSelectFont</a></div><div class="ttdeci">HFONT txSelectFont(const char name[], double sizeY, double sizeX=-1, int bold=FW_DONTCARE, bool italic=false, bool underline=false, bool strikeout=false, double angle=0, HDC dc=txDC())</div><div class="ttdoc">Выбирает текущий шрифт, его размер и другие атрибуты.</div></div>
<div class="ttc" id="agroup___drawing_html_ga66facc5848748507d3ea48c75b33ba23"><div class="ttname"><a href="group___drawing.html#ga66facc5848748507d3ea48c75b33ba23">txSetColor</a></div><div class="ttdeci">HPEN txSetColor(COLORREF color, double thickness=1, HDC dc=txDC())</div><div class="ttdoc">Создает (смешивает) цвет из трех базовых цветов (компонент).</div></div>
<div class="ttc" id="agroup___drawing_html_ga6c293f0b0f71efebdeeb0b56a97ba50c"><div class="ttname"><a href="group___drawing.html#ga6c293f0b0f71efebdeeb0b56a97ba50c">txSleep</a></div><div class="ttdeci">double txSleep(double time=0)</div><div class="ttdoc">Задерживает выполнение программы на определенное время.</div></div>
<div class="ttc" id="agroup___drawing_html_ga6d082544499056d96ebda68defe0be54"><div class="ttname"><a href="group___drawing.html#ga6d082544499056d96ebda68defe0be54">TX_PINK</a></div><div class="ttdeci">const COLORREF TX_PINK</div><div class="ttdoc">Розовый гламурный :)</div><div class="ttdef"><b>Definition:</b> TXLib.h:1470</div></div>
<div class="ttc" id="agroup___drawing_html_ga6d5e95c1f234d32b8859826859127244"><div class="ttname"><a href="group___drawing.html#ga6d5e95c1f234d32b8859826859127244">txHSL2RGB</a></div><div class="ttdeci">COLORREF txHSL2RGB(COLORREF hslColor) tx_nodiscard</div><div class="ttdoc">Преобразует цвет из формата HSL в формат RGB.</div></div>
<div class="ttc" id="agroup___drawing_html_ga6dfb121b4a1116f987baeb515713cbbf"><div class="ttname"><a href="group___drawing.html#ga6dfb121b4a1116f987baeb515713cbbf">txBitBlt</a></div><div class="ttdeci">bool txBitBlt(HDC destImage, double xDest, double yDest, double width, double height, HDC sourceImage, double xSource=0, double ySource=0, unsigned operation=SRCCOPY)</div><div class="ttdoc">Копирует изображение с одного холста (контекста рисования, DC) на другой.</div></div>
<div class="ttc" id="agroup___drawing_html_ga6e641bf88bafb9bc5297354adb3aeb56"><div class="ttname"><a href="group___drawing.html#ga6e641bf88bafb9bc5297354adb3aeb56">txDC</a></div><div class="ttdeci">HDC &amp; txDC() tx_nodiscard</div><div class="ttdoc">Возвращает холст (дескриптор контекста рисования, HDC) окна рисования TXLib.</div></div>
<div class="ttc" id="agroup___drawing_html_ga7535f88c0fd15b4b49195060d38f2603"><div class="ttname"><a href="group___drawing.html#ga7535f88c0fd15b4b49195060d38f2603">txCreateDIBSection</a></div><div class="ttdeci">HDC txCreateDIBSection(double sizeX, double sizeY, RGBQUAD **pixels=NULL) tx_nodiscard</div><div class="ttdoc">Создает аппаратно-независимый дополнительный холст (контекст рисования, Device Context,...</div></div>
<div class="ttc" id="agroup___drawing_html_ga78e83baeb6a02d5fa33dd8b062e513d9"><div class="ttname"><a href="group___drawing.html#ga78e83baeb6a02d5fa33dd8b062e513d9">txClear</a></div><div class="ttdeci">bool txClear(HDC dc=txDC())</div><div class="ttdoc">Стирает холст текущим цветом заполнения.</div></div>
<div class="ttc" id="agroup___drawing_html_ga791155510da5fc336b3dbe4deab37974"><div class="ttname"><a href="group___drawing.html#ga791155510da5fc336b3dbe4deab37974">txSetConsoleAttr</a></div><div class="ttdeci">unsigned txSetConsoleAttr(unsigned colors=0x07)</div><div class="ttdoc">Устанавливает цветовые атрибуты консоли.</div></div>
<div class="ttc" id="agroup___drawing_html_ga794901725b6c4a96f585742b70c0ea05"><div class="ttname"><a href="group___drawing.html#ga794901725b6c4a96f585742b70c0ea05">txFontExist</a></div><div class="ttdeci">LOGFONT * txFontExist(const char name[]) tx_nodiscard</div><div class="ttdoc">Ищет шрифт по его названию.</div></div>
<div class="ttc" id="agroup___drawing_html_ga809dc04afd5348247846ee01ce9a06e6"><div class="ttname"><a href="group___drawing.html#ga809dc04afd5348247846ee01ce9a06e6">txEnd</a></div><div class="ttdeci">int txEnd()</div><div class="ttdoc">Разблокирует обновление окна, заблокированное функцией txBegin().</div></div>
<div class="ttc" id="agroup___drawing_html_ga8adde0a20efa7597d8653653817353b2"><div class="ttname"><a href="group___drawing.html#ga8adde0a20efa7597d8653653817353b2">txFloodFill</a></div><div class="ttdeci">bool txFloodFill(double x, double y, COLORREF color=TX_TRANSPARENT, DWORD mode=FLOODFILLSURFACE, HDC dc=txDC())</div><div class="ttdoc">Заливает произвольный контур текущим цветом заполнения.</div></div>
<div class="ttc" id="agroup___drawing_html_ga8e06e3abcb6b3724d332feb8aa83a8df"><div class="ttname"><a href="group___drawing.html#ga8e06e3abcb6b3724d332feb8aa83a8df">txPie</a></div><div class="ttdeci">bool txPie(double x0, double y0, double x1, double y1, double startAngle, double totalAngle, HDC dc=txDC())</div><div class="ttdoc">Рисует сектор эллипса.</div></div>
<div class="ttc" id="agroup___drawing_html_ga90c5bf9144d5eed4926fb92ba854eca9"><div class="ttname"><a href="group___drawing.html#ga90c5bf9144d5eed4926fb92ba854eca9">TX_WHITE</a></div><div class="ttdeci">const COLORREF TX_WHITE</div><div class="ttdoc">Белый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1472</div></div>
<div class="ttc" id="agroup___drawing_html_ga90daedc95ac28938003edb5b50479542"><div class="ttname"><a href="group___drawing.html#ga90daedc95ac28938003edb5b50479542">txGetPixel</a></div><div class="ttdeci">COLORREF txGetPixel(double x, double y, HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Возвращает текущий цвет точки (пикселя) на экране.</div></div>
<div class="ttc" id="agroup___drawing_html_ga93cecf6b117fc403c0488f388b78a6d1"><div class="ttname"><a href="group___drawing.html#ga93cecf6b117fc403c0488f388b78a6d1">txIDontWantToHaveAPauseAfterMyProgramBeforeTheWindowWillClose_AndIWillNotBeAskingWhereIsMyPicture</a></div><div class="ttdeci">bool txIDontWantToHaveAPauseAfterMyProgramBeforeTheWindowWillClose_AndIWillNotBeAskingWhereIsMyPicture()</div><div class="ttdoc">Делает нечто иногда удобное. См. название функции.</div></div>
<div class="ttc" id="agroup___drawing_html_ga93e1976dd8ae8d5e1b3932a4e5bfd158"><div class="ttname"><a href="group___drawing.html#ga93e1976dd8ae8d5e1b3932a4e5bfd158">TX_RED</a></div><div class="ttdeci">const COLORREF TX_RED</div><div class="ttdoc">Темно-красный цвет. Слишком темный.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1458</div></div>
<div class="ttc" id="agroup___drawing_html_ga941df978c121666ee6092034ec47701c"><div class="ttname"><a href="group___drawing.html#ga941df978c121666ee6092034ec47701c">TX_BROWN</a></div><div class="ttdeci">const COLORREF TX_BROWN</div><div class="ttdoc">Коричневый цвет. Некрасивый. Do it yourself with RGB().</div><div class="ttdef"><b>Definition:</b> TXLib.h:1460</div></div>
<div class="ttc" id="agroup___drawing_html_ga9b0d66f152f2b04e9c4511e3e7f2c521"><div class="ttname"><a href="group___drawing.html#ga9b0d66f152f2b04e9c4511e3e7f2c521">txCreateCompatibleDC</a></div><div class="ttdeci">HDC txCreateCompatibleDC(double sizeX, double sizeY, HBITMAP bitmap=NULL, RGBQUAD **pixels=NULL) tx_nodiscard</div><div class="ttdoc">Создает дополнительный холст (контекст рисования, Device Context, DC) в памяти.</div></div>
<div class="ttc" id="agroup___drawing_html_ga9be3f6a68afe0bf3013fc4c7fbebd057"><div class="ttname"><a href="group___drawing.html#ga9be3f6a68afe0bf3013fc4c7fbebd057">TX_LIGHTRED</a></div><div class="ttdeci">const COLORREF TX_LIGHTRED</div><div class="ttdoc">Светло-красный цвет. Не самого лучшего оттенка.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1468</div></div>
<div class="ttc" id="agroup___drawing_html_gaa148d2040d20ed74cf46ab186c35f9ed"><div class="ttname"><a href="group___drawing.html#gaa148d2040d20ed74cf46ab186c35f9ed">txTextCursor</a></div><div class="ttdeci">bool txTextCursor(bool blink=true)</div><div class="ttdoc">Запрещает или разрешает рисование мигающего курсора в окне.</div></div>
<div class="ttc" id="agroup___drawing_html_gaa14e9c2a46cf713efaa1f850074d8adc"><div class="ttname"><a href="group___drawing.html#gaa14e9c2a46cf713efaa1f850074d8adc">txCircle</a></div><div class="ttdeci">bool txCircle(double x, double y, double r)</div><div class="ttdoc">Рисует окружность или круг.</div></div>
<div class="ttc" id="agroup___drawing_html_gaa281a54954945bb0e96314fb4cfad7b9"><div class="ttname"><a href="group___drawing.html#gaa281a54954945bb0e96314fb4cfad7b9">TX_BLUE</a></div><div class="ttdeci">const COLORREF TX_BLUE</div><div class="ttdoc">Темно-синий цвет. Плохо виден.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1455</div></div>
<div class="ttc" id="agroup___drawing_html_gaa5cab2d4aa67ea50390c30f094a77862"><div class="ttname"><a href="group___drawing.html#gaa5cab2d4aa67ea50390c30f094a77862">TX_HUE</a></div><div class="ttdeci">const COLORREF TX_HUE</div><div class="ttdoc">Цветовой тон цвета в модели HSL, [0; 255].</div><div class="ttdef"><b>Definition:</b> TXLib.h:1480</div></div>
<div class="ttc" id="agroup___drawing_html_gaa72c4849ac0c9bf6f95893f4265b9843"><div class="ttname"><a href="group___drawing.html#gaa72c4849ac0c9bf6f95893f4265b9843">txSetDefaults</a></div><div class="ttdeci">bool txSetDefaults(HDC dc=txDC())</div><div class="ttdoc">Установка параметров рисования по умолчанию.</div></div>
<div class="ttc" id="agroup___drawing_html_gaa8db9fe1edc90be50c3fb8a94fd09275"><div class="ttname"><a href="group___drawing.html#gaa8db9fe1edc90be50c3fb8a94fd09275">TX_LIGHTMAGENTA</a></div><div class="ttdeci">const COLORREF TX_LIGHTMAGENTA</div><div class="ttdoc">Светло-малиновый цвет. Еще менее лучшего оттенка.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1469</div></div>
<div class="ttc" id="agroup___drawing_html_gaa9bb7fd84e0b9f59c96be89d70c74321"><div class="ttname"><a href="group___drawing.html#gaa9bb7fd84e0b9f59c96be89d70c74321">txGetExtentY</a></div><div class="ttdeci">int txGetExtentY(HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Возвращает высоту окна или холста.</div></div>
<div class="ttc" id="agroup___drawing_html_gaaee38df6f38b6f1729b9db1c4ac23e65"><div class="ttname"><a href="group___drawing.html#gaaee38df6f38b6f1729b9db1c4ac23e65">txLine</a></div><div class="ttdeci">bool txLine(double x0, double y0, double x1, double y1, HDC dc=txDC())</div><div class="ttdoc">Рисует линию.</div></div>
<div class="ttc" id="agroup___drawing_html_gaaf82e7c5a0fd06548f42c757f73d3dae"><div class="ttname"><a href="group___drawing.html#gaaf82e7c5a0fd06548f42c757f73d3dae">txEllipse</a></div><div class="ttdeci">bool txEllipse(double x0, double y0, double x1, double y1, HDC dc=txDC())</div><div class="ttdoc">Рисует эллипс.</div></div>
<div class="ttc" id="agroup___drawing_html_gab2c5f0eff263a7297997281c3d451b91"><div class="ttname"><a href="group___drawing.html#gab2c5f0eff263a7297997281c3d451b91">txVersionNumber</a></div><div class="ttdeci">unsigned txVersionNumber() tx_nodiscard</div><div class="ttdoc">Возвращает номер версии библиотеки.</div></div>
<div class="ttc" id="agroup___drawing_html_gab5cd3833edf57a1fe3a3facf3e3086ac"><div class="ttname"><a href="group___drawing.html#gab5cd3833edf57a1fe3a3facf3e3086ac">TX_LIGHTCYAN</a></div><div class="ttdeci">const COLORREF TX_LIGHTCYAN</div><div class="ttdoc">Светло-бирюзовый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1467</div></div>
<div class="ttc" id="agroup___drawing_html_gab6462db4dbcca4915d460036c6c8896d"><div class="ttname"><a href="group___drawing.html#gab6462db4dbcca4915d460036c6c8896d">txGetColor</a></div><div class="ttdeci">COLORREF txGetColor(HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Возвращает текущий цвет линий и текста.</div></div>
<div class="ttc" id="agroup___drawing_html_gab79782d80f6c61587d02f0633aa2f198"><div class="ttname"><a href="group___drawing.html#gab79782d80f6c61587d02f0633aa2f198">txGetExtentX</a></div><div class="ttdeci">int txGetExtentX(HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Возвращает ширину окна или холста.</div></div>
<div class="ttc" id="agroup___drawing_html_gabc64e03f4ca966e76bc714bbe8173761"><div class="ttname"><a href="group___drawing.html#gabc64e03f4ca966e76bc714bbe8173761">txSelectObject</a></div><div class="ttdeci">bool txSelectObject(HGDIOBJ obj, HDC dc=txDC())</div><div class="ttdoc">Устанавливает текущий активный объект GDI.</div></div>
<div class="ttc" id="agroup___drawing_html_gac021e9984ef217a7a8c14094e3d684c9"><div class="ttname"><a href="group___drawing.html#gac021e9984ef217a7a8c14094e3d684c9">txGetTextExtentY</a></div><div class="ttdeci">int txGetTextExtentY(const char text[], HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Вычисляет высоту текстовой надписи.</div></div>
<div class="ttc" id="agroup___drawing_html_gac2b196b6826392229fa209e01817f941"><div class="ttname"><a href="group___drawing.html#gac2b196b6826392229fa209e01817f941">txExtractColor</a></div><div class="ttdeci">unsigned txExtractColor(COLORREF color, COLORREF component) tx_nodiscard</div><div class="ttdoc">Извлекает цветовую компоненту (цветовой канал) из смешанного цвета.</div></div>
<div class="ttc" id="agroup___drawing_html_gac47f8583faaa8d391a6c120c8b576733"><div class="ttname"><a href="group___drawing.html#gac47f8583faaa8d391a6c120c8b576733">TX_GRAY</a></div><div class="ttdeci">const COLORREF TX_GRAY</div><div class="ttdoc">Серый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1462</div></div>
<div class="ttc" id="agroup___drawing_html_gac76227ff55076802ea267be18b4d7a8d"><div class="ttname"><a href="group___drawing.html#gac76227ff55076802ea267be18b4d7a8d">txDrawMan</a></div><div class="ttdeci">void txDrawMan(int x, int y, int sizeX, int sizeY, COLORREF color, double handL, double handR, double twist, double head, double eyes, double wink, double crazy, double smile, double hair, double wind)</div><div class="ttdoc">Рисует человечка.</div><div class="ttdef"><b>Definition:</b> TXLib.h:2163</div></div>
<div class="ttc" id="agroup___drawing_html_gacbbb638439ad7ba88804178516019fb1"><div class="ttname"><a href="group___drawing.html#gacbbb638439ad7ba88804178516019fb1">txPolygon</a></div><div class="ttdeci">bool txPolygon(const POINT points[], int numPoints, HDC dc=txDC())</div><div class="ttdoc">Рисует ломаную линию или многоугольник.</div></div>
<div class="ttc" id="agroup___drawing_html_gacc1ae8a3821354abc2d3f8f42ee75706"><div class="ttname"><a href="group___drawing.html#gacc1ae8a3821354abc2d3f8f42ee75706">TX_BLACK</a></div><div class="ttdeci">const COLORREF TX_BLACK</div><div class="ttdoc">Названия предопределенных цветов.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1454</div></div>
<div class="ttc" id="agroup___drawing_html_gad1fdf92b2b1e0e3d56e03fad24d735bd"><div class="ttname"><a href="group___drawing.html#gad1fdf92b2b1e0e3d56e03fad24d735bd">txGetConsoleAttr</a></div><div class="ttdeci">unsigned txGetConsoleAttr() tx_nodiscard</div><div class="ttdoc">Возвращает текущие цветовые атрибуты консоли.</div></div>
<div class="ttc" id="agroup___drawing_html_gad21ad5660a5423f31c2c8e77329758b2"><div class="ttname"><a href="group___drawing.html#gad21ad5660a5423f31c2c8e77329758b2">txSetFillColor</a></div><div class="ttdeci">HBRUSH txSetFillColor(COLORREF color, HDC dc=txDC())</div><div class="ttdoc">Устанавливает текущий цвет заполнения фигур.</div></div>
<div class="ttc" id="agroup___drawing_html_gad5483eacac697420a84f66733e45ed02"><div class="ttname"><a href="group___drawing.html#gad5483eacac697420a84f66733e45ed02">txGetTextExtentX</a></div><div class="ttdeci">int txGetTextExtentX(const char text[], HDC dc=txDC()) tx_nodiscard</div><div class="ttdoc">Вычисляет ширину текстовой надписи.</div></div>
<div class="ttc" id="agroup___drawing_html_gad737ddf597e37fe699dc87c3f7f2a748"><div class="ttname"><a href="group___drawing.html#gad737ddf597e37fe699dc87c3f7f2a748">TX_NULL</a></div><div class="ttdeci">const COLORREF TX_NULL</div><div class="ttdoc">Прозрачный цвет. Отключает рисование.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1474</div></div>
<div class="ttc" id="agroup___drawing_html_gadc7fd9cdc8c007693db7b6d7de794709"><div class="ttname"><a href="group___drawing.html#gadc7fd9cdc8c007693db7b6d7de794709">txRedrawWindow</a></div><div class="ttdeci">void txRedrawWindow()</div><div class="ttdoc">Обновляет изображение в окне TXLib вручную.</div></div>
<div class="ttc" id="agroup___drawing_html_gade3dc928a81efd7054c61fa6cb4ddc06"><div class="ttname"><a href="group___drawing.html#gade3dc928a81efd7054c61fa6cb4ddc06">txGetConsoleExtent</a></div><div class="ttdeci">POINT txGetConsoleExtent()</div><div class="ttdoc">Возвращает размер консоли.</div></div>
<div class="ttc" id="agroup___drawing_html_gae7c2564209f7b1f2bdb5cbbee77b49b4"><div class="ttname"><a href="group___drawing.html#gae7c2564209f7b1f2bdb5cbbee77b49b4">TX_ORANGE</a></div><div class="ttdeci">const COLORREF TX_ORANGE</div><div class="ttdoc">Оранжевый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1461</div></div>
<div class="ttc" id="agroup___drawing_html_gae92e621aaed81f90e4d142356e38762a"><div class="ttname"><a href="group___drawing.html#gae92e621aaed81f90e4d142356e38762a">txBegin</a></div><div class="ttdeci">int txBegin()</div><div class="ttdoc">Блокирует обновление изображения окна, во избежание мигания.</div></div>
<div class="ttc" id="agroup___drawing_html_gaee548f7b5672cbcbb99246e0291d7336"><div class="ttname"><a href="group___drawing.html#gaee548f7b5672cbcbb99246e0291d7336">txSetConsoleCursorPos</a></div><div class="ttdeci">POINT txSetConsoleCursorPos(double x, double y)</div><div class="ttdoc">Устанавливает позицию мигающего курсора консоли.</div></div>
<div class="ttc" id="agroup___drawing_html_gaf022ca75f4a59aa0a2cf18529e0a9861"><div class="ttname"><a href="group___drawing.html#gaf022ca75f4a59aa0a2cf18529e0a9861">TX_MAGENTA</a></div><div class="ttdeci">const COLORREF TX_MAGENTA</div><div class="ttdoc">Темно-малиновый цвет.</div><div class="ttdef"><b>Definition:</b> TXLib.h:1459</div></div>
<div class="ttc" id="agroup___drawing_html_gaf382eed71ecf8229882fe544035d66dc"><div class="ttname"><a href="group___drawing.html#gaf382eed71ecf8229882fe544035d66dc">txVersion</a></div><div class="ttdeci">const char * txVersion() tx_nodiscard</div><div class="ttdoc">Возвращает строку с информацией о текущей версии библиотеки.</div></div>
<div class="ttc" id="agroup___drawing_html_gaf5f3dec18e058830a6eb85ca127472df"><div class="ttname"><a href="group___drawing.html#gaf5f3dec18e058830a6eb85ca127472df">txTriangle</a></div><div class="ttdeci">bool txTriangle(double x1, double y1, double x2, double y2, double x3, double y3)</div><div class="ttdoc">Функция, которая должна бы рисовать треугольник.</div><div class="ttdef"><b>Definition:</b> TXLib.h:2089</div></div>
<div class="ttc" id="agroup___drawing_html_gaf6a9b31e58b6a0523ce1636a97053606"><div class="ttname"><a href="group___drawing.html#gaf6a9b31e58b6a0523ce1636a97053606">txDrawText</a></div><div class="ttdeci">bool txDrawText(double x0, double y0, double x1, double y1, const char text[], unsigned format=DT_CENTER|DT_VCENTER|DT_WORDBREAK|DT_WORD_ELLIPSIS, HDC dc=txDC())</div><div class="ttdoc">Рисует текст, размещенный в прямоугольной области.</div></div>
<div class="ttc" id="agroup___drawing_html_gafa31ebd8ed957c41713900a407497cf8"><div class="ttname"><a href="group___drawing.html#gafa31ebd8ed957c41713900a407497cf8">txWindow</a></div><div class="ttdeci">HWND txWindow() tx_nodiscard</div><div class="ttdoc">Возвращает дескриптор окна рисования</div></div>
<div class="ttc" id="agroup___drawing_html_gafafd861ab7dc599b2e68b258b6727c85"><div class="ttname"><a href="group___drawing.html#gafafd861ab7dc599b2e68b258b6727c85">txSetPixel</a></div><div class="ttdeci">bool txSetPixel(double x, double y, COLORREF color, HDC dc=txDC())</div><div class="ttdoc">Рисует пиксель (точку на экране).</div></div>
<div class="ttc" id="agroup___drawing_html_gafce21ce98474d5559f316b3d47cdbfab"><div class="ttname"><a href="group___drawing.html#gafce21ce98474d5559f316b3d47cdbfab">txCreateWindow</a></div><div class="ttdeci">HWND txCreateWindow(double sizeX, double sizeY, bool centered=true)</div><div class="ttdoc">Создание окна рисования</div></div>
<div class="ttc" id="agroup___drawing_html_gaff3d9c60900531f438a19216485bdd41"><div class="ttname"><a href="group___drawing.html#gaff3d9c60900531f438a19216485bdd41">txUpdateWindow</a></div><div class="ttdeci">int txUpdateWindow(int update=true)</div><div class="ttdoc">Разрешает или запрещает автоматическое обновление изображения в окне.</div></div>
<div class="ttc" id="agroup___misc_html_ga1298dbfaaff41786f77c7cd302d73c31"><div class="ttname"><a href="group___misc.html#ga1298dbfaaff41786f77c7cd302d73c31">In</a></div><div class="ttdeci">bool In(Tx x, Ta a, Tb b) tx_nodiscard tx_deprecated</div><div class="ttdoc">Проверка, находится ли параметр х внутри замкнутого интервала [a; b].</div></div>
<div class="ttc" id="agroup___misc_html_ga14fecb1c008314444a74c1fe7d9a113b"><div class="ttname"><a href="group___misc.html#ga14fecb1c008314444a74c1fe7d9a113b">verify</a></div><div class="ttdeci">#define verify</div><div class="ttdoc">Выполняет команду (вычисляет выражение) и проверяет результат.</div><div class="ttdef"><b>Definition:</b> TXLib.h:4993</div></div>
<div class="ttc" id="agroup___misc_html_ga177f8bcb7544821ea4b5bd0571fe7196"><div class="ttname"><a href="group___misc.html#ga177f8bcb7544821ea4b5bd0571fe7196">txPlaySound</a></div><div class="ttdeci">bool txPlaySound(const char filename[]=NULL, DWORD mode=SND_ASYNC)</div><div class="ttdoc">Воспроизводит звуковой файл.</div></div>
<div class="ttc" id="agroup___misc_html_ga30fb1a6913174dfcea5079391f655be2"><div class="ttname"><a href="group___misc.html#ga30fb1a6913174dfcea5079391f655be2">txSetWindowsHook</a></div><div class="ttdeci">WNDPROC txSetWindowsHook(WNDPROC wndProc=NULL)</div><div class="ttdoc">Устанавливает альтернативную функцию обработки оконных сообщений Windows (оконную функцию) для окна T...</div></div>
<div class="ttc" id="agroup___misc_html_ga3637c3398b6ebfa337171beec0770fe4"><div class="ttname"><a href="group___misc.html#ga3637c3398b6ebfa337171beec0770fe4">TX_COMMAND_MAP</a></div><div class="ttdeci">#define TX_COMMAND_MAP</div><div class="ttdoc">Начало карты команд (Command map) в карте сообщений.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6737</div></div>
<div class="ttc" id="agroup___misc_html_ga372c7e43cc383da3f8e8e00fc60be91f"><div class="ttname"><a href="group___misc.html#ga372c7e43cc383da3f8e8e00fc60be91f">txOutputDebugPrintf</a></div><div class="ttdeci">int txOutputDebugPrintf(const char format[],...) tx_printfy(1)</div><div class="ttdoc">Выводит всплывающее сообщение в системном трее.</div></div>
<div class="ttc" id="agroup___misc_html_ga3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="group___misc.html#ga3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdoc">Возвращает минимальное из двух чисел</div><div class="ttdef"><b>Definition:</b> TXLib.h:4591</div></div>
<div class="ttc" id="agroup___misc_html_ga3d4731dd56b60635c80bc662c295c821"><div class="ttname"><a href="group___misc.html#ga3d4731dd56b60635c80bc662c295c821">txPlayVideo</a></div><div class="ttdeci">intptr_t txPlayVideo(int x, int y, int width, int height, const char fileName[], double zoom=0, double gain=1, HWND wnd=txWindow())</div><div class="ttdoc">Проигрывает видео.</div></div>
<div class="ttc" id="agroup___misc_html_ga3e4a82a10130528f63b6f19476a0943a"><div class="ttname"><a href="group___misc.html#ga3e4a82a10130528f63b6f19476a0943a">TX_ERROR</a></div><div class="ttdeci">#define TX_ERROR(...)</div><div class="ttdoc">Выводит развернутое диагностическое сообщение.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5023</div></div>
<div class="ttc" id="agroup___misc_html_ga3f4a70a0e5076cb4f4addcab0ca760cd"><div class="ttname"><a href="group___misc.html#ga3f4a70a0e5076cb4f4addcab0ca760cd">TX_END_MESSAGE_MAP</a></div><div class="ttdeci">#define TX_END_MESSAGE_MAP</div><div class="ttdoc">Завершитель карты сообщений.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6766</div></div>
<div class="ttc" id="agroup___misc_html_ga3f81b81baf3d43ec066bac4493149708"><div class="ttname"><a href="group___misc.html#ga3f81b81baf3d43ec066bac4493149708">txSetProgress</a></div><div class="ttdeci">HRESULT txSetProgress(double percent, unsigned type=2, HWND wnd=NULL)</div><div class="ttdoc">Устанавливает Progress bar окна на панели задач. @strike Весело и вкусно @endstrike Красиво и иногда ...</div></div>
<div class="ttc" id="agroup___misc_html_ga532fa8a55c4f3d4f94ff0fdceae732b2"><div class="ttname"><a href="group___misc.html#ga532fa8a55c4f3d4f94ff0fdceae732b2">txLock</a></div><div class="ttdeci">bool txLock(bool wait=true)</div><div class="ttdoc">Блокировка холста (контекста рисования).</div></div>
<div class="ttc" id="agroup___misc_html_ga5de732de72c46b992ac2feeac2de7e42"><div class="ttname"><a href="group___misc.html#ga5de732de72c46b992ac2feeac2de7e42">tx_fpreset</a></div><div class="ttdeci">void tx_fpreset()</div><div class="ttdoc">Переинициализирует математический сопроцессор</div></div>
<div class="ttc" id="agroup___misc_html_ga74ff1048e0d6bc458c9904fbbe0a6026"><div class="ttname"><a href="group___misc.html#ga74ff1048e0d6bc458c9904fbbe0a6026">txSqr</a></div><div class="ttdeci">double txSqr(double x)</div><div class="ttdoc">Очень удобное возведение числа в квадрат.</div><div class="ttdef"><b>Definition:</b> TXLib.h:4684</div></div>
<div class="ttc" id="agroup___misc_html_ga782025393f08a0efb645b9d2e30f2586"><div class="ttname"><a href="group___misc.html#ga782025393f08a0efb645b9d2e30f2586">txGetAsyncKeyState</a></div><div class="ttdeci">bool txGetAsyncKeyState(int key)</div><div class="ttdoc">Проверяет, нажата ли указанная клавиша.</div></div>
<div class="ttc" id="agroup___misc_html_ga799c47c1a2a151647cd765e1fa4b27b5"><div class="ttname"><a href="group___misc.html#ga799c47c1a2a151647cd765e1fa4b27b5">sizearr</a></div><div class="ttdeci">#define sizearr(arr)</div><div class="ttdoc">Добрый дядюшка Принтф. Теперь шаболонный.</div><div class="ttdef"><b>Definition:</b> TXLib.h:4380</div></div>
<div class="ttc" id="agroup___misc_html_ga889b74443b3e918adee3e31fad4653f7"><div class="ttname"><a href="group___misc.html#ga889b74443b3e918adee3e31fad4653f7">asserted</a></div><div class="ttdeci">#define asserted</div><div class="ttdoc">Выводит диагностическое сообщение в случае нулевого или ложного результата.</div><div class="ttdef"><b>Definition:</b> TXLib.h:4948</div></div>
<div class="ttc" id="agroup___misc_html_ga8fe4ec4c66cb69ce337747fe65dd0cc6"><div class="ttname"><a href="group___misc.html#ga8fe4ec4c66cb69ce337747fe65dd0cc6">txUnlock</a></div><div class="ttdeci">bool txUnlock()</div><div class="ttdoc">Разблокировка холста</div></div>
<div class="ttc" id="agroup___misc_html_gaa81c1c7c499d76619d5d9d3369560881"><div class="ttname"><a href="group___misc.html#gaa81c1c7c499d76619d5d9d3369560881">random</a></div><div class="ttdeci">int random(int range) tx_deprecated</div><div class="ttdoc">Генератор случайных чисел</div></div>
<div class="ttc" id="agroup___misc_html_gab170f39ac0e379c324c73495f14a1309"><div class="ttname"><a href="group___misc.html#gab170f39ac0e379c324c73495f14a1309">__TX_FUNCTION__</a></div><div class="ttdeci">#define __TX_FUNCTION__</div><div class="ttdoc">Имя текущей функции</div><div class="ttdef"><b>Definition:</b> TXLib.h:278</div></div>
<div class="ttc" id="agroup___misc_html_gabe7d5b7083c7588b457f73c1e0461044"><div class="ttname"><a href="group___misc.html#gabe7d5b7083c7588b457f73c1e0461044">TX_DEBUG_ERROR</a></div><div class="ttdeci">#define TX_DEBUG_ERROR(...)</div><div class="ttdoc">Выводит развернутое диагностическое сообщение в отладочном режиме.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5051</div></div>
<div class="ttc" id="agroup___misc_html_gacd66e8cacf954c3bc3bba81d09425a12"><div class="ttname"><a href="group___misc.html#gacd66e8cacf954c3bc3bba81d09425a12">ROUND</a></div><div class="ttdeci">#define ROUND(x)</div><div class="ttdoc">Округляет число до целого</div><div class="ttdef"><b>Definition:</b> TXLib.h:4615</div></div>
<div class="ttc" id="agroup___misc_html_gad6db0ee1b36288c7eb3f2196077971f9"><div class="ttname"><a href="group___misc.html#gad6db0ee1b36288c7eb3f2196077971f9">txSpeak</a></div><div class="ttdeci">int txSpeak(const char *text,...) tx_printfy(1)</div><div class="ttdoc">Читает @strike мысли @endstrike текст вслух.</div></div>
<div class="ttc" id="agroup___misc_html_gad942f797bce07af74cd11c88d50ddd3e"><div class="ttname"><a href="group___misc.html#gad942f797bce07af74cd11c88d50ddd3e">txRegQuery</a></div><div class="ttdeci">int txRegQuery(const char *keyName, const char *valueName, void *value, size_t szValue)</div><div class="ttdoc">Читает информацию из реестра Windows.</div></div>
<div class="ttc" id="agroup___misc_html_gadbe2f17002d8d41056e9770066ef558b"><div class="ttname"><a href="group___misc.html#gadbe2f17002d8d41056e9770066ef558b">TX_HANDLE</a></div><div class="ttdeci">#define TX_HANDLE(id)</div><div class="ttdoc">Заголовок обработчика сообщения (Message handler) карты сообщений.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6711</div></div>
<div class="ttc" id="agroup___misc_html_gade9b60c36576ef735b3e1d1f628ad9c6"><div class="ttname"><a href="group___misc.html#gade9b60c36576ef735b3e1d1f628ad9c6">ZERO</a></div><div class="ttdeci">#define ZERO(type)</div><div class="ttdoc">Обнулитель типов, не имеющих конструкторов</div><div class="ttdef"><b>Definition:</b> TXLib.h:4791</div></div>
<div class="ttc" id="agroup___misc_html_gaf40cd03b465387a736443214b7b44c32"><div class="ttname"><a href="group___misc.html#gaf40cd03b465387a736443214b7b44c32">_TX_CODEPAGE</a></div><div class="ttdeci">const int _TX_CODEPAGE</div><div class="ttdoc">Смена кодовой страницы консоли и локали стандартной библиотеки С++.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5554</div></div>
<div class="ttc" id="agroup___misc_html_gaf59817ad656dcbb3f9baebeb4d7f82f7"><div class="ttname"><a href="group___misc.html#gaf59817ad656dcbb3f9baebeb4d7f82f7">txPI</a></div><div class="ttdeci">const double txPI</div><div class="ttdoc">Число Пи</div><div class="ttdef"><b>Definition:</b> TXLib.h:4653</div></div>
<div class="ttc" id="agroup___misc_html_gaf6ea524e3c76ba5c8a0d1fa6b81d55b8"><div class="ttname"><a href="group___misc.html#gaf6ea524e3c76ba5c8a0d1fa6b81d55b8">TX_BEGIN_MESSAGE_MAP</a></div><div class="ttdeci">#define TX_BEGIN_MESSAGE_MAP()</div><div class="ttdoc">Заголовок карты сообщений (Message Map).</div><div class="ttdef"><b>Definition:</b> TXLib.h:6681</div></div>
<div class="ttc" id="agroup___misc_html_gaf9be7d98f32c0737a2d7f30039a60c0a"><div class="ttname"><a href="group___misc.html#gaf9be7d98f32c0737a2d7f30039a60c0a">txMessageBox</a></div><div class="ttdeci">int txMessageBox(const char text[]=&quot;Муаххаха! :)&quot;, const char header[]=&quot;TXLib сообщает&quot;, unsigned flags=MB_ICONINFORMATION|MB_OKCANCEL)</div><div class="ttdoc">Выводит различные сообщения в окне с помощью функции MessageBox.</div></div>
<div class="ttc" id="agroup___misc_html_gafa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="group___misc.html#gafa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdoc">Возвращает максимальное из двух чисел</div><div class="ttdef"><b>Definition:</b> TXLib.h:4568</div></div>
<div class="ttc" id="agroup___misc_html_gafbd4278ff893fc1c1e28b086197adebe"><div class="ttname"><a href="group___misc.html#gafbd4278ff893fc1c1e28b086197adebe">txDemangle</a></div><div class="ttdeci">std::string txDemangle(const char *mangledName)</div><div class="ttdoc">Преобразует декорированное имя С++ в название типа.</div></div>
<div class="ttc" id="agroup___misc_html_gafdd807831b131ba38d5856b6ee4e8287"><div class="ttname"><a href="group___misc.html#gafdd807831b131ba38d5856b6ee4e8287">txGDI</a></div><div class="ttdeci">#define txGDI(command, dc)</div><div class="ttdoc">Вызов функции Win32 GDI с автоматической блокировкой и разблокировкой.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5525</div></div>
<div class="ttc" id="agroup___mouse_html_ga3317e38b22d8e6f116c29503144c2cc2"><div class="ttname"><a href="group___mouse.html#ga3317e38b22d8e6f116c29503144c2cc2">txMouseButtons</a></div><div class="ttdeci">unsigned txMouseButtons() tx_nodiscard</div><div class="ttdoc">Возвращает состояние Кнопок Мыши!</div></div>
<div class="ttc" id="agroup___mouse_html_ga44606f3b7f5f345d15bb20d46fcf78b6"><div class="ttname"><a href="group___mouse.html#ga44606f3b7f5f345d15bb20d46fcf78b6">txMousePos</a></div><div class="ttdeci">POINT txMousePos() tx_nodiscard</div><div class="ttdoc">Возвращает позицию Мыши!</div></div>
<div class="ttc" id="agroup___mouse_html_ga481847278ec77647082072325be5c226"><div class="ttname"><a href="group___mouse.html#ga481847278ec77647082072325be5c226">txMouseY</a></div><div class="ttdeci">double txMouseY() tx_nodiscard</div><div class="ttdoc">Возвращает Y-Координату Мыши!</div></div>
<div class="ttc" id="agroup___mouse_html_gae56f541d32ff7324dd6dd340411c1130"><div class="ttname"><a href="group___mouse.html#gae56f541d32ff7324dd6dd340411c1130">txMouseX</a></div><div class="ttdeci">double txMouseX() tx_nodiscard</div><div class="ttdoc">Возвращает X-Координату Мыши!</div></div>
<div class="ttc" id="agroup___technical_html_ga15dc1a04b8701e2db400b005b7a17ced"><div class="ttname"><a href="group___technical.html#ga15dc1a04b8701e2db400b005b7a17ced">_TX_EXCEPTIONS_LIMIT</a></div><div class="ttdeci">#define _TX_EXCEPTIONS_LIMIT</div><div class="ttdoc">Максимальное количество исключений в программе.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5859</div></div>
<div class="ttc" id="agroup___technical_html_ga181143543b3883cf8570f80da3ad7fcc"><div class="ttname"><a href="group___technical.html#ga181143543b3883cf8570f80da3ad7fcc">_txWatchdogTimeout</a></div><div class="ttdeci">int _txWatchdogTimeout</div><div class="ttdoc">Лимит времени на завершение программы, начиная от завершения функции main() или от вызова exit(),...</div><div class="ttdef"><b>Definition:</b> TXLib.h:5954</div></div>
<div class="ttc" id="agroup___technical_html_ga2c0a4fe0612f109c5c88d6d55a061db5"><div class="ttname"><a href="group___technical.html#ga2c0a4fe0612f109c5c88d6d55a061db5">_TX_WAITABLE_PARENTS</a></div><div class="ttdeci">#define _TX_WAITABLE_PARENTS</div><div class="ttdoc">Список запускающих программ, которые ждут нажатия клавиши после завершения процесса TXLib.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5905</div></div>
<div class="ttc" id="agroup___technical_html_ga352331b32407c4e95bc4f7a5e39fad25"><div class="ttname"><a href="group___technical.html#ga352331b32407c4e95bc4f7a5e39fad25">_TX_BUFSIZE</a></div><div class="ttdeci">const unsigned _TX_BUFSIZE</div><div class="ttdoc">Размеры внутренних статических строковых буферов TXLib.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5847</div></div>
<div class="ttc" id="agroup___technical_html_ga3e287c38947fea870d01588fbd2a5fc9"><div class="ttname"><a href="group___technical.html#ga3e287c38947fea870d01588fbd2a5fc9">_TX_BUILDMODE</a></div><div class="ttdeci">#define _TX_BUILDMODE</div><div class="ttdoc">Имя режима сборки</div><div class="ttdef"><b>Definition:</b> TXLib.h:229</div></div>
<div class="ttc" id="agroup___technical_html_ga43d277b4418068ebef1fd2bdbaf550f6"><div class="ttname"><a href="group___technical.html#ga43d277b4418068ebef1fd2bdbaf550f6">_TX_MODULE</a></div><div class="ttdeci">#define _TX_MODULE</div><div class="ttdoc">Имя модуля TXLib. Входит в диагностические сообщения.</div><div class="ttdef"><b>Definition:</b> TXLib.h:159</div></div>
<div class="ttc" id="agroup___technical_html_ga4ddb32d7a8a676537014da7aea7bf273"><div class="ttname"><a href="group___technical.html#ga4ddb32d7a8a676537014da7aea7bf273">_txWindowStyle</a></div><div class="ttdeci">int _txWindowStyle</div><div class="ttdoc">Стиль графического окна библиотеки.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5721</div></div>
<div class="ttc" id="agroup___technical_html_ga69d3e86db3b7c7458bbcb7c505a3b884"><div class="ttname"><a href="group___technical.html#ga69d3e86db3b7c7458bbcb7c505a3b884">_txLogName</a></div><div class="ttdeci">char _txLogName[MAX_PATH]</div><div class="ttdoc">Имя лог-файла TXLib.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5591</div></div>
<div class="ttc" id="agroup___technical_html_ga6b76c63cd895c2be63ac8e690028623b"><div class="ttname"><a href="group___technical.html#ga6b76c63cd895c2be63ac8e690028623b">_TX_VER</a></div><div class="ttdeci">#define _TX_VER</div><div class="ttdoc">Текущая версия библиотеки.</div><div class="ttdef"><b>Definition:</b> TXLib.h:138</div></div>
<div class="ttc" id="agroup___technical_html_ga7859e95fc4faec435abe372989f4f8ac"><div class="ttname"><a href="group___technical.html#ga7859e95fc4faec435abe372989f4f8ac">_TX_TIMEOUT</a></div><div class="ttdeci">const int _TX_TIMEOUT</div><div class="ttdoc">Макрос, разрешающий использовать TXLib вместе с графической библиотекой SFML</div><div class="ttdef"><b>Definition:</b> TXLib.h:5774</div></div>
<div class="ttc" id="agroup___technical_html_ga7b8b43782557dd87528da77b083364ec"><div class="ttname"><a href="group___technical.html#ga7b8b43782557dd87528da77b083364ec">_TX_STACKSIZE</a></div><div class="ttdeci">const unsigned _TX_STACKSIZE</div><div class="ttdoc">Минимальный размер стека для потоков программы.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5851</div></div>
<div class="ttc" id="agroup___technical_html_ga82c63be7c47e2b13e5b6f7661cc3fbe4"><div class="ttname"><a href="group___technical.html#ga82c63be7c47e2b13e5b6f7661cc3fbe4">TX_CONSOLE_MODE</a></div><div class="ttdeci">#define TX_CONSOLE_MODE</div><div class="ttdoc">Режим отображения консольного окна. Допустимы любые флаги функции ShowWindow.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5690</div></div>
<div class="ttc" id="agroup___technical_html_ga90ceca3b49e5f889f5f07a996b28b0b3"><div class="ttname"><a href="group___technical.html#ga90ceca3b49e5f889f5f07a996b28b0b3">_txProcessSystemWarnings</a></div><div class="ttdeci">bool _txProcessSystemWarnings</div><div class="ttdoc">Если определено, не исключать адреса без отладочной информации из трассировок стека.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5882</div></div>
<div class="ttc" id="agroup___technical_html_ga9982623aefbe28deab03b1252777ec2a"><div class="ttname"><a href="group___technical.html#ga9982623aefbe28deab03b1252777ec2a">_TX_HUGEBUFSIZE</a></div><div class="ttdeci">const unsigned _TX_HUGEBUFSIZE</div><div class="ttdoc">Размеры очень больших статических буферов.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5849</div></div>
<div class="ttc" id="agroup___technical_html_ga9a495d013c6f08cd50220aca99ca56c2"><div class="ttname"><a href="group___technical.html#ga9a495d013c6f08cd50220aca99ca56c2">_TX_ALLOW_KILL_PARENT</a></div><div class="ttdeci">#define _TX_ALLOW_KILL_PARENT</div><div class="ttdoc">Разрешать принудительное завершение вызывающих программ, ждущих нажатия клавиш после завершения TXLib...</div><div class="ttdef"><b>Definition:</b> TXLib.h:5937</div></div>
<div class="ttc" id="agroup___technical_html_gaa7273b2f613970c283053c5d9136addd"><div class="ttname"><a href="group___technical.html#gaa7273b2f613970c283053c5d9136addd">_TX_BIGBUFSIZE</a></div><div class="ttdeci">const unsigned _TX_BIGBUFSIZE</div><div class="ttdoc">Размеры больших статических буферов.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5848</div></div>
<div class="ttc" id="agroup___technical_html_gaab281ee20ea6be5eae34d0e15bf03dcf"><div class="ttname"><a href="group___technical.html#gaab281ee20ea6be5eae34d0e15bf03dcf">_TX_NOINIT</a></div><div class="ttdeci">#define _TX_NOINIT</div><div class="ttdoc">Запрет ранней инициализации TXLib.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5638</div></div>
<div class="ttc" id="agroup___technical_html_gacc95bfbcf7a0f9124e8cd5e80d0b3cd3"><div class="ttname"><a href="group___technical.html#gacc95bfbcf7a0f9124e8cd5e80d0b3cd3">_txCursorBlinkInterval</a></div><div class="ttdeci">unsigned _txCursorBlinkInterval</div><div class="ttdoc">Интервал мигания курсора консоли (мс)</div><div class="ttdef"><b>Definition:</b> TXLib.h:5734</div></div>
<div class="ttc" id="agroup___technical_html_gad85278fd5caaf0ce42e307d6ce8d79c5"><div class="ttname"><a href="group___technical.html#gad85278fd5caaf0ce42e307d6ce8d79c5">_txSwapBuffers</a></div><div class="ttdeci">bool(* _txSwapBuffers)(HDC dest, int xDest, int yDest, int wDest, int hDest, HDC src, int xSrc, int ySrc, int wSrc, int hSrc, DWORD rOp)</div><div class="ttdoc">Указатель на функцию, выводящую изображение непосредственно в окно TXLib во время обработки WM_PAINT.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5834</div></div>
<div class="ttc" id="agroup___technical_html_gada3539ec53f9e712cf1e0aceafaecf97"><div class="ttname"><a href="group___technical.html#gada3539ec53f9e712cf1e0aceafaecf97">TX_CONSOLE_FONT</a></div><div class="ttdeci">#define TX_CONSOLE_FONT</div><div class="ttdoc">Шрифт консоли</div><div class="ttdef"><b>Definition:</b> TXLib.h:5702</div></div>
<div class="ttc" id="agroup___technical_html_gadd1c9ccd036228402b807abaea14f7ee"><div class="ttname"><a href="group___technical.html#gadd1c9ccd036228402b807abaea14f7ee">__TX_COMPILER__</a></div><div class="ttdeci">#define __TX_COMPILER__</div><div class="ttdoc">Имя и версия текущего компилятора</div><div class="ttdef"><b>Definition:</b> TXLib.h:196</div></div>
<div class="ttc" id="agroup___technical_html_gaf2070fcdbd473d328f17f130623db80a"><div class="ttname"><a href="group___technical.html#gaf2070fcdbd473d328f17f130623db80a">_txWindowUpdateInterval</a></div><div class="ttdeci">unsigned _txWindowUpdateInterval</div><div class="ttdoc">Интервал обновления холста (мс)</div><div class="ttdef"><b>Definition:</b> TXLib.h:5748</div></div>
<div class="ttc" id="agroup___technical_html_gaf274c058737ec7e680437d2a1cdcd7b6"><div class="ttname"><a href="group___technical.html#gaf274c058737ec7e680437d2a1cdcd7b6">_TX_FATAL_EXCEPTIONS_LIMIT</a></div><div class="ttdeci">#define _TX_FATAL_EXCEPTIONS_LIMIT</div><div class="ttdoc">Максимальное количество фатальных исключений.</div><div class="ttdef"><b>Definition:</b> TXLib.h:5863</div></div>
<div class="ttc" id="astruct__tx__auto__func___html"><div class="ttname"><a href="struct__tx__auto__func__.html">_tx_auto_func_</a></div><div class="ttdef"><b>Definition:</b> TXLib.h:4835</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html"><div class="ttname"><a href="structtx_dialog_1_1_layout.html">txDialog::Layout</a></div><div class="ttdoc">Класс для описания элемента диалогового окна (контрола)</div><div class="ttdef"><b>Definition:</b> TXLib.h:6504</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_a16c20d9825dc75ca91ce750b6b547d6a"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#a16c20d9825dc75ca91ce750b6b547d6a">txDialog::Layout::sx</a></div><div class="ttdeci">short sx</div><div class="ttdoc">Размер по X.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6510</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_a21d57dc612006b3b3ee8a513ab35cdbb"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#a21d57dc612006b3b3ee8a513ab35cdbb">txDialog::Layout::y</a></div><div class="ttdeci">short y</div><div class="ttdoc">Координата нижнего правого угла</div><div class="ttdef"><b>Definition:</b> TXLib.h:6509</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_a2591914a85c05cce0fc862df1a569064"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#a2591914a85c05cce0fc862df1a569064">txDialog::Layout::wndclass</a></div><div class="ttdeci">CONTROL wndclass</div><div class="ttdoc">Тип контрола</div><div class="ttdef"><b>Definition:</b> TXLib.h:6505</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_a2fe7acf9e635627242825e58b2ff83ec"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#a2fe7acf9e635627242825e58b2ff83ec">txDialog::Layout::font</a></div><div class="ttdeci">const char * font</div><div class="ttdoc">Шрифт диалогового окна</div><div class="ttdef"><b>Definition:</b> TXLib.h:6514</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_a6291f513b3eeb124b0c431c4823a2293"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#a6291f513b3eeb124b0c431c4823a2293">txDialog::Layout::x</a></div><div class="ttdeci">short x</div><div class="ttdoc">Координата верхнего левого угла</div><div class="ttdef"><b>Definition:</b> TXLib.h:6508</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_a92bbfc790a6ba7c937e9e26491a46209"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#a92bbfc790a6ba7c937e9e26491a46209">txDialog::Layout::caption</a></div><div class="ttdeci">const char * caption</div><div class="ttdoc">Название или текст</div><div class="ttdef"><b>Definition:</b> TXLib.h:6506</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_a9b6528a0f3cd2b08cf78f947ad5bafab"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#a9b6528a0f3cd2b08cf78f947ad5bafab">txDialog::Layout::style</a></div><div class="ttdeci">DWORD style</div><div class="ttdoc">Стиль контрола</div><div class="ttdef"><b>Definition:</b> TXLib.h:6512</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_aa1a483bb785e2564e3a478f9c2e248da"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#aa1a483bb785e2564e3a478f9c2e248da">txDialog::Layout::id</a></div><div class="ttdeci">WORD id</div><div class="ttdoc">Идентификатор контрола</div><div class="ttdef"><b>Definition:</b> TXLib.h:6507</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_ab54d04b7a9c3df4cd9596af74246da47"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#ab54d04b7a9c3df4cd9596af74246da47">txDialog::Layout::sy</a></div><div class="ttdeci">short sy</div><div class="ttdoc">Размер по Y.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6511</div></div>
<div class="ttc" id="astructtx_dialog_1_1_layout_html_ac78c2a12a9ca921adff890b03b867ff0"><div class="ttname"><a href="structtx_dialog_1_1_layout.html#ac78c2a12a9ca921adff890b03b867ff0">txDialog::Layout::fontsize</a></div><div class="ttdeci">WORD fontsize</div><div class="ttdoc">Размер шрифта диалогового окна</div><div class="ttdef"><b>Definition:</b> TXLib.h:6515</div></div>
<div class="ttc" id="astructtx_dialog_html"><div class="ttname"><a href="structtx_dialog.html">txDialog</a></div><div class="ttdoc">Базовый класс для диалоговых окон.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6452</div></div>
<div class="ttc" id="astructtx_dialog_html_a0601dff1e04c3f06c23fc443eb10093c"><div class="ttname"><a href="structtx_dialog.html#a0601dff1e04c3f06c23fc443eb10093c">txDialog::dialogBox</a></div><div class="ttdeci">intptr_t dialogBox(WORD resource)</div><div class="ttdoc">Запускает диалоговое окно.</div></div>
<div class="ttc" id="astructtx_dialog_html_a081a2029ed8e4ffd6726c9f39966a04c"><div class="ttname"><a href="structtx_dialog.html#a081a2029ed8e4ffd6726c9f39966a04c">txDialog::txDialog</a></div><div class="ttdeci">txDialog()</div><div class="ttdoc">Конструктор.</div></div>
<div class="ttc" id="astructtx_dialog_html_a0a41d301a3d12cd2542f609bb77d81a1"><div class="ttname"><a href="structtx_dialog.html#a0a41d301a3d12cd2542f609bb77d81a1">txDialog::~txDialog</a></div><div class="ttdeci">virtual ~txDialog()</div><div class="ttdoc">Деструктор.</div><div class="ttdef"><b>Definition:</b> TXLib.h:6549</div></div>
<div class="ttc" id="astructtx_dialog_html_a1224cc6dee12d46b554b3ef4de18aa6d"><div class="ttname"><a href="structtx_dialog.html#a1224cc6dee12d46b554b3ef4de18aa6d">txDialog::DialogProc_</a></div><div class="ttdeci">static intptr_t CALLBACK DialogProc_(HWND wnd, UINT msg, WPARAM wParam, LPARAM lParam)</div><div class="ttdoc">Настоящая диалоговая функция (не txDialog::dialogProc(), т.к. функция окна in32 должна быть статическ...</div></div>
<div class="ttc" id="astructtx_dialog_html_a39efe9383833aedb0839d2519173930e"><div class="ttname"><a href="structtx_dialog.html#a39efe9383833aedb0839d2519173930e">txDialog::dialogProc</a></div><div class="ttdeci">virtual int dialogProc(HWND _wnd, UINT _msg, WPARAM _wParam, LPARAM _lParam)</div><div class="ttdoc">Функция обработки сообщений диалогового окна.</div></div>
<div class="ttc" id="astructtx_dialog_html_a4ac4c473e24014b82cb62133f8c5ed4a"><div class="ttname"><a href="structtx_dialog.html#a4ac4c473e24014b82cb62133f8c5ed4a">txDialog::txDialog</a></div><div class="ttdeci">txDialog(const Layout *layout)</div><div class="ttdoc">Конструктор.</div></div>
<div class="ttc" id="astructtx_dialog_html_a7b075b1d868782be0973d6eb82121b94"><div class="ttname"><a href="structtx_dialog.html#a7b075b1d868782be0973d6eb82121b94">txDialog::dialogBox</a></div><div class="ttdeci">intptr_t dialogBox(const Layout *layout=NULL, size_t bufsize=0)</div><div class="ttdoc">Запускает диалоговое окно.</div></div>
<div class="ttc" id="astructtx_dialog_html_a971fb450a33205168aff3a7b186e04a3"><div class="ttname"><a href="structtx_dialog.html#a971fb450a33205168aff3a7b186e04a3">txDialog::setLayout</a></div><div class="ttdeci">const Layout * setLayout(const Layout *layout)</div><div class="ttdoc">Устанавливает текущий макет диалогового окна.</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
